[{"id":"ea9678a6.7fc468","type":"tab","label":"AAS - External Interface","disabled":false,"info":""},{"id":"4e17cbaa.9e3b0c","type":"tab","label":"AAS - Component Manager","disabled":false,"info":""},{"id":"2e7b7c8b.80c47c","type":"tab","label":"AAS - Manifest","disabled":false,"info":""},{"id":"6ba1a42a.072f84","type":"tab","label":"DataStreaming - SouthboundInterface (PROPHESY)","disabled":false,"info":""},{"id":"7d8ace.ba650534","type":"tab","label":"AAS - UserInterface","disabled":false,"info":""},{"id":"8267c016.e4a32","type":"tab","label":"AAS - Bot Manager","disabled":true,"info":""},{"id":"1c8a5487.efc133","type":"tab","label":"RESTdriver - SouthboundInterface","disabled":false,"info":""},{"id":"d17857fb.cb70e8","type":"tab","label":"SNMPdriver - SouthboundInterface","disabled":false,"info":""},{"id":"13fb0e4.a365172","type":"tab","label":"WebDocs","disabled":true,"info":""},{"id":"27aab035.83aa3","type":"tab","label":"AAS - NorthboundInterface","disabled":false,"info":""},{"id":"b9d9d9b3.744408","type":"subflow","name":"AML_Manifest_RetrievingSubmodels","info":"","category":"as_subflows","in":[{"x":120,"y":240,"wires":[]}],"out":[{"x":873.3333129882812,"y":240.00001525878906,"wires":[]}]},{"id":"d9180baf.1f0b3","type":"subflow","name":"AML_Manifest_AddSubmodel","info":"","category":"as_subflows","in":[{"x":48.333343505859375,"y":180,"wires":[]}],"out":[{"x":978,"y":186,"wires":[]}]},{"id":"d22a217c.611cf","type":"subflow","name":"AML_Manifest_RetrievingHeaders","info":"","category":"as_subflows","in":[{"x":94.99996948242188,"y":300,"wires":[]}],"out":[{"x":840,"y":300,"wires":[]}]},{"id":"edf29731.99346","type":"subflow","name":"OpenAAS_Manifest_RetrievingHeaders","info":"","category":"as_subflows","in":[{"x":220,"y":80,"wires":[]}],"out":[{"x":860,"y":80,"wires":[]}]},{"id":"b3967a98.7bd668","type":"subflow","name":"OpenAAS_Manifest_RetrievingSubmodels","info":"","category":"as_subflows","in":[{"x":60,"y":80,"wires":[]}],"out":[{"x":1100,"y":220,"wires":[]}]},{"id":"6a2989.2b1ea678","type":"subflow","name":"OpenAAS_Manifest_RetrievingPropertyById","info":"","category":"as_subflows","in":[{"x":40,"y":40,"wires":[]}],"out":[{"x":1180,"y":200,"wires":[]}]},{"id":"a6e18902.7b35d8","type":"subflow","name":"AddFlowFromFile","info":"","category":"","in":[{"x":171.6666259765625,"y":196.66673278808594,"wires":[]}],"out":[{"x":1064.9996948242188,"y":196.66673278808594,"wires":[]}]},{"id":"32545645.ac53e2","type":"subflow","name":"AML_Manifest_RetrievingSubmodelById","info":"","category":"as_subflows","in":[{"x":48.333343505859375,"y":180,"wires":[]}],"out":[{"x":820,"y":180,"wires":[]}]},{"id":"d6703d6b.ec7c7","type":"subflow","name":"AML_Manifest_RemoveSubmodel","info":"","category":"as_subflows","in":[{"x":62,"y":270,"wires":[]}],"out":[{"x":992,"y":278,"wires":[]}]},{"id":"a95355c.29c89a8","type":"subflow","name":"AML_Manifest_UpdateSubmodel","info":"","category":"as_subflows","in":[{"x":100,"y":220,"wires":[]}],"out":[{"x":1040,"y":224,"wires":[]}]},{"id":"273d5036.a3442","type":"subflow","name":"DeleteFlowsFromDirectory","info":"","category":"as_subflows","in":[{"x":222.3333740234375,"y":375.46429443359375,"wires":[]}],"out":[{"x":1326,"y":322,"wires":[]}]},{"id":"9b0db7c7.e3ad48","type":"subflow","name":"Manifest","info":"","category":"as_subflows","in":[],"out":[]},{"id":"3bcb972f.6d23c8","type":"subflow","name":"APILogger","info":"","category":"","in":[{"x":413.88330078125,"y":302.8833312988281,"wires":[{"id":"abfb596f.080a8"}]}],"out":[]},{"id":"b0b49eac.8f39e8","type":"ui_base","theme":{"name":"theme-custom","lightTheme":{"default":"#0094CE","baseColor":"#0094CE","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"darkTheme":{"default":"#097479","baseColor":"#097479","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"customTheme":{"name":"AASGreen","default":"#4B7930","baseColor":"#14524e","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","reset":false},"themeState":{"base-color":{"default":"#14524e","value":"#14524e","edited":true},"page-titlebar-backgroundColor":{"value":"#14524e","edited":false},"page-backgroundColor":{"value":"#f0f0f0","edited":true},"page-sidebar-backgroundColor":{"value":"#ffffff","edited":true},"group-textColor":{"value":"#000000","edited":true},"group-borderColor":{"value":"#ffffff","edited":true},"group-backgroundColor":{"value":"#ffffff","edited":true},"widget-textColor":{"value":"#000000","edited":true},"widget-backgroundColor":{"value":"#14524e","edited":true},"widget-borderColor":{"value":"#ffffff","edited":true},"base-font":{"value":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"}},"angularTheme":{"primary":"indigo","accents":"blue","warn":"red","background":"grey"}},"site":{"name":"PROPHESY - Asset Administration Shell","hideToolbar":"false","allowSwipe":"false","lockMenu":"true","allowTempTheme":"true","dateFormat":"DD/MM/YYYY","sizes":{"sx":48,"sy":48,"gx":6,"gy":6,"cx":6,"cy":6,"px":0,"py":0}}},{"id":"9a7b1b88.32cc4","type":"ui_group","z":"","name":"Commands","tab":"b0749fcb.caa5c","order":1,"disp":true,"width":"3","collapse":false},{"id":"1d09ad14.bb7613","type":"ui_group","z":"","name":"CPULoad","tab":"708f8cd2.c22b14","order":1,"disp":true,"width":"20","collapse":false},{"id":"3ddfb2b3.b7372e","type":"ui_group","z":"","name":"TCP Connections Establised","tab":"708f8cd2.c22b14","order":8,"disp":true,"width":"8","collapse":false},{"id":"93b67aca.cb61","type":"ui_group","z":"","name":"numeric","tab":"708f8cd2.c22b14","order":2,"disp":true,"width":"4","collapse":false},{"id":"11193e87.ede119","type":"ui_group","z":"","name":"System Up Time","tab":"708f8cd2.c22b14","order":9,"disp":true,"width":"8","collapse":false},{"id":"551247b1.2b4698","type":"ui_spacer","name":"spacer","group":"","order":3,"width":"3","height":"18"},{"id":"7801b126.8686e","type":"ui_spacer","name":"spacer","group":"b93c6fee.cdc1","order":8,"width":"3","height":"10"},{"id":"5adb0d65.1d8b6c","type":"ui_spacer","name":"spacer","group":"2cf81c1a.c087a4","order":7,"width":"3","height":"10"},{"id":"58bde2d6.52a53c","type":"ui_spacer","name":"spacer","group":"9d7444d0.760228","order":6,"width":"3","height":"10"},{"id":"2826d134.b8d476","type":"ui_spacer","name":"spacer","group":"d44f6b71.a207b8","order":5,"width":"10","height":"10"},{"id":"3335064c.59e0a2","type":"ui_spacer","name":"spacer","group":"","order":4,"width":"3","height":"19"},{"id":"a379e8a1.2dd198","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"cert.pem","keyname":"key.pem","caname":"","servername":"","verifyservercert":true},{"id":"92557070.1f765","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"3ec67e45.e7ea8a","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"f4101bfd.7b4878","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"e81cee6c.b6f38","type":"ui_group","z":"","name":"Default","tab":"aa61bed2.5a9338","order":1,"disp":false,"width":"24","collapse":false},{"id":"f13ae9ad.32ccb8","type":"ui_group","z":"","name":"Login","tab":"b0749fcb.caa5c","order":3,"disp":true,"width":"8","collapse":false},{"id":"b0749fcb.caa5c","type":"ui_tab","z":"","name":"Login","icon":"lock","order":7,"disabled":false,"hidden":false},{"id":"395267b0.ccc668","type":"ui_group","z":"","name":"Configuration","tab":"b0749fcb.caa5c","order":2,"disp":true,"width":"20","collapse":false},{"id":"21796e70.28d8b2","type":"ui_tab","z":"","name":"Overview","icon":"home","order":1,"disabled":false,"hidden":false},{"id":"c0201919.ac8d08","type":"ui_group","z":"","name":"Counters","tab":"21796e70.28d8b2","disp":true,"width":"10","collapse":false},{"id":"e9159a32.a5fc","type":"ui_group","z":"","name":"AAS Information","tab":"21796e70.28d8b2","disp":true,"width":"10","collapse":false},{"id":"aa61bed2.5a9338","type":"ui_tab","z":"","name":"Home","icon":"dashboard","order":9},{"id":"cf9381a0.17dce8","type":"ui_tab","z":"","name":"Logs","icon":"view_list","order":4,"disabled":false,"hidden":false},{"id":"ba5ba4e0.65d9e","type":"ui_spacer","name":"spacer","group":"","order":3,"width":"3","height":"18"},{"id":"18c528ee.bbde0f","type":"ui_spacer","name":"spacer","group":"b93c6fee.cdc1","order":8,"width":"3","height":"10"},{"id":"f0613731.b4a77","type":"ui_spacer","name":"spacer","group":"2cf81c1a.c087a4","order":7,"width":"3","height":"10"},{"id":"4146773c.242088","type":"ui_spacer","name":"spacer","group":"9d7444d0.760228","order":6,"width":"3","height":"10"},{"id":"3a45cd44.12c152","type":"ui_spacer","name":"spacer","group":"d44f6b71.a207b8","order":5,"width":"10","height":"10"},{"id":"eda8ca02.3c5d38","type":"ui_spacer","name":"spacer","group":"","order":4,"width":"3","height":"19"},{"id":"543de4a6.a76bfc","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"cert.pem","keyname":"key.pem","caname":"","servername":"","verifyservercert":true},{"id":"677d213c.3d39e8","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"ffc5a899.b3a528","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"f71ee422.f3ddf8","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"ac595b8b.53edc8","type":"ui_spacer","name":"spacer","group":"","order":4,"width":1,"height":"9"},{"id":"c5878d3c.32d15","type":"ui_group","z":"","name":"Commands","tab":"","order":1,"disp":true,"width":"3","collapse":false},{"id":"db682736.c68b58","type":"ui_group","z":"","name":"CPULoad","tab":"708f8cd2.c22b14","order":5,"disp":true,"width":"20","collapse":false},{"id":"f384eebc.aef8f","type":"ui_spacer","name":"spacer","group":"","order":3,"width":"3","height":"18"},{"id":"c4a40446.756ba8","type":"ui_spacer","name":"spacer","group":"b93c6fee.cdc1","order":8,"width":"3","height":"10"},{"id":"7171602e.e238","type":"ui_spacer","name":"spacer","group":"2cf81c1a.c087a4","order":7,"width":"3","height":"10"},{"id":"8a659e1f.f4e428","type":"ui_spacer","name":"spacer","group":"9d7444d0.760228","order":6,"width":"3","height":"10"},{"id":"b11e5172.f6b988","type":"ui_spacer","name":"spacer","group":"d44f6b71.a207b8","order":5,"width":"10","height":"10"},{"id":"76962106.87284","type":"ui_spacer","name":"spacer","group":"768e00.eab492","order":4,"width":"3","height":"19"},{"id":"768e00.eab492","type":"ui_group","z":"","name":"Commands","tab":"6c93b6c.09bd1c8","order":1,"disp":true,"width":"3","collapse":false},{"id":"95665ea.259a6a","type":"ui_group","z":"","name":"Headers","tab":"6c93b6c.09bd1c8","order":3,"disp":true,"width":"10","collapse":false},{"id":"6c93b6c.09bd1c8","type":"ui_tab","z":"","name":"Manifest","icon":"description","order":2,"disabled":false,"hidden":false},{"id":"f6ab83e8.416e5","type":"ui_group","z":"","name":"Body","tab":"6c93b6c.09bd1c8","order":4,"disp":true,"width":"20","collapse":false},{"id":"29ad3d07.d8e48a","type":"ui_group","z":"","name":"Logs","tab":"cf9381a0.17dce8","order":2,"disp":true,"width":"30","collapse":false},{"id":"dc5b5bab.a3916","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"cert.pem","keyname":"key.pem","caname":"","servername":"","verifyservercert":true},{"id":"38bd00f5.27ec08","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"3589fa2b.6f4866","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"76caa24c.6312bc","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"39f23940.8c51ae","type":"ui_group","z":"","name":"AAS Data Interface","tab":"9c6af04f.fd89c8","disp":true,"width":"30","collapse":false},{"id":"9c6af04f.fd89c8","type":"ui_tab","z":"","name":"Data Interfaces","icon":"insert_link","order":3,"disabled":false,"hidden":false},{"id":"86fd9f.309a7a6","type":"ui_group","z":"","name":"Default","tab":"708f8cd2.c22b14","order":3,"disp":false,"width":"24","collapse":false},{"id":"393bcf13.7c294","type":"ui_group","z":"","name":"Login","tab":"b0749fcb.caa5c","order":3,"disp":true,"width":"8","collapse":false},{"id":"bbdefc7.10a7c","type":"ui_group","z":"","name":"Configuration","tab":"","order":2,"disp":true,"width":"20","collapse":false},{"id":"59a9a12f.dc2d08","type":"ui_group","z":"","name":"Counters","tab":"21796e70.28d8b2","disp":true,"width":"10","collapse":false},{"id":"ab09af3a.fe2f2","type":"node-red-contrib-httpauthfile","z":"","name":"","authType":"Basic","realm":"myRealm","filePath":"/home/gido/.node-red/httpauth/httpauthfile.txt","hashed":false},{"id":"bc68dcde.54105","type":"ui_group","z":"","name":"AAS Information","tab":"21796e70.28d8b2","disp":true,"width":"12","collapse":false},{"id":"708f8cd2.c22b14","type":"ui_tab","z":"","name":"Statistics","icon":"memory","order":6,"disabled":false,"hidden":false},{"id":"21163bff.6beb24","type":"ui_group","z":"","name":"Network Tx/Rx","tab":"708f8cd2.c22b14","order":6,"disp":true,"width":"20","collapse":false},{"id":"48b34339.fd8494","type":"ui_group","z":"","name":"Real-Time RX/TX Monitoring","tab":"708f8cd2.c22b14","order":7,"disp":true,"width":"20","collapse":false},{"id":"24e4a18c.c9b60e","type":"ui_spacer","name":"spacer","group":"","order":3,"width":"3","height":"18"},{"id":"fa3114c4.882fb8","type":"ui_spacer","name":"spacer","group":"b93c6fee.cdc1","order":8,"width":"3","height":"10"},{"id":"d81df1b.82aa01","type":"ui_spacer","name":"spacer","group":"2cf81c1a.c087a4","order":7,"width":"3","height":"10"},{"id":"875983bf.fda3d","type":"ui_spacer","name":"spacer","group":"9d7444d0.760228","order":6,"width":"3","height":"10"},{"id":"e8da5e77.98e298","type":"ui_spacer","name":"spacer","group":"d44f6b71.a207b8","order":5,"width":"10","height":"10"},{"id":"c21aedda.84f858","type":"ui_spacer","name":"spacer","group":"","order":4,"width":"3","height":"19"},{"id":"18080732.1003b1","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"cert.pem","keyname":"key.pem","caname":"","servername":"","verifyservercert":true},{"id":"65a2552a.211a9c","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"e311315d.0b4088","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"13bc59f2.2c7e36","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"82638f05.632d68","type":"ui_group","z":"","name":"Commands","tab":"708f8cd2.c22b14","order":4,"disp":true,"width":"3","collapse":false},{"id":"737672ec.f2a194","type":"ui_spacer","name":"spacer","group":"82638f05.632d68","order":4,"width":1,"height":"9"},{"id":"73116aab.5b102c","type":"ui_tab","z":"","name":"Test","icon":"dashboard"},{"id":"747493f1.eec294","type":"ui_group","z":"","name":"Default","tab":"d374f9bc.272d5","disp":true,"width":"6","collapse":true},{"id":"d374f9bc.272d5","type":"ui_tab","z":"","name":"Home","icon":"dashboard"},{"id":"67a3a597.dab354","type":"ui_group","z":"","name":"Default","tab":"7815d14f.7c58a","disp":true,"width":"6","collapse":true},{"id":"7815d14f.7c58a","type":"ui_tab","z":"","name":"Home","icon":"dashboard"},{"id":"574e8703.290e3","type":"ui_group","z":"","name":"Commands","tab":"cf9381a0.17dce8","order":1,"disp":true,"width":"3","collapse":false},{"id":"7a26a7d8.716968","type":"ui_spacer","name":"spacer","group":"574e8703.290e3","order":2,"width":"3","height":"19"},{"id":"a4c40ea9.7e657","type":"kafka-broker","z":"","broker":"84.254.42.48:58092","clientid":"AAS"},{"id":"161753fe.fe57c4","type":"key-value-store","z":"","filepath":"credentials.json","namespace":"","name":""},{"id":"44d5dc10.f2c87c","type":"ui_tab","z":"","name":"DashTest","icon":"dashboard","disabled":false,"hidden":false},{"id":"3090a7d2.6fef5","type":"ui_group","z":"","name":"Default","tab":"44d5dc10.f2c87c","disp":true,"width":"20","collapse":false},{"id":"e38a9a01.1636a","type":"telegram bot","z":"","botname":"AASNodeRedBot","usernames":"","chatids":"","baseapiurl":"","updatemode":"polling","pollinterval":"300","usesocks":false,"sockshost":"","socksport":"6667","socksusername":"anonymous","sockspassword":"","bothost":"","localbotport":"8443","publicbotport":"8443","privatekey":"","certificate":"","useselfsignedcertificate":false,"verboselogging":false},{"id":"afc1ac3.385645","type":"chatbot-context-store","z":"","name":"","contextStorage":"memory","contextParams":""},{"id":"280e2990.5b984e","type":"telegram bot","z":"8267c016.e4a32","botname":"AASNodeRedBot","usernames":"","chatids":"","baseapiurl":"","updatemode":"polling","pollinterval":"300","usesocks":false,"sockshost":"","socksport":"","socksusername":"","sockspassword":"","bothost":"","localbotport":"8443","publicbotport":"8443","privatekey":"","certificate":"","useselfsignedcertificate":false,"verboselogging":false},{"id":"7a7fd440.9e5af4","type":"swagger-doc","z":"","summary":"Test the status of the AAS","description":"","tags":"","consumes":"","produces":"test/html","parameters":[],"responses":{"200":{"description":"OK"},"503":{"description":"Asset Administration Shell not configured"}},"deprecated":false},{"id":"893dcb92.868828","type":"swagger-doc","z":"","summary":"Retrieve the current Manifest document","description":"","tags":"","consumes":"","produces":"","parameters":[],"responses":{"200":{"description":"Manifest aml document","code":"200"}},"deprecated":false},{"id":"308b8c02.88ff84","type":"swagger-doc","z":"","summary":"Retrieve the AAS identificators (header part of the Manifest)","description":"AAS headers","tags":"","consumes":"","produces":"","parameters":[],"responses":{"200":{"description":"aml Manifest headers response","code":"200"}},"deprecated":false},{"id":"3bc5f61f.36fe92","type":"swagger-doc","z":"","summary":"Retrieve the list of the AAS submodels (Body part of the Manifest)","description":"AAS submodels","tags":"","consumes":"","produces":"","parameters":[],"responses":{"200":{"description":"List the submodels in the Manifest"}},"deprecated":false},{"id":"92a8032.48cc98","type":"swagger-doc","z":"","summary":"Retrieve the AAS submodel by Id","description":"AAS submodel by Id","tags":"","consumes":"","produces":"","parameters":[{"name":"id","in":"path","description":"submodel identificator","required":true,"type":"string"}],"responses":{"200":{"description":"xml specific submodel"},"404":{"description":"Submodel with id: {id} not found"}},"deprecated":false},{"id":"c0cbda38.01bb4","type":"swagger-doc","z":"","summary":"","description":"","tags":"","consumes":"","produces":"","parameters":[],"responses":{},"deprecated":false},{"id":"9e79146b.c1486","type":"mqtt-broker","z":"","name":"","broker":"192.168.56.101","port":"1883","clientid":"","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"d6c6b8ac.e79d88","type":"mqtt-broker","z":"","name":"","broker":"10.172.67.130","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"c7ae5e0a.4b5bc","type":"mqtt-broker","z":"","name":"","broker":"182.168.0.101","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"355a7b23.ff7144","type":"mqtt-broker","z":"","name":"","broker":"192.168.0.101","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"1d81f70b.03e8d1","type":"mqtt-broker","z":"","name":"","broker":"localhost","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"1683b072.02027","type":"mqtt-broker","z":"","name":"","broker":"192.168.1.70","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"6e7b154.a3323ec","type":"file in","z":"b3967a98.7bd668","name":"","filename":"","format":"utf8","chunk":false,"sendError":false,"x":270,"y":80,"wires":[["21bba6fe.695eea"]]},{"id":"21bba6fe.695eea","type":"json","z":"b3967a98.7bd668","name":"","property":"payload","action":"str","pretty":true,"x":510,"y":80,"wires":[[]]},{"id":"688565cb.e950d4","type":"json","z":"b3967a98.7bd668","name":"","property":"jsonataResult","action":"str","pretty":true,"x":270,"y":220,"wires":[[]]},{"id":"c3413377.5d6f9","type":"file in","z":"6a2989.2b1ea678","name":"","filename":"","format":"utf8","chunk":false,"sendError":false,"x":450,"y":40,"wires":[["7c7a13e9.0af804"]]},{"id":"7c7a13e9.0af804","type":"json","z":"6a2989.2b1ea678","name":"","property":"payload","action":"str","pretty":true,"x":650,"y":40,"wires":[[]]},{"id":"ff81a109.1063d","type":"file in","z":"a6e18902.7b35d8","name":"","filename":"","format":"utf8","chunk":false,"sendError":false,"x":574.9998168945312,"y":196.6666717529297,"wires":[[]]},{"id":"8c910e5f.f6e82","type":"change","z":"a6e18902.7b35d8","name":"","rules":[{"t":"set","p":"filename","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":374.99993896484375,"y":196.6666717529297,"wires":[["ff81a109.1063d"]]},{"id":"deb320d.451cde","type":"file","z":"d9180baf.1f0b3","name":"PersistModel","filename":"","appendNewline":false,"createDir":false,"overwriteFile":"true","x":820,"y":122,"wires":[[]]},{"id":"72497bea.cf152c","type":"file","z":"d6703d6b.ec7c7","name":"PersistModel","filename":"","appendNewline":false,"createDir":false,"overwriteFile":"true","x":846,"y":172,"wires":[[]]},{"id":"76eebcef.e0d8c4","type":"switch","z":"d9180baf.1f0b3","name":"","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"201","vt":"str"},{"t":"eq","v":"409","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":463,"y":180,"wires":[[],[]]},{"id":"2591e3.4c6c761e","type":"file","z":"a95355c.29c89a8","name":"PersistModel","filename":"","appendNewline":false,"createDir":false,"overwriteFile":"true","x":870,"y":158,"wires":[[]]},{"id":"11559d41.5e99b3","type":"switch","z":"a95355c.29c89a8","name":"","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"200","vt":"str"},{"t":"eq","v":"404","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":515,"y":220,"wires":[[],[]]},{"id":"188a980.f272f68","type":"switch","z":"d6703d6b.ec7c7","name":"","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"200","vt":"str"},{"t":"eq","v":"404","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":451,"y":272,"wires":[[],[]]},{"id":"4fb6ae5a.4b75f8","type":"change","z":"273d5036.a3442","name":"","rules":[{"t":"set","p":"paths[\"path_1\"]","pt":"msg","to":"true","tot":"bool"},{"t":"set","p":"msg.paths_correlationId","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":924,"y":314,"wires":[[]]},{"id":"f2101f0.7399f6","type":"change","z":"273d5036.a3442","name":"","rules":[{"t":"set","p":"paths[\"path_2\"]","pt":"msg","to":"true","tot":"bool"},{"t":"set","p":"msg.paths_correlationId","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":922,"y":376,"wires":[[]]},{"id":"b469888e.d4acb","type":"logger","z":"3bcb972f.6d23c8","name":"","filename":"logs.log","maxsize":1,"maxfiles":10,"complete":"true","console":false,"file":true,"debug":false,"zip":false,"logtype":"info","x":1043.6332397460938,"y":298.88336181640625,"wires":[]},{"id":"abfb596f.080a8","type":"unsafe-function","z":"3bcb972f.6d23c8","name":"createLogEntry","func":"//var element = JSON.stringify(msg.payload);\nvar msg1 = {};\nvar outmsg = {};\n//msg1.payload = element;\nmsg1.requestedURL = msg.req.url;\nmsg1.headers = {};\nmsg1.headers[\"user-agent\"] = msg.req.headers[\"user-agent\"];\nmsg1.headers[\"authorization\"] = msg.req.headers[\"authorization\"];\nmsg1.headers[\"content-type\"] = msg.req.headers[\"content-type\"];\nmsg1.headers[\"host\"] = msg.req.headers[\"host\"];\nmsg1.startTime = msg.startTime;\nif(typeof msg.req.client._peername !== 'undefined'){\n    msg1.client = msg.req.client._peername.address;\n} else{\n    msg1.client = \"internal\";\n} \n\nmsg1.endTime = Date.now();\noutmsg.payload = JSON.stringify(msg1);\nreturn outmsg; // msg1;\n","outputs":1,"noerr":0,"x":573.88330078125,"y":302.8833312988281,"wires":[["af5ba88d.9d1c08"]]},{"id":"6058c3b5.137754","type":"actionflows_in","z":"9b0db7c7.e3ad48","name":"readSubmodels in","priority":"50","links":[],"scope":"global","x":258.8833312988281,"y":695.38330078125,"wires":[["8e9460f4.eca648"]]},{"id":"fb58bf32.4a9f18","type":"actionflows_out","z":"9b0db7c7.e3ad48","name":"readSubmodels out","links":[],"x":1397.2166137695312,"y":693.716552734375,"wires":[]},{"id":"c44cc657.4d591","type":"actionflows_in","z":"9b0db7c7.e3ad48","name":"readSubmodel in","priority":"50","links":[],"scope":"global","x":247.383056640625,"y":783.6214599609375,"wires":[["3e3b7dc4.35251a"]]},{"id":"229385db.a64fba","type":"actionflows_out","z":"9b0db7c7.e3ad48","name":"readSubmodel out","links":[],"x":1388.0497436523438,"y":783.9547119140625,"wires":[]},{"id":"72198621.e7b108","type":"actionflows_in","z":"9b0db7c7.e3ad48","name":"addSubmodel in","priority":"50","links":[],"scope":"global","x":250.76412963867188,"y":910.8594818115234,"wires":[["33935ea0.7523fa"]]},{"id":"85044e83.445dc","type":"actionflows_out","z":"9b0db7c7.e3ad48","name":"addSubmodel out","links":[],"x":1387.4309387207031,"y":914.1928558349609,"wires":[]},{"id":"2a2525d.9a621da","type":"actionflows_in","z":"9b0db7c7.e3ad48","name":"removeSubmodel in","priority":"50","links":[],"scope":"global","x":260.7641296386719,"y":1060.8594818115234,"wires":[["d0d84e.903defb"]]},{"id":"3ea9f8b9.6c5198","type":"actionflows_out","z":"9b0db7c7.e3ad48","name":"removeSubmodel out","links":[],"x":1395.7643127441406,"y":1067.5260467529297,"wires":[]},{"id":"8e9dff1c.8264a","type":"actionflows_in","z":"9b0db7c7.e3ad48","name":"updateSubmodel in","priority":"50","links":[],"scope":"global","x":264.4308166503906,"y":1175.192855834961,"wires":[["56a4c120.6852e8"]]},{"id":"f117b947.032448","type":"actionflows_out","z":"9b0db7c7.e3ad48","name":"updateSubmodel out","links":[],"x":1396.4309387207031,"y":1177.8594818115234,"wires":[]},{"id":"f1070c15.699028","type":"unsafe-function","z":"9b0db7c7.e3ad48","name":"PersistModel","func":"var XML = context.global.get('XML');\nvar manifest = context.flow.get('manifest');\n\nvar xml_string_composed = XML.stringify(manifest, 'CAEXFile');\nmsg.payload = xml_string_composed;\n\nreturn msg;","outputs":1,"noerr":0,"x":914.5379943847656,"y":1843.1214447021484,"wires":[["a1a18e6a.6951a"]]},{"id":"a1a18e6a.6951a","type":"file","z":"9b0db7c7.e3ad48","name":"PersistModel","filename":"","appendNewline":false,"createDir":true,"overwriteFile":"true","x":1113.7879943847656,"y":1842.8714447021484,"wires":[["f171b2bd.84e1f8"]]},{"id":"b7f485af.a48e58","type":"unsafe-function","z":"9b0db7c7.e3ad48","name":"RetrievingModelFilePath","func":"msg.filename = context.global.get(\"ModelFilePath\");\nreturn msg;","outputs":1,"noerr":0,"x":565.7879943847656,"y":1845.6214447021484,"wires":[["f1070c15.699028"]]},{"id":"8185e43e.cb06d","type":"actionflows_in","z":"9b0db7c7.e3ad48","name":"persistManifest in","priority":"50","links":[],"scope":"global","x":247.03799438476562,"y":1845.6214447021484,"wires":[["b7f485af.a48e58"]]},{"id":"f171b2bd.84e1f8","type":"actionflows_out","z":"9b0db7c7.e3ad48","name":"persistManifest out","links":[],"x":1368.2878723144531,"y":1841.8714447021484,"wires":[]},{"id":"8e9460f4.eca648","type":"unsafe-function","z":"9b0db7c7.e3ad48","name":"RetrievingSubmodels...","func":"//var xml_string = msg.payload;\n//var XML = context.global.get('XML');\n//var doc = XML.parse( xml_string, { preserveAttributes: true, forceArrays: true  } );\n/*\nvar xml_string_composed = XML.stringify( doc, 'CAEXFile');\nmsg.composed = xml_string_composed;\n*/\n\n/*var parser = null;\n\ntry {\n    parser = new XML.Parser(xml_string, { preserveAttributes: true, forceArrays: true} );\n}\ncatch (err) {\n    throw err;\n}*/\n//var manifest = parser.getTree();\n//var manifest = context.global.get(\"manifest\");\n//var submodelsList = manifest.InstanceHierarchy[0].InternalElement[1].InternalElement[0].InternalElement;\n\n/*if(typeof submodelsList === \"undefined\"){\n    submodelsList = {};\n}*/\n\n//msg.manifest.submodels = submodels;\n//msg.manifest = manifest;\nmsg.payload = context.flow.get(\"body\");\nmsg.AASID = context.flow.get('AASIdentifier');\nreturn msg;","outputs":1,"noerr":0,"x":1029.9546508789062,"y":693.0022583007812,"wires":[["fb58bf32.4a9f18"]]},{"id":"3e3b7dc4.35251a","type":"unsafe-function","z":"9b0db7c7.e3ad48","name":"RetrievingSubmodelById...","func":"var SubmodelId = msg.req.params.id;\nvar submodels = context.flow.get(\"submodels\");\nmsg.AASID = context.flow.get('AASIdentifier');\nfor(var submodelIndex in submodels){\n        var submodel = submodels[submodelIndex];\n        var id = submodel._Attribs.ID; \n        if (id.localeCompare(SubmodelId) === 0){\n                msg.payload = submodel;\n                msg.statusCode = \"200\";\n                return msg;\n        }\n    }\nmsg.statusCode = \"404\";\nmsg.payload = \"submodel with id:\" + SubmodelId + \" not found\"\nreturn msg;","outputs":1,"noerr":0,"x":1026.6211547851562,"y":784.9070434570312,"wires":[["229385db.a64fba"]]},{"id":"33935ea0.7523fa","type":"unsafe-function","z":"9b0db7c7.e3ad48","name":"AddingSubmodel...","func":"//var xml_string = msg.payload;\n//var XML = context.global.get('XML');\n\nvar submodel = msg.payload;\n//var doc = XML.parse( xml_string, { preserveAttributes: true, forceArrays: true  } );\n/*\nvar xml_string_composed = XML.stringify( doc, 'CAEXFile');\nmsg.composed = xml_string_composed;\n*/\n\n/*var parser = null;\n\ntry {\n    parser = new XML.Parser(xml_string, { preserveAttributes: true, forceArrays: true} );\n}\ncatch (err) {\n    throw err;\n}*/\n//var manifest = context.global.get(\"manifest\");\n//var manifest = parser.getTree();\nvar submodels = context.flow.get(\"submodels\");\nmsg.AASID = context.flow.get('AASIdentifier');\nfor(var submodelIndex in submodels){\n    if(submodel._Attribs.ID == submodels[submodelIndex]._Attribs.ID){\n        msg.payload = \"Error submodel ID already exists\";\n        msg.statusCode = \"409\";\n        return msg;\n    }\n}\nsubmodels.push(submodel);\nvar propertiesList = context.flow.get('properties');\nvar properties = submodel.InternalElement;\n    for(var propertyIndex in properties){\n        propertiesList.push(properties[propertyIndex]);\n    }\nmsg.statusCode = \"201\";\nreturn msg;","outputs":1,"noerr":0,"x":805.6689758300781,"y":908.4785614013672,"wires":[["894c904b.b920d"]]},{"id":"894c904b.b920d","type":"switch","z":"9b0db7c7.e3ad48","name":"","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"201","vt":"str"},{"t":"eq","v":"409","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":984.0023498535156,"y":908.4784393310547,"wires":[["a48238e8.a1e858"],["85044e83.445dc"]]},{"id":"a48238e8.a1e858","type":"actionflows","z":"9b0db7c7.e3ad48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"persistManifest","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1178.1689758300781,"y":858.4784393310547,"wires":[["85044e83.445dc"]]},{"id":"d0d84e.903defb","type":"unsafe-function","z":"9b0db7c7.e3ad48","name":"RemovingSubmodel...","func":"//var xml_string = msg.payload;\n//var XML = context.global.get('XML');\n\nvar submodelID = msg.req.params.id;\n//var doc = XML.parse( xml_string, { preserveAttributes: true, forceArrays: true  } );\n/*\nvar xml_string_composed = XML.stringify( doc, 'CAEXFile');\nmsg.composed = xml_string_composed;\n*/\n\n/*var parser = null;\n\ntry {\n    parser = new XML.Parser(xml_string, { preserveAttributes: true, forceArrays: true} );\n}\ncatch (err) {\n    throw err;\n}*/\n//var manifest = context.global.get(\"manifest\");\n//var manifest = parser.getTree();\nmsg.AASID = context.flow.get('AASIdentifier');\nvar submodels = context.flow.get(\"submodels\");\nfor(var submodelIndex in submodels){\n    if(submodelID == submodels[submodelIndex]._Attribs.ID){\n        var submodel = submodels[submodelIndex];\n        submodels.splice(submodelIndex, 1);\n        msg.statusCode = \"200\";\n        var propertiesList = context.flow.get('properties');\n        var properties = submodel.InternalElement;\n        for(var propertyIndex in properties){\n            for(var propertyIndex2 in propertiesList){\n                if(properties[propertyIndex]._Attribs.ID == propertiesList[propertyIndex2]._Attribs.ID){\n                    propertiesList.splice(propertyIndex2, 1);\n                }\n            }\n        }\n        return msg;\n    }\n}\n\nmsg.payload = \"Error Submodel not found for Id: \" + submodelID;\nmsg.statusCode = \"404\";\nreturn msg;","outputs":1,"noerr":0,"x":810.6688537597656,"y":1060.1451873779297,"wires":[["eb54f19e.3c9c"]]},{"id":"eb54f19e.3c9c","type":"switch","z":"9b0db7c7.e3ad48","name":"","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"200","vt":"str"},{"t":"eq","v":"404","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":984.0022277832031,"y":1060.1450653076172,"wires":[["f0fd7ec2.ab3ea8"],["3ea9f8b9.6c5198"]]},{"id":"f0fd7ec2.ab3ea8","type":"actionflows","z":"9b0db7c7.e3ad48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"persistManifest","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1179.0022277832031,"y":1015.1451873779297,"wires":[["3ea9f8b9.6c5198"]]},{"id":"56a4c120.6852e8","type":"unsafe-function","z":"9b0db7c7.e3ad48","name":"UpdatingSubmodel...","func":"var submodel = msg.payload;\n/*\nvar xml_string_composed = XML.stringify( doc, 'CAEXFile');\nmsg.composed = xml_string_composed;\n*/\n\n/*var parser = null;\n\ntry {\n    parser = new XML.Parser(xml_string, { preserveAttributes: true, forceArrays: true} );\n}\ncatch (err) {\n    throw err;\n}*/\n//var manifest = context.global.get(\"manifest\");\n//var manifest = parser.getTree();\nmsg.AASID = context.flow.get('AASIdentifier');\nvar submodels = context.flow.get(\"submodels\");\nfor(var submodelIndex in submodels){\n    if(submodel._Attribs.ID == submodels[submodelIndex]._Attribs.ID){\n        submodels[submodelIndex] = submodel;\n        msg.statusCode = \"200\";\n        var propertiesList = context.flow.get('properties');\n        var properties = submodel.InternalElement;\n        for(var propertyIndex in properties){\n            propertiesList.push(properties[propertyIndex]);\n        }\n        return msg;\n    }\n}\nmsg.statusCode = \"404\";\nreturn msg;","outputs":1,"noerr":0,"x":810.6688537597656,"y":1173.478256225586,"wires":[["c636c7cb.546c08"]]},{"id":"c636c7cb.546c08","type":"switch","z":"9b0db7c7.e3ad48","name":"","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"200","vt":"str"},{"t":"eq","v":"404","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":990.6688537597656,"y":1173.4781341552734,"wires":[["4061947c.fb7344"],["f117b947.032448"]]},{"id":"4061947c.fb7344","type":"actionflows","z":"9b0db7c7.e3ad48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"persistManifest","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1180.6688537597656,"y":1136.8118133544922,"wires":[["f117b947.032448"]]},{"id":"9297148c.30c39","type":"actionflows_in","z":"9b0db7c7.e3ad48","name":"readManifest in","priority":"50","links":[],"scope":"global","x":249.71652221679688,"y":494.9071350097656,"wires":[["59d5604f.f50e28"]]},{"id":"1207866d.ce98a2","type":"actionflows_out","z":"9b0db7c7.e3ad48","name":"readManifest out","links":[],"x":1395.4307861328125,"y":497.7642517089844,"wires":[]},{"id":"59d5604f.f50e28","type":"unsafe-function","z":"9b0db7c7.e3ad48","name":"RetrievingManifest...","func":"msg.payload = context.flow.get(\"manifest\");\nmsg.AASID = context.flow.get('AASIdentifier');\nreturn msg;","outputs":1,"noerr":0,"x":999.0023193359375,"y":496.33563232421875,"wires":[["1207866d.ce98a2"]]},{"id":"7f94785f.d22cd","type":"actionflows_in","z":"9b0db7c7.e3ad48","name":"readProperty in","priority":"50","links":[],"scope":"global","x":249.002197265625,"y":1289.1929168701172,"wires":[["4f0df6f2.b45f98"]]},{"id":"ff39d4e7.3135","type":"actionflows_out","z":"9b0db7c7.e3ad48","name":"readProperty out","links":[],"x":1389.6688842773438,"y":1289.5261688232422,"wires":[]},{"id":"4f0df6f2.b45f98","type":"unsafe-function","z":"9b0db7c7.e3ad48","name":"RetrievingPropertyById...","func":"msg.AASID = context.flow.get('AASIdentifier');\nvar propertyId = msg.req.params.id;\nvar properties = context.flow.get(\"properties\");\nfor(var propertyIndex in properties){\n        var property = properties[propertyIndex];\n        var id = property._Attribs.ID; \n        if (id.localeCompare(propertyId) === 0){\n                msg.payload = property;\n                msg.statusCode = \"200\";\n                return msg;\n        }\n    }\nmsg.statusCode = \"404\";\nmsg.payload = \"property with id:\" + propertyId + \" not found\"\nreturn msg;","outputs":1,"noerr":0,"x":1018.2402954101562,"y":1290.478500366211,"wires":[["ff39d4e7.3135"]]},{"id":"babede2f.8a685","type":"actionflows_in","z":"9b0db7c7.e3ad48","name":"addProperty in","priority":"50","links":[],"scope":"global","x":250.43075561523438,"y":1414.907211303711,"wires":[["517f8ef0.e3254"]]},{"id":"f56b5434.82e228","type":"actionflows_out","z":"9b0db7c7.e3ad48","name":"addProperty out","links":[],"x":1377.0975646972656,"y":1418.2405853271484,"wires":[]},{"id":"517f8ef0.e3254","type":"unsafe-function","z":"9b0db7c7.e3ad48","name":"AddingProperty...","func":"//var xml_string = msg.payload;\n//var XML = context.global.get('XML');\n\nvar property = msg.payload;\nvar submodelId = msg.req.params.id;\n\n//var doc = XML.parse( xml_string, { preserveAttributes: true, forceArrays: true  } );\n/*\nvar xml_string_composed = XML.stringify( doc, 'CAEXFile');\nmsg.composed = xml_string_composed;\n*/\n\n/*var parser = null;\n\ntry {\n    parser = new XML.Parser(xml_string, { preserveAttributes: true, forceArrays: true} );\n}\ncatch (err) {\n    throw err;\n}*/\n//var manifest = context.global.get(\"manifest\");\n//var manifest = parser.getTree();\nmsg.AASID = context.flow.get('AASIdentifier');\nvar properties = context.flow.get(\"properties\");\nfor(var propertyIndex in properties){\n    if(properties._Attribs.ID == properties[propertyIndex]._Attribs.ID){\n        msg.payload = \"Error property ID already exists\";\n        msg.statusCode = \"409\";\n        return msg;\n    }\n}\nproperties.push(property);\n\nvar submodels = context.flow.get('submodels');\n    for(var submodelIndex in submodels){\n        if(submodels[submodelIndex]._Attribs.ID == submodelId){\n            if(typeof submodels[submodelIndex].InternalElement === \"undefined\"){\n                submodels[submodelIndex].InternalElement = [];\n                submodels[submodelIndex].InternalElement.push(property)\n            }\n            else{\n                submodels[submodelIndex].InternalElement.push(property);\n            }\n            break;\n        }\n    }\n\nmsg.statusCode = \"201\";\nreturn msg;","outputs":1,"noerr":0,"x":805.3356018066406,"y":1412.5262908935547,"wires":[["40f504d3.948ee4"]]},{"id":"40f504d3.948ee4","type":"switch","z":"9b0db7c7.e3ad48","name":"","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"201","vt":"str"},{"t":"eq","v":"409","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":983.6689758300781,"y":1412.5261688232422,"wires":[["7833a607.cd20e"],["f56b5434.82e228"]]},{"id":"7833a607.cd20e","type":"actionflows","z":"9b0db7c7.e3ad48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"persistManifest","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1177.8356018066406,"y":1362.5261688232422,"wires":[["f56b5434.82e228"]]},{"id":"e17aaf0e.7ff5d8","type":"actionflows_in","z":"9b0db7c7.e3ad48","name":"removeProperty in","priority":"50","links":[],"scope":"global","x":257.5736083984375,"y":1544.9070892333984,"wires":[["83f91ea.9d7846"]]},{"id":"63ab7d8c.a6d364","type":"actionflows_out","z":"9b0db7c7.e3ad48","name":"removeProperty out","links":[],"x":1382.5737915039062,"y":1551.5736541748047,"wires":[]},{"id":"83f91ea.9d7846","type":"unsafe-function","z":"9b0db7c7.e3ad48","name":"RemovingProperty...","func":"//var xml_string = msg.payload;\n//var XML = context.global.get('XML');\n\nvar propertyID = msg.req.params.id;\n//var doc = XML.parse( xml_string, { preserveAttributes: true, forceArrays: true  } );\n/*\nvar xml_string_composed = XML.stringify( doc, 'CAEXFile');\nmsg.composed = xml_string_composed;\n*/\n\n/*var parser = null;\n\ntry {\n    parser = new XML.Parser(xml_string, { preserveAttributes: true, forceArrays: true} );\n}\ncatch (err) {\n    throw err;\n}*/\n//var manifest = context.global.get(\"manifest\");\n//var manifest = parser.getTree();\nmsg.AASID = context.flow.get('AASIdentifier');\nvar propertiesList = context.flow.get('properties');\nfor(var propertyIndex in propertiesList){\n    if(propertyID == propertiesList[propertyIndex]._Attribs.ID){\n        propertiesList.splice(propertyIndex, 1);\n        var submodels = context.flow.get(\"submodels\");\n        for(var submodelIndex in submodels){\n        var properties = submodel.InternalElement;\n        for(var propertyIndex2 in properties){\n            if(properties[propertyIndex2]._Attribs.ID == propertyID){\n                propertiesList.splice(propertyIndex2, 1);\n            }\n        }\n        msg.statusCode = \"200\";\n        return msg;\n        }\n    }\n}\n\nmsg.payload = \"Error Property not found for Id: \" + propertyID;\nmsg.statusCode = \"404\";\nreturn msg;","outputs":1,"noerr":0,"x":807.4783325195312,"y":1544.1927947998047,"wires":[["da219bd9.7c3a6"]]},{"id":"da219bd9.7c3a6","type":"switch","z":"9b0db7c7.e3ad48","name":"","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"200","vt":"str"},{"t":"eq","v":"404","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":980.8117065429688,"y":1544.1926727294922,"wires":[["d347022b.2bb93"],["63ab7d8c.a6d364"]]},{"id":"d347022b.2bb93","type":"actionflows","z":"9b0db7c7.e3ad48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"persistManifest","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1175.8117065429688,"y":1499.1927947998047,"wires":[["63ab7d8c.a6d364"]]},{"id":"3951c56.cb3caba","type":"actionflows_in","z":"9b0db7c7.e3ad48","name":"updateProperty in","priority":"50","links":[],"scope":"global","x":261.5736083984375,"y":1672.9070892333984,"wires":[["ec704705.bcf548"]]},{"id":"4448377.91462c8","type":"actionflows_out","z":"9b0db7c7.e3ad48","name":"updateProperty out","links":[],"x":1383.57373046875,"y":1675.573715209961,"wires":[]},{"id":"ec704705.bcf548","type":"unsafe-function","z":"9b0db7c7.e3ad48","name":"UpdatingProperty...","func":"var property = msg.payload;\n/*\nvar xml_string_composed = XML.stringify( doc, 'CAEXFile');\nmsg.composed = xml_string_composed;\n*/\n\n/*var parser = null;\n\ntry {\n    parser = new XML.Parser(xml_string, { preserveAttributes: true, forceArrays: true} );\n}\ncatch (err) {\n    throw err;\n}*/\n//var manifest = context.global.get(\"manifest\");\n//var manifest = parser.getTree();\nmsg.AASID = context.flow.get('AASIdentifier');\nvar propertiesList = context.flow.get('properties');\nfor(var propertyIndex in propertiesList){\n    if(property._Attribs.ID == propertiesList[propertyIndex]._Attribs.ID){\n        propertiesList[propertyIndex] = property;\n        msg.statusCode = \"200\";\n        return msg;\n    }\n}\n\n/*var submodels = context.flow.get(\"submodels\");\nfor(var submodelIndex in submodels){\n    if(submodel._Attribs.ID == submodels[submodelIndex]._Attribs.ID){\n        submodels[submodelIndex] = submodel;\n        msg.statusCode = \"200\";\n        var propertiesList = context.flow.get('properties');\n        var properties = submodel.InternalElement;\n        for(var propertyIndex in properties){\n            propertiesList.push(properties[propertyIndex]);\n        }\n        return msg;\n    }\n}*/\nmsg.statusCode = \"404\";\nreturn msg;","outputs":1,"noerr":0,"x":797.8116455078125,"y":1671.1924896240234,"wires":[["2307d90b.1b7e0e"]]},{"id":"2307d90b.1b7e0e","type":"switch","z":"9b0db7c7.e3ad48","name":"","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"200","vt":"str"},{"t":"eq","v":"404","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":987.8116455078125,"y":1671.192367553711,"wires":[["d8e12506.bf6f5"],["4448377.91462c8"]]},{"id":"d8e12506.bf6f5","type":"actionflows","z":"9b0db7c7.e3ad48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"persistManifest","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1177.8116455078125,"y":1634.5260467529297,"wires":[["4448377.91462c8"]]},{"id":"ee5d6dcd.3a55f","type":"actionflows_in","z":"9b0db7c7.e3ad48","name":"readPropertyInterface in","priority":"50","links":[],"scope":"global","x":264.7164611816406,"y":2030.6214447021484,"wires":[["bcf36008.215a4"]]},{"id":"916769cc.54b24","type":"actionflows_out","z":"9b0db7c7.e3ad48","name":"readPropertyInterface out","links":[],"x":1380.4307861328125,"y":2034.9070892333984,"wires":[]},{"id":"bcf36008.215a4","type":"unsafe-function","z":"9b0db7c7.e3ad48","name":"RetrievingPropertyById...","func":"msg.AASID = context.flow.get('AASIdentifier');\nvar propertyId = msg.req.params.id;\nvar properties = context.flow.get(\"properties\");\nfor(var propertyIndex in properties){\n        var property = properties[propertyIndex];\n        var id = property._Attribs.ID; \n        if (id.localeCompare(propertyId) === 0){\n                msg.payload = property;\n                msg.statusCode = \"200\";\n                return msg;\n        }\n    }\nmsg.statusCode = \"404\";\nmsg.payload = \"property with id:\" + propertyId + \" not found\"\nreturn msg;","outputs":1,"noerr":0,"x":579.0023193359375,"y":2030.6214447021484,"wires":[["cf27288b.06fff8"]]},{"id":"cf27288b.06fff8","type":"switch","z":"9b0db7c7.e3ad48","name":"","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"200","vt":"str"},{"t":"eq","v":"404","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":801.859375,"y":2029.192855834961,"wires":[["eff8ece.4c1c41"],["916769cc.54b24"]]},{"id":"eff8ece.4c1c41","type":"unsafe-function","z":"9b0db7c7.e3ad48","name":"RetrievingDataInterface...","func":"var property = msg.payload;\nvar di = property.InternalElement[1];\nmsg.payload = di;\nreturn msg;","outputs":1,"noerr":0,"x":1076.145263671875,"y":1986.3358001708984,"wires":[["916769cc.54b24"]]},{"id":"7cf57058.7d0c98","type":"unsafe-function","z":"9b0db7c7.e3ad48","name":"CreateInMemoryManifest","func":"//Retreiving Libraries from the Settings.json file\nvar XML = context.global.get('XML');\nvar os = context.global.get('os');\n\nvar xml_string = \"\";\nif(msg.payload === \"\" || (typeof msg.payload.chatId !== \"undefined\")){\n    xml_string = context.flow.get('emptyManifest');\n} else {\n    xml_string = msg.payload;\n}\n//context.global.set('stringManifest', xml_string);\n\nvar manifest = XML.parse( xml_string, { preserveAttributes: true, forceArrays: true  } );\ncontext.flow.set(\"manifest\", manifest);\nvar header = manifest.InstanceHierarchy[0].InternalElement[0];\ncontext.flow.set('header', header);\n\n// set AAS Identifier\nheader.InternalElement[0].InternalElement[0]._Attribs.ID = context.flow.get('AASIdentifier');\n// set AAS virtual Location\nheader.InternalElement[0].InternalElement[0].InternalElement[0].Attribute[1].Value[0] = os.hostname();\n//set AAS namespace\nheader.InternalElement[0].InternalElement[0].Attribute[0].Value[0] = context.global.get('namespace');\n\nvar body = manifest.InstanceHierarchy[0].InternalElement[1];\ncontext.flow.set('body', body);\nvar submodelsList = [];\nif(typeof body.InternalElement !== \"undefined\"){\n    submodelsList = body.InternalElement;\n}\ncontext.flow.set('submodels', submodelsList);\nvar propertiesList = [];\nfor(var submodelIndex in submodelsList){\n        var properties = submodelsList[submodelIndex].InternalElement;\n        for(var propertyIndex in properties){\n            propertiesList.push(properties[propertyIndex]);\n        }\n    }\ncontext.flow.set('properties', propertiesList);\n\n\nmsg.manifest = manifest;\n\n//var xml_string_composed = XML.stringify( doc, 'CAEXFile');\n//msg.payload = xml_string_composed;\n//msg.doc = doc;\n\nreturn msg;","outputs":1,"noerr":0,"x":581.4569091796875,"y":390.79042053222656,"wires":[["beba4445.9af568"]]},{"id":"1301936b.3f155d","type":"actionflows_in","z":"9b0db7c7.e3ad48","name":"createManifest in","priority":"50","links":[],"scope":"global","x":246.45697021484375,"y":390.79042053222656,"wires":[["7cf57058.7d0c98"]]},{"id":"48072cab.d76f5c","type":"actionflows_out","z":"9b0db7c7.e3ad48","name":"createManifest out","links":[],"x":1392.1712297712052,"y":392.218985421317,"wires":[]},{"id":"eedebfad.39d17","type":"actionflows_in","z":"9b0db7c7.e3ad48","name":"readHeaders in","priority":"50","links":[],"scope":"global","x":251.45693969726562,"y":595.7904205322266,"wires":[["ca53db9d.b7e59"]]},{"id":"51a6081b.47de3","type":"actionflows_out","z":"9b0db7c7.e3ad48","name":"readHeaders out","links":[],"x":1396.45703125,"y":595.7903594970703,"wires":[]},{"id":"ca53db9d.b7e59","type":"unsafe-function","z":"9b0db7c7.e3ad48","name":"RetrievingHeaders...","func":"//var xml_string = msg.payload;\n//var XML = context.global.get('XML');\n\n//var doc = XML.parse( xml_string, { preserveAttributes: true, forceArrays: true  } );\n/*\nvar xml_string_composed = XML.stringify( doc, 'CAEXFile');\nmsg.composed = xml_string_composed;\n*/\n\n/*try {\n    parser = new XML.Parser(xml_string, { preserveAttributes: true, forceArrays: true} );\n}\ncatch (err) {\n    throw err;\n}*/\n\n/*var manifest = context.global.get(\"manifest\");\nvar idsList = manifest.InstanceHierarchy[0].InternalElement[0].InternalElement[0].InternalElement;\nif (typeof idsList === \"undefined\") {\n    var ids = {};\n    msg.manifest = manifest;\n    msg.payload = ids;\n    return msg;\n}\n else {\n    // loop on the submodelsList to find the propeerty\n}*/\nmsg.payload = flow.get(\"header\");\nmsg.AASID = context.flow.get('$parent.AASIdentifier');\n//msg.manifest = manifest;\nreturn msg;","outputs":1,"noerr":0,"x":1016.6949462890625,"y":595.0760040283203,"wires":[["51a6081b.47de3"]]},{"id":"6a25c193.f699a8","type":"inject","z":"9b0db7c7.e3ad48","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":249.88333129882812,"y":312.8833312988281,"wires":[["5125ba85.d6776c"]]},{"id":"5125ba85.d6776c","type":"unsafe-function","z":"9b0db7c7.e3ad48","name":"IntializeVariables","func":"//Initialize flow variables\nvar uuid = context.get('AASIdentifier')||'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });\n/*var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });*/\n/*\ncontext.flow.set(\"emptyManifest\", \"<?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?><CAEXFile FileName=\\\"Aml_as_manifest.aml\\\" SchemaVersion=\\\"2.15\\\" xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\" xsi:noNamespaceSchemaLocation=\\\"CAEX_ClassModel_V2.15.xsd\\\"><AdditionalInformation><WriterHeader><LastWritingDateTime>2018-10-16T16:12:49.4126198+01:00</LastWritingDateTime><WriterID>916578CA-FE0D-474E-A4FC-9E1719892369</WriterID><WriterName>AutomationML Editor</WriterName><WriterProjectID>unspecified</WriterProjectID><WriterProjectTitle>unspecified</WriterProjectTitle><WriterRelease>4.7.0.0</WriterRelease><WriterVendor>AutomationML e.V.</WriterVendor><WriterVendorURL>www.AutomationML.org</WriterVendorURL><WriterVersion>4.7.0.0</WriterVersion></WriterHeader></AdditionalInformation><AdditionalInformation AutomationMLVersion=\\\"2.0\\\" /><InstanceHierarchy ID=\\\"90a789b3-d644-43f7-b8ec-fdfda0bdbbcd\\\" Name=\\\"AASManifest\\\"><InternalElement ID=\\\"611c9074-ad8d-47c1-a26f-3d8d9f517ae1\\\" Name=\\\"Header\\\"><InternalElement Name=\\\"AAS Identifiers\\\" ID=\\\"921669c9-4e9a-4580-afe4-4fc3dad4b6b4\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Submodel\\\"><InternalElement Name=\\\"Identifier\\\" ID=\\\"d4e9ab54-7ce8-4001-92d9-fcd33f581510\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Property/Identifier\\\"><Attribute Name=\\\"namespace\\\" AttributeDataType=\\\"xs:anyURI\\\"><Value></Value></Attribute><InternalElement Name=\\\"Location\\\" ID=\\\"068eaa56-f1ab-4d31-972b-51165ec15124\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Location\\\"><Attribute Name=\\\"geoLocation\\\" AttributeDataType=\\\"xs:string\\\"><Attribute Name=\\\"latitude\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute><Attribute Name=\\\"longitude\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute></Attribute><Attribute Name=\\\"virtualLocation\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute></InternalElement></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/PropertyContainer\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/AASIdentification\\\" /></InternalElement><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/AASIdentification\\\" /></InternalElement><InternalElement ID=\\\"b66b5437-4fee-4ccb-8009-1d28c8159f9e\\\" Name=\\\"Body\\\"><InternalElement Name=\\\"PROPHESY-CPS Condition Monitoring\\\" ID=\\\"44152b0c-c1db-4a9a-ba5f-a38cbfff43f7\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Submodel\\\"><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>true</Value></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/PropertyContainer\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/DataSourceManifests\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/SubmodelContainer\\\" /></InternalElement><Version>1.0.0</Version></InstanceHierarchy><InterfaceClassLib Name=\\\"AASInterfaceClassLib\\\"><Version>1.0.0</Version></InterfaceClassLib><RoleClassLib Name=\\\"AASManifestRoleClassLib\\\"><RoleClass Name=\\\"PropertyContainer\\\" /><RoleClass Name=\\\"Statement\\\" /><RoleClass Name=\\\"AASIdentification\\\" /><RoleClass Name=\\\"SubmodelContainer\\\" /><RoleClass Name=\\\"ParameterContainer\\\" /><RoleClass Name=\\\"DataSourceManifests\\\" /><RoleClass Name=\\\"LiveDataset\\\" /><Version></Version></RoleClassLib><SystemUnitClassLib Name=\\\"ASSSystemUnitClassLib\\\"><SystemUnitClass Name=\\\"Submodel\\\"><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value> </Value></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/PropertyContainer\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/DataSourceManifests\\\" /></SystemUnitClass><SystemUnitClass Name=\\\"Property\\\"><Description></Description><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /><SystemUnitClass Name=\\\"DSD\\\" ID=\\\"15250019-f6d1-4721-8ffc-49e309f57d7f\\\" RefBaseClassPath=\\\"ASSSystemUnitClassLib/Property\\\"><Description>PROPHESY Data Source Definition</Description><InternalElement Name=\\\"DI\\\" ID=\\\"e45f2f0d-38e3-4d7f-bec8-1ba7a0220d95\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Property/DI\\\"><Attribute Name=\\\"communicationProtocol\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute><InternalElement Name=\\\"Parameters\\\" ID=\\\"634ca4cf-6dd7-4a90-81c4-19cc8aac07a1\\\"><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><InternalElement Name=\\\"DK\\\" ID=\\\"a40cbfd0-ac48-413f-911a-a5915c40e071\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Property/DK\\\"><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute><Attribute Name=\\\"format\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"quantityKind\\\" AttributeDataType=\\\"xs:anyURI\\\"><Value> </Value></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement></SystemUnitClass><SystemUnitClass Name=\\\"DI\\\" ID=\\\"124e5d81-d58f-40c8-ad14-8e62e003467c\\\" RefBaseClassPath=\\\"ASSSystemUnitClassLib/Property\\\"><Attribute Name=\\\"communicationProtocol\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><InternalElement Name=\\\"Parameters\\\" ID=\\\"79d506e7-b991-4b1a-aa29-8161da867a9e\\\"><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement></SystemUnitClass><SystemUnitClass Name=\\\"DK\\\" ID=\\\"6edf24e3-dc69-4857-b268-f9e355e0898f\\\" RefBaseClassPath=\\\"ASSSystemUnitClassLib/Property\\\"><Description> </Description><Attribute Name=\\\"format\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"quantityKind\\\" AttributeDataType=\\\"xs:anyURI\\\"><Value> </Value></Attribute><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute></SystemUnitClass><SystemUnitClass Name=\\\"Identifier\\\" ID=\\\"88da950a-5c94-4027-98e7-d673a9694f8b\\\"><Description></Description><Attribute Name=\\\"namespace\\\" AttributeDataType=\\\"xs:anyURI\\\"><Value></Value></Attribute><InternalElement Name=\\\"Location\\\" ID=\\\"35063688-a0e9-47ea-8bf3-1afd38d16ccb\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Location\\\"><Attribute Name=\\\"geoLocation\\\" AttributeDataType=\\\"xs:string\\\"><Attribute Name=\\\"latitude\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute><Attribute Name=\\\"longitude\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute></Attribute><Attribute Name=\\\"virtualLocation\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute></InternalElement></SystemUnitClass><SystemUnitClass Name=\\\"DSM\\\" ID=\\\"514e6b53-aa50-4a1d-8df1-3ee8df752bb3\\\" RefBaseClassPath=\\\"ASSSystemUnitClassLib/Property\\\"><Attribute Name=\\\"macAddress\\\" AttributeDataType=\\\"xs:string\\\" /><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue></Attribute><InternalElement Name=\\\"DSD\\\" ID=\\\"cb0f8a81-1c87-4199-a5cb-44a66c854fba\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Property/DSD\\\"><InternalElement Name=\\\"DI\\\" ID=\\\"b3acb469-19d5-4002-b152-012366cf130f\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Property/DI\\\"><Attribute Name=\\\"communicationProtocol\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute><InternalElement Name=\\\"Parameters\\\" ID=\\\"9884244a-7a55-4c89-9951-f3c3314a1851\\\"><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><InternalElement Name=\\\"DK\\\" ID=\\\"5767b475-369d-46aa-a839-c274fb57a5e8\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Property/DK\\\"><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute><Attribute Name=\\\"format\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"quantityKind\\\" AttributeDataType=\\\"xs:anyURI\\\"><Value> </Value></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement></SystemUnitClass></SystemUnitClass><SystemUnitClass Name=\\\"Parameter\\\" ID=\\\"e5ab0092-4b4e-4529-95bd-62a264177805\\\" RefBaseClassPath=\\\"\\\"><Description> </Description><Attribute Name=\\\"dataType\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"defaultValue\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute><Attribute Name=\\\"actualValue\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute></SystemUnitClass><SystemUnitClass Name=\\\"Location\\\" ID=\\\"b0a00287-0441-46ed-8926-df3fc07b8545\\\"><Attribute Name=\\\"geoLocation\\\" AttributeDataType=\\\"xs:string\\\"><Attribute Name=\\\"latitude\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute><Attribute Name=\\\"longitude\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute></Attribute><Attribute Name=\\\"virtualLocation\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute></SystemUnitClass><Version>1.0.0</Version></SystemUnitClassLib></CAEXFile>\");\ncontext.flow.set(\"AASIdentifier\", uuid);\ncontext.flow.set(\"manifest\", \"\");\ncontext.flow.set(\"header\", \"\");\ncontext.flow.set(\"body\", \"\");\ncontext.flow.set(\"submodels\", \"\");\ncontext.flow.set(\"properties\", \"\");\n*/\n\nvar emptyManifest = context.flow.get(\"emptyManifest\") || \"<?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?><CAEXFile FileName=\\\"Aml_as_manifest.aml\\\" SchemaVersion=\\\"2.15\\\" xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\" xsi:noNamespaceSchemaLocation=\\\"CAEX_ClassModel_V2.15.xsd\\\"><AdditionalInformation><WriterHeader><LastWritingDateTime>2018-10-16T16:12:49.4126198+01:00</LastWritingDateTime><WriterID>916578CA-FE0D-474E-A4FC-9E1719892369</WriterID><WriterName>AutomationML Editor</WriterName><WriterProjectID>unspecified</WriterProjectID><WriterProjectTitle>unspecified</WriterProjectTitle><WriterRelease>4.7.0.0</WriterRelease><WriterVendor>AutomationML e.V.</WriterVendor><WriterVendorURL>www.AutomationML.org</WriterVendorURL><WriterVersion>4.7.0.0</WriterVersion></WriterHeader></AdditionalInformation><AdditionalInformation AutomationMLVersion=\\\"2.0\\\" /><InstanceHierarchy ID=\\\"90a789b3-d644-43f7-b8ec-fdfda0bdbbcd\\\" Name=\\\"AASManifest\\\"><InternalElement ID=\\\"611c9074-ad8d-47c1-a26f-3d8d9f517ae1\\\" Name=\\\"Header\\\"><InternalElement Name=\\\"AAS Identifiers\\\" ID=\\\"921669c9-4e9a-4580-afe4-4fc3dad4b6b4\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Submodel\\\"><InternalElement Name=\\\"Identifier\\\" ID=\\\"d4e9ab54-7ce8-4001-92d9-fcd33f581510\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Property/Identifier\\\"><Attribute Name=\\\"namespace\\\" AttributeDataType=\\\"xs:anyURI\\\"><Value></Value></Attribute><InternalElement Name=\\\"Location\\\" ID=\\\"068eaa56-f1ab-4d31-972b-51165ec15124\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Location\\\"><Attribute Name=\\\"geoLocation\\\" AttributeDataType=\\\"xs:string\\\"><Attribute Name=\\\"latitude\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute><Attribute Name=\\\"longitude\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute></Attribute><Attribute Name=\\\"virtualLocation\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute></InternalElement></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/PropertyContainer\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/AASIdentification\\\" /></InternalElement><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/AASIdentification\\\" /></InternalElement><InternalElement ID=\\\"b66b5437-4fee-4ccb-8009-1d28c8159f9e\\\" Name=\\\"Body\\\"><InternalElement Name=\\\"PROPHESY-CPS Condition Monitoring\\\" ID=\\\"44152b0c-c1db-4a9a-ba5f-a38cbfff43f7\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Submodel\\\"><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>true</Value></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/PropertyContainer\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/DataSourceManifests\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/SubmodelContainer\\\" /></InternalElement><Version>1.0.0</Version></InstanceHierarchy><InterfaceClassLib Name=\\\"AASInterfaceClassLib\\\"><Version>1.0.0</Version></InterfaceClassLib><RoleClassLib Name=\\\"AASManifestRoleClassLib\\\"><RoleClass Name=\\\"PropertyContainer\\\" /><RoleClass Name=\\\"Statement\\\" /><RoleClass Name=\\\"AASIdentification\\\" /><RoleClass Name=\\\"SubmodelContainer\\\" /><RoleClass Name=\\\"ParameterContainer\\\" /><RoleClass Name=\\\"DataSourceManifests\\\" /><RoleClass Name=\\\"LiveDataset\\\" /><Version></Version></RoleClassLib><SystemUnitClassLib Name=\\\"ASSSystemUnitClassLib\\\"><SystemUnitClass Name=\\\"Submodel\\\"><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value> </Value></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/PropertyContainer\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/DataSourceManifests\\\" /></SystemUnitClass><SystemUnitClass Name=\\\"Property\\\"><Description></Description><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /><SystemUnitClass Name=\\\"DSD\\\" ID=\\\"15250019-f6d1-4721-8ffc-49e309f57d7f\\\" RefBaseClassPath=\\\"ASSSystemUnitClassLib/Property\\\"><Description>PROPHESY Data Source Definition</Description><InternalElement Name=\\\"DI\\\" ID=\\\"e45f2f0d-38e3-4d7f-bec8-1ba7a0220d95\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Property/DI\\\"><Attribute Name=\\\"communicationProtocol\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute><InternalElement Name=\\\"Parameters\\\" ID=\\\"634ca4cf-6dd7-4a90-81c4-19cc8aac07a1\\\"><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><InternalElement Name=\\\"DK\\\" ID=\\\"a40cbfd0-ac48-413f-911a-a5915c40e071\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Property/DK\\\"><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute><Attribute Name=\\\"format\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"quantityKind\\\" AttributeDataType=\\\"xs:anyURI\\\"><Value> </Value></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement></SystemUnitClass><SystemUnitClass Name=\\\"DI\\\" ID=\\\"124e5d81-d58f-40c8-ad14-8e62e003467c\\\" RefBaseClassPath=\\\"ASSSystemUnitClassLib/Property\\\"><Attribute Name=\\\"communicationProtocol\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><InternalElement Name=\\\"Parameters\\\" ID=\\\"79d506e7-b991-4b1a-aa29-8161da867a9e\\\"><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement></SystemUnitClass><SystemUnitClass Name=\\\"DK\\\" ID=\\\"6edf24e3-dc69-4857-b268-f9e355e0898f\\\" RefBaseClassPath=\\\"ASSSystemUnitClassLib/Property\\\"><Description> </Description><Attribute Name=\\\"format\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"quantityKind\\\" AttributeDataType=\\\"xs:anyURI\\\"><Value> </Value></Attribute><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute></SystemUnitClass><SystemUnitClass Name=\\\"Identifier\\\" ID=\\\"88da950a-5c94-4027-98e7-d673a9694f8b\\\"><Description></Description><Attribute Name=\\\"namespace\\\" AttributeDataType=\\\"xs:anyURI\\\"><Value></Value></Attribute><InternalElement Name=\\\"Location\\\" ID=\\\"35063688-a0e9-47ea-8bf3-1afd38d16ccb\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Location\\\"><Attribute Name=\\\"geoLocation\\\" AttributeDataType=\\\"xs:string\\\"><Attribute Name=\\\"latitude\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute><Attribute Name=\\\"longitude\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute></Attribute><Attribute Name=\\\"virtualLocation\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute></InternalElement></SystemUnitClass><SystemUnitClass Name=\\\"DSM\\\" ID=\\\"514e6b53-aa50-4a1d-8df1-3ee8df752bb3\\\" RefBaseClassPath=\\\"ASSSystemUnitClassLib/Property\\\"><Attribute Name=\\\"macAddress\\\" AttributeDataType=\\\"xs:string\\\" /><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue></Attribute><InternalElement Name=\\\"DSD\\\" ID=\\\"cb0f8a81-1c87-4199-a5cb-44a66c854fba\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Property/DSD\\\"><InternalElement Name=\\\"DI\\\" ID=\\\"b3acb469-19d5-4002-b152-012366cf130f\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Property/DI\\\"><Attribute Name=\\\"communicationProtocol\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute><InternalElement Name=\\\"Parameters\\\" ID=\\\"9884244a-7a55-4c89-9951-f3c3314a1851\\\"><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><InternalElement Name=\\\"DK\\\" ID=\\\"5767b475-369d-46aa-a839-c274fb57a5e8\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Property/DK\\\"><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute><Attribute Name=\\\"format\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"quantityKind\\\" AttributeDataType=\\\"xs:anyURI\\\"><Value> </Value></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement></SystemUnitClass></SystemUnitClass><SystemUnitClass Name=\\\"Parameter\\\" ID=\\\"e5ab0092-4b4e-4529-95bd-62a264177805\\\" RefBaseClassPath=\\\"\\\"><Description> </Description><Attribute Name=\\\"dataType\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"defaultValue\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute><Attribute Name=\\\"actualValue\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute></SystemUnitClass><SystemUnitClass Name=\\\"Location\\\" ID=\\\"b0a00287-0441-46ed-8926-df3fc07b8545\\\"><Attribute Name=\\\"geoLocation\\\" AttributeDataType=\\\"xs:string\\\"><Attribute Name=\\\"latitude\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute><Attribute Name=\\\"longitude\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute></Attribute><Attribute Name=\\\"virtualLocation\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute></SystemUnitClass><Version>1.0.0</Version></SystemUnitClassLib></CAEXFile>\";\nvar AASIdentifier = context.flow.get(\"AASIdentifier\") || uuid;\nvar manifest = context.flow.get(\"manifest\") || \"\";\nvar header = context.flow.get(\"header\") || \"\";\nvar body = context.flow.get(\"body\") || \"\";\nvar submodels = context.flow.get(\"submodels\") || \"\";\nvar properties = context.flow.get(\"properties\") || \"\";\n\ncontext.flow.set(\"emptyManifest\", emptyManifest);\ncontext.flow.set(\"AASIdentifier\", AASIdentifier);\ncontext.flow.set(\"manifest\", manifest);\ncontext.flow.set(\"header\", header);\ncontext.flow.set(\"body\", body);\ncontext.flow.set(\"submodels\", submodels);\ncontext.flow.set(\"properties\", properties);\n\nreturn msg;\n","outputs":1,"noerr":0,"x":562.0261710030692,"y":312.88333783830916,"wires":[[]]},{"id":"beba4445.9af568","type":"actionflows","z":"9b0db7c7.e3ad48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"persistManifest","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1003.88330078125,"y":390.8833312988281,"wires":[["48072cab.d76f5c"]]},{"id":"af5ba88d.9d1c08","type":"unsafe-function","z":"3bcb972f.6d23c8","name":"checkLogging","func":"//var element = JSON.stringify(msg.payload);\nlet node_aas_log = process.env.NODE_AAS_RUNNNING_UNDER_PM2;\nif(typeof node_aas_log == \"undefined\"){\n    return [msg, null];\n} else {\n    return [null, msg];\n}\n\n","outputs":2,"noerr":0,"x":808.6041870117188,"y":304.85418701171875,"wires":[["b469888e.d4acb"],["1bf01ad5.cfc365"]]},{"id":"118bc124.5c82ef","type":"logger","z":"3bcb972f.6d23c8","name":"","filename":"logs.log","maxsize":1,"maxfiles":10,"complete":"true","console":true,"file":false,"debug":false,"zip":false,"logtype":"info","x":1044.7666015625,"y":351.76666259765625,"wires":[]},{"id":"1bf01ad5.cfc365","type":"debug","z":"3bcb972f.6d23c8","name":"","active":true,"tosidebar":false,"console":true,"tostatus":false,"complete":"payload","targetType":"msg","x":1075.5,"y":398.5,"wires":[]},{"id":"ac0e2de2.99f92","type":"telegram event","z":"8267c016.e4a32","name":"","bot":"280e2990.5b984e","event":"callback_query","autoanswer":true,"x":360,"y":2760,"wires":[["965707a7.2ec1d8","97782ae1.28b6d"]]},{"id":"1dbd03c3.285294","type":"telegram sender","z":"8267c016.e4a32","name":"answer callback query","bot":"280e2990.5b984e","x":1592.509765625,"y":2753.414306640625,"wires":[[]]},{"id":"841b65f7.86f83","type":"telegram event","z":"8267c016.e4a32","name":"","bot":"280e2990.5b984e","event":"inline_query","autoanswer":false,"x":350,"y":1024,"wires":[["877643df.3279c"]]},{"id":"877643df.3279c","type":"function","z":"8267c016.e4a32","name":"create results","func":"// we have to set the results propery with the answer(s)\n// see https://core.telegram.org/bots/api#inlinequeryresult\nvar results = [\n    // result 1 is InlineQueryResultArticle\n    /*{\n        type : \"article\",\n        id : \"1\",\n        title : \"Initialize AAS\",\n        \n        // InputTextMessageContent see https://core.telegram.org/bots/api#inputmessagecontent\n        input_message_content : {\n            message_text : \"/initialize\",\n            parse_mode : \"Markdown\",\n            disable_web_page_preview : true\n        }\n    },*/\n    {\n        type : \"article\",\n        id : \"1\",\n        title : \"AAS Registry Connection Details\",\n        \n        // InputTextMessageContent see https://core.telegram.org/bots/api#inputmessagecontent\n        input_message_content : {\n            message_text : \"/getRegistryConnectionDetails\",\n            parse_mode : \"Markdown\",\n            disable_web_page_preview : true\n        }\n    },\n    \n    {\n        type : \"article\",\n        id : \"2\",\n        title : \"AAS DataStreaming Connection Details\",\n        \n        // InputTextMessageContent see https://core.telegram.org/bots/api#inputmessagecontent\n        input_message_content : {\n            message_text : \"/getDataStreamingConnectionDetails\",\n            parse_mode : \"Markdown\",\n            disable_web_page_preview : true\n        }\n    },\n    \n    {\n        type : \"article\",\n        id : \"3\",\n        title : \"AAS Identifier\",\n        \n        // InputTextMessageContent see https://core.telegram.org/bots/api#inputmessagecontent\n        input_message_content : {\n            message_text : \"/gaetAASIdentifier\",\n            parse_mode : \"Markdown\",\n            disable_web_page_preview : true\n        }\n    },\n    \n    // result 2 is InlineQueryResultArticle\n    {\n        type : \"article\",\n        id : \"4\",\n        title : \"AAS Manifest\",\n        \n        // InputTextMessageContent see https://core.telegram.org/bots/api#inputmessagecontent\n        input_message_content : {\n            message_text : \"/getManifest\",\n            parse_mode : \"Markdown\",\n            disable_web_page_preview : true\n        }\n    },\n    \n    {\n        type : \"article\",\n        id : \"5\",\n        title : \"AAS Location\",\n        \n        // InputTextMessageContent see https://core.telegram.org/bots/api#inputmessagecontent\n        input_message_content : {\n            message_text : \"/getLocation\",\n            parse_mode : \"Markdown\",\n            disable_web_page_preview : true\n        }\n    },\n    \n    {\n        type : \"article\",\n        id : \"6\",\n        title : \"AAS Submodels\",\n        \n        // InputTextMessageContent see https://core.telegram.org/bots/api#inputmessagecontent\n        input_message_content : {\n            message_text : \"/getSubmodels\",\n            parse_mode : \"Markdown\",\n            disable_web_page_preview : true\n        }\n    }\n    \n    /*{\n        type : \"article\",\n        id : \"5\",\n        title : \"AAS Properties\",\n        \n        // InputTextMessageContent see https://core.telegram.org/bots/api#inputmessagecontent\n        input_message_content : {\n            message_text : \"/getProperties\",\n            parse_mode : \"Markdown\",\n            disable_web_page_preview : true\n        }\n    }*/\n    ];\n\n\nmsg.payload.results = results;\nreturn msg;","outputs":1,"noerr":0,"x":720,"y":1024,"wires":[["e3d780a.41198"]]},{"id":"e3d780a.41198","type":"telegram sender","z":"8267c016.e4a32","name":"","bot":"280e2990.5b984e","x":1270,"y":1024,"wires":[[]]},{"id":"97782ae1.28b6d","type":"function","z":"8267c016.e4a32","name":"evaluate callback query","func":"// This is a sample switch to demonstrate the handling of the user input.\nif(msg.payload.content === \"load yes really\")\n{\n    // Hide the keyboard and forget the messageId\n    msg.payload.type = 'deleteMessage';\n    msg.payload.options = context.global.keyboard.messageId\n    context.global.keyboard.messageId = null;\n    \n    // You could also send a editMessageReplyMarkup with an empty reply_markup here\n    return [ null, msg ];\n}\nelse\n{\n    var show_alert = false; // you can set this to true to open a dialog with the answer in the client.\n    \n    // msg.payload.content contains the callback data from the keyboard.\n    // You may change this value here.\n    msg.payload.options = show_alert;\n    \n    return [ msg, null ];\n}","outputs":"2","noerr":0,"x":657.0097045898438,"y":2868.7476196289062,"wires":[["1dbd03c3.285294"],["af11c681.5943a8"]]},{"id":"965707a7.2ec1d8","type":"function","z":"8267c016.e4a32","name":"edit inline keyboard message","func":"// This is the message id of the initial keyboard that is simply exchanged by a new one.\nvar messageId = context.global.keyboard.messageId;\n\n// This is a sample of how to send a second inline keyboard with modified buttons\nvar reply_markup = JSON.stringify({\n    \"inline_keyboard\": [[\n                {\n                    \"text\": \"Are you really sure?\",\n                    \"callback_data\": \"load yes really\"            \n                }, \n                {\n                    \"text\": \"No\",\n                    \"callback_data\": \"load no\"            \n                }]\n            ]\n  });\n\n\nvar options = {\n    chat_id : msg.payload.chatId,\n    reply_markup : reply_markup,\n    message_id : messageId\n};\n\nmsg.payload.type = 'editMessageReplyMarkup';\nmsg.payload.content = reply_markup;\nmsg.payload.options = options;\n\nreturn [ msg ];\n","outputs":"1","noerr":0,"x":664.917236328125,"y":2761.416748046875,"wires":[["1dbd03c3.285294"]]},{"id":"af11c681.5943a8","type":"function","z":"8267c016.e4a32","name":"upload message","func":"msg.payload.type = 'message';\nmsg.payload.content = 'select the new Manifest';\nmsg.payload.options = {reply_to_message_id : msg.payload.messageId}\nreturn [ msg ];\n","outputs":"1","noerr":0,"x":884.0830078125,"y":2875.41650390625,"wires":[["6593b581.66837c"]]},{"id":"6593b581.66837c","type":"telegram sender","z":"8267c016.e4a32","name":"send question","bot":"280e2990.5b984e","x":1069.083251953125,"y":2875.4166870117188,"wires":[["f6b75d55.4e1a2"]]},{"id":"f6b75d55.4e1a2","type":"telegram reply","z":"8267c016.e4a32","name":"get reply","bot":"280e2990.5b984e","x":1237.4163818359375,"y":2875.4166870117188,"wires":[["d18df848.f8471"]]},{"id":"d18df848.f8471","type":"function","z":"8267c016.e4a32","name":"show upload","func":"if(msg.payload.type === 'document')\n{\n    return msg;   \n}\n","outputs":1,"noerr":0,"x":1392.41650390625,"y":2873.75,"wires":[["6f21c076.b6628","1dbd03c3.285294"]]},{"id":"6f21c076.b6628","type":"debug","z":"8267c016.e4a32","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1538.2498168945312,"y":2872.9165649414062,"wires":[]},{"id":"9ef3b988.42cdc","type":"debug","z":"8267c016.e4a32","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":973.7496337890625,"y":1339.8330078125,"wires":[]},{"id":"c85e0d7b.9717e8","type":"unsafe-function","z":"8267c016.e4a32","name":"","func":"var hound = context.global.get('hound');\n\n//retrieve model directory to be watched\nvar modelFilepath = context.global.get(\"ModelDir\");\n\n// Create a file watcher.\nvar watcher = hound.watch(modelFilepath)\n\n// Add callbacks for file and directory events.  The change event only applies\n// to files.\n\n\nwatcher.on('create', function(file, stats) {\n  //console.log(file + ' was created');\n  node.send({payload:file});\n})\n//watcher.clear()\n\nnode.on('close', function() {\n    watcher.clear();\n});\n\nreturn null;","outputs":1,"noerr":0,"x":709.5830078125,"y":1338.5831909179688,"wires":[["9ef3b988.42cdc"]]},{"id":"e599c24d.c37378","type":"http in","z":"ea9678a6.7fc468","name":"","url":"/aas/manifest/submodels","method":"get","upload":false,"swaggerDoc":"3bc5f61f.36fe92","x":160,"y":1380,"wires":[["92c60878.09f828","13cd3692.4c04b1"]]},{"id":"dc61f1ab.085098","type":"http in","z":"ea9678a6.7fc468","name":"","url":"/aas/manifest/submodel/:id","method":"get","upload":false,"swaggerDoc":"92a8032.48cc98","x":170,"y":1580,"wires":[["14f82f2.52df3d1","fc071a75.9dc878"]]},{"id":"1074f178.6572f7","type":"http in","z":"ea9678a6.7fc468","name":"","url":"/aas/manifest/headers","method":"get","upload":false,"swaggerDoc":"308b8c02.88ff84","x":150,"y":880,"wires":[["b6a8fb51.64c6d8","32f8f931.764856"]]},{"id":"82c2b63e.a5269","type":"http response","z":"ea9678a6.7fc468","name":"","statusCode":"","headers":{},"x":1850,"y":880,"wires":[]},{"id":"bb4ede7f.a73df8","type":"http response","z":"ea9678a6.7fc468","name":"","statusCode":"","headers":{},"x":1830,"y":1380,"wires":[]},{"id":"9f0423af.8fcdb","type":"comment","z":"ea9678a6.7fc468","name":"External Interface - Manifest - Configuration","info":"","x":190,"y":40,"wires":[]},{"id":"a70c6126.52b63","type":"http response","z":"ea9678a6.7fc468","name":"","statusCode":"","headers":{},"x":1830,"y":1580,"wires":[]},{"id":"301bba95.7f9616","type":"http in","z":"ea9678a6.7fc468","name":"","url":"/aas/manifest/addSubmodel/","method":"post","upload":false,"swaggerDoc":"","x":170,"y":1780,"wires":[["228cc7dc.acb748","d17f6aae.3a7f78"]]},{"id":"1ab0fb6c.63404d","type":"http in","z":"ea9678a6.7fc468","name":"","url":"/aas/manifest/removeSubmodel/:id","method":"delete","upload":false,"swaggerDoc":"","x":200,"y":1960,"wires":[["329e1dd5.1825fa","1b34e557.e00bf3"]]},{"id":"258ec74f.273c28","type":"http in","z":"ea9678a6.7fc468","name":"","url":"/aas/manifest/updateSubmodel","method":"put","upload":false,"swaggerDoc":"","x":180,"y":2140,"wires":[["e5a1e63e.299278","f994d19d.da4258"]]},{"id":"be8b2954.b1652","type":"http response","z":"ea9678a6.7fc468","name":"","statusCode":"","headers":{},"x":1830,"y":1780,"wires":[]},{"id":"6da23218.e9b50c","type":"http response","z":"ea9678a6.7fc468","name":"","statusCode":"","headers":{},"x":1830,"y":1960,"wires":[]},{"id":"69767f8f.5dd148","type":"http response","z":"ea9678a6.7fc468","name":"","statusCode":"","headers":{},"x":1830,"y":2140,"wires":[]},{"id":"228cc7dc.acb748","type":"debug","z":"ea9678a6.7fc468","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":480,"y":1740,"wires":[]},{"id":"329e1dd5.1825fa","type":"debug","z":"ea9678a6.7fc468","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":480,"y":1900,"wires":[]},{"id":"14f82f2.52df3d1","type":"debug","z":"ea9678a6.7fc468","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":490,"y":1540,"wires":[]},{"id":"e5a1e63e.299278","type":"debug","z":"ea9678a6.7fc468","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":490,"y":2100,"wires":[]},{"id":"9d59e2a7.0b5708","type":"http in","z":"ea9678a6.7fc468","name":"","url":"/aas/manifest/liveData/subscribe/property/:id","method":"put","upload":false,"swaggerDoc":"","x":220,"y":3280,"wires":[["22de2fbd.b15698"]]},{"id":"57cbc123.2153b8","type":"http in","z":"ea9678a6.7fc468","name":"","url":"/aas/manifest/liveData/unsubscribe/property/:id","method":"put","upload":false,"swaggerDoc":"","x":230,"y":3440,"wires":[["863bacf8.ec603"]]},{"id":"4857378d.3ace4","type":"http response","z":"ea9678a6.7fc468","name":"","statusCode":"","headers":{},"x":1830,"y":3440,"wires":[]},{"id":"e21be4d8.1a2538","type":"debug","z":"ea9678a6.7fc468","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":730,"y":280,"wires":[]},{"id":"92c60878.09f828","type":"debug","z":"ea9678a6.7fc468","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":490,"y":1340,"wires":[]},{"id":"2443c749.666888","type":"http in","z":"ea9678a6.7fc468","name":"","url":"aas/persistManifest/","method":"post","upload":false,"swaggerDoc":"","x":150,"y":540,"wires":[["e4d328b6.73fd3","b0301286.7cb55"]]},{"id":"d028aace.7bf9a","type":"http response","z":"ea9678a6.7fc468","name":"","statusCode":"","headers":{},"x":1850,"y":540,"wires":[]},{"id":"e4d328b6.73fd3","type":"debug","z":"ea9678a6.7fc468","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":410,"y":580,"wires":[]},{"id":"6c738f44.4274a8","type":"http response","z":"ea9678a6.7fc468","name":"","statusCode":"","headers":{},"x":1850,"y":740,"wires":[]},{"id":"e39d261e.1e0a8","type":"http in","z":"ea9678a6.7fc468","name":"","url":"aas/manifest","method":"get","upload":false,"swaggerDoc":"893dcb92.868828","x":120,"y":740,"wires":[["c4f77505.6dbe48","34c7b931.5b2c2e"]]},{"id":"9ca41c14.3d21f","type":"comment","z":"ea9678a6.7fc468","name":"External Interface - Data - Operations on Submodels","info":"","x":220,"y":1300,"wires":[]},{"id":"ab0e745b.9f1b18","type":"comment","z":"ea9678a6.7fc468","name":"External Interface - Data - Operations on Properties","info":"","x":200,"y":2260,"wires":[]},{"id":"22dae032.d5127","type":"http in","z":"ea9678a6.7fc468","name":"","url":"/aas/manifest/property/:id","method":"get","upload":false,"swaggerDoc":"","x":160,"y":2340,"wires":[["c1adbf1e.90f08","b1c9bda.76f004"]]},{"id":"9bc9c1e.4cf5bc","type":"http response","z":"ea9678a6.7fc468","name":"","statusCode":"","headers":{},"x":1830,"y":2340,"wires":[]},{"id":"c1adbf1e.90f08","type":"debug","z":"ea9678a6.7fc468","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":480,"y":2300,"wires":[]},{"id":"2f2bec24.e2a6fc","type":"http in","z":"ea9678a6.7fc468","name":"","url":"/aas/manifest/addProperty/:id","method":"post","upload":false,"swaggerDoc":"","x":180,"y":2560,"wires":[["44b93b0b.cbda8c","fe652f1b.0ce43"]]},{"id":"7e438514.a4ae94","type":"http response","z":"ea9678a6.7fc468","name":"","statusCode":"","headers":{},"x":1830,"y":2560,"wires":[]},{"id":"44b93b0b.cbda8c","type":"debug","z":"ea9678a6.7fc468","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":490,"y":2520,"wires":[]},{"id":"44a90f05.83b57","type":"debug","z":"ea9678a6.7fc468","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":490,"y":2700,"wires":[]},{"id":"77d42abc.2d16f4","type":"http in","z":"ea9678a6.7fc468","name":"","url":"/aas/manifest/removeProperty/:id","method":"delete","upload":false,"swaggerDoc":"","x":190,"y":2740,"wires":[["44a90f05.83b57","a213e076.c06b78"]]},{"id":"bdc7eb83.b0df88","type":"http response","z":"ea9678a6.7fc468","name":"","statusCode":"","headers":{},"x":1830,"y":2740,"wires":[]},{"id":"65a458f8.c62068","type":"http in","z":"ea9678a6.7fc468","name":"","url":"/aas/manifest/updateProperty","method":"put","upload":false,"swaggerDoc":"","x":170,"y":2900,"wires":[["d98fee70.b09f6","1fc369f.e9ea116"]]},{"id":"e49bccf2.2ac54","type":"http response","z":"ea9678a6.7fc468","name":"","statusCode":"","headers":{},"x":1830,"y":2900,"wires":[]},{"id":"d98fee70.b09f6","type":"debug","z":"ea9678a6.7fc468","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":490,"y":2860,"wires":[]},{"id":"6c7a5793.3b1058","type":"ui_template","z":"7d8ace.ba650534","group":"f6ab83e8.416e5","name":"Submodels","order":1,"width":"20","height":"22","format":"<html>\n    <!--<script>\n        this.scope.sendRequest = function(op){\n            var reqType = (op.type == \"operation\")?\"invoke\":(op.type == \"event\")?\"subscribe\":\"error, unkown type!!\";\n            this.send({payload:{action:op.action,to:op.to,requestType:reqType}});\n        }\n    </script>\n    !-->\n    <head>\n        <link rel=\"stylesheet\" href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css\" integrity=\"sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO\" crossorigin=\"anonymous\">\n        <script src=\"https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js\" integrity=\"sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49\" crossorigin=\"anonymous\"></script>\n    \n        <script>\n            this.scope.sendRequest = function(op){\n                var reqType = (op.type == \"operation\")?\"invoke\":(op.type == \"event\")?\"subscribe\":\"error, unkown type!!\";\n                this.send({payload:{action:op.action,to:op.to,requestType:reqType}});\n            }\n            this.scope.extractingElement = function(element){\n                this.send({payload:element});\n            }\n            this.scope.init = function(){\n                this.send({payload:\"init\"});\n            }\n        \n        </script>\n    </head>\n        <div id=\"deck\" class=\"card-group\" ng-init=\"init()\">\n            <div class=\"card-body\">\n                <div class=\"input-group input-group-sm mb-3\">\n                    <input type=\"text\" class=\"form-control\" placeholder=\"global search...\" aria-label=\"Sizing example input\" aria-describedby=\"inputGroup-sizing-sm\" ng-model=\"search\">\n                </div>\n                <div class=\"card text-white bg-light mb-3\">\n                    <ul class=\"list-group list-group-flush\" >\n                        <li class=\"list-group-item\">\n                            <a class=\"text-dark\" data-toggle=\"collapse\" href=\"#collapse12\">Submodels</a>\n                            <ul id=\"collapse12\" class=\"list-group list-group-flush panel-collapse collapse\">\n                                <li class=\"list-group-item list-group-item-info\" ng-repeat=\"submodel in msg.payload.InternalElement | filter:search\">\n                                    <a class=\"text-white\" data-toggle=\"collapse\" href=\"#collapse22_{{submodel._Attribs.ID}}\" ng-if=\"submodel != ''\">{{submodel._Attribs.Name}}: <strong>{{submodel._Attribs.ID}}</strong></a>\n                                        <ul id=\"collapse22_{{submodel._Attribs.ID}}\" class=\"list-group list-group-flush panel-collapse collapse\">\n                                            <li class=\"list-group-item list-group-item-light\" ng-repeat=\"dataSourceManifest in submodel.InternalElement | filter:search\" ng-init=\"dsmIndex=$index\">\n                                                \n                                                <div class=\"custom-control custom-checkbox\">\n                                                    <input type=\"checkbox\" class=\"custom-control-input\" ng-disabled=\"dataSourceManifest.Attribute[3].Value[0]=='True'\" id=\"{{dataSourceManifest._Attribs.ID}}_{{$index}}\" ng-click=\"extractingElement(dataSourceManifest)\">\n                                                    <label class=\"custom-control-label\" for=\"{{dataSourceManifest._Attribs.ID}}_{{$index}}\"><a ng-class=\"dataSourceManifest.Attribute[4].Value[0]=='True' ? 'text-success' : 'text-warning'\" data-toggle=\"collapse\" href=\"#collapse32_{{dataSourceManifest._Attribs.ID}}\">{{dataSourceManifest._Attribs.Name}}: <strong>{{dataSourceManifest._Attribs.ID}}</strong>\n                                                     <br ng-if=\"dataSourceManifest.Attribute[2].Value[0]\">{{dataSourceManifest.Attribute[2]._Attribs.Name}}: <strong>{{dataSourceManifest.Attribute[2].Value[0]}}</strong></a></label>\n                                                    <!--<label class=\"custom-control-label\">{{$index}}</label>!-->\n                                                </div>\n                                                <!--<a class=\"text-black-50\" data-toggle=\"collapse\" href=\"#collapse32\">{{dataSourceManifest._Attribs.Name}}: <strong>{{dataSourceManifest._Attribs.ID}}</strong></a>!-->\n                                                    <ul id=\"collapse32_{{dataSourceManifest._Attribs.ID}}\" class=\"list-group list-group-flush panel-collapse collapse\">\n                                                        <li class=\"list-group-item list-group-item-info\" ng-repeat=\"dataSourceDefinition in dataSourceManifest.InternalElement | filter:search\" ng-init=\"dsdIndex=$index\">\n                                                            <a class=\"text-white\" data-toggle=\"collapse\" href=\"#collapse42_{{dataSourceDefinition._Attribs.ID}}_{{dsmIndex}}_{{dsdIndex}}\">{{dataSourceDefinition._Attribs.Name}}: <strong>{{dataSourceDefinition._Attribs.ID}}</strong>\n                                                            <br ng-if=\"dataSourceDefinition.Description[0]\">Description: <strong>{{dataSourceDefinition.Description[0]}}</strong></a>\n                                                                <ul id=\"collapse42_{{dataSourceDefinition._Attribs.ID}}_{{dsmIndex}}_{{dsdIndex}}\" class=\"list-group list-group-flush panel-collapse collapse\">\n                                                                    <li ng-repeat=\"element in dataSourceDefinition.InternalElement | filter:search\" ng-init=\"dkIndex=$index\" ng-if=\"element._Attribs.RefBaseSystemUnitPath == 'AASSystemUnitClassLib/Property/DK'\" class=\"list-group-item list-group-item-light\">\n                                                                        <a class=\"text-black-50\" data-toggle=\"collapse\" href=\"#collapse52_{{element._Attribs.ID}}_{{dsmIndex}}_{{dsdIndex}}_{{dkIndex}}\">{{element._Attribs.Name}}: <strong>{{element._Attribs.ID}}</strong></a>\n                                                                            <ul id=\"collapse52_{{element._Attribs.ID}}_{{dsmIndex}}_{{dsdIndex}}_{{dkIndex}}\" class=\"list-group list-group-flush panel-collapse collapse\">\n                                                                                <li ng-if=\"element.Description[0]\" class=\"list-group-item list-group-item-info\">\n                                                                                    <a class=\"text-white\">Description: <strong>{{element.Description[0]}}</strong></a>\n                                                                                </li>\n                                                                                <li ng-repeat=\"attribute in element.Attribute\" class=\"list-group-item list-group-item-info\">\n                                                                                    <a class=\"text-white\">{{attribute._Attribs.Name}}: <strong>{{attribute.Value[0]}}</strong></a>\n                                                                                </li>\n                                                                            </ul>\n                                                                    </li>\n                                                                </ul>\n                                                        </li>\n                                                    </ul>\n                                            </li>\n                                        </ul>\n                                    \n                                </li>\n                            </ul>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n</html>\n\n","storeOutMessages":false,"fwdInMessages":false,"templateScope":"local","x":2253.749755859375,"y":336.7867126464844,"wires":[["60ef575c.f58e8"]]},{"id":"2c43380c.f6523","type":"http request","z":"7d8ace.ba650534","name":"","method":"use","ret":"txt","url":"","tls":"","x":1365.2498779296875,"y":283.79669189453125,"wires":[["864e5b23.c8f378","67dffbb6.f142c4"]]},{"id":"864e5b23.c8f378","type":"debug","z":"7d8ace.ba650534","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1510,"y":327.5466613769531,"wires":[]},{"id":"67dffbb6.f142c4","type":"unsafe-function","z":"7d8ace.ba650534","name":"SubmodelsProcessing","func":"//Retreiving Libraries from the Settings.json file\nvar XML = context.global.get('XML');\nvar os = context.global.get('os');\n\nvar xml_string = msg.payload;\n\nvar submodels = XML.parse( xml_string, { preserveAttributes: true, forceArrays: true  } );\nmsg.payload = submodels;\n\nreturn msg;","outputs":1,"noerr":0,"x":1660.2498779296875,"y":284.9167175292969,"wires":[["56a2cd8c.2f4cec"]]},{"id":"51e8b05d.b1dd68","type":"debug","z":"7d8ace.ba650534","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":2235.2498779296875,"y":242.6666259765625,"wires":[]},{"id":"ccb7fc70.8999f","type":"http request","z":"7d8ace.ba650534","name":"","method":"use","ret":"txt","url":"","tls":"","x":1340.0000915527344,"y":121.66668701171875,"wires":[["9e8dc389.290c88","c1141344.40dda"]]},{"id":"add94708.30fb78","type":"inject","z":"7d8ace.ba650534","name":"","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":530.9583740234375,"y":53.333335876464844,"wires":[["ebf3faa7.75bbb"]]},{"id":"7d59c7c.6f85cb8","type":"ui_button","z":"7d8ace.ba650534","name":"Refresh button","group":"768e00.eab492","order":3,"width":"3","height":"1","passthru":true,"label":"Refresh","tooltip":"","color":"","bgcolor":"#14524e","icon":"cached","payload":"","payloadType":"str","topic":"","x":540,"y":260,"wires":[["3d2ec782.b349e8","6767f67a.0cccb"]]},{"id":"d5f1fdb3.5b54d8","type":"actionflows_in","z":"7d8ace.ba650534","name":"informAASUI_ManifestChange in","priority":"50","links":[],"scope":"global","x":864.3751831054688,"y":477.0832824707031,"wires":[["c2cc786f.78dd8","fb45eae4.37d4b8","3d2ec782.b349e8"]]},{"id":"81e39917.51ef08","type":"gate","z":"8267c016.e4a32","name":"","controlTopic":"control","defaultState":"closed","openCmd":"open","closeCmd":"close","toggleCmd":"toggle","defaultCmd":"default","x":541.749755859375,"y":1338.4165649414062,"wires":[["c85e0d7b.9717e8"]]},{"id":"cd4b5630.5f0f","type":"function","z":"8267c016.e4a32","name":"confirmation message","func":"context.global.keyboard = { pending : true };\n\nvar opts = {\n  reply_to_message_id: msg.payload.messageId,\n  reply_markup: JSON.stringify({\n    keyboard: [\n      ['Yes'],\n      ['No']],\n      'resize_keyboard' : true, \n      'one_time_keyboard' : true\n  })\n};\n\nmsg.payload.content = 'Do you want to initialize the Asset Administration Shell?';\nmsg.payload.options = opts;\n\nreturn [ msg ];\n","outputs":"1","noerr":0,"x":696.25,"y":186.2500228881836,"wires":[["f4703793.054f78"]]},{"id":"f4703793.054f78","type":"telegram sender","z":"8267c016.e4a32","name":"show keyboard","bot":"280e2990.5b984e","x":1250,"y":187.5000228881836,"wires":[[]]},{"id":"404e8ac5.fd18fc","type":"actionflows","z":"8267c016.e4a32","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"initFromBot","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":980,"y":261.2500228881836,"wires":[["8436876c.df8378"]]},{"id":"8436876c.df8378","type":"telegram sender","z":"8267c016.e4a32","name":"send response","bot":"280e2990.5b984e","x":1247.5,"y":260.0000228881836,"wires":[[]]},{"id":"d7296ad2.6602c","type":"telegram sender","z":"8267c016.e4a32","name":"send response","bot":"280e2990.5b984e","x":1242.5,"y":307.5000228881836,"wires":[[]]},{"id":"cb8b34f.1220bc8","type":"function","z":"8267c016.e4a32","name":"create response","func":"if(context.global.keyboard.pending)\n{\n    context.global.keyboard.pending = false;\n    \n    if(msg.payload.content === 'Yes')\n    {\n        msg.payload.content = 'AAS Initialized';\n        return [msg, null];   \n    }\n    else\n    {\n        msg.payload.content = 'No Action';\n        return [null, msg];   \n    }\n}\n","outputs":"2","noerr":0,"x":672.5,"y":266.2500228881836,"wires":[["404e8ac5.fd18fc"],["d7296ad2.6602c"]]},{"id":"ed86c0a0.b5c86","type":"actionflows_in","z":"8267c016.e4a32","name":"notifyBOT_SubmodelUpdate in","priority":"50","links":[],"scope":"global","x":408.624755859375,"y":1459.6666259765625,"wires":[["78a0632a.be3254"]]},{"id":"966f1b51.f396b","type":"telegram sender","z":"8267c016.e4a32","name":"","bot":"280e2990.5b984e","x":1100.499755859375,"y":1462.1666259765625,"wires":[[]]},{"id":"78a0632a.be3254","type":"function","z":"8267c016.e4a32","name":"notify submodel update","func":"msg.payload = {content : \"Submodel updated\", chatId : -330239092, type : \"message\"}\nreturn msg;","outputs":1,"noerr":0,"x":797.999755859375,"y":1459.6666259765625,"wires":[["966f1b51.f396b","86b6924d.857bd","86e11515.f75"]]},{"id":"86b6924d.857bd","type":"actionflows_out","z":"8267c016.e4a32","name":"notifyBOT_SubmodelUpdate out","links":[],"x":1151.124755859375,"y":1517.1666259765625,"wires":[]},{"id":"86e11515.f75","type":"debug","z":"8267c016.e4a32","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1022.999755859375,"y":1403.4166259765625,"wires":[]},{"id":"e9033021.e5b67","type":"telegram command","z":"8267c016.e4a32","name":"/getLocation","command":"/getLocation","bot":"280e2990.5b984e","strict":false,"x":350,"y":724,"wires":[["e6fa0f17.dd647"],[]]},{"id":"e6fa0f17.dd647","type":"function","z":"8267c016.e4a32","name":"send Namespace","func":"msg.payload.content = context.global.get('namespace');\nmsg.payload.type = 'message';\n\n/* type can be one of the following\nphoto\naudio\nvideo\nsticker\nvoice\ndocument\n*/\n\nreturn msg;","outputs":1,"noerr":0,"x":730,"y":724,"wires":[["ae9f1cc1.5fdc2"]]},{"id":"ae9f1cc1.5fdc2","type":"telegram sender","z":"8267c016.e4a32","name":"","bot":"280e2990.5b984e","x":1270,"y":724,"wires":[[]]},{"id":"5569f434.3c09bc","type":"actionflows_in","z":"8267c016.e4a32","name":"notifyBOT_SubmodelAdd in","priority":"50","links":[],"scope":"global","x":399.249755859375,"y":1640.5,"wires":[["d3c547dd.e49cf"]]},{"id":"b792946.2004be8","type":"telegram sender","z":"8267c016.e4a32","name":"","bot":"280e2990.5b984e","x":1101.124755859375,"y":1643,"wires":[[]]},{"id":"d3c547dd.e49cf","type":"function","z":"8267c016.e4a32","name":"notify submodel add","func":"msg.payload = {content : \"Submodel added\", chatId : -330239092, type : \"message\"}\nreturn msg;","outputs":1,"noerr":0,"x":788.624755859375,"y":1640.5,"wires":[["b792946.2004be8","edecc95d.072","a869057.f473cf8"]]},{"id":"edecc95d.072","type":"actionflows_out","z":"8267c016.e4a32","name":"notifyBOT_SubmodelAdd out","links":[],"x":1141.749755859375,"y":1698,"wires":[]},{"id":"a869057.f473cf8","type":"debug","z":"8267c016.e4a32","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1023.624755859375,"y":1584.25,"wires":[]},{"id":"4b683a08.7c661c","type":"actionflows_in","z":"8267c016.e4a32","name":"notifyBOT_SubmodelRemove in","priority":"50","links":[],"scope":"global","x":410.9163818359375,"y":1803.833251953125,"wires":[["2059346e.c4804c"]]},{"id":"6f22b428.819474","type":"telegram sender","z":"8267c016.e4a32","name":"","bot":"280e2990.5b984e","x":1102.7913818359375,"y":1806.333251953125,"wires":[[]]},{"id":"2059346e.c4804c","type":"function","z":"8267c016.e4a32","name":"notify submodel remove","func":"msg.payload = {content : \"Submodel removed\", chatId : -330239092, type : \"message\"}\nreturn msg;","outputs":1,"noerr":0,"x":800.2913818359375,"y":1803.833251953125,"wires":[["6f22b428.819474","9bc73b64.ca0f6","9604831a.29c02"]]},{"id":"9bc73b64.ca0f6","type":"actionflows_out","z":"8267c016.e4a32","name":"notifyBOT_SubmodelRemove out","links":[],"x":1163.4163818359375,"y":1861.333251953125,"wires":[]},{"id":"9604831a.29c02","type":"debug","z":"8267c016.e4a32","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1025.2913818359375,"y":1747.583251953125,"wires":[]},{"id":"adf3f009.173d7","type":"actionflows_in","z":"8267c016.e4a32","name":"notifyBOT_PropertyUpdate in","priority":"50","links":[],"scope":"global","x":400.9163818359375,"y":1963.8331298828125,"wires":[["d834c072.962a08"]]},{"id":"820aaf56.91169","type":"telegram sender","z":"8267c016.e4a32","name":"","bot":"280e2990.5b984e","x":1102.7913818359375,"y":1966.3331298828125,"wires":[[]]},{"id":"d834c072.962a08","type":"function","z":"8267c016.e4a32","name":"notify property update","func":"msg.payload = {content : \"Property updated\", chatId : -330239092, type : \"message\"}\nreturn msg;","outputs":1,"noerr":0,"x":790.2913818359375,"y":1963.8331298828125,"wires":[["820aaf56.91169","14d7f5d.8ca7c8a","edf88744.598aa8"]]},{"id":"14d7f5d.8ca7c8a","type":"actionflows_out","z":"8267c016.e4a32","name":"notifyBOT_PropertyUpdate out","links":[],"x":1153.4163818359375,"y":2021.3331298828125,"wires":[]},{"id":"edf88744.598aa8","type":"debug","z":"8267c016.e4a32","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1025.2913818359375,"y":1907.5831298828125,"wires":[]},{"id":"5e796dfb.8b5664","type":"actionflows_in","z":"8267c016.e4a32","name":"notifyBOT_PropertyAdd in","priority":"50","links":[],"scope":"global","x":394.249755859375,"y":2118.8331298828125,"wires":[["9491de04.02591"]]},{"id":"10f8468a.1471a1","type":"telegram sender","z":"8267c016.e4a32","name":"","bot":"280e2990.5b984e","x":1106.124755859375,"y":2121.3331298828125,"wires":[[]]},{"id":"9491de04.02591","type":"function","z":"8267c016.e4a32","name":"notify property add","func":"msg.payload = {content : \"Property added\", chatId : -330239092, type : \"message\"}\nreturn msg;","outputs":1,"noerr":0,"x":783.624755859375,"y":2118.8331298828125,"wires":[["10f8468a.1471a1","c7f837e7.999aa8","33ba1d53.eb67ea"]]},{"id":"c7f837e7.999aa8","type":"actionflows_out","z":"8267c016.e4a32","name":"notifyBOT_PropertyAdd out","links":[],"x":1146.749755859375,"y":2176.3331298828125,"wires":[]},{"id":"33ba1d53.eb67ea","type":"debug","z":"8267c016.e4a32","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1028.624755859375,"y":2062.5831298828125,"wires":[]},{"id":"4dbe2c8d.5de8d4","type":"actionflows_in","z":"8267c016.e4a32","name":"notifyBOT_PropertyRemove in","priority":"50","links":[],"scope":"global","x":400.9163818359375,"y":2282.1666259765625,"wires":[["d941044f.519f58"]]},{"id":"d06d9720.0248e","type":"telegram sender","z":"8267c016.e4a32","name":"","bot":"280e2990.5b984e","x":1102.7913818359375,"y":2284.6666259765625,"wires":[[]]},{"id":"d941044f.519f58","type":"function","z":"8267c016.e4a32","name":"notify property remove","func":"msg.payload = {content : \"Property removed\", chatId : -330239092, type : \"message\"}\nreturn msg;","outputs":1,"noerr":0,"x":790.2913818359375,"y":2282.1666259765625,"wires":[["d06d9720.0248e","9911efdb.08e6c","e863363b.e02fb8"]]},{"id":"9911efdb.08e6c","type":"actionflows_out","z":"8267c016.e4a32","name":"notifyBOT_PropertyRemove out","links":[],"x":1153.4163818359375,"y":2339.6666259765625,"wires":[]},{"id":"e863363b.e02fb8","type":"debug","z":"8267c016.e4a32","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1025.2913818359375,"y":2225.9166259765625,"wires":[]},{"id":"1ce44fdb.a44b4","type":"actionflows_in","z":"8267c016.e4a32","name":"notifyBOT_AASInitialized in","priority":"50","links":[],"scope":"global","x":400.9163818359375,"y":2448.8331298828125,"wires":[["1dc16641.f64672"]]},{"id":"569a1024.a8b3b","type":"telegram sender","z":"8267c016.e4a32","name":"","bot":"280e2990.5b984e","x":1102.7913818359375,"y":2451.3331298828125,"wires":[[]]},{"id":"1dc16641.f64672","type":"function","z":"8267c016.e4a32","name":"notify property remove","func":"msg.payload = {content : \"AAS initialized\", chatId : -330239092, type : \"message\"}\nreturn msg;","outputs":1,"noerr":0,"x":790.2913818359375,"y":2448.8331298828125,"wires":[["569a1024.a8b3b","b5371743.19b08","f8bdab43.8592"]]},{"id":"b5371743.19b08","type":"actionflows_out","z":"8267c016.e4a32","name":"notifyBOT_AASInitialized out","links":[],"x":1143.4163818359375,"y":2506.3331298828125,"wires":[]},{"id":"f8bdab43.8592","type":"debug","z":"8267c016.e4a32","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1025.2913818359375,"y":2392.5831298828125,"wires":[]},{"id":"a4db3987.03ee8","type":"ui_button","z":"7d8ace.ba650534","name":"Get button","group":"768e00.eab492","order":1,"width":"3","height":"1","passthru":false,"label":"Get","tooltip":"","color":"","bgcolor":"#14524e","icon":"swap_vert","payload":"","payloadType":"str","topic":"","x":1090,"y":660,"wires":[["a1d76fdf.b08488"]]},{"id":"cab792c1.20911","type":"ui_button","z":"7d8ace.ba650534","name":"Subscribe button","group":"768e00.eab492","order":2,"width":"3","height":"1","passthru":false,"label":"Subscribe","tooltip":"","color":"","bgcolor":"#14524e","icon":"publish","payload":"","payloadType":"str","topic":"","x":1116.666748046875,"y":837.8568115234375,"wires":[["54db2fe.ecf295"]]},{"id":"ebf3faa7.75bbb","type":"unsafe-function","z":"7d8ace.ba650534","name":"flowVariables","func":"context.flow.set('selectedElements', []);\ncontext.flow.set('logs', []);\nreturn msg;\n//context.flow.set('Body', \"\");","outputs":1,"noerr":0,"x":687.0001220703125,"y":53.333351135253906,"wires":[["3d2ec782.b349e8","728607de.0dfeb8"]]},{"id":"241d037.98ca7fc","type":"debug","z":"7d8ace.ba650534","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":2719.166748046875,"y":335.7500305175781,"wires":[]},{"id":"bfc5c906.83ac7","type":"debug","z":"7d8ace.ba650534","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":2637.5956420898438,"y":779.6666259765625,"wires":[]},{"id":"a1d76fdf.b08488","type":"unsafe-function","z":"7d8ace.ba650534","name":"LiveDataToGet","func":"//Retreiving Libraries from the Settings.json file\nvar outputMsgs = [];\nvar selectedElements = context.flow.get('selectedElements');\nfor(var element in selectedElements){\n    var msg = {payload:selectedElements[element]._Attribs.ID};\n    msg.url = context.global.get('namespace') + \"/aas/manifest/liveData/request/property/\" + selectedElements[element]._Attribs.ID;\n    outputMsgs.push(msg);\n    \n}\n\nreturn [outputMsgs];","outputs":1,"noerr":0,"x":1371.666748046875,"y":660,"wires":[["770e9dbc.0f4b3c","cc5923fc.113028"]]},{"id":"63390148.661a7","type":"ui_template","z":"7d8ace.ba650534","group":"29ad3d07.d8e48a","name":"Log","order":0,"width":"30","height":"20","format":"<html>\n<head>\n    <link rel=\"stylesheet\" href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css\" integrity=\"sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO\" crossorigin=\"anonymous\">\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js\" integrity=\"sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49\" crossorigin=\"anonymous\"></script>\n    \n    <script>\n        (function(scope) {\n            scope.logs = [];\n        \n            scope.$watch('msg', function(msg){\n                if (msg) {\n                    if (msg.payload) {\n                        scope.logs = msg.payload;\n                    }\n                }\n            });\n            scope.init = function() {\n                //scope.observations = [];\n                scope.send({payload:scope.observations});\n            }\n        })(scope)\n    </script>\n</head>\n    <div id=\"deck\" ng-init=\"init()\">\n        <table class=\"table table-sm\">\n            <thead class=\"text-dark\">\n                <tr>\n                    <th scope=\"col\">AAS Id</th>\n                    <th scope=\"col\">_msgId</th>\n                    <th scope=\"col\">Timestamp</th>\n                    <th scope=\"col\">Value</th>\n                </tr>\n            </thead>\n            <tbody>\n            <tr class=\"table-info\" ng-repeat=\"i in logs\">\n                <td><a class=\"text-dark\">{{i.AASID}}</a></td>\n                <td><a class=\"text-dark\">{{i._msgid}}</a></td>\n                <td><a class=\"text-dark\">{{i.time}}</a></td>\n                <td><a class=\"text-dark\">{{i.value}}</a></td>\n                <!--<td style=\"cursor:pointer;\" ng-click=\"remove(i)\" title=\"Remove\">&times;</td>!-->\n            </tr>\n            </tbody>\n            \n        </table>\n    </div>\n</html>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":2501.2858276367188,"y":778.476318359375,"wires":[["bfc5c906.83ac7","242427cd.6274"]]},{"id":"9b0915ac.d4d8a8","type":"http in","z":"ea9678a6.7fc468","name":"","url":"/aas/manifest/liveData/request/property/:id","method":"get","upload":false,"swaggerDoc":"","x":210,"y":3160,"wires":[["182aefcf.77c97","1a98e30a.e61aed"]]},{"id":"dc58b665.bb412","type":"http response","z":"ea9678a6.7fc468","name":"","statusCode":"","headers":{},"x":1830,"y":3280,"wires":[]},{"id":"182aefcf.77c97","type":"debug","z":"ea9678a6.7fc468","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":480,"y":3220,"wires":[]},{"id":"770e9dbc.0f4b3c","type":"http request","z":"7d8ace.ba650534","name":"","method":"GET","ret":"txt","paytoqs":false,"url":"","tls":"","proxy":"","x":1541.047607421875,"y":778.0952758789062,"wires":[["4533e60b.c3ab1","170bd409.ffbd34"]]},{"id":"69245b91.53b864","type":"unsafe-function","z":"7d8ace.ba650534","name":"LogsProcessing","func":"//Retreiving Libraries from the Settings.json file\nif(msg.payload){\n    var logs = context.flow.get('logs');\n    //for(var log in msg.payload){\n    //    logs.push(msg.payload[log]);\n    //}\n    var log = {};\n    log.value = msg.payload;\n    log.time = Date.now();\n    log._msgid = msg._msgid;\n    log.AASID = context.global.get('AASIdentifier');\n    if(logs.length > 25){\n        logs.pop();\n        logs.push(log);    \n    } else {\n        logs.push(log);\n    }\n    \n    context.flow.set('logs', logs);\n    var outputMsg = {};\n    //msg.payload = logs;\n    outputMsg.payload = logs;\n    return outputMsg;\n}\nmsg.payload = \"\";\nreturn msg; ","outputs":1,"noerr":0,"x":1980.6190795898438,"y":778.09521484375,"wires":[["e2529be0.c4e458","63390148.661a7"]]},{"id":"c64e2869.80a34","type":"delay","z":"7d8ace.ba650534","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":2577.3333740234375,"y":850.6666259765625,"wires":[["63390148.661a7"]]},{"id":"242427cd.6274","type":"unsafe-function","z":"7d8ace.ba650534","name":"GetLog","func":"//Retreiving Libraries from the Settings.json file\nmsg.payload = context.flow.get('logs');\nreturn msg; ","outputs":1,"noerr":0,"x":2314,"y":847.333251953125,"wires":[["c64e2869.80a34","91426882.04c28"]]},{"id":"91426882.04c28","type":"debug","z":"7d8ace.ba650534","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":2506.1666259765625,"y":885.9998779296875,"wires":[]},{"id":"717e5183.075fe","type":"actionflows_in","z":"8267c016.e4a32","name":"notifyBOT_NewLivedata in","priority":"50","links":[],"scope":"global","x":390.9163818359375,"y":2602.1666259765625,"wires":[["9e1abd6f.52ed3"]]},{"id":"9e1abd6f.52ed3","type":"function","z":"8267c016.e4a32","name":"notify livedata available","func":"//msg.observation = msg.payload;\nmsg.payload = {content : \"New Livedata Available: \" + msg.payload[0].id, chatId : -330239092, type : \"message\"}\nreturn msg;","outputs":1,"noerr":0,"x":795.9163818359375,"y":2603.4998779296875,"wires":[["6ce5b20b.3244a4","8575f280.49e3f8","f33993c.1f61b7"]]},{"id":"6ce5b20b.3244a4","type":"actionflows_out","z":"8267c016.e4a32","name":"notifyBOT_NewLivedata out","links":[],"x":1140.9163818359375,"y":2643.8331298828125,"wires":[]},{"id":"8575f280.49e3f8","type":"telegram sender","z":"8267c016.e4a32","name":"","bot":"280e2990.5b984e","x":1110.9163818359375,"y":2603.8331298828125,"wires":[[]]},{"id":"f33993c.1f61b7","type":"debug","z":"8267c016.e4a32","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1024.249755859375,"y":2560.4998779296875,"wires":[]},{"id":"cc5923fc.113028","type":"debug","z":"7d8ace.ba650534","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1524.1906127929688,"y":627.5238647460938,"wires":[]},{"id":"ca28ebcb.8d0c2","type":"debug","z":"7d8ace.ba650534","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1970,"y":840,"wires":[]},{"id":"ef7ecfd2.cbe18","type":"ui_template","z":"7d8ace.ba650534","group":"39f23940.8c51ae","name":"DataInterfaces","order":1,"width":"30","height":"20","format":"<html>\n<head>\n    <link rel=\"stylesheet\" href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css\" integrity=\"sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO\" crossorigin=\"anonymous\">\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js\" integrity=\"sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49\" crossorigin=\"anonymous\"></script>\n    \n    <script>\n        (function(scope) {\n            scope.$watch('msg', function(msg){\n                if (msg) {\n                    if (msg.payload) {\n\n                        scope.interfaces = [];\n                        var submodels = msg.payload.InternalElement; \n                        for(var submodel in submodels){\n                            //var dsms = msg.payload.InternalElement[0].InternalElement;\n                            var dsms = submodels[submodel].InternalElement;\n                            for(var dsm in dsms){\n                                var dataInterfaceElement = new Object();\n                                dataInterfaceElement.DSMId = dsms[dsm]._Attribs.ID;\n                                var dsds = dsms[dsm].InternalElement;\n                                //scope.send({payload:dsds});\n                                for(var dsd in dsds){\n                                    dataInterfaceElement.DSDId = dsds[dsd]._Attribs.ID;\n                                    dataInterfaceElement.DSDName = dsds[dsd]._Attribs.Name;\n                                    var elements = dsds[dsd].InternalElement;\n                                    for(var element in elements){\n                                        if(elements[element]._Attribs.RefBaseSystemUnitPath.includes(\"DI\")){\n                                            dataInterfaceElement.DIId = elements[element]._Attribs.ID;\n                                            var parameters = elements[element].InternalElement[0].InternalElement;\n                                            var parametersString = \"\";\n                                            for(var parameter in parameters){\n                                                parametersString = parametersString + parameters[parameter].Attribute[2].Value[0] + \", \";\n                                            }\n                                            dataInterfaceElement.Parameters = parametersString;\n                                        } else {\n                                            dataInterfaceElement.DKId = elements[element]._Attribs.ID;\n                                        }\n                                    }\n                                    //scope.send({payload:dataInterfaceElement});\n                                    scope.interfaces.push(dataInterfaceElement);\n                                }\n                            }\n                        \n                        }\n                        scope.send({payload:scope.interfaces})\n                    }\n                }\n            });\n/*            scope.init = function() {\n                //scope.observations = [];\n                scope.send({payload:scope.observations});\n            }*/\n        })(scope)\n    </script>\n</head>\n    <div id=\"deck\">\n        <table class=\"table table-sm\">\n            <thead class=\"text-dark\">\n                <tr>\n                    <th scope=\"col\">DSM Id</th>\n                    <th scope=\"col\">DSD Id</th>\n                    <th scope=\"col\">DSD Name</th>\n                    <th scope=\"col\">DK Id</th>\n                    <th scope=\"col\">DI Id</th>\n                    <th scope=\"col\">Parameters</th>\n                </tr>\n            </thead>\n            <tbody>\n            <tr ng-repeat=\"i in interfaces\">\n                <td><a class=\"text-dark\">{{i.DSMId}}</a></td>\n                <td><a class=\"text-dark\">{{i.DSDId}}</a></td>\n                <td><a class=\"text-dark\">{{i.DSDName}}</a></td>\n                <td><a class=\"text-dark\">{{i.DKId}}</a></td>\n                <td><a class=\"text-dark\">{{i.DIId}}</a></td>\n                <td><a class=\"text-dark\">{{i.Parameters}}</a></td>\n                <!--<td style=\"cursor:pointer;\" ng-click=\"remove(i)\" title=\"Remove\">&times;</td>!-->\n            </tr>\n            </tbody>\n            \n        </table>\n    </div>\n</html>","storeOutMessages":false,"fwdInMessages":false,"templateScope":"local","x":2261.964630126953,"y":384.5595703125,"wires":[["416abb6c.97abd4"]]},{"id":"416abb6c.97abd4","type":"debug","z":"7d8ace.ba650534","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":2473.928466796875,"y":384.3809509277344,"wires":[]},{"id":"dc3f0ea8.ecbc2","type":"ui_template","z":"7d8ace.ba650534","group":"86fd9f.309a7a6","name":"Logo / Clock","order":0,"width":0,"height":0,"format":"<script id=\"clockScript1\" type=\"text/javascript\">\n    var clockInterval;\n    $(function () {\n        if (clockInterval) return;\n\n        //add logo\n        var div1 = $('<div/>');\n        var logo = new Image();\n\n        logo.src = '\\\\images\\\\PROPHESY_LOGO_3.png'\n        logo.height = 45;\n        div1[0].style.margin = '10px auto';\n\n        div1.append(logo);\n\n        //add clock\n        var div2 = $('<div/>');\n        var p = $('<p/>');\n\n        div2.append(p);\n        div2[0].style.margin = '5px';\n\n        function displayTime() {\n            p.text(new Date().toLocaleString());\n        }\n        \n        clockInterval = setInterval(displayTime, 1000);\n\n        //add to toolbar when it's available\n        var addToToolbarTimer;\n        \n        function addToToolbar() {\n            var toolbar = $('.md-toolbar-tools');\n            \n            if(!toolbar.length) return;\n            \n            toolbar.append(div1);\n            toolbar.append(div2);\n            clearInterval(addToToolbarTimer);\n        }\n        addToToolbarTimer = setInterval(addToToolbar, 100);\n    });\n</script>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"global","x":621.7860412597656,"y":1713.5716857910156,"wires":[[]]},{"id":"dc2c0a71.0f9c28","type":"node-red-contrib-httpauth","z":"ea9678a6.7fc468","name":"handle http Auth","file":"ab09af3a.fe2f2","cred":"","authType":"Basic","realm":"","username":"","password":"","hashed":false,"x":530,"y":340,"wires":[["e21be4d8.1a2538","7819ca53.7c8b1c"]]},{"id":"60ef575c.f58e8","type":"unsafe-function","z":"7d8ace.ba650534","name":"LiveDataSelectedElements","func":"//Retreiving Libraries from the Settings.json file\nif(msg.payload != \"init\"){\n    var selectedElements = context.flow.get('selectedElements');\n    var selectedElement = msg.payload;\n    \n    if(selectedElements.lenght == 0){\n        //selectedElements.push(selectedElement._Attribs.ID);\n        selectedElements.push(selectedElement);\n    } else {\n        var found = false;\n        for(var element in selectedElements){\n            //if(selectedElement._Attribs.ID == selectedElements[element]){\n            if(selectedElement._Attribs.ID == selectedElements[element]._Attribs.ID){\n                selectedElements.splice(element, 1);\n                found = true;\n                break;\n            }\n        }\n        if(!found){\n            //selectedElements.push(selectedElement._Attribs.ID);\n            selectedElements.push(selectedElement);\n        }\n    }\n    context.flow.set('selectedElements', selectedElements);\n    msg.payload = selectedElements;\n    return msg;\n} else {\n    context.flow.set('selectedElements', []);\n    return msg;\n}","outputs":1,"noerr":0,"x":2508.75,"y":336.5000305175781,"wires":[["241d037.98ca7fc"]]},{"id":"3f8e306a.7f4748","type":"ui_form","z":"7d8ace.ba650534","name":"Dashboard Login-In","label":"","group":"393bcf13.7c294","order":0,"width":"0","height":"0","options":[{"label":"username","value":"username","type":"text","required":true},{"label":"password","value":"password","type":"password","required":true}],"formValue":{"username":"","password":""},"payload":"","submit":"submit","cancel":"cancel","topic":"","x":143.33322143554688,"y":1249.6666259765625,"wires":[["1109ffa9.20594","da18936f.2b3568"]]},{"id":"b09ff54a.65016","type":"debug","z":"7d8ace.ba650534","name":"Debug Account Log ","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","x":529.3332214355469,"y":1211.6666259765625,"wires":[]},{"id":"1b067cb8.3e9dd3","type":"comment","z":"7d8ace.ba650534","name":"Sign-In Section","info":"","x":135.33322143554688,"y":1186.6666259765625,"wires":[]},{"id":"1109ffa9.20594","type":"function","z":"7d8ace.ba650534","name":"Account Log","func":"var accountlog =  flow.get(\"accountlog\") || [] ; \n\naccountlog.push({ accessAt : new Date(), username : msg.payload.username})\n\nflow.set(\"accountlog\", accountlog);\n\nmsg.payload = accountlog;\nreturn msg;","outputs":1,"noerr":0,"x":334.3332214355469,"y":1213.6666259765625,"wires":[["b09ff54a.65016"]]},{"id":"da18936f.2b3568","type":"function","z":"7d8ace.ba650534","name":"Account Verification","func":"var accounts =  flow.get(\"accounts\") || [ { username : \"admin\", password : \"admin\"},{ username : \"guest\", password : \"guest\"}] ; \n\nvar username = msg.payload.username ;\nvar password = msg.payload.password ; \n\nvar newMsg = {}; newMsg.payload = 1;\n\naccounts.forEach(function ( account ){\n    if ( account.username == username ) {\n       newMsg.payload = 2;\n       if ( account.password == password ) {\n           newMsg.payload = 0;\n       } \n    }\n});\n\nreturn newMsg;","outputs":1,"noerr":0,"x":358.3332214355469,"y":1283.6666259765625,"wires":[["969db7bf.a4b4a8"]]},{"id":"969db7bf.a4b4a8","type":"switch","z":"7d8ace.ba650534","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"str"},{"t":"eq","v":"1","vt":"str"},{"t":"eq","v":"2","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":526.3332214355469,"y":1285.6666259765625,"wires":[["f28d5391.1f92e"],["82dda543.21197"],["c8176a73.442a2"]]},{"id":"f28d5391.1f92e","type":"function","z":"7d8ace.ba650534","name":"= 0 : Success","func":"/* activate session timer */\nvar sessionTimer =  flow.get(\"sessionTimer\") || 0; \nvar currTime = Date.now();\nflow.set(\"sessionTimer\", currTime);\n\n/* ui-control payload */\nvar msg = {};\n\n/*msg.payload = { group: {\n    show : [\"Login_SensorData\", \"Login_History\"],\n    hide : [\"Login_Signin\"]\n}*/\n\n//msg.payload = {tab: \"Manifest\"};\n\nmsg.payload = { group: {\n        show : [\"Login_Commands\", \"Login_Configuration\"],\n        hide : [\"Login_Login\"]\n    }\n};\n\nreturn msg;","outputs":1,"noerr":0,"x":686.3332214355469,"y":1251.6666259765625,"wires":[["90f12d3c.b0a0a"]]},{"id":"82dda543.21197","type":"function","z":"7d8ace.ba650534","name":"= 1 : Unknown User","func":"msg.payload = \"Username Doesn't exist!!!\"\nreturn msg;","outputs":1,"noerr":0,"x":706.3332214355469,"y":1290.6666259765625,"wires":[["70a2a59.b0a7e5c"]]},{"id":"c8176a73.442a2","type":"function","z":"7d8ace.ba650534","name":"= 2 : Wrong Password","func":"msg.payload = \"Invalid Password\";\nreturn msg;","outputs":1,"noerr":0,"x":709.3332214355469,"y":1329.6666259765625,"wires":[["70a2a59.b0a7e5c"]]},{"id":"90f12d3c.b0a0a","type":"ui_ui_control","z":"7d8ace.ba650534","name":"Go to Manifest Group","x":955.3332214355469,"y":1250.6666259765625,"wires":[[]]},{"id":"70a2a59.b0a7e5c","type":"ui_toast","z":"7d8ace.ba650534","position":"dialog","displayTime":"3","highlight":"","outputs":1,"ok":"OK","cancel":"","topic":"Authentication Failed","name":"Authentication Failure Dialog","x":976.3332214355469,"y":1311.6666259765625,"wires":[[]]},{"id":"1251077a.c640d1","type":"comment","z":"7d8ace.ba650534","name":"Session Management - 15 secs for this demo","info":"","x":224.83322143554688,"y":1369.6666326522827,"wires":[]},{"id":"17419747.888de9","type":"inject","z":"7d8ace.ba650534","name":"Timer","topic":"","payload":"","payloadType":"date","repeat":"3","crontab":"","once":false,"onceDelay":0.1,"x":125.33321762084961,"y":1472.6666316986084,"wires":[["ba9aa2e1.9730c","4761d9e4.70797"]]},{"id":"ba9aa2e1.9730c","type":"function","z":"7d8ace.ba650534","name":"Detect Session Timer","func":"var sessionTimer =  flow.get(\"sessionTimer\") || 0; \nvar currTime = Date.now();\nvar SESSION_TIMEOUT = 15000; //15 secs\n\nif ( sessionTimer === 0 /* Inactive, No user signed in */ ) {\n    msg.payload = 2;\n} else {\n    if ( currTime - sessionTimer > SESSION_TIMEOUT ) {\n      msg.payload = 0;  \n    } else {\n      msg.payload = 1;        \n    }\n}\nreturn msg;","outputs":1,"noerr":0,"x":309.3332214355469,"y":1434.6666240692139,"wires":[["fdc3ffc7.a36148"]]},{"id":"fdc3ffc7.a36148","type":"switch","z":"7d8ace.ba650534","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"str"},{"t":"eq","v":"1","vt":"str"},{"t":"eq","v":"2","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":483.33322525024414,"y":1434.6666240692139,"wires":[["d482433f.861d3"],["e789d6f6.4ee558"],["aa45773c.018468"]]},{"id":"d482433f.861d3","type":"function","z":"7d8ace.ba650534","name":"Time-Out","func":"/* activate session timer */\nvar sessionTimer =  flow.get(\"sessionTimer\") || 0; \nflow.set(\"sessionTimer\", 0);\n\nmsg.payload = \"Session Expired! Please singin again!\";\nreturn msg;","outputs":1,"noerr":0,"x":623.3332214355469,"y":1394.6666259765625,"wires":[["3e1ce1da.53364e","2e316cfa.4a8ab4"]]},{"id":"3e1ce1da.53364e","type":"ui_toast","z":"7d8ace.ba650534","position":"dialog","displayTime":"3","highlight":"","outputs":1,"ok":"OK","cancel":"","topic":"Session Timeout","name":"Time-Out Dialog","x":812.8332672119141,"y":1371.6666355133057,"wires":[[]]},{"id":"c8df991c.6d7278","type":"ui_ui_control","z":"7d8ace.ba650534","name":"Go to Signin Group","x":1020.8332405090332,"y":1412.6666231155396,"wires":[[]]},{"id":"2e316cfa.4a8ab4","type":"function","z":"7d8ace.ba650534","name":"Login Redirection","func":"var msg = {};\n//msg.payload = {tab: \"Login\"};\nmsg.payload = { group: {\n    hide : [\"Login_Commands\", \"Login_Configuration\"],\n    show : [\"Login_Login\"]\n}\n};\nreturn msg;","outputs":1,"noerr":0,"x":823.3332672119141,"y":1412.6666288375854,"wires":[["c8df991c.6d7278"]]},{"id":"f7b16566.a5f73","type":"ui_toast","z":"7d8ace.ba650534","position":"bottom right","displayTime":"1","highlight":"","outputs":0,"ok":"OK","cancel":"","topic":"Timer","name":"Display Remaining Time","x":639.8332138061523,"y":1536.6666240692139,"wires":[]},{"id":"4761d9e4.70797","type":"function","z":"7d8ace.ba650534","name":"Calculating Remaining Time (Debug)","func":"var sessionTimer =  flow.get(\"sessionTimer\") || 0; \nvar currTime = Date.now();\nvar remainingSecs = Math.floor((15000 - (currTime - sessionTimer))/1000) + 1;\n    \nif ( sessionTimer == 0 /* Inactive, No user signed in */ ) {\n    return null;\n} else {\n    \n    if ( remainingSecs <= 7 ) msg.payload = \"Remaining : \" + remainingSecs + \" secs\";  \n    else return null;\n}\nreturn msg;","outputs":1,"noerr":0,"x":357.3332214355469,"y":1535.666639328003,"wires":[["f7b16566.a5f73"]]},{"id":"1ce621c0.ece746","type":"ui_ui_control","z":"7d8ace.ba650534","name":"Stay in Sensor Group","x":1009.8331909179688,"y":1450.666618347168,"wires":[[]]},{"id":"e789d6f6.4ee558","type":"function","z":"7d8ace.ba650534","name":"Configuration Group","func":"var msg = {};\n\n//msg.payload = {tab: \"Manifest\"};\n\nmsg.payload = { group: {\n    show : [\"Login_Commands\", \"Login_Configuration\"],\n    hide : [\"Login_Signin\"]\n}\n};\nreturn msg;","outputs":1,"noerr":0,"x":697.8332214355469,"y":1455.6666202545166,"wires":[["1ce621c0.ece746"]]},{"id":"aa45773c.018468","type":"function","z":"7d8ace.ba650534","name":"Login Group","func":"var msg = {};\n\n//msg.payload = {tab: \"Login\"};\n/*msg.payload = { group: {\n    hide : [\"Login_SensorData\", \"Login_History\"],\n    show : [\"Login_Signin\"]\n}\n};*/\n\nmsg.payload = { group: {\n    hide : [\"Login_Commands\", \"Login_Configuration\"],\n    show : [\"Login_Login\"]\n}\n};\n\nreturn msg;","outputs":1,"noerr":0,"x":674.8332443237305,"y":1495.6666479110718,"wires":[["3a7757a8.0ec068"]]},{"id":"3a7757a8.0ec068","type":"ui_ui_control","z":"7d8ace.ba650534","name":"Go to Signin Group","x":1014.8332977294922,"y":1491.666660308838,"wires":[[]]},{"id":"63fd0564.4a8cec","type":"ui_toast","z":"7d8ace.ba650534","position":"bottom right","displayTime":"1","highlight":"","outputs":0,"ok":"OK","cancel":"","topic":"Manifest","name":"Notify Manifest Changes","x":1550,"y":480,"wires":[]},{"id":"7bde8a95.5e789c","type":"ui_template","z":"7d8ace.ba650534","group":"395267b0.ccc668","name":"Submodels_Config","order":1,"width":"20","height":"22","format":"<html>\n    <!--<script>\n        this.scope.sendRequest = function(op){\n            var reqType = (op.type == \"operation\")?\"invoke\":(op.type == \"event\")?\"subscribe\":\"error, unkown type!!\";\n            this.send({payload:{action:op.action,to:op.to,requestType:reqType}});\n        }\n    </script>\n    !-->\n    <head>\n        <link rel=\"stylesheet\" href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css\" integrity=\"sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO\" crossorigin=\"anonymous\">\n        <script src=\"https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js\" integrity=\"sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49\" crossorigin=\"anonymous\"></script>\n    \n        <script>\n        \n\n            (function(scope) {\n                \n                scope.prop = {   \"type\": \"select\", \n                \"values\": [ \"true\", \"false\"] \n                };\n                \n                scope.init = function() {\n                //scope.observations = [];\n                    scope.send({payload:\"init\"});\n                }\n                \n                scope.extractingElement = function(element, visibility){\n                    scope.send({payload:element});\n                }\n                \n                scope.$watch('msg', function(msg){\n                if (msg) {\n                    if (msg.payload) {\n                        var submodels = msg.payload.InternalElement;\n                         for(var submodel in submodels){\n                            submodels[submodel].Attribute[0].Value[0] = submodels[submodel].Attribute[0].Value[0].toLowerCase();\n                            var dsms = submodels[submodel].InternalElement;\n                            for(var dsm in dsms){\n                                dsms[dsm].Attribute[1].Value[0] = dsms[dsm].Attribute[1].Value[0].toLowerCase(); \n                            }\n                        }\n                    }\n                }\n            });\n                \n            })(scope)\n       /*this.scope.extractingElement = function(element, visibility){\n                this.send({payload:element});\n        }*/\n        </script>\n    </head>\n        <div id=\"deck\" class=\"card-group\" ng-init=\"init()\">\n            <div class=\"card-body\">\n                <div class=\"card text-white bg-light mb-3\">\n                    <ul class=\"list-group list-group-flush\" >\n                        \n                        <li class=\"list-group-item\">\n                            <a class=\"text-dark\" data-toggle=\"collapse\" href=\"#collapse13\">Submodels</a>\n                            <ul id=\"collapse13\" class=\"list-group list-group-flush panel-collapse collapse\">\n                                <li class=\"list-group-item list-group-item-info\" ng-repeat=\"submodel in msg.payload.InternalElement\">\n                                    <a class=\"text-white\" data-toggle=\"collapse\" href=\"#collapse23\">{{submodel._Attribs.Name}}: <strong>{{submodel._Attribs.ID}}</strong></a>\n                                    <div class=\"form-group\">\n                                        <a class=\"text-white\">Visibility: </a>\n                                        <select id=\"submodelVisibility\" class=\"form-control form-control-sm\" ng-model=\"submodel.Attribute[0].Value[0]\" ng-options = \"x for x in prop.values\" ng-click=\"extractingElement(msg.payload)\"></select>\n                                    </div>\n                                        <ul id=\"collapse23\" class=\"list-group list-group-flush panel-collapse collapse\">\n                                            <li class=\"list-group-item list-group-item-light\" ng-repeat=\"dataSourceManifest in submodel.InternalElement\">\n                                                    <a class=\"text-black-50\" data-toggle=\"collapse\" href=\"#collapse33\">{{dataSourceManifest._Attribs.Name}}: <strong>{{dataSourceManifest._Attribs.ID}}</strong></a>\n                                                    <div class=\"form-group\">\n                                                        <a class=\"text-black-50\">Visibility: </a>\n                                                        <select class=\"form-control form-control-sm\" ng-model = \"dataSourceManifest.Attribute[1].Value[0]\" ng-options = \"v for v in prop.values\" ng-click=\"extractingElement(msg.payload)\"></select>\n                                                    </div>\n                                                    <ul id=\"collapse33\" class=\"list-group list-group-flush panel-collapse collapse\">\n                                                        <li class=\"list-group-item list-group-item-info\" ng-repeat=\"dataSourceDefinition in dataSourceManifest.InternalElement\">\n                                                            <a class=\"text-white\">{{dataSourceDefinition._Attribs.Name}}: <strong>{{dataSourceDefinition._Attribs.ID}}</strong>\n                                                            <br ng-if=\"dataSourceDefinition.Description[0]\">Description: <strong>{{dataSourceDefinition.Description[0]}}</strong></a>\n                                                        </li>\n                                                    </ul>\n                                            </li>\n                                        </ul>\n                                </li>\n                            </ul>\n                        </li>\n                        \n                    </ul>\n                </div>\n            </div>\n        </div>\n</html>\n\n","storeOutMessages":false,"fwdInMessages":false,"templateScope":"local","x":235.833251953125,"y":935.8336791992188,"wires":[["568331bd.a46ec","90a81e5d.343b4"]]},{"id":"67cd088d.dd2e7","type":"debug","z":"7d8ace.ba650534","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":761.25,"y":889.1672973632812,"wires":[]},{"id":"8d83cda7.fb6178","type":"rbe","z":"7d8ace.ba650534","name":"","func":"rbe","gap":"","start":"","inout":"out","property":"payload","x":626.2501220703125,"y":938.3338317871094,"wires":[["67cd088d.dd2e7","328088de.d49f18"]]},{"id":"80d0d6c6.5f95d8","type":"ui_button","z":"7d8ace.ba650534","name":"","group":"9a7b1b88.32cc4","order":4,"width":0,"height":0,"passthru":false,"label":"Submit","tooltip":"","color":"","bgcolor":"","icon":"done","payload":"","payloadType":"str","topic":"","x":127.70828247070312,"y":649.9999389648438,"wires":[["f8ddd75.f021828"]]},{"id":"1eeacb62.786ee5","type":"actionflows","z":"7d8ace.ba650534","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"readSubmodelsFromAASUI","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":209.708251953125,"y":1038.5836791992188,"wires":[["1c9097b.1e306e8","7bde8a95.5e789c"]]},{"id":"1c9097b.1e306e8","type":"debug","z":"7d8ace.ba650534","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":405.833251953125,"y":1073.3336791992188,"wires":[]},{"id":"328088de.d49f18","type":"unsafe-function","z":"7d8ace.ba650534","name":"setFlowVariable","func":"for(var index in msg.payload.InternalElement){\n    delete msg.payload.InternalElement[index].$$hashKey;\n}\ncontext.flow.set('Body', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":860,"y":940,"wires":[["572d7e2f.2419d8"]]},{"id":"f8ddd75.f021828","type":"unsafe-function","z":"7d8ace.ba650534","name":"getFlowVariable","func":"msg.payload = context.flow.get('Body');\nreturn msg;","outputs":1,"noerr":0,"x":365.8332824707031,"y":648.7499389648438,"wires":[["f7b5ea64.dc4ac"]]},{"id":"f7b5ea64.dc4ac","type":"actionflows","z":"7d8ace.ba650534","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"updateSubmodelsFromAASUI","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":590.8334350585938,"y":704.10693359375,"wires":[["7fdb423c.4944ec","7d59c7c.6f85cb8"]]},{"id":"7fdb423c.4944ec","type":"debug","z":"7d8ace.ba650534","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":862.9762573242188,"y":702.8572387695312,"wires":[]},{"id":"568331bd.a46ec","type":"switch","z":"7d8ace.ba650534","name":"","property":"payload","propertyType":"msg","rules":[{"t":"neq","v":"init","vt":"str"},{"t":"eq","v":"init","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":419.16650390625,"y":935.0003051757812,"wires":[["8d83cda7.fb6178"],["1eeacb62.786ee5"]]},{"id":"370804af.c2f93c","type":"ui_template","z":"7d8ace.ba650534","group":"59a9a12f.dc2d08","name":"Counters","order":1,"width":"10","height":"12","format":"<html>\n    <head>\n        <link rel=\"stylesheet\" href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css\" integrity=\"sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO\" crossorigin=\"anonymous\">\n        <script src=\"https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js\" integrity=\"sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49\" crossorigin=\"anonymous\"></script>\n    \n        <script>\n        (function(scope) {\n            scope.$watch('msg', function(msg){\n                if (msg) {\n                    if (msg.payload) {\n                        var submodels = msg.payload.InternalElement;\n                        scope.submodelsCounter = submodels.length;\n                        scope.dsmsCounter = 0;\n                        scope.disCounter = 0;\n                        for(var submodel in submodels){\n                            if(typeof submodels[submodel].InternalElement != \"undefined\" && submodels[submodel].InternalElement != null){\n                                var dsms = submodels[submodel].InternalElement;\n                                scope.dsmsCounter = scope.dsmsCounter + dsms.length;\n                                for(var dsm in dsms){\n                                    var dsd = dsms[dsm].InternalElement[0];\n                                    var elements = dsd.InternalElement;\n                                    for(var element in elements){\n                                        if(elements[element]._Attribs.RefBaseSystemUnitPath.includes(\"DI\")){\n                                            scope.disCounter = scope.disCounter + 1;\n                                        }\n                                    }\n                                    \n                                }\n                            }\n                        }\n                    }\n                }\n            });\n/*            scope.init = function() {\n                //scope.observations = [];\n                scope.send({payload:scope.observations});\n            }*/\n        })(scope)\n    </script>\n    </head>\n        <div class=\"container\">\n            <h5><span class=\"badge badge-warning\">Submodels: {{submodelsCounter}}</span></h5>\n            <h5><span class=\"badge badge-warning\">Data Source Manifests: {{dsmsCounter}}</span></h5>\n            <h5><span class=\"badge badge-warning\">Data Interfaces: {{disCounter}}</span></h5>\n        </div>\n\n</html>\n\n","storeOutMessages":false,"fwdInMessages":false,"templateScope":"local","x":2242.0830078125,"y":284.9166259765625,"wires":[[]]},{"id":"c2cc786f.78dd8","type":"unsafe-function","z":"7d8ace.ba650534","name":"NotificationMessage","func":"//Retreiving Libraries from the Settings.json file\nmsg.payload = \"Manifest has been (re)loaded\"\n\nreturn msg;","outputs":1,"noerr":0,"x":1160,"y":480,"wires":[["63fd0564.4a8cec","82a3a346.578ca8"]]},{"id":"34f37043.0afbc","type":"network_stats","z":"7d8ace.ba650534","name":"","x":639.7619018554688,"y":2329.5396728515625,"wires":[["a60994ae.619c68","227394d8.f65eac"]]},{"id":"aabd50e7.74ee28","type":"inject","z":"7d8ace.ba650534","name":"","topic":"","payload":"","payloadType":"date","repeat":"10","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":1900,"wires":[["a2b35e07.c996f8","e66bd476.9d3dc"]]},{"id":"56e114c1.d5a88c","type":"DeviceStats","z":"7d8ace.ba650534","name":"","mem":false,"nw":true,"load":false,"hostname":false,"useString":false,"x":615.1785278320312,"y":2084.9562377929688,"wires":[["55ae8916.a5edb8","96427dcc.d3fb4"]]},{"id":"78827ec7.1f6128","type":"comment","z":"7d8ace.ba650534","name":"AAS Device Monitoring","info":"","x":140,"y":1780,"wires":[]},{"id":"bdda5286.d1a49","type":"ui_chart","z":"7d8ace.ba650534","name":"","group":"db682736.c68b58","order":0,"width":"20","height":"10","label":"","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":2,"x":1216.0950927734375,"y":1948.3453369140625,"wires":[[],[]]},{"id":"6aee21a7.69111","type":"unsafe-function","z":"7d8ace.ba650534","name":"CPULoad","func":"var msg1 = {};\nvar msg2 = {};\nvar msg3 = {};\nvar msg4 = {};\n\nmsg1.topic = 'Last minute CPU(s) usage';\nmsg1.payload = msg.payload.load[0];\n\nmsg2.topic = 'Last 5 minutes CPU(s) usage';\nmsg2.payload = msg.payload.load[1];\n\nmsg3.topic = 'Last 15 minutes CPU(s) usage';\nmsg3.payload = msg.payload.load[2];\n\nmsg4.topic = 'CPU(s) number';\nmsg4.payload = 2;\n\nreturn [msg1, msg2, msg3, msg4];","outputs":4,"noerr":0,"x":673.6505737304688,"y":2846.428497314453,"wires":[[],[],[],[]]},{"id":"6a3f5da8.2836b4","type":"inject","z":"7d8ace.ba650534","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":696.4285278320312,"y":1848.4287414550781,"wires":[["ebfdda33.52ebf"]]},{"id":"ebfdda33.52ebf","type":"unsafe-function","z":"7d8ace.ba650534","name":"","func":"msg.payload = [];\nreturn msg;","outputs":1,"noerr":0,"x":935.8729858398438,"y":1848.5676879882812,"wires":[["bdda5286.d1a49","203e2f56.5863e8","7b92eca2.add0cc"]]},{"id":"55ae8916.a5edb8","type":"unsafe-function","z":"7d8ace.ba650534","name":"Network Tx/Rx","func":"var msg1 = {};\nvar msg2 = {};\n\nmsg1.topic = 'RX KB';\nmsg1.payload = (msg.payload.nw.enp0s3.rx)/1000;\n\nmsg2.topic = 'TX KB';\nmsg2.payload = (msg.payload.nw.enp0s3.tx)/1000;\n\n\nreturn [msg1, msg2];","outputs":2,"noerr":0,"x":872.6785278320312,"y":2084.9562377929688,"wires":[["203e2f56.5863e8"],["203e2f56.5863e8","3f68cc2a.79c354"]]},{"id":"203e2f56.5863e8","type":"ui_chart","z":"7d8ace.ba650534","name":"","group":"21163bff.6beb24","order":0,"width":"20","height":"10","label":"","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"step","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":2,"x":1222.5396728515625,"y":2080.7896728515625,"wires":[[],[]]},{"id":"3f68cc2a.79c354","type":"debug","z":"7d8ace.ba650534","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":998.0951538085938,"y":2140.7898559570312,"wires":[]},{"id":"7b92eca2.add0cc","type":"ui_chart","z":"7d8ace.ba650534","name":"","group":"48b34339.fd8494","order":0,"width":"20","height":"10","label":"","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":2,"x":1221.428466796875,"y":2228.567626953125,"wires":[[],[]]},{"id":"35282baf.aaf9ec","type":"unsafe-function","z":"7d8ace.ba650534","name":"Network Tx/Rx","func":"var msg1 = {};\nvar msg2 = {};\n\nmsg1.topic = 'Current RX B/s';\nmsg1.payload = (msg.payload[0]);\n\nmsg2.topic = 'Current TX B/s';\nmsg2.payload = (msg.payload[1]);\n\n\nreturn [msg1, msg2];","outputs":2,"noerr":0,"x":978.6506958007812,"y":2227.3175048828125,"wires":[["7b92eca2.add0cc"],["7b92eca2.add0cc"]]},{"id":"ffb5c07b.ce9fe8","type":"debug","z":"7d8ace.ba650534","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":994.7617797851562,"y":2279.6787109375,"wires":[]},{"id":"f3ea48b4.c689c","type":"saveflow","z":"1c8a5487.efc133","name":"","path":"C:\\Users\\Giovanni Di Orio\\.asmodels\\flows\\drivers\\","enabled":false,"exporttype":"addflow","x":980,"y":1020,"wires":[[]]},{"id":"ced3d33a.eea34","type":"inject","z":"1c8a5487.efc133","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":520,"y":1022,"wires":[["f3ea48b4.c689c"]]},{"id":"63fd5e55.088e48","type":"http request","z":"1c8a5487.efc133","name":"","method":"use","ret":"txt","paytoqs":false,"url":"","tls":"","proxy":"","authType":"","x":970,"y":520,"wires":[["494d58a0.eed7a","3eb175fe.c86ac2"]]},{"id":"31c87e24.8cb972","type":"actionflows_in","z":"1c8a5487.efc133","name":"rest in","priority":"50","links":[],"scope":"global","x":110,"y":260,"wires":[["1a089692.00c6a1","98a67a35.681a88"]]},{"id":"4492650d.ed6694","type":"actionflows_out","z":"1c8a5487.efc133","name":"rest out","links":[],"x":1286.9998779296875,"y":263.0000305175781,"wires":[]},{"id":"5440e51.688a49c","type":"unsafe-function","z":"1c8a5487.efc133","name":"PrepareOutput","func":"var outputMsgs = [];\ncontext.flow.set('outputMsgs', outputMsgs);\nvar uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });\nvar property = msg.requestedProperty;\n\n// Create an Observation Object ------------------------------------\nvar observation = {};\nobservation.id = uuid;\nobservation.edgeGatewayReferenceID = msg.AASID;\nobservation.dataManifestReferenceID = property._Attribs.ID;\nobservation.dataKindReferenceID = property.InternalElement[0]._Attribs.ID;\nobservation.acquisitionTimestamp = new Date().getTime();\nobservation.collectionTimestamp = new Date().getTime();\nobservation.value = msg.payload[0];\n// END Create an Observation Object --------------------------------\n//outputMsgs.push(observation);\n\n//msg.payload = outputMsgs;\nmsg.payload = JSON.stringify(observation);\nreturn msg;\n\n\n","outputs":1,"noerr":0,"x":1329.9999389648438,"y":520.6666259765625,"wires":[["ac445083.c65d3","c74c1a4e.a3cd6"]]},{"id":"494d58a0.eed7a","type":"join","z":"1c8a5487.efc133","name":"","mode":"auto","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1155,"y":520,"wires":[["5440e51.688a49c","c683c2ea.4e6498"]]},{"id":"ac445083.c65d3","type":"debug","z":"1c8a5487.efc133","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1468.0000610351562,"y":618.666748046875,"wires":[]},{"id":"146c63ad.6e254c","type":"split","z":"1c8a5487.efc133","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":350,"y":520,"wires":[["9f1f0404.0dcc58"]]},{"id":"2d753dd4.158b42","type":"change","z":"1c8a5487.efc133","name":"","rules":[{"t":"set","p":"url","pt":"msg","to":"payload.url","tot":"msg"},{"t":"set","p":"method","pt":"msg","to":"payload.method","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":760,"y":500,"wires":[["63fd5e55.088e48","25c86d79.aa28e2"]]},{"id":"3281d5a1.f78042","type":"switch","z":"1c8a5487.efc133","name":"","property":"mep","propertyType":"msg","rules":[{"t":"eq","v":"requestReply","vt":"str"},{"t":"eq","v":"subscribe","vt":"str"},{"t":"eq","v":"unsubscribe","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":790,"y":260,"wires":[["f84e26b8.0c504"],["f7bca1af.0c5ff8"],["d9b8bf66.0632a8"]]},{"id":"f84e26b8.0c504","type":"actionflows","z":"1c8a5487.efc133","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"requestReply","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"private","perf":false,"seq":false,"x":962.333251953125,"y":221.33334350585938,"wires":[["4492650d.ed6694"]]},{"id":"e3b0ca9a.62b36","type":"actionflows_in","z":"1c8a5487.efc133","name":"requestReply in","priority":"50","links":[],"scope":"private","x":140,"y":520,"wires":[["f9492c72.57af48","146c63ad.6e254c"]]},{"id":"c74c1a4e.a3cd6","type":"actionflows_out","z":"1c8a5487.efc133","name":"requestReply out","links":[],"x":1571.3333740234375,"y":521,"wires":[]},{"id":"f7bca1af.0c5ff8","type":"actionflows","z":"1c8a5487.efc133","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"subscribe","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"protected","perf":false,"seq":false,"x":965.0001220703125,"y":266.6666564941406,"wires":[["4492650d.ed6694"]]},{"id":"f9492c72.57af48","type":"debug","z":"1c8a5487.efc133","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":335.66650390625,"y":593.333251953125,"wires":[]},{"id":"1a089692.00c6a1","type":"unsafe-function","z":"1c8a5487.efc133","name":"Prepare client configuration and msg object","func":"/*if(msg.dsm !== \"\" && msg.parameters !== \"\" && msg.mep === \"requestReply\"){\n    //msg.submodel = msg.payload;\n    var outputMsgs = [];\n    \n    //var parameters = msg.payload.InternalElement[0].InternalElement;\n    var parameters = msg.parameters;\n    var config = {};//{url:\"\", method:\"\"};\n    for(var parameterIndex in parameters){\n        if(parameters[parameterIndex]._Attribs.Name == \"url\"){\n            config.url = parameters[parameterIndex].Attribute[2].Value[0];\n        } else if(parameters[parameterIndex]._Attribs.Name == \"method\"){\n            config.method = parameters[parameterIndex].Attribute[2].Value[0];\n        }\n    }\n    outputMsgs.push(config);\n    context.flow.set('outputMsgs', outputMsgs);\n\n    msg.payload = outputMsgs;\n    return msg;\n} else if(msg.mep == \"subscribe\") {\n    var subscriptions = context.flow.get('subscriptions');\n    for(var element in subscriptions){\n        if(subscriptions[element].requestedProperty._Attribs.ID == msg.dsm._Attribs.ID){\n            msg.mep = \"unsubscribe\";\n            msg.payload = msg.dsm._Attribs.ID;\n            subscriptions.splice(element, 1);\n            return msg;\n        }\n    }\n    var newSubscription = {};\n    msg.mep = \"subscribe\";\n    //only for testing\n    //newSubscription.identifier = msg.dsm._Attribs.ID;\n    newSubscription.requestedProperty = msg.requestedProperty;\n    var parameters = msg.parameters;\n    for(var parameterIndex in parameters){\n        if(parameters[parameterIndex]._Attribs.Name == \"url\"){\n            newSubscription.url = parameters[parameterIndex].Attribute[2].Value[0];\n        } else if(parameters[parameterIndex]._Attribs.Name == \"method\"){\n            newSubscription.method = parameters[parameterIndex].Attribute[2].Value[0];\n        }\n    }\n    \n    msg.payload = msg.dsm._Attribs.ID;\n    subscriptions.push(newSubscription);\n    context.flow.set('subscriptions', subscriptions);\n    return msg;\n}*/\n\nif(msg.requestedProperty !== \"\" && msg.parameters !== \"\" && msg.mep === \"requestReply\"){\n    //msg.submodel = msg.payload;\n    var outputMsgs = [];\n    \n    //var parameters = msg.payload.InternalElement[0].InternalElement;\n    var parameters = msg.parameters;\n    var config = {};//{url:\"\", method:\"\"};\n    for(var parameterIndex in parameters){\n        if(parameters[parameterIndex]._Attribs.Name == \"url\"){\n            config.url = parameters[parameterIndex].Attribute[2].Value[0];\n        } else if(parameters[parameterIndex]._Attribs.Name == \"method\"){\n            config.method = parameters[parameterIndex].Attribute[2].Value[0];\n        }\n    }\n    outputMsgs.push(config);\n    context.flow.set('outputMsgs', outputMsgs);\n\n    msg.payload = outputMsgs;\n    return msg;\n} else if(msg.requestedProperty && msg.mep == \"subscribe\") {\n    var subscriptions = context.flow.get('subscriptions');\n    for(var element in subscriptions){\n        if(subscriptions[element].requestedProperty._Attribs.ID == msg.requestedProperty._Attribs.ID){\n            msg.mep = \"unsubscribe\";\n            msg.payload = msg.requestedProperty._Attribs.ID;\n            subscriptions.splice(element, 1);\n            return msg;\n        }\n    }\n    var newSubscription = {};\n    msg.mep = \"subscribe\";\n    //only for testing\n    //newSubscription.identifier = msg.dsm._Attribs.ID;\n    newSubscription.requestedProperty = msg.requestedProperty;\n    var parameters = msg.parameters;\n    for(var parameterIndex in parameters){\n        if(parameters[parameterIndex]._Attribs.Name == \"url\"){\n            newSubscription.url = parameters[parameterIndex].Attribute[2].Value[0];\n        } else if(parameters[parameterIndex]._Attribs.Name == \"method\"){\n            newSubscription.method = parameters[parameterIndex].Attribute[2].Value[0];\n        }\n    }\n    \n    msg.payload = msg.requestedProperty._Attribs.ID;\n    subscriptions.push(newSubscription);\n    context.flow.set('subscriptions', subscriptions);\n    return msg;\n}\n","outputs":1,"noerr":0,"x":510,"y":260,"wires":[["3281d5a1.f78042"]]},{"id":"d9b8bf66.0632a8","type":"actionflows","z":"1c8a5487.efc133","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"unsubscribe","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"protected","perf":false,"seq":false,"x":960.66650390625,"y":314.9999694824219,"wires":[["4492650d.ed6694"]]},{"id":"28de212f.f7449e","type":"comment","z":"1c8a5487.efc133","name":"Request Reply Message Exchange Pattern","info":"","x":231.333251953125,"y":416.6666259765625,"wires":[]},{"id":"8b28a4ac.10af6","type":"comment","z":"1c8a5487.efc133","name":"Subscribe Message Exchange Pattern  (Protocol TranslationI)","info":"","x":280,"y":800,"wires":[]},{"id":"bb55511c.702d98","type":"comment","z":"1c8a5487.efc133","name":"Internal Interface Entry Point","info":"","x":164.047607421875,"y":23.142822265625,"wires":[]},{"id":"c683c2ea.4e6498","type":"debug","z":"1c8a5487.efc133","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1291.57177734375,"y":616.2857360839844,"wires":[]},{"id":"98a67a35.681a88","type":"debug","z":"1c8a5487.efc133","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":334.2856750488281,"y":323.5238037109375,"wires":[]},{"id":"a60994ae.619c68","type":"join","z":"7d8ace.ba650534","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":797.5396728515625,"y":2228.4287719726562,"wires":[["ffb5c07b.ce9fe8","35282baf.aaf9ec"]]},{"id":"227394d8.f65eac","type":"debug","z":"7d8ace.ba650534","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":991.4285278320312,"y":2328.5675048828125,"wires":[]},{"id":"60bff824.e87498","type":"switch","z":"7d8ace.ba650534","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":428.92852783203125,"y":2086.4285583496094,"wires":[["34f37043.0afbc","8e5f76dc.e8968","4c35baec.d401a4","56e114c1.d5a88c"]]},{"id":"91735bc0.6e147","type":"debug","z":"7d8ace.ba650534","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":322.6785888671875,"y":2000.1786499023438,"wires":[]},{"id":"3d2ec782.b349e8","type":"unsafe-function","z":"7d8ace.ba650534","name":"parameterizedHttpRequest","func":"var msg1 = {};\nvar msg3 = {};\n\nmsg1.method = 'GET';\nmsg1.url = context.global.get('namespace') + \"/aas/manifest/headers\";\n\n//msg2.descriptionId = \"b5595a4a-40a5-46e6-a9c6-f493f99a72a1\"; \n\nmsg3.method = 'GET';\nmsg3.url = context.global.get('namespace') + \"/aas/manifest/submodels\";\n\nreturn [msg1, msg3, msg];","outputs":3,"noerr":0,"x":1091.666748046875,"y":259.6667175292969,"wires":[["ccb7fc70.8999f"],["2c43380c.f6523"],["8bc91173.2cd358"]]},{"id":"cb9611f8.7fbf48","type":"ui_template","z":"7d8ace.ba650534","group":"95665ea.259a6a","name":"Header Submodel","order":1,"width":"10","height":"22","format":"<html>\n<head>\n    <link rel=\"stylesheet\" href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css\" integrity=\"sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO\" crossorigin=\"anonymous\">\n    <script src=\"https://code.jquery.com/jquery-3.3.1.slim.min.js\" integrity=\"sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo\" crossorigin=\"anonymous\"></script>\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js\" integrity=\"sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49\" crossorigin=\"anonymous\"></script>\n    <script src=\"https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js\" integrity=\"sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy\" crossorigin=\"anonymous\"></script>\n    <script>\n        this.scope.sendRequest = function(element){\n            this.send({payload:{virtualLocation:element.Attribute[1].Value[0]}});\n        }\n        this.scope.isVisible = function(element){\n            if(element.Attribute[0].Attribute[0].Value[0] == \"\" && element.Attribute[0].Attribute[0].Value[1] == \"\")\n                return false;\n            else return true;\n        }\n    </script>\n</head>\n    <div id=\"deck\" class=\"card-group\">\n            <div class=\"card-body\">\n            <div class=\"card text-white bg-light mb-3\" style=\"max-width: 30rem;\">\n                <ul class=\"list-group list-group-flush\">\n                 <li class=\"list-group-item\" ng-repeat=\"submodel in msg.payload[1].InternalElement\">\n                     <a class=\"text-dark\" data-toggle=\"collapse\" href=\"#collapse11\">{{submodel._Attribs.Name}}</a>\n                     <ul id=\"collapse11\" class=\"list-group list-group-flush panel-collapse collapse\">\n                        <li class=\"list-group-item list-group-item-info\" ng-repeat=\"property in submodel.InternalElement\">\n                        <a class=\"text-white\" data-toggle=\"collapse\" href=\"#collapse21\">{{property._Attribs.Name}} : <strong>{{property._Attribs.ID}}</strong></a>\n                        <ul id=\"collapse21\" class=\"list-group list-group-flush panel-collapse collapse\">\n                            <li class=\"list-group-item list-group-item-light\" ng-repeat=\"attribute in property.Attribute\">\n                                <a class=\"text-black-50\" data-toggle=\"collapse\" href=\"#collapse31\">{{attribute._Attribs.Name}} : <strong>{{attribute.Value[0]}}</strong></a>\n                                <ul id=\"collapse31\" class=\"list-group list-group-flush panel-collapse collapse\">\n                                    <li class=\"list-group-item list-group-item-info\" ng-repeat=\"element in property.InternalElement\" \n                                        style=\"cursor:pointer\">\n                                        <a class=\"text-white\" data-toggle=\"collapse\" href=\"#collapse41\">{{element._Attribs.Name}}</a>\n                                        <ul id=\"collapse41\" class=\"list-group list-group-flush panel-collapse collapse\">\n                                            <li class=\"list-group-item list-group-item-light\"><a class=\"text-black-50\">Virtual Location: <strong>{{element.Attribute[1].Value[0]}}</strong></a></li> \n                                            <li class=\"list-group-item list-group-item-light\" ng-hide=\"isVisible(element)\"><a class=\"text-white\">Physical Location:</a></li>\n                                            <ul class=\"list-group list-group-flush\">\n                                                <li ng-hide=\"isVisible(element)\"><a>Latitude: <strong>{{element.Attribute[0].Attribute[0].Value[0]}}</strong></a></li>\n                                                <li ng-hide=\"isVisible(element)\"><a>Longitude: <strong>{{element.Attribute[0].Attribute[1].Value[0]}}</strong></a></li>\n                                            <!--<font color=\"blue\">To:</font> {{operation.to}}!-->\n                                            </ul>\n                                        </ul>\n                                    </li>\n                                </ul>\n                            </li>\n                        </ul>\n                        </li>\n                    </ul>\n                 </li>\n                </ul>\n            </div>\n        </div>\n    </div>\n</html>\n\n","storeOutMessages":false,"fwdInMessages":true,"templateScope":"local","x":2800.08349609375,"y":122.08338928222656,"wires":[["a2cc4c09.68baf8"]]},{"id":"4fc72d07.300904","type":"unsafe-function","z":"7d8ace.ba650534","name":"SubmodelsProcessing","func":"//Retreiving Libraries from the Settings.json file\nvar outMsg = {};\nvar payload = [];\noutMsg.payload = payload;\nfor(var element in msg.payload){\n    if(typeof(msg.payload[element]) !== 'object' && msg.payload[element] !== null){\n        var XML = context.global.get('XML');\n        var os = context.global.get('os');\n\n        var xml_string = msg.payload[element];\n\n        var submodels = XML.parse( xml_string, { preserveAttributes: true, forceArrays: true  } );\n\n         outMsg.payload[1] = submodels;\n    } else {\n        outMsg.payload[0] = msg.payload[element];\n    }\n}\n\nreturn outMsg;","outputs":1,"noerr":0,"x":2311.33349609375,"y":122.0833740234375,"wires":[["4a8339c8.08238"]]},{"id":"87e4533c.6100a8","type":"debug","z":"7d8ace.ba650534","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":2757.08349609375,"y":68.58338928222656,"wires":[]},{"id":"a2cc4c09.68baf8","type":"debug","z":"7d8ace.ba650534","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":3001.58349609375,"y":122.08338928222656,"wires":[]},{"id":"3ac2b6fa.e47ab2","type":"ui_template","z":"7d8ace.ba650534","group":"bc68dcde.54105","name":"Header Overview","order":1,"width":"10","height":"12","format":"<html>\n<head>\n    <link rel=\"stylesheet\" href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css\" integrity=\"sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO\" crossorigin=\"anonymous\">\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js\" integrity=\"sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49\" crossorigin=\"anonymous\"></script>\n    \n    <script>\n        this.scope.sendRequest = function(element){\n            this.send({payload:{virtualLocation:element.Attribute[1].Value[0]}});\n        }\n        this.scope.isVisible = function(element){\n            if(element.Attribute[0].Attribute[0].Value[0] == \"\" && element.Attribute[0].Attribute[0].Value[1] == \"\")\n                return false;\n            else return true;\n        }\n    </script>\n</head>\n    <div id=\"deck\" class=\"card-group\">\n            <div class=\"card-body\">\n            <div class=\"card text-white bg-light mb-3\" style=\"max-width: 35rem;\">\n                <ul class=\"list-group list-group-flush\">\n                 <li class=\"list-group-item\" ng-repeat=\"submodel in msg.payload[1].InternalElement\">\n                     <a class=\"text-dark\">{{submodel._Attribs.Name}}</a>\n                     <ul class=\"list-group list-group-flush\">\n                        <li class=\"list-group-item list-group-item-info\" ng-repeat=\"property in submodel.InternalElement\">\n                        <a class=\"text-white\">{{property._Attribs.Name}} : <strong>{{property._Attribs.ID}}</strong></a>\n                        <ul class=\"list-group list-group-flush\">\n                            <li class=\"list-group-item list-group-item-light\" ng-repeat=\"attribute in property.Attribute\">\n                                <a class=\"text-black-50\">{{attribute._Attribs.Name}} : <strong>{{attribute.Value[0]}}</strong></a>\n                                <ul class=\"list-group list-group-flush\">\n                                    <li class=\"list-group-item list-group-item-info\" ng-repeat=\"element in property.InternalElement\" \n                                        style=\"cursor:pointer\">\n                                        <a class=\"text-white\">{{element._Attribs.Name}}</a>\n                                        <ul class=\"list-group list-group-flush\">\n                                            <li class=\"list-group-item list-group-item-light\"><a class=\"text-black-50\">Virtual Location: <strong>{{element.Attribute[1].Value[0]}}</strong></a></li> \n                                            <li class=\"list-group-item list-group-item-light\" ng-hide=\"isVisible(element)\"><a class=\"text-white\">Physical Location:</a></li>\n                                            <ul class=\"list-group list-group-flush\">\n                                                <li ng-hide=\"isVisible(element)\"><a>Latitude: <strong>{{element.Attribute[0].Attribute[0].Value[0]}}</strong></a></li>\n                                                <li ng-hide=\"isVisible(element)\"><a>Longitude: <strong>{{element.Attribute[0].Attribute[1].Value[0]}}</strong></a></li>\n                                            <!--<font color=\"blue\">To:</font> {{operation.to}}!-->\n                                            </ul>\n                                        </ul>\n                                    </li>\n                                </ul>\n                            </li>\n                        </ul>\n                        </li>\n                    </ul>\n                 </li>\n                </ul>\n            </div>\n        </div>\n    </div>\n    <div id=\"deck\" class=\"card-group\">\n            <div class=\"card-body\">\n            <div class=\"card text-white bg-light mb-3\" style=\"max-width: 35rem;\">\n                <ul class=\"list-group list-group-flush\">\n                 <li class=\"list-group-item\">\n                     <a class=\"text-dark\">AAS Running Platform</a>\n                     <ul class=\"list-group list-group-flush\">\n                        <li class=\"list-group-item list-group-item-info\">\n                            <a class=\"text-white\">Type : <strong>{{msg.payload[0].type}}</strong></a>\n                        </li>\n                        <li class=\"list-group-item list-group-item-info\">\n                            <a class=\"text-white\">Platform : <strong>{{msg.payload[0].platform}}</strong></a>\n                        </li>\n                        <li class=\"list-group-item list-group-item-info\">\n                            <a class=\"text-white\">Architecture : <strong>{{msg.payload[0].arch}}</strong></a>\n                        </li>\n                    </ul>\n                 </li>\n                </ul>\n            </div>\n        </div>\n        </div>\n    </html>\n\n\n","storeOutMessages":false,"fwdInMessages":true,"templateScope":"local","x":2801.3334045410156,"y":161.6667022705078,"wires":[[]]},{"id":"9e8dc389.290c88","type":"join","z":"7d8ace.ba650534","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":2121.83349609375,"y":121.66670227050781,"wires":[["e6344d79.ed5f5","4fc72d07.300904"]]},{"id":"e6344d79.ed5f5","type":"debug","z":"7d8ace.ba650534","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":2210,"y":40,"wires":[]},{"id":"8bc91173.2cd358","type":"actionflows_out","z":"7d8ace.ba650534","name":"informAASUI_ManifestChange out","links":[],"x":1449.9996337890625,"y":366.25,"wires":[]},{"id":"fb45eae4.37d4b8","type":"debug","z":"7d8ace.ba650534","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1177.5,"y":518.75,"wires":[]},{"id":"25e7d826.82b0c8","type":"ui_gauge","z":"7d8ace.ba650534","name":"","group":"","order":0,"width":"6","height":"6","gtype":"gage","title":"","label":"Number of Connections","format":"{{value}}","min":0,"max":"100","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":773.8451538085938,"y":2781.4009399414062,"wires":[]},{"id":"aa33168e.b2e258","type":"unsafe-function","z":"7d8ace.ba650534","name":"gettingValue","func":"var msg1 = {};\nmsg1.payload = msg.payload[0].value;\nreturn msg1;","outputs":1,"noerr":0,"x":561.8451538085938,"y":2782.9009399414062,"wires":[["25e7d826.82b0c8"]]},{"id":"4ebc8724.0de608","type":"unsafe-function","z":"7d8ace.ba650534","name":"gettingValue","func":"var msg1 = {};\nvar timeticks = msg.payload[0].value;\nvar timeticks_sec = timeticks/100;\nvar secs = Math.round(timeticks_sec);\nvar hours = Math.floor(secs / (60 * 60));\n\nvar divisor_for_minutes = secs % (60 * 60);\nvar minutes = Math.floor(divisor_for_minutes / 60);\n\nvar divisor_for_seconds = divisor_for_minutes % 60;\nvar seconds = Math.ceil(divisor_for_seconds);\n\nmsg1.payload = \"hh: \" + hours + \" mm: \" + minutes + \" ss: \" + seconds;\n\nreturn msg1;","outputs":1,"noerr":0,"x":839.0277709960938,"y":2438.5833740234375,"wires":[["7b46d74c.c1595","3ad731d2.35f636"]]},{"id":"7b46d74c.c1595","type":"ui_text","z":"7d8ace.ba650534","group":"11193e87.ede119","order":0,"width":"6","height":"6","name":"","label":"","format":"<font size=6> {{msg.payload}}","layout":"row-left","x":1034.6527709960938,"y":2436.0833740234375,"wires":[]},{"id":"7e1402ad.1ddaf4","type":"actionflows_in","z":"d17857fb.cb70e8","name":"snmp in","priority":"50","links":[],"scope":"global","x":130,"y":320,"wires":[["ee7f6ec8.6134f","133c5b0b.c45635"]]},{"id":"63c39f24.4357f8","type":"actionflows_out","z":"d17857fb.cb70e8","name":"snmp out","links":[],"x":1306.9998779296875,"y":323.0000305175781,"wires":[]},{"id":"9a105145.7aad68","type":"unsafe-function","z":"d17857fb.cb70e8","name":"PrepareOutput","func":"var outputMsgs = [];\ncontext.flow.set('outputMsgs', outputMsgs);\nvar uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });\nvar property = msg.requestedProperty;\n\n// Create an Observation Object ------------------------------------\nvar observation = {};\nobservation.id = uuid;\nobservation.edgeGatewayReferenceID = msg.AASID;\nobservation.dataManifestReferenceID = property._Attribs.ID;\nobservation.dataKindReferenceID = property.InternalElement[0]._Attribs.ID;\nobservation.acquisitionTimestamp = new Date().getTime();\nobservation.collectionTimestamp = new Date().getTime();\nobservation.value = msg.payload[0];\n// END Create an Observation Object --------------------------------\n//outputMsgs.push(observation);\n\n//msg.payload = outputMsgs;\nmsg.payload = JSON.stringify(observation);\nreturn msg;\n\n\n","outputs":1,"noerr":0,"x":1220,"y":580,"wires":[["764d6f0b.e3bb1","b702a30f.bcf518"]]},{"id":"a7ba969c.b1cd7","type":"join","z":"d17857fb.cb70e8","name":"","mode":"auto","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1030,"y":580,"wires":[["9a105145.7aad68","481d4b44.b62ddc"]]},{"id":"764d6f0b.e3bb1","type":"debug","z":"d17857fb.cb70e8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1344.9996948242188,"y":667.3333740234375,"wires":[]},{"id":"7ef51657.a5997","type":"split","z":"d17857fb.cb70e8","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":350,"y":580,"wires":[["a0ca54d0.33952"]]},{"id":"83239ca4.93dea","type":"change","z":"d17857fb.cb70e8","name":"","rules":[{"t":"set","p":"host","pt":"msg","to":"payload.address","tot":"msg"},{"t":"set","p":"oid","pt":"msg","to":"payload.oid","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":680,"y":560,"wires":[["2a4aac69.0399bc"]]},{"id":"cc0e66ed.04f778","type":"switch","z":"d17857fb.cb70e8","name":"","property":"mep","propertyType":"msg","rules":[{"t":"eq","v":"requestReply","vt":"str"},{"t":"eq","v":"subscribe","vt":"str"},{"t":"eq","v":"unsubscribe","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":790,"y":320,"wires":[["d77ea892.3a9728"],["128e063d.8c541a"],["ba30c5e9.d2ba08"]]},{"id":"d77ea892.3a9728","type":"actionflows","z":"d17857fb.cb70e8","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"requestReply","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"private","perf":false,"seq":false,"x":982.333251953125,"y":281.3333435058594,"wires":[["63c39f24.4357f8"]]},{"id":"a10567fc.ebcde8","type":"actionflows_in","z":"d17857fb.cb70e8","name":"requestReply in","priority":"50","links":[],"scope":"private","x":160,"y":580,"wires":[["e3d308e7.b5fff","7ef51657.a5997"]]},{"id":"b702a30f.bcf518","type":"actionflows_out","z":"d17857fb.cb70e8","name":"requestReply out","links":[],"x":1470,"y":580,"wires":[]},{"id":"128e063d.8c541a","type":"actionflows","z":"d17857fb.cb70e8","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"subscribe","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"private","perf":false,"seq":false,"x":985.0001220703125,"y":326.6666564941406,"wires":[["63c39f24.4357f8"]]},{"id":"e3d308e7.b5fff","type":"debug","z":"d17857fb.cb70e8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":355.66650390625,"y":653.333251953125,"wires":[]},{"id":"ee7f6ec8.6134f","type":"unsafe-function","z":"d17857fb.cb70e8","name":"Prepare client configuration and msg object","func":"if(msg.dsm !== \"\" && msg.di !== \"\" && msg.mep == \"requestReply\"){\n    //msg.submodel = msg.payload;\n    var outputMsgs = [];\n    \n    //var parameters = msg.payload.InternalElement[0].InternalElement;\n    var parameters = msg.parameters;\n    var config = {};//{url:\"\", method:\"\"};\n    for(var parameterIndex in parameters){\n        if(parameters[parameterIndex]._Attribs.Name == \"address\"){\n            config.address = parameters[parameterIndex].Attribute[2].Value[0];\n        } else if(parameters[parameterIndex]._Attribs.Name == \"oid\"){\n            config.oid = parameters[parameterIndex].Attribute[2].Value[0];\n        }\n    }\n    outputMsgs.push(config);\n    context.flow.set('outputMsgs', outputMsgs);\n    \n    /*for(var element in files){\n        outputMsgs.push({payload:path.join(driversFilePath, files[element])});\n    }*/\n    //msg.outputMsgs = outputMsgs;\n    msg.payload = outputMsgs;\n    return msg;\n} else if(msg.mep == \"subscribe\") {\n    var subscriptions = context.flow.get('subscriptions');\n    for(var element in subscriptions){\n        if(subscriptions[element].identifier == dsm._Attribs.ID){\n            msg.mep = \"unsubscribe\";\n            msg.payload = dsm._Attribs.ID;\n            subscriptions.splice(element, 1);\n            return msg;\n        }\n    }\n    var newSubscription = {};\n    msg.mep = \"subscribe\";\n    //only for testing\n    newSubscription.identifier = dsm._Attribs.ID;\n    var parameters = msg.parameters;\n    for(var parameterIndex in parameters){\n        if(parameters[parameterIndex]._Attribs.Name == \"address\"){\n            newSubscription.url = parameters[parameterIndex].Attribute[2].Value[0];\n        } else if(parameters[parameterIndex]._Attribs.Name == \"oid\"){\n            newSubscription.method = parameters[parameterIndex].Attribute[2].Value[0];\n        }\n    }\n    \n    msg.payload = dsm._Attribs.ID;\n    subscriptions.push(newSubscription);\n    context.flow.set('subscriptions', subscriptions);\n    return msg;\n}","outputs":1,"noerr":0,"x":510,"y":320,"wires":[["cc0e66ed.04f778"]]},{"id":"ba30c5e9.d2ba08","type":"actionflows","z":"d17857fb.cb70e8","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"unsubscribe","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"protected","perf":false,"seq":false,"x":980.66650390625,"y":374.9999694824219,"wires":[["63c39f24.4357f8"]]},{"id":"e8019e10.00d0c8","type":"comment","z":"d17857fb.cb70e8","name":"Request Reply Message Exchange Pattern","info":"","x":251.333251953125,"y":476.6666259765625,"wires":[]},{"id":"25781e65.84390a","type":"comment","z":"d17857fb.cb70e8","name":"Internal Interface Entry Point","info":"","x":192.52389526367188,"y":47.142852783203125,"wires":[]},{"id":"481d4b44.b62ddc","type":"debug","z":"d17857fb.cb70e8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1168.5714111328125,"y":664.9523620605469,"wires":[]},{"id":"133c5b0b.c45635","type":"debug","z":"d17857fb.cb70e8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":354.2856750488281,"y":383.5238037109375,"wires":[]},{"id":"2a4aac69.0399bc","type":"snmp","z":"d17857fb.cb70e8","host":"","community":"public","version":"1","oids":"","timeout":5,"name":"","x":870,"y":580,"wires":[["a7ba969c.b1cd7"]]},{"id":"96427dcc.d3fb4","type":"debug","z":"7d8ace.ba650534","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":772.5831909179688,"y":2035.5554809570312,"wires":[]},{"id":"a2b35e07.c996f8","type":"debug","z":"7d8ace.ba650534","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":318.75,"y":1894.25,"wires":[]},{"id":"e66bd476.9d3dc","type":"ui_switch","z":"7d8ace.ba650534","name":"","label":"Enable Monitoring","tooltip":"","group":"82638f05.632d68","order":2,"width":"3","height":"1","passthru":true,"decouple":"false","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":203.75,"y":2082.25,"wires":[["91735bc0.6e147","60bff824.e87498"]]},{"id":"3ad731d2.35f636","type":"debug","z":"7d8ace.ba650534","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1032.5277709960938,"y":2508.5833740234375,"wires":[]},{"id":"8e5f76dc.e8968","type":"actionflows","z":"7d8ace.ba650534","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"snmpSysUpTime","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":646.5277709960938,"y":2439.0833740234375,"wires":[["4ebc8724.0de608"]]},{"id":"4c35baec.d401a4","type":"actionflows","z":"7d8ace.ba650534","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"snmpLoad","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":623.0555419921875,"y":1986.9442138671875,"wires":[["4b2f32b7.950f9c","2dba3594.83a5d2"]]},{"id":"2dba3594.83a5d2","type":"unsafe-function","z":"7d8ace.ba650534","name":"CPULoad","func":"var msg1 = {};\nvar msg2 = {};\nvar msg3 = {};\nvar msg4 = {};\n\nmsg1.topic = 'Last minute CPU(s) usage';\nmsg1.payload = msg.payload[0].value;\n\nmsg2.topic = 'Last 5 minutes CPU(s) usage';\nmsg2.payload = msg.payload[1].value;\n\nmsg3.topic = 'Last 15 minutes CPU(s) usage';\nmsg3.payload = msg.payload[2].value;\n\n//msg4.topic = 'CPU(s) number';\n//msg4.payload = 2;\n\nreturn [msg1, msg2, msg3];","outputs":3,"noerr":0,"x":859.7222290039062,"y":1944.7222900390625,"wires":[["bdda5286.d1a49"],["bdda5286.d1a49"],["bdda5286.d1a49"]]},{"id":"4b2f32b7.950f9c","type":"debug","z":"7d8ace.ba650534","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":769.7222900390625,"y":1890.27783203125,"wires":[]},{"id":"68d5f7ee.1af7e","type":"comment","z":"7d8ace.ba650534","name":"Provisory Nodes","info":"","x":135.2777862548828,"y":2741.388916015625,"wires":[]},{"id":"c1141344.40dda","type":"actionflows","z":"7d8ace.ba650534","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"snmpSysDscr","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1480,"y":220,"wires":[["238b9518.1d4d0a","e069806b.d53eb8"]]},{"id":"e069806b.d53eb8","type":"unsafe-function","z":"7d8ace.ba650534","name":"SubmodelsProcessing","func":"var msg1 = {};\nvar payload = {};\n//var splitted = msg.payload[0].value[0].value.split(\" \");\n//var splitted = msg.payload.value[0].value.split(\" \");\nvar splitted = msg.payload[0].value.split(\" \");\npayload.type = splitted[0];\npayload.hostname = splitted[1];\npayload.release = splitted[2];\npayload.platform = splitted[3];\npayload.arch = splitted[11];\nmsg1.payload = payload;\nreturn msg1;","outputs":1,"noerr":0,"x":1930,"y":220,"wires":[["bc4af7c2.0f20f","9e8dc389.290c88"]]},{"id":"bc4af7c2.0f20f","type":"debug","z":"7d8ace.ba650534","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":2210,"y":180,"wires":[]},{"id":"238b9518.1d4d0a","type":"debug","z":"7d8ace.ba650534","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1582.75,"y":156.75,"wires":[]},{"id":"2ae79c3c.4c683c","type":"debug","z":"7d8ace.ba650534","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1998.7498779296875,"y":457.7500305175781,"wires":[]},{"id":"932d67c7.86a04","type":"ui_button","z":"7d8ace.ba650534","name":"Clear button","group":"574e8703.290e3","order":2,"width":"3","height":"1","passthru":true,"label":"Clear","tooltip":"","color":"","bgcolor":"#14524e","icon":"clear_all","payload":"","payloadType":"str","topic":"","x":1696.75,"y":1035.75,"wires":[["8139c5b6.fe1478"]]},{"id":"8139c5b6.fe1478","type":"unsafe-function","z":"7d8ace.ba650534","name":"ResetObservations","func":"context.flow.set('logs', []);\nmsg.payload = context.flow.get('logs');\nreturn msg; ","outputs":1,"noerr":0,"x":1911.25,"y":1034.75,"wires":[["d213c3fe.20ec3"]]},{"id":"d213c3fe.20ec3","type":"debug","z":"7d8ace.ba650534","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":2110.25,"y":1036.75,"wires":[]},{"id":"2d60c990.d60e7e","type":"comment","z":"ea9678a6.7fc468","name":"External Interface - Zero-Configuration Networking Management","info":"","x":260,"y":3600,"wires":[]},{"id":"5b0758ec.8f5d4","type":"inject","z":"ea9678a6.7fc468","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":140,"y":3660,"wires":[["9f9867dd.61ee88"]]},{"id":"74e881d0.ef4258","type":"announce","z":"ea9678a6.7fc468","name":"PROPHESY_AAS","service":"_aas._tcp","port":"","txt":"","x":1790,"y":3660,"wires":[]},{"id":"9f9867dd.61ee88","type":"unsafe-function","z":"ea9678a6.7fc468","name":"InitializePort","func":"msg.port = context.global.get('uiPort');\nreturn msg;","outputs":1,"noerr":0,"x":1030,"y":3660,"wires":[["74e881d0.ef4258"]]},{"id":"2709700.dd1689","type":"debug","z":"6ba1a42a.072f84","name":"kafka_MSG","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":490,"y":340,"wires":[]},{"id":"70e72822.9aa298","type":"http request","z":"6ba1a42a.072f84","name":"","method":"use","ret":"txt","paytoqs":false,"url":"","tls":"","persist":false,"proxy":"","authType":"","x":1230,"y":820,"wires":[["f01c9542.05441","14709a44.bc4df6"]]},{"id":"f01c9542.05441","type":"debug","z":"6ba1a42a.072f84","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1450,"y":760,"wires":[]},{"id":"4e70540e.38e3dc","type":"http request","z":"6ba1a42a.072f84","name":"","method":"use","ret":"txt","paytoqs":false,"url":"","tls":"","persist":false,"proxy":"","authType":"","x":1230,"y":900,"wires":[["fbb28385.010058","2dfae11b.a3ec2e"]]},{"id":"fbb28385.010058","type":"debug","z":"6ba1a42a.072f84","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1450,"y":960,"wires":[]},{"id":"b37fc81d.9a8c08","type":"debug","z":"6ba1a42a.072f84","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1190,"y":760,"wires":[]},{"id":"fa467633.09e968","type":"actionflows_in","z":"6ba1a42a.072f84","name":"callDataStreaming_DataFlows in","priority":"50","links":[],"scope":"global","x":290,"y":480,"wires":[["eebf4385.56108","aba0368b.f50128"]]},{"id":"5a992b57.f2e724","type":"actionflows_out","z":"6ba1a42a.072f84","name":"callDataStreaming_DataFlows out","links":[],"x":2800,"y":460,"wires":[]},{"id":"78cff431.48941c","type":"unsafe-function","z":"6ba1a42a.072f84","name":"Toggle_(un)subscription","func":"var dsm =  msg.dsm;\nvar subscriptions = context.flow.get('subscriptions');\nfor(var element in subscriptions){\n    if(subscriptions[element].includes(dsm._Attribs.ID) || subscriptions[element].includes(dsm._Attribs.Name)){\n        msg.mep = \"unsubscribe\";\n//*****************************************************\n//only for testing (it should be defined if which one between ID or Name should be used)\n        //msg.payload = dsm._Attribs.ID;\n        //msg.payload = dsm._Attribs.Name;\n        msg.payload = subscriptions[element];\n//*****************************************************\n        return msg;\n    }\n}\n//msg.payload = di._Attribs.ID;\nmsg.mep = \"subscribe\";\n\n\n//*****************************************************\n//only for testing (it should be defined if which one between ID or Name should be used)\n\n//msg.payload = dsm._Attribs.ID;\nmsg.payload = dsm._Attribs.Name;\n\n//*****************************************************\nreturn msg;","outputs":1,"noerr":0,"x":1510,"y":580,"wires":[["2ea695ac.e7ceba","509c4a47.6516f4"]]},{"id":"c30ded18.593e5","type":"actionflows","z":"6ba1a42a.072f84","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"subscribe","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"private","perf":false,"seq":false,"x":2420,"y":540,"wires":[["5a992b57.f2e724"]]},{"id":"41a108a3.efbfa8","type":"switch","z":"6ba1a42a.072f84","name":"IF_mep","property":"mep","propertyType":"msg","rules":[{"t":"eq","v":"subscribe","vt":"str"},{"t":"eq","v":"unsubscribe","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":2239.1272583007812,"y":558.2936706542969,"wires":[["c30ded18.593e5"],["e9951b30.5e1bc"]]},{"id":"e9951b30.5e1bc","type":"actionflows","z":"6ba1a42a.072f84","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"unsubscribe","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"private","perf":false,"seq":false,"x":2432.5003662109375,"y":591.6666870117188,"wires":[["5a992b57.f2e724"]]},{"id":"770abf94.2046a8","type":"actionflows_in","z":"6ba1a42a.072f84","name":"subscribe in","priority":"50","links":[],"scope":"private","x":230,"y":820,"wires":[["8bf6e919.2cc818"]]},{"id":"549f930.f8a666c","type":"actionflows_out","z":"6ba1a42a.072f84","name":"subscribe out","links":[],"x":2870,"y":820,"wires":[]},{"id":"bb4d2bb3.a52cb","type":"actionflows_in","z":"6ba1a42a.072f84","name":"unsubscribe in","priority":"50","links":[],"scope":"private","x":230,"y":900,"wires":[["5abc998.b98b1e8"]]},{"id":"4c77f9d5.547b4","type":"actionflows_out","z":"6ba1a42a.072f84","name":"unsubscribe out","links":[],"x":2860,"y":900,"wires":[]},{"id":"38e4cd89.9d23aa","type":"debug","z":"7d8ace.ba650534","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1601.8055419921875,"y":837.916748046875,"wires":[]},{"id":"4da72e7.36ae9d","type":"http request","z":"7d8ace.ba650534","name":"","method":"PUT","ret":"txt","url":"","tls":"","x":1502.3541259765625,"y":926.1041870117188,"wires":[["510f79fa.f9d1e"]]},{"id":"54db2fe.ecf295","type":"unsafe-function","z":"7d8ace.ba650534","name":"LiveDataToSubscribe","func":"//Retreiving Libraries from the Settings.json file\nvar outputMsgs = [];\nvar selectedElements = context.flow.get('selectedElements');\nfor(var element in selectedElements){\n    //var msg = {payload:selectedElements[element]};\n    var selected_element = selectedElements[element]._Attribs.ID;\n    var msg = {payload:selected_element};\n    msg.url = context.global.get('namespace') + \"/aas/manifest/liveData/subscribe/property/\" + selected_element;\n    outputMsgs.push(msg);\n    \n}\n\nreturn [outputMsgs];","outputs":1,"noerr":0,"x":1379.8541259765625,"y":838.6041870117188,"wires":[["4da72e7.36ae9d","38e4cd89.9d23aa"]]},{"id":"8bf6e919.2cc818","type":"unsafe-function","z":"6ba1a42a.072f84","name":"Create Flow topic - aas-topic","func":"msg.headers = {\"Content-type\" : \"application/json\"}\nmsg.url = context.global.get(\"DataStreamingEndpoint\") + \"/dataStream/gateway/aas/newDataFlow?requestId=\" + msg.payload;\nmsg.method = \"GET\";\nreturn msg;","outputs":1,"noerr":0,"x":940,"y":820,"wires":[["b37fc81d.9a8c08","70e72822.9aa298"]]},{"id":"5abc998.b98b1e8","type":"unsafe-function","z":"6ba1a42a.072f84","name":"Remove Flow topic - aas-topic","func":"msg.headers = {\"Content-type\" : \"application/json\"}\nmsg.url = context.global.get(\"DataStreamingEndpoint\") + \"/dataStream/dataFlows/\"+ msg.payload;\nmsg.method = \"DELETE\";\nreturn msg;","outputs":1,"noerr":0,"x":950,"y":900,"wires":[["87a3bb09.8bb768","4e70540e.38e3dc"]]},{"id":"3c632ee.8f192d2","type":"inject","z":"6ba1a42a.072f84","name":"","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":209.8541717529297,"y":62.354164123535156,"wires":[["ca4bd7e9.4e4168"]]},{"id":"ca4bd7e9.4e4168","type":"unsafe-function","z":"6ba1a42a.072f84","name":"flowVariables","func":"context.flow.set('subscriptions', []);\ncontext.flow.set('connected', false);","outputs":1,"noerr":0,"x":794.2291107177734,"y":62.35417938232422,"wires":[[]]},{"id":"2ea695ac.e7ceba","type":"debug","z":"6ba1a42a.072f84","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1710,"y":520,"wires":[]},{"id":"510f79fa.f9d1e","type":"debug","z":"7d8ace.ba650534","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1671.1041259765625,"y":926.1041870117188,"wires":[]},{"id":"eebf4385.56108","type":"debug","z":"6ba1a42a.072f84","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":470,"y":420,"wires":[]},{"id":"87a3bb09.8bb768","type":"debug","z":"6ba1a42a.072f84","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1190,"y":960,"wires":[]},{"id":"56a2cd8c.2f4cec","type":"msg-router","z":"7d8ace.ba650534","routerType":"broadcast","topicDependent":false,"counterReset":false,"msgKeyField":"payload","undefinedHash":false,"outputsInfo":[{"active":true,"clone":false,"delay":"0","weight":"0"},{"active":true,"clone":false,"delay":"0","weight":"0"},{"active":true,"clone":false,"delay":"0","weight":"0"},{"active":true,"clone":false,"delay":"0","weight":"0"}],"name":"","delaying":"unrelated","msgControl":false,"outputs":4,"x":2012.88330078125,"y":337.8833312988281,"wires":[["51e8b05d.b1dd68"],["370804af.c2f93c"],["6c7a5793.3b1058"],["ef7ecfd2.cbe18"]]},{"id":"4a8339c8.08238","type":"msg-router","z":"7d8ace.ba650534","routerType":"broadcast","topicDependent":false,"counterReset":false,"msgKeyField":"payload","undefinedHash":false,"outputsInfo":[{"active":true,"clone":false,"delay":"0","weight":"0"},{"active":true,"clone":false,"delay":"0","weight":"0"},{"active":true,"clone":false,"delay":"0","weight":"0"}],"name":"","delaying":"unrelated","msgControl":false,"outputs":3,"x":2537.88330078125,"y":121.88334655761719,"wires":[["87e4533c.6100a8"],["cb9611f8.7fbf48"],["3ac2b6fa.e47ab2"]]},{"id":"b54b0553.35085","type":"msg-router","z":"7d8ace.ba650534","routerType":"broadcast","topicDependent":false,"counterReset":false,"msgKeyField":"payload","undefinedHash":false,"outputsInfo":[{"active":true,"clone":false,"delay":"0","weight":"0"},{"active":true,"clone":true,"delay":"0","weight":"0"},{"active":true,"clone":true,"delay":"0","weight":"0"}],"name":"","delaying":"unrelated","msgControl":false,"outputs":3,"x":1752.88330078125,"y":425.8833312988281,"wires":[["2ae79c3c.4c683c","c3941d26.2f39e8"],["728efdb8.7a2f2c"],["69245b91.53b864"]]},{"id":"4533e60b.c3ab1","type":"msg-router","z":"7d8ace.ba650534","routerType":"broadcast","topicDependent":false,"counterReset":false,"msgKeyField":"payload","undefinedHash":false,"outputsInfo":[{"active":true,"clone":true,"delay":"0","weight":"0"},{"active":true,"clone":true,"delay":"0","weight":"0"},{"active":true,"clone":true,"delay":"0","weight":"0"}],"name":"","delaying":"unrelated","msgControl":false,"outputs":3,"x":1773.2164916992188,"y":778.550048828125,"wires":[["728efdb8.7a2f2c"],["69245b91.53b864"],["ca28ebcb.8d0c2"]]},{"id":"728607de.0dfeb8","type":"debug","z":"7d8ace.ba650534","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":894.8831787109375,"y":54.88335418701172,"wires":[]},{"id":"33730183.c577ce","type":"set-defaults","z":"ea9678a6.7fc468","name":"set-startTime","rules":[{"p":"startTime","pt":"msg","to":"","tot":"date"}],"chbox_DoOutputToMessage":true,"chbox_SetCurrentToMsg":false,"howSend":{"text":"payload","type":"msg","modifiedValue":"payload"},"dropdown_HowManyMessages":"single","dropdownObjOrVal":"value","outputs":1,"x":330,"y":340,"wires":[["dc2c0a71.0f9c28"]]},{"id":"b0301286.7cb55","type":"set-defaults","z":"ea9678a6.7fc468","name":"set-startTime","rules":[{"p":"startTime","pt":"msg","to":"","tot":"date"}],"chbox_DoOutputToMessage":true,"chbox_SetCurrentToMsg":false,"howSend":{"text":"payload","type":"msg","modifiedValue":"payload"},"dropdown_HowManyMessages":"single","dropdownObjOrVal":"value","outputs":1,"x":430,"y":540,"wires":[["79e0879f.4094b"]]},{"id":"3b27b8e9.38c008","type":"subflow:3bcb972f.6d23c8","z":"ea9678a6.7fc468","name":"","env":[],"x":1830,"y":580,"wires":[],"icon":"node-red-contrib-viseo-log/log.svg"},{"id":"c4f77505.6dbe48","type":"set-defaults","z":"ea9678a6.7fc468","name":"set-startTime","rules":[{"p":"startTime","pt":"msg","to":"","tot":"date"}],"chbox_DoOutputToMessage":true,"chbox_SetCurrentToMsg":false,"howSend":{"text":"payload","type":"msg","modifiedValue":"payload"},"dropdown_HowManyMessages":"single","dropdownObjOrVal":"value","outputs":1,"x":420,"y":740,"wires":[["9fa8bbdc.a87f78"]]},{"id":"fe3bd907.1be7a","type":"subflow:3bcb972f.6d23c8","z":"ea9678a6.7fc468","name":"","x":1830,"y":780,"wires":[],"icon":"node-red-contrib-viseo-log/log.svg"},{"id":"b6a8fb51.64c6d8","type":"set-defaults","z":"ea9678a6.7fc468","name":"set-startTime","rules":[{"p":"startTime","pt":"msg","to":"","tot":"date"}],"chbox_DoOutputToMessage":true,"chbox_SetCurrentToMsg":false,"howSend":{"text":"payload","type":"msg","modifiedValue":"payload"},"dropdown_HowManyMessages":"single","dropdownObjOrVal":"value","outputs":1,"x":420,"y":880,"wires":[["9750cbe2.6ec5"]]},{"id":"33e0954b.990732","type":"subflow:3bcb972f.6d23c8","z":"ea9678a6.7fc468","name":"","env":[],"x":1830,"y":920,"wires":[],"icon":"node-red-contrib-viseo-log/log.svg"},{"id":"7e56cc97.05b744","type":"debug","z":"ea9678a6.7fc468","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":290,"y":300,"wires":[]},{"id":"35b3d7a4.90b9c","type":"http in","z":"ea9678a6.7fc468","name":"","url":"/aas/upload","method":"get","upload":false,"swaggerDoc":"","x":120,"y":120,"wires":[["59d8644f.7fae0c"]]},{"id":"cbcbd016.9163a","type":"http response","z":"ea9678a6.7fc468","name":"","statusCode":"","headers":{},"x":450,"y":120,"wires":[]},{"id":"e4d263e1.a01ec","type":"debug","z":"ea9678a6.7fc468","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":430,"y":160,"wires":[]},{"id":"16172375.09aa25","type":"httpInMultipart","z":"ea9678a6.7fc468","name":"","url":"/aas/initialize","method":"post","fields":"[{\"name\": \"manifest\"}]","swaggerDoc":"","x":130,"y":340,"wires":[["33730183.c577ce","7e56cc97.05b744"]]},{"id":"21561ede.99c7fa","type":"actionflows_in","z":"2e7b7c8b.80c47c","name":"readSubmodels in","priority":"50","links":[],"scope":"global","x":364.8833312988281,"y":475.8833312988281,"wires":[["42f608f0.436a58"]]},{"id":"52eead63.9cadac","type":"actionflows_out","z":"2e7b7c8b.80c47c","name":"readSubmodels out","links":[],"x":1503.2166137695312,"y":474.2165832519531,"wires":[]},{"id":"a5054e60.635ca8","type":"actionflows_in","z":"2e7b7c8b.80c47c","name":"readSubmodel in","priority":"50","links":[],"scope":"global","x":353.383056640625,"y":564.1214904785156,"wires":[["8dd1ab76.8da5f8"]]},{"id":"e71d509b.dff62","type":"actionflows_out","z":"2e7b7c8b.80c47c","name":"readSubmodel out","links":[],"x":1494.0497436523438,"y":564.4547424316406,"wires":[]},{"id":"505b757f.a59384","type":"actionflows_in","z":"2e7b7c8b.80c47c","name":"addSubmodel in","priority":"50","links":[],"scope":"global","x":356.7641296386719,"y":691.3595123291016,"wires":[["d4db5fec.a2d7b"]]},{"id":"bd0ba82b.f763a8","type":"actionflows_out","z":"2e7b7c8b.80c47c","name":"addSubmodel out","links":[],"x":1493.4309387207031,"y":694.6928863525391,"wires":[]},{"id":"2f3e7538.342c32","type":"actionflows_in","z":"2e7b7c8b.80c47c","name":"removeSubmodel in","priority":"50","links":[],"scope":"global","x":366.7641296386719,"y":841.3595123291016,"wires":[["727c1b88.68933c"]]},{"id":"77306dff.a8396c","type":"actionflows_out","z":"2e7b7c8b.80c47c","name":"removeSubmodel out","links":[],"x":1501.7643127441406,"y":848.0260772705078,"wires":[]},{"id":"bab03e7d.566ac","type":"actionflows_in","z":"2e7b7c8b.80c47c","name":"updateSubmodel in","priority":"50","links":[],"scope":"global","x":370.4308166503906,"y":955.6928863525391,"wires":[["1f1e779e.3614f8"]]},{"id":"435e1efb.472ae8","type":"actionflows_out","z":"2e7b7c8b.80c47c","name":"updateSubmodel out","links":[],"x":1502.4309387207031,"y":958.3595123291016,"wires":[]},{"id":"c5ab7080.a33f38","type":"unsafe-function","z":"2e7b7c8b.80c47c","name":"PersistModel","func":"var XML = context.global.get('XML');\nvar manifest = context.flow.get('manifest');\n\nvar xml_string_composed = XML.stringify(manifest, 'CAEXFile');\nmsg.payload = xml_string_composed;\n\nreturn msg;","outputs":1,"noerr":0,"x":1020.5379943847656,"y":1625.6214752197266,"wires":[["16352d53.9e3833"]]},{"id":"16352d53.9e3833","type":"file","z":"2e7b7c8b.80c47c","name":"PersistModel","filename":"","appendNewline":false,"createDir":true,"overwriteFile":"true","x":1219.7879943847656,"y":1625.3714752197266,"wires":[["72f2757f.76e7c4"]]},{"id":"e568430.beb69c","type":"unsafe-function","z":"2e7b7c8b.80c47c","name":"RetrievingModelFilePath","func":"msg.filename = context.global.get(\"ModelFilePath\");\nreturn msg;","outputs":1,"noerr":0,"x":671.7879943847656,"y":1626.1214752197266,"wires":[["c5ab7080.a33f38"]]},{"id":"69330d9a.ffc564","type":"actionflows_in","z":"2e7b7c8b.80c47c","name":"persistManifest in","priority":"50","links":[],"scope":"global","x":353.0379943847656,"y":1626.1214752197266,"wires":[["e568430.beb69c"]]},{"id":"72f2757f.76e7c4","type":"actionflows_out","z":"2e7b7c8b.80c47c","name":"persistManifest out","links":[],"x":1474.2878723144531,"y":1625.3714752197266,"wires":[]},{"id":"42f608f0.436a58","type":"unsafe-function","z":"2e7b7c8b.80c47c","name":"RetrievingSubmodels...","func":"//var xml_string = msg.payload;\n//var XML = context.global.get('XML');\n//var doc = XML.parse( xml_string, { preserveAttributes: true, forceArrays: true  } );\n/*\nvar xml_string_composed = XML.stringify( doc, 'CAEXFile');\nmsg.composed = xml_string_composed;\n*/\n\n/*var parser = null;\n\ntry {\n    parser = new XML.Parser(xml_string, { preserveAttributes: true, forceArrays: true} );\n}\ncatch (err) {\n    throw err;\n}*/\n//var manifest = parser.getTree();\n//var manifest = context.global.get(\"manifest\");\n//var submodelsList = manifest.InstanceHierarchy[0].InternalElement[1].InternalElement[0].InternalElement;\n\n/*if(typeof submodelsList === \"undefined\"){\n    submodelsList = {};\n}*/\n\n//msg.manifest.submodels = submodels;\n//msg.manifest = manifest;\n\n/*msg.payload = context.flow.get(\"body\");\nmsg.AASID = context.flow.get('AASIdentifier');*/\n\nvar manifest = context.flow.get(\"manifest\");\nvar body = manifest.InstanceHierarchy[0].InternalElement[1];\nmsg.payload = body;\nmsg.AASID = context.global.get('AASIdentifier');\nreturn msg;","outputs":1,"noerr":0,"x":1135.9546508789062,"y":473.5022888183594,"wires":[["52eead63.9cadac"]]},{"id":"8dd1ab76.8da5f8","type":"unsafe-function","z":"2e7b7c8b.80c47c","name":"RetrievingSubmodelById...","func":"var SubmodelId = msg.req.params.id;\n/*var submodels = context.flow.get(\"submodels\");\nmsg.AASID = context.flow.get('AASIdentifier');\nfor(var submodelIndex in submodels){\n        var submodel = submodels[submodelIndex];\n        var id = submodel._Attribs.ID; \n        if (id.localeCompare(SubmodelId) === 0){\n                msg.payload = submodel;\n                msg.statusCode = \"200\";\n                return msg;\n        }\n    }\nmsg.statusCode = \"404\";\nmsg.payload = \"submodel with id:\" + SubmodelId + \" not found\"\nreturn msg;*/\nvar manifest = context.flow.get('manifest');\nvar body = manifest.InstanceHierarchy[0].InternalElement[1];\nvar submodels = body.InternalElement;\nmsg.AASID = context.flow.get('AASIdentifier');\nfor(var submodelIndex in submodels){\n        var submodel = submodels[submodelIndex];\n        var id = submodel._Attribs.ID; \n        if (id.localeCompare(SubmodelId) === 0){\n                msg.payload = submodel;\n                msg.statusCode = \"200\";\n                return msg;\n        }\n    }\nmsg.statusCode = \"404\";\nmsg.payload = \"submodel with id:\" + SubmodelId + \" not found\"\nreturn msg;\n","outputs":1,"noerr":0,"x":1132.6211547851562,"y":565.4070739746094,"wires":[["e71d509b.dff62"]]},{"id":"d4db5fec.a2d7b","type":"unsafe-function","z":"2e7b7c8b.80c47c","name":"AddingSubmodel...","func":"//var xml_string = msg.payload;\n//var XML = context.global.get('XML');\n\nvar submodel = msg.payload;\n//var doc = XML.parse( xml_string, { preserveAttributes: true, forceArrays: true  } );\n/*\nvar xml_string_composed = XML.stringify( doc, 'CAEXFile');\nmsg.composed = xml_string_composed;\n*/\n\n/*var parser = null;\n\ntry {\n    parser = new XML.Parser(xml_string, { preserveAttributes: true, forceArrays: true} );\n}\ncatch (err) {\n    throw err;\n}*/\n//var manifest = context.global.get(\"manifest\");\n//var manifest = parser.getTree();\n\n/*var submodels = context.flow.get(\"submodels\");\nmsg.AASID = context.flow.get('AASIdentifier');\nfor(var submodelIndex in submodels){\n    if(submodel._Attribs.ID == submodels[submodelIndex]._Attribs.ID){\n        msg.payload = \"Error submodel ID already exists\";\n        msg.statusCode = \"409\";\n        return msg;\n    }\n}\nsubmodels.push(submodel);\nvar propertiesList = context.flow.get('properties');\nvar properties = submodel.InternalElement;\n    for(var propertyIndex in properties){\n        propertiesList.push(properties[propertyIndex]);\n    }\nmsg.statusCode = \"201\";\nreturn msg;*/\n\nvar manifest = context.flow.get('manifest');\nvar body = manifest.InstanceHierarchy[0].InternalElement[1];\nvar submodels = body.InternalElement;\nmsg.AASID = context.flow.get('AASIdentifier');\nfor(var submodelIndex in submodels){\n    if(submodel._Attribs.ID == submodels[submodelIndex]._Attribs.ID){\n        msg.payload = \"Error submodel ID already exists\";\n        msg.statusCode = \"409\";\n        return msg;\n    }\n}\nsubmodels.push(submodel);\nmsg.statusCode = \"201\";\nreturn msg;\n\n","outputs":1,"noerr":0,"x":911.6689758300781,"y":688.9785919189453,"wires":[["2764e76.2d92598"]]},{"id":"2764e76.2d92598","type":"switch","z":"2e7b7c8b.80c47c","name":"","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"201","vt":"str"},{"t":"eq","v":"409","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":1090.0023498535156,"y":688.9784698486328,"wires":[["35baa665.01a1ba"],["bd0ba82b.f763a8"]]},{"id":"35baa665.01a1ba","type":"actionflows","z":"2e7b7c8b.80c47c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"persistManifest","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1284.1689758300781,"y":638.9784698486328,"wires":[["bd0ba82b.f763a8"]]},{"id":"727c1b88.68933c","type":"unsafe-function","z":"2e7b7c8b.80c47c","name":"RemovingSubmodel...","func":"//var xml_string = msg.payload;\n//var XML = context.global.get('XML');\n\nvar submodelID = msg.req.params.id;\n//var doc = XML.parse( xml_string, { preserveAttributes: true, forceArrays: true  } );\n/*\nvar xml_string_composed = XML.stringify( doc, 'CAEXFile');\nmsg.composed = xml_string_composed;\n*/\n\n/*var parser = null;\n\ntry {\n    parser = new XML.Parser(xml_string, { preserveAttributes: true, forceArrays: true} );\n}\ncatch (err) {\n    throw err;\n}*/\n//var manifest = context.global.get(\"manifest\");\n//var manifest = parser.getTree();\n\n/*\nmsg.AASID = context.flow.get('AASIdentifier');\nvar submodels = context.flow.get(\"submodels\");\nfor(var submodelIndex in submodels){\n    if(submodelID == submodels[submodelIndex]._Attribs.ID){\n        var submodel = submodels[submodelIndex];\n        submodels.splice(submodelIndex, 1);\n        msg.statusCode = \"200\";\n        var propertiesList = context.flow.get('properties');\n        var properties = submodel.InternalElement;\n        for(var propertyIndex in properties){\n            for(var propertyIndex2 in propertiesList){\n                if(properties[propertyIndex]._Attribs.ID == propertiesList[propertyIndex2]._Attribs.ID){\n                    propertiesList.splice(propertyIndex2, 1);\n                }\n            }\n        }\n        return msg;\n    }\n}\n\nmsg.payload = \"Error Submodel not found for Id: \" + submodelID;\nmsg.statusCode = \"404\";\nreturn msg;*/\n\nvar manifest = context.flow.get('manifest');\nvar body = manifest.InstanceHierarchy[0].InternalElement[1];\nvar submodels = body.InternalElement;\nmsg.AASID = context.flow.get('AASIdentifier');\nfor(var submodelIndex in submodels){\n    if(submodelID == submodels[submodelIndex]._Attribs.ID){\n        var submodel = submodels[submodelIndex];\n        submodels.splice(submodelIndex, 1);\n        msg.statusCode = \"200\";\n        return msg;\n    }\n}\nmsg.payload = \"Error Submodel not found for Id: \" + submodelID;\nmsg.statusCode = \"404\";\nreturn msg;\n\n","outputs":1,"noerr":0,"x":916.6688537597656,"y":840.6452178955078,"wires":[["e8c3346b.7e06a"]]},{"id":"e8c3346b.7e06a","type":"switch","z":"2e7b7c8b.80c47c","name":"","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"200","vt":"str"},{"t":"eq","v":"404","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":1090.0022277832031,"y":840.6450958251953,"wires":[["c3b473c6.bd77e8"],["77306dff.a8396c"]]},{"id":"c3b473c6.bd77e8","type":"actionflows","z":"2e7b7c8b.80c47c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"persistManifest","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1285.0022277832031,"y":795.6452178955078,"wires":[["77306dff.a8396c"]]},{"id":"1f1e779e.3614f8","type":"unsafe-function","z":"2e7b7c8b.80c47c","name":"UpdatingSubmodel...","func":"var submodel = msg.payload;\n/*\nvar xml_string_composed = XML.stringify( doc, 'CAEXFile');\nmsg.composed = xml_string_composed;\n*/\n\n/*var parser = null;\n\ntry {\n    parser = new XML.Parser(xml_string, { preserveAttributes: true, forceArrays: true} );\n}\ncatch (err) {\n    throw err;\n}*/\n//var manifest = context.global.get(\"manifest\");\n//var manifest = parser.getTree();\n\n/*\nmsg.AASID = context.flow.get('AASIdentifier');\nvar submodels = context.flow.get(\"submodels\");\nfor(var submodelIndex in submodels){\n    if(submodel._Attribs.ID == submodels[submodelIndex]._Attribs.ID){\n        submodels[submodelIndex] = submodel;\n        msg.statusCode = \"200\";\n        var propertiesList = context.flow.get('properties');\n        var properties = submodel.InternalElement;\n        for(var propertyIndex in properties){\n            propertiesList.push(properties[propertyIndex]);\n        }\n        return msg;\n    }\n}\nmsg.statusCode = \"404\";\nreturn msg;\n*/\n\nvar manifest = context.flow.get('manifest');\nvar body = manifest.InstanceHierarchy[0].InternalElement[1];\nvar submodels = body.InternalElement;\nmsg.AASID = context.flow.get('AASIdentifier');\nfor(var submodelIndex in submodels){\n    if(submodel._Attribs.ID == submodels[submodelIndex]._Attribs.ID){\n        submodels[submodelIndex] = submodel;\n        msg.statusCode = \"200\";\n        return msg;\n    }\n}\nmsg.statusCode = \"404\";\nreturn msg;","outputs":1,"noerr":0,"x":916.6688537597656,"y":953.9782867431641,"wires":[["3601cd2e.3ea392"]]},{"id":"3601cd2e.3ea392","type":"switch","z":"2e7b7c8b.80c47c","name":"","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"200","vt":"str"},{"t":"eq","v":"404","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":1096.6688537597656,"y":953.9781646728516,"wires":[["c8bdaf18.5e10d"],["435e1efb.472ae8"]]},{"id":"c8bdaf18.5e10d","type":"actionflows","z":"2e7b7c8b.80c47c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"persistManifest","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1286.6688537597656,"y":917.3118438720703,"wires":[["435e1efb.472ae8"]]},{"id":"2a62f14e.0ca006","type":"actionflows_in","z":"2e7b7c8b.80c47c","name":"readManifest in","priority":"50","links":[],"scope":"global","x":355.7165222167969,"y":275.40716552734375,"wires":[["e1a82b13.00ef38"]]},{"id":"b50ce31c.eeb61","type":"actionflows_out","z":"2e7b7c8b.80c47c","name":"readManifest out","links":[],"x":1501.4307861328125,"y":278.2642822265625,"wires":[]},{"id":"e1a82b13.00ef38","type":"unsafe-function","z":"2e7b7c8b.80c47c","name":"RetrievingManifest...","func":"msg.payload = context.flow.get(\"manifest\");\nmsg.AASID = context.flow.get('AASIdentifier');\nreturn msg;","outputs":1,"noerr":0,"x":1105.0023193359375,"y":276.8356628417969,"wires":[["b50ce31c.eeb61"]]},{"id":"a1fe98cc.8eb628","type":"actionflows_in","z":"2e7b7c8b.80c47c","name":"readProperty in","priority":"50","links":[],"scope":"global","x":355.002197265625,"y":1069.6929473876953,"wires":[["b5154262.d9eae"]]},{"id":"38e1879b.464aa","type":"actionflows_out","z":"2e7b7c8b.80c47c","name":"readProperty out","links":[],"x":1495.6688842773438,"y":1070.0261993408203,"wires":[]},{"id":"b5154262.d9eae","type":"unsafe-function","z":"2e7b7c8b.80c47c","name":"RetrievingPropertyById...","func":"/*msg.AASID = context.flow.get('AASIdentifier');\nvar propertyId = msg.req.params.id;\nvar properties = context.flow.get(\"properties\");\nfor(var propertyIndex in properties){\n        var property = properties[propertyIndex];\n        var id = property._Attribs.ID; \n        if (id.localeCompare(propertyId) === 0){\n                msg.payload = property;\n                msg.statusCode = \"200\";\n                return msg;\n        }\n    }\nmsg.statusCode = \"404\";\nmsg.payload = \"property with id:\" + propertyId + \" not found\"\nreturn msg;\n*/\n\nmsg.AASID = context.flow.get('AASIdentifier');\nvar propertyId = msg.req.params.id;\nvar manifest = context.flow.get('manifest');\nvar body = manifest.InstanceHierarchy[0].InternalElement[1];\nvar submodels = body.InternalElement;\nfor(var submodel in submodels){\n    var properties = submodels[submodel].InternalElement;\n    for(var propertyIndex in properties){\n        var property = properties[propertyIndex];\n        var id = property._Attribs.ID; \n        if (id.localeCompare(propertyId) === 0){\n                msg.payload = property;\n                msg.statusCode = \"200\";\n                return msg;\n        }\n    }\n}\nmsg.statusCode = \"404\";\nmsg.payload = \"property with id:\" + propertyId + \" not found\"\nreturn msg;","outputs":1,"noerr":0,"x":1124.2402954101562,"y":1070.978530883789,"wires":[["38e1879b.464aa"]]},{"id":"48ac29d5.99505","type":"actionflows_in","z":"2e7b7c8b.80c47c","name":"addProperty in","priority":"50","links":[],"scope":"global","x":356.4307556152344,"y":1195.407241821289,"wires":[["6b2c0b7b.ecb0f4"]]},{"id":"de855a53.465a58","type":"actionflows_out","z":"2e7b7c8b.80c47c","name":"addProperty out","links":[],"x":1483.0975646972656,"y":1198.7406158447266,"wires":[]},{"id":"6b2c0b7b.ecb0f4","type":"unsafe-function","z":"2e7b7c8b.80c47c","name":"AddingProperty...","func":"//var xml_string = msg.payload;\n//var XML = context.global.get('XML');\n\nvar property = msg.payload;\nvar submodelId = msg.req.params.id;\n\n\n//var doc = XML.parse( xml_string, { preserveAttributes: true, forceArrays: true  } );\n/*\nvar xml_string_composed = XML.stringify( doc, 'CAEXFile');\nmsg.composed = xml_string_composed;\n*/\n\n/*var parser = null;\n\ntry {\n    parser = new XML.Parser(xml_string, { preserveAttributes: true, forceArrays: true} );\n}\ncatch (err) {\n    throw err;\n}*/\n//var manifest = context.global.get(\"manifest\");\n//var manifest = parser.getTree();\n\n/*\nmsg.AASID = context.flow.get('AASIdentifier');\nvar properties = context.flow.get(\"properties\");\nfor(var propertyIndex in properties){\n    if(properties[propertyIndex]._Attribs.ID == property._Attribs.ID){\n        msg.payload = \"Error property ID already exists\";\n        msg.statusCode = \"409\";\n        return msg;\n    }\n}\nproperties.push(property);\n\nvar submodels = context.flow.get('submodels');\n    for(var submodelIndex in submodels){\n        if(submodels[submodelIndex]._Attribs.ID == submodelId){\n            if(typeof submodels[submodelIndex].InternalElement === \"undefined\"){\n                submodels[submodelIndex].InternalElement = [];\n                submodels[submodelIndex].InternalElement.push(property)\n            }\n            else{\n                submodels[submodelIndex].InternalElement.push(property);\n            }\n            break;\n        }\n    }\n\nmsg.statusCode = \"201\";\nreturn msg;*/\n\nmsg.AASID = context.flow.get('AASIdentifier');\nvar manifest = context.flow.get('manifest');\nvar body = manifest.InstanceHierarchy[0].InternalElement[1];\nvar submodels = body.InternalElement;\nfor(var submodel in submodels){\n    if(submodels[submodel]._Attribs.ID == submodelId){\n        if(typeof submodels[submodel].InternalElement === \"undefined\"){\n            submodels[submodel].InternalElement = [];\n            submodels[submodel].InternalElement.push(property)\n        }\n        else{\n            var properties = submodels[submodel].InternalElement;\n            for(var propertyIndex in properties){\n                if(properties[propertyIndex]._Attribs.ID == property._Attribs.ID){\n                    msg.payload = \"Error property ID already exists\";\n                    msg.statusCode = \"409\";\n                    return msg;\n                }\n            }\n            submodels[submodel].InternalElement.push(property);\n        }\n        break;\n    }\n}\nmsg.statusCode = \"201\";\nreturn msg;\n","outputs":1,"noerr":0,"x":911.3356018066406,"y":1193.0263214111328,"wires":[["84422408.051f4"]]},{"id":"84422408.051f4","type":"switch","z":"2e7b7c8b.80c47c","name":"","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"201","vt":"str"},{"t":"eq","v":"409","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":1089.6689758300781,"y":1193.0261993408203,"wires":[["53887049.5df648"],["de855a53.465a58"]]},{"id":"53887049.5df648","type":"actionflows","z":"2e7b7c8b.80c47c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"persistManifest","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1283.8356018066406,"y":1143.0261993408203,"wires":[["de855a53.465a58"]]},{"id":"d604487a.f255b","type":"actionflows_in","z":"2e7b7c8b.80c47c","name":"removeProperty in","priority":"50","links":[],"scope":"global","x":363.5736083984375,"y":1325.4071197509766,"wires":[["4adb7671.3023a8"]]},{"id":"e419ea43.1a038","type":"actionflows_out","z":"2e7b7c8b.80c47c","name":"removeProperty out","links":[],"x":1488.5737915039062,"y":1332.0736846923828,"wires":[]},{"id":"4adb7671.3023a8","type":"unsafe-function","z":"2e7b7c8b.80c47c","name":"RemovingProperty...","func":"//var xml_string = msg.payload;\n//var XML = context.global.get('XML');\n\nvar propertyID = msg.req.params.id;\n//var doc = XML.parse( xml_string, { preserveAttributes: true, forceArrays: true  } );\n/*\nvar xml_string_composed = XML.stringify( doc, 'CAEXFile');\nmsg.composed = xml_string_composed;\n*/\n\n/*var parser = null;\n\ntry {\n    parser = new XML.Parser(xml_string, { preserveAttributes: true, forceArrays: true} );\n}\ncatch (err) {\n    throw err;\n}*/\n//var manifest = context.global.get(\"manifest\");\n//var manifest = parser.getTree();\n\n/*\nmsg.AASID = context.flow.get('AASIdentifier');\nvar propertiesList = context.flow.get('properties');\nfor(var propertyIndex in propertiesList){\n    if(propertyID == propertiesList[propertyIndex]._Attribs.ID){\n        propertiesList.splice(propertyIndex, 1);\n        var submodels = context.flow.get(\"submodels\");\n        for(var submodelIndex in submodels){\n        var properties = submodel.InternalElement;\n        for(var propertyIndex2 in properties){\n            if(properties[propertyIndex2]._Attribs.ID == propertyID){\n                propertiesList.splice(propertyIndex2, 1);\n            }\n        }\n        msg.statusCode = \"200\";\n        return msg;\n        }\n    }\n}\n\nmsg.payload = \"Error Property not found for Id: \" + propertyID;\nmsg.statusCode = \"404\";\nreturn msg;\n*/\n\nmsg.AASID = context.flow.get('AASIdentifier');\nvar manifest = context.flow.get('manifest');\nvar body = manifest.InstanceHierarchy[0].InternalElement[1];\nvar submodels = body.InternalElement;\nfor(var submodel in submodels){\n    var properties = submodels[submodel].InternalElement;\n    for(var propertyIndex in properties){\n        if(properties[propertyIndex]._Attribs.ID == propertyID){\n            properties.splice(propertyIndex, 1);\n            msg.statusCode = \"200\";\n            return msg;\n        }\n    }\n}\n\nmsg.payload = \"Error Property not found for Id: \" + propertyID;\nmsg.statusCode = \"404\";\nreturn msg;","outputs":1,"noerr":0,"x":913.4783325195312,"y":1324.6928253173828,"wires":[["88972943.1f97d8"]]},{"id":"88972943.1f97d8","type":"switch","z":"2e7b7c8b.80c47c","name":"","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"200","vt":"str"},{"t":"eq","v":"404","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":1086.8117065429688,"y":1324.6927032470703,"wires":[["f58b81f0.88ec1"],["e419ea43.1a038"]]},{"id":"f58b81f0.88ec1","type":"actionflows","z":"2e7b7c8b.80c47c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"persistManifest","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1281.8117065429688,"y":1279.6928253173828,"wires":[["e419ea43.1a038"]]},{"id":"c105a812.bb81a8","type":"actionflows_in","z":"2e7b7c8b.80c47c","name":"updateProperty in","priority":"50","links":[],"scope":"global","x":367.5736083984375,"y":1453.4071197509766,"wires":[["1e8c7341.e10d15"]]},{"id":"d4d8b7bb.c07968","type":"actionflows_out","z":"2e7b7c8b.80c47c","name":"updateProperty out","links":[],"x":1489.57373046875,"y":1456.073745727539,"wires":[]},{"id":"1e8c7341.e10d15","type":"unsafe-function","z":"2e7b7c8b.80c47c","name":"UpdatingProperty...","func":"var property = msg.payload;\n/*\nvar xml_string_composed = XML.stringify( doc, 'CAEXFile');\nmsg.composed = xml_string_composed;\n*/\n\n/*var parser = null;\n\ntry {\n    parser = new XML.Parser(xml_string, { preserveAttributes: true, forceArrays: true} );\n}\ncatch (err) {\n    throw err;\n}*/\n//var manifest = context.global.get(\"manifest\");\n//var manifest = parser.getTree();\n\n\n/*msg.AASID = context.flow.get('AASIdentifier');\nvar propertiesList = context.flow.get('properties');\nfor(var propertyIndex in propertiesList){\n    if(property._Attribs.ID == propertiesList[propertyIndex]._Attribs.ID){\n        propertiesList[propertyIndex] = property;\n        msg.statusCode = \"200\";\n        return msg;\n    }\n}\n\nmsg.statusCode = \"404\";\nreturn msg;*/\n\nmsg.AASID = context.flow.get('AASIdentifier');\nvar manifest = context.flow.get('manifest');\nvar body = manifest.InstanceHierarchy[0].InternalElement[1];\nvar submodels = body.InternalElement;\nfor(var submodel in submodels){\n    var properties = submodels[submodel].InternalElement;\n    for(var propertyIndex in properties){\n        if(property._Attribs.ID == properties[propertyIndex]._Attribs.ID){\n            properties[propertyIndex] = property;\n            msg.statusCode = \"200\";\n            context.flow.set('manifest', manifest);\n            return msg;\n        }\n    }\n}\n\nmsg.statusCode = \"404\";\nreturn msg;","outputs":1,"noerr":0,"x":903.8116455078125,"y":1451.6925201416016,"wires":[["ab11b32d.c8f6c"]]},{"id":"ab11b32d.c8f6c","type":"switch","z":"2e7b7c8b.80c47c","name":"","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"200","vt":"str"},{"t":"eq","v":"404","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":1093.8116455078125,"y":1451.692398071289,"wires":[["2df56598.aedfda"],["d4d8b7bb.c07968"]]},{"id":"2df56598.aedfda","type":"actionflows","z":"2e7b7c8b.80c47c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"persistManifest","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1283.8116455078125,"y":1415.0260772705078,"wires":[["d4d8b7bb.c07968"]]},{"id":"388d3738.6a57c8","type":"actionflows_in","z":"2e7b7c8b.80c47c","name":"readPropertyInterface in","priority":"50","links":[],"scope":"global","x":370.7164611816406,"y":1811.1214752197266,"wires":[["cc1d32c4.06cdf"]]},{"id":"618a32b3.edf25c","type":"actionflows_out","z":"2e7b7c8b.80c47c","name":"readPropertyInterface out","links":[],"x":1486.4307861328125,"y":1815.4071197509766,"wires":[]},{"id":"cc1d32c4.06cdf","type":"unsafe-function","z":"2e7b7c8b.80c47c","name":"RetrievingPropertyById...","func":"var propertyId = msg.req.params.id;\n\n/*msg.AASID = context.flow.get('AASIdentifier');\nvar propertyId = msg.req.params.id;\nvar properties = context.flow.get(\"properties\");\nfor(var propertyIndex in properties){\n        var property = properties[propertyIndex];\n        var id = property._Attribs.ID; \n        if (id.localeCompare(propertyId) === 0){\n                msg.payload = property;\n                msg.statusCode = \"200\";\n                return msg;\n        }\n    }\nmsg.statusCode = \"404\";\nmsg.payload = \"property with id:\" + propertyId + \" not found\"\nreturn msg;*/\n\nmsg.AASID = context.flow.get('AASIdentifier');\nvar manifest = context.flow.get('manifest');\nvar body = manifest.InstanceHierarchy[0].InternalElement[1];\nvar submodels = body.InternalElement;\nfor(var submodel in submodels){\n    var properties = submodels[submodel].InternalElement;\n    for(var propertyIndex in properties){\n        var property = properties[propertyIndex];\n        var id = property._Attribs.ID;\n        if (id.localeCompare(propertyId) === 0){\n                msg.payload = property;\n                msg.statusCode = \"200\";\n                return msg;\n        }\n    }\n}\n\nmsg.statusCode = \"404\";\nmsg.payload = \"property with id:\" + propertyId + \" not found\"\nreturn msg;","outputs":1,"noerr":0,"x":685.0023193359375,"y":1811.1214752197266,"wires":[["c1e9b80a.f3274"]]},{"id":"c1e9b80a.f3274","type":"switch","z":"2e7b7c8b.80c47c","name":"","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"200","vt":"str"},{"t":"eq","v":"404","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":907.859375,"y":1809.692886352539,"wires":[["9856544d.42aad"],["618a32b3.edf25c"]]},{"id":"9856544d.42aad","type":"unsafe-function","z":"2e7b7c8b.80c47c","name":"RetrievingDataInterface...","func":"var property = msg.payload;\nvar di = property.InternalElement[1];\nmsg.payload = di;\nreturn msg;","outputs":1,"noerr":0,"x":1182.145263671875,"y":1766.8358306884766,"wires":[["618a32b3.edf25c"]]},{"id":"a133e92e.4f5f9","type":"unsafe-function","z":"2e7b7c8b.80c47c","name":"CreateInMemoryManifest","func":"//Retreiving Libraries from the Settings.json file\nvar XML = context.global.get('XML');\nvar os = context.global.get('os');\n\nvar xml_string = \"\";\nvar manifest = \"\";\nif(msg.payload === \"\" || (typeof msg.payload.chatId !== \"undefined\")){\n    xml_string = context.flow.get('emptyManifest');\n    manifest = XML.parse( xml_string, { preserveAttributes: true, forceArrays: true  } );\n    context.flow.set(\"emptyManifesttest\", manifest);\n    var newSubmodels = manifest.InstanceHierarchy[0].InternalElement[1].InternalElement;\n    var oldManifest = context.flow.get(\"manifest\");\n    if(oldManifest !== \"\"){\n        var oldSubmodels = oldManifest.InstanceHierarchy[0].InternalElement[1].InternalElement;\n        for(var oldSubmodel in oldSubmodels){\n            var oldSubmodelId = oldSubmodels[oldSubmodel]._Attribs.ID;\n            for(var newSubmodel in newSubmodels){\n                var newSubmodelId = newSubmodels[newSubmodel]._Attribs.ID;\n                if(newSubmodelId == oldSubmodelId){\n                    newSubmodels[newSubmodel].Attribute[0].Value[0] = oldSubmodels[oldSubmodel].Attribute[0].Value[0];\n                }\n            }\n        }\n    }\n} else {\n    xml_string = msg.payload;\n    manifest = XML.parse( xml_string, { preserveAttributes: true, forceArrays: true  } );\n}\n//context.global.set('stringManifest', xml_string);\n\n//var manifest = XML.parse( xml_string, { preserveAttributes: true, forceArrays: true  } );\ncontext.flow.set(\"manifest\", manifest);\nvar header = manifest.InstanceHierarchy[0].InternalElement[0];\ncontext.flow.set('header', header);\n\n// set AAS Identifier\nheader.InternalElement[0].InternalElement[0]._Attribs.ID = context.global.get('AASIdentifier');\n// set AAS virtual Location\nheader.InternalElement[0].InternalElement[0].InternalElement[0].Attribute[1].Value[0] = os.hostname();\n//set AAS namespace\nheader.InternalElement[0].InternalElement[0].Attribute[0].Value[0] = context.global.get('namespace');\n\nvar body = manifest.InstanceHierarchy[0].InternalElement[1];\ncontext.flow.set('body', body);\nvar submodelsList = [];\nif(typeof body.InternalElement !== \"undefined\"){\n    submodelsList = body.InternalElement;\n}\ncontext.flow.set('submodels', submodelsList);\nvar propertiesList = [];\nfor(var submodelIndex in submodelsList){\n        var properties = submodelsList[submodelIndex].InternalElement;\n        for(var propertyIndex in properties){\n            propertiesList.push(properties[propertyIndex]);\n        }\n    }\ncontext.flow.set('properties', propertiesList);\n\n\nmsg.manifest = manifest;\n\n//var xml_string_composed = XML.stringify( doc, 'CAEXFile');\n//msg.payload = xml_string_composed;\n//msg.doc = doc;\n\nreturn msg;","outputs":1,"noerr":0,"x":687.4569091796875,"y":171.2904510498047,"wires":[["1637117f.61492f"]]},{"id":"e491778b.4a2998","type":"actionflows_in","z":"2e7b7c8b.80c47c","name":"createManifest in","priority":"50","links":[],"scope":"global","x":352.45697021484375,"y":171.2904510498047,"wires":[["a133e92e.4f5f9","dd06ef33.c59b9"]]},{"id":"e81db6c8.e21a3","type":"actionflows_out","z":"2e7b7c8b.80c47c","name":"createManifest out","links":[],"x":1498.1712297712052,"y":172.7190159388951,"wires":[]},{"id":"ad9180db.16d708","type":"actionflows_in","z":"2e7b7c8b.80c47c","name":"readHeaders in","priority":"50","links":[],"scope":"global","x":357.4569396972656,"y":376.2904510498047,"wires":[["6042be34.b3f778"]]},{"id":"828a879c.c8f698","type":"actionflows_out","z":"2e7b7c8b.80c47c","name":"readHeaders out","links":[],"x":1502.45703125,"y":376.29039001464844,"wires":[]},{"id":"6042be34.b3f778","type":"unsafe-function","z":"2e7b7c8b.80c47c","name":"RetrievingHeaders...","func":"//var xml_string = msg.payload;\n//var XML = context.global.get('XML');\n\n//var doc = XML.parse( xml_string, { preserveAttributes: true, forceArrays: true  } );\n/*\nvar xml_string_composed = XML.stringify( doc, 'CAEXFile');\nmsg.composed = xml_string_composed;\n*/\n\n/*try {\n    parser = new XML.Parser(xml_string, { preserveAttributes: true, forceArrays: true} );\n}\ncatch (err) {\n    throw err;\n}*/\n\n/*var manifest = context.global.get(\"manifest\");\nvar idsList = manifest.InstanceHierarchy[0].InternalElement[0].InternalElement[0].InternalElement;\nif (typeof idsList === \"undefined\") {\n    var ids = {};\n    msg.manifest = manifest;\n    msg.payload = ids;\n    return msg;\n}\n else {\n    // loop on the submodelsList to find the propeerty\n}*/\nmsg.payload = flow.get(\"header\");\nmsg.AASID = context.flow.get('$parent.AASIdentifier');\n//msg.manifest = manifest;\nreturn msg;","outputs":1,"noerr":0,"x":1122.6949462890625,"y":375.57603454589844,"wires":[["828a879c.c8f698"]]},{"id":"907f129f.ebe39","type":"inject","z":"2e7b7c8b.80c47c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":355.8833312988281,"y":93.38336181640625,"wires":[["57663996.23c3f"]]},{"id":"57663996.23c3f","type":"unsafe-function","z":"2e7b7c8b.80c47c","name":"IntializeVariables","func":"//Initialize flow variables\nvar uuid = context.global.get('AASIdentifier')||'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });\n/*var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });*/\n/*\ncontext.flow.set(\"emptyManifest\", \"<?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?><CAEXFile FileName=\\\"Aml_as_manifest.aml\\\" SchemaVersion=\\\"2.15\\\" xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\" xsi:noNamespaceSchemaLocation=\\\"CAEX_ClassModel_V2.15.xsd\\\"><AdditionalInformation><WriterHeader><LastWritingDateTime>2018-10-16T16:12:49.4126198+01:00</LastWritingDateTime><WriterID>916578CA-FE0D-474E-A4FC-9E1719892369</WriterID><WriterName>AutomationML Editor</WriterName><WriterProjectID>unspecified</WriterProjectID><WriterProjectTitle>unspecified</WriterProjectTitle><WriterRelease>4.7.0.0</WriterRelease><WriterVendor>AutomationML e.V.</WriterVendor><WriterVendorURL>www.AutomationML.org</WriterVendorURL><WriterVersion>4.7.0.0</WriterVersion></WriterHeader></AdditionalInformation><AdditionalInformation AutomationMLVersion=\\\"2.0\\\" /><InstanceHierarchy ID=\\\"90a789b3-d644-43f7-b8ec-fdfda0bdbbcd\\\" Name=\\\"AASManifest\\\"><InternalElement ID=\\\"611c9074-ad8d-47c1-a26f-3d8d9f517ae1\\\" Name=\\\"Header\\\"><InternalElement Name=\\\"AAS Identifiers\\\" ID=\\\"921669c9-4e9a-4580-afe4-4fc3dad4b6b4\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Submodel\\\"><InternalElement Name=\\\"Identifier\\\" ID=\\\"d4e9ab54-7ce8-4001-92d9-fcd33f581510\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Property/Identifier\\\"><Attribute Name=\\\"namespace\\\" AttributeDataType=\\\"xs:anyURI\\\"><Value></Value></Attribute><InternalElement Name=\\\"Location\\\" ID=\\\"068eaa56-f1ab-4d31-972b-51165ec15124\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Location\\\"><Attribute Name=\\\"geoLocation\\\" AttributeDataType=\\\"xs:string\\\"><Attribute Name=\\\"latitude\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute><Attribute Name=\\\"longitude\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute></Attribute><Attribute Name=\\\"virtualLocation\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute></InternalElement></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/PropertyContainer\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/AASIdentification\\\" /></InternalElement><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/AASIdentification\\\" /></InternalElement><InternalElement ID=\\\"b66b5437-4fee-4ccb-8009-1d28c8159f9e\\\" Name=\\\"Body\\\"><InternalElement Name=\\\"PROPHESY-CPS Condition Monitoring\\\" ID=\\\"44152b0c-c1db-4a9a-ba5f-a38cbfff43f7\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Submodel\\\"><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>true</Value></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/PropertyContainer\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/DataSourceManifests\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/SubmodelContainer\\\" /></InternalElement><Version>1.0.0</Version></InstanceHierarchy><InterfaceClassLib Name=\\\"AASInterfaceClassLib\\\"><Version>1.0.0</Version></InterfaceClassLib><RoleClassLib Name=\\\"AASManifestRoleClassLib\\\"><RoleClass Name=\\\"PropertyContainer\\\" /><RoleClass Name=\\\"Statement\\\" /><RoleClass Name=\\\"AASIdentification\\\" /><RoleClass Name=\\\"SubmodelContainer\\\" /><RoleClass Name=\\\"ParameterContainer\\\" /><RoleClass Name=\\\"DataSourceManifests\\\" /><RoleClass Name=\\\"LiveDataset\\\" /><Version></Version></RoleClassLib><SystemUnitClassLib Name=\\\"ASSSystemUnitClassLib\\\"><SystemUnitClass Name=\\\"Submodel\\\"><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value> </Value></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/PropertyContainer\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/DataSourceManifests\\\" /></SystemUnitClass><SystemUnitClass Name=\\\"Property\\\"><Description></Description><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /><SystemUnitClass Name=\\\"DSD\\\" ID=\\\"15250019-f6d1-4721-8ffc-49e309f57d7f\\\" RefBaseClassPath=\\\"ASSSystemUnitClassLib/Property\\\"><Description>PROPHESY Data Source Definition</Description><InternalElement Name=\\\"DI\\\" ID=\\\"e45f2f0d-38e3-4d7f-bec8-1ba7a0220d95\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Property/DI\\\"><Attribute Name=\\\"communicationProtocol\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute><InternalElement Name=\\\"Parameters\\\" ID=\\\"634ca4cf-6dd7-4a90-81c4-19cc8aac07a1\\\"><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><InternalElement Name=\\\"DK\\\" ID=\\\"a40cbfd0-ac48-413f-911a-a5915c40e071\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Property/DK\\\"><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute><Attribute Name=\\\"format\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"quantityKind\\\" AttributeDataType=\\\"xs:anyURI\\\"><Value> </Value></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement></SystemUnitClass><SystemUnitClass Name=\\\"DI\\\" ID=\\\"124e5d81-d58f-40c8-ad14-8e62e003467c\\\" RefBaseClassPath=\\\"ASSSystemUnitClassLib/Property\\\"><Attribute Name=\\\"communicationProtocol\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><InternalElement Name=\\\"Parameters\\\" ID=\\\"79d506e7-b991-4b1a-aa29-8161da867a9e\\\"><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement></SystemUnitClass><SystemUnitClass Name=\\\"DK\\\" ID=\\\"6edf24e3-dc69-4857-b268-f9e355e0898f\\\" RefBaseClassPath=\\\"ASSSystemUnitClassLib/Property\\\"><Description> </Description><Attribute Name=\\\"format\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"quantityKind\\\" AttributeDataType=\\\"xs:anyURI\\\"><Value> </Value></Attribute><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute></SystemUnitClass><SystemUnitClass Name=\\\"Identifier\\\" ID=\\\"88da950a-5c94-4027-98e7-d673a9694f8b\\\"><Description></Description><Attribute Name=\\\"namespace\\\" AttributeDataType=\\\"xs:anyURI\\\"><Value></Value></Attribute><InternalElement Name=\\\"Location\\\" ID=\\\"35063688-a0e9-47ea-8bf3-1afd38d16ccb\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Location\\\"><Attribute Name=\\\"geoLocation\\\" AttributeDataType=\\\"xs:string\\\"><Attribute Name=\\\"latitude\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute><Attribute Name=\\\"longitude\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute></Attribute><Attribute Name=\\\"virtualLocation\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute></InternalElement></SystemUnitClass><SystemUnitClass Name=\\\"DSM\\\" ID=\\\"514e6b53-aa50-4a1d-8df1-3ee8df752bb3\\\" RefBaseClassPath=\\\"ASSSystemUnitClassLib/Property\\\"><Attribute Name=\\\"macAddress\\\" AttributeDataType=\\\"xs:string\\\" /><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue></Attribute><InternalElement Name=\\\"DSD\\\" ID=\\\"cb0f8a81-1c87-4199-a5cb-44a66c854fba\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Property/DSD\\\"><InternalElement Name=\\\"DI\\\" ID=\\\"b3acb469-19d5-4002-b152-012366cf130f\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Property/DI\\\"><Attribute Name=\\\"communicationProtocol\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute><InternalElement Name=\\\"Parameters\\\" ID=\\\"9884244a-7a55-4c89-9951-f3c3314a1851\\\"><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><InternalElement Name=\\\"DK\\\" ID=\\\"5767b475-369d-46aa-a839-c274fb57a5e8\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Property/DK\\\"><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute><Attribute Name=\\\"format\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"quantityKind\\\" AttributeDataType=\\\"xs:anyURI\\\"><Value> </Value></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement></SystemUnitClass></SystemUnitClass><SystemUnitClass Name=\\\"Parameter\\\" ID=\\\"e5ab0092-4b4e-4529-95bd-62a264177805\\\" RefBaseClassPath=\\\"\\\"><Description> </Description><Attribute Name=\\\"dataType\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"defaultValue\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute><Attribute Name=\\\"actualValue\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute></SystemUnitClass><SystemUnitClass Name=\\\"Location\\\" ID=\\\"b0a00287-0441-46ed-8926-df3fc07b8545\\\"><Attribute Name=\\\"geoLocation\\\" AttributeDataType=\\\"xs:string\\\"><Attribute Name=\\\"latitude\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute><Attribute Name=\\\"longitude\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute></Attribute><Attribute Name=\\\"virtualLocation\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute></SystemUnitClass><Version>1.0.0</Version></SystemUnitClassLib></CAEXFile>\");\ncontext.flow.set(\"AASIdentifier\", uuid);\ncontext.flow.set(\"manifest\", \"\");\ncontext.flow.set(\"header\", \"\");\ncontext.flow.set(\"body\", \"\");\ncontext.flow.set(\"submodels\", \"\");\ncontext.flow.set(\"properties\", \"\");\n*/\n\n//var emptyManifest = context.flow.get(\"emptyManifest\") || \"<?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?><CAEXFile FileName=\\\"Aml_as_manifest_models_20200121_prophesy.aml\\\" SchemaVersion=\\\"2.15\\\" xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\" xsi:noNamespaceSchemaLocation=\\\"CAEX_ClassModel_V2.15.xsd\\\"><AdditionalInformation><WriterHeader><LastWritingDateTime>2018-10-16T16:12:49.4126198+01:00</LastWritingDateTime><WriterID>916578CA-FE0D-474E-A4FC-9E1719892369</WriterID><WriterName>AutomationML Editor</WriterName><WriterProjectID>unspecified</WriterProjectID><WriterProjectTitle>unspecified</WriterProjectTitle><WriterRelease>4.7.0.0</WriterRelease><WriterVendor>AutomationML e.V.</WriterVendor><WriterVendorURL>www.AutomationML.org</WriterVendorURL><WriterVersion>4.7.0.0</WriterVersion></WriterHeader></AdditionalInformation><AdditionalInformation AutomationMLVersion=\\\"2.0\\\" /><InstanceHierarchy ID=\\\"90a789b3-d644-43f7-b8ec-fdfda0bdbbcd\\\" Name=\\\"AASManifest\\\"><InternalElement ID=\\\"611c9074-ad8d-47c1-a26f-3d8d9f517ae1\\\" Name=\\\"Header\\\"><InternalElement ID=\\\"921669c9-4e9a-4580-afe4-4fc3dad4b6b4\\\" Name=\\\"AAS Identifiers\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Submodel\\\"><InternalElement ID=\\\"751eb2cb-3ec6-4e7f-95b8-4bb4b3876db0\\\" Name=\\\"Identifier\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/Identifier\\\"><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"namespace\\\"><Value>http://10.0.2.15:1880</Value></Attribute><InternalElement ID=\\\"068eaa56-f1ab-4d31-972b-51165ec15124\\\" Name=\\\"Location\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Location\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"geoLocation\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"latitude\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"longitude\\\"><Value></Value></Attribute></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"virtualLocation\\\"><Value>DESKTOP-NEJ4OQ5</Value></Attribute></InternalElement></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/PropertyContainer\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/AASIdentification\\\" /></InternalElement><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/AASIdentification\\\" /></InternalElement><InternalElement ID=\\\"b66b5437-4fee-4ccb-8009-1d28c8159f9e\\\" Name=\\\"Body\\\"><InternalElement ID=\\\"44152b0c-c1db-4a9a-ba5f-a38cbfff43f7\\\" Name=\\\"Asset Condition Monitoring\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Submodel\\\"><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>true</Value></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/PropertyContainer\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/DataSourceManifests\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/VendorSpecific\\\" /></InternalElement><InternalElement Name=\\\"AAS API Docs\\\" ID=\\\"8c53547a-d697-4e83-90db-db8042ce745e\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Submodel\\\"><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><InternalElement Name=\\\"Data Source Manifest - AAS Documentation\\\" ID=\\\"3940b81b-2c1f-45f9-a067-58758e9da590\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSM\\\"><Attribute Name=\\\"macAddress\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><Attribute Name=\\\"semanticId\\\" AttributeDataType=\\\"xs:IDREF\\\" /><Attribute Name=\\\"isWritable\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>False</DefaultValue><Value>False</Value></Attribute><Attribute Name=\\\"isEventable\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>False</DefaultValue><Value>False</Value></Attribute><InternalElement Name=\\\"API documentation\\\" ID=\\\"51ac93cb-d822-403e-bf45-9607321dbecd\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSD\\\"><InternalElement ID=\\\"c755ccce-6342-46ea-aea4-26fb9a5f2f6b\\\" Name=\\\"DI\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DI\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"communicationProtocol\\\"><Value></Value></Attribute><InternalElement ID=\\\"b08d0a41-6bd3-4706-861a-a8351b4ec1df\\\" Name=\\\"Parameters\\\"><InternalElement Name=\\\"url\\\" ID=\\\"fa8628ff-f008-421d-943a-98d1b7512cd4\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>/http-api/swagger.json</Value></Attribute></InternalElement><InternalElement Name=\\\"internalLinkId\\\" ID=\\\"3c19f645-8cd4-47fa-85c4-e2e778eafe00\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>WebDocs</Value></Attribute></InternalElement><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Internal\\\" /></InternalElement><InternalElement ID=\\\"dfedd423-92cc-49ff-a12f-5e845c378838\\\" Name=\\\"DK\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DK\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"format\\\"><Value>Plain text</Value></Attribute><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"quantityKind\\\"><Value>N/A</Value></Attribute><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value>Observation</Value></Attribute><Attribute Name=\\\"content\\\" AttributeDataType=\\\"xs:string\\\"><Value>static</Value><Constraint Name=\\\"\\\"><NominalScaledType><RequiredValue>Dynamic</RequiredValue><RequiredValue>Static</RequiredValue></NominalScaledType></Constraint></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/PropertyContainer\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/DataSourceManifests\\\" /></InternalElement><InternalElement Name=\\\"AAS Data Streaming Docs\\\" ID=\\\"8fc3123c-ad98-4435-9ee5-d9b9d45182b2\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Submodel\\\"><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><InternalElement Name=\\\"Data Source Manifest - Data Streaming Documentation\\\" ID=\\\"39ee8897-f919-4956-acc6-5c78a6fa9aee\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSM\\\"><Attribute Name=\\\"macAddress\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><Attribute Name=\\\"semanticId\\\" AttributeDataType=\\\"xs:IDREF\\\"><Value>0173-1#02-AAO694#001</Value></Attribute><Attribute Name=\\\"isWritable\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>False</DefaultValue><Value>False</Value></Attribute><Attribute Name=\\\"isEventable\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>False</DefaultValue><Value>False</Value></Attribute><InternalElement Name=\\\"API documentation\\\" ID=\\\"00a14294-c0e5-4cd0-b7c0-0a5cdcd4e48f\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSD\\\"><InternalElement ID=\\\"8b5916c4-f52e-4238-98cb-f4204b62ec8a\\\" Name=\\\"DI\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DI\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"communicationProtocol\\\"><Value></Value></Attribute><InternalElement ID=\\\"ae2e2a55-6558-43b4-99f8-ca52b697c54c\\\" Name=\\\"Parameters\\\"><InternalElement Name=\\\"url\\\" ID=\\\"4b948e20-8fb8-4dee-acce-e8f7f35047d9\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>http://sensap.ddns.net:58001/swagger-ui.html#/</Value></Attribute></InternalElement><InternalElement Name=\\\"internalLinkId\\\" ID=\\\"344b8d63-67b0-43b5-a13f-ea5cef04b776\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>WebDocs</Value></Attribute></InternalElement><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Internal\\\" /></InternalElement><InternalElement ID=\\\"01ee4617-7c11-42a7-bc99-6d361792c404\\\" Name=\\\"Online Swagger documentation resource\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DK\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"format\\\"><Value>URL</Value></Attribute><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"quantityKind\\\"><Value></Value></Attribute><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value>Observation</Value></Attribute><Attribute Name=\\\"content\\\" AttributeDataType=\\\"xs:string\\\"><Value>Static</Value><Constraint Name=\\\"\\\"><NominalScaledType><RequiredValue>Dynamic</RequiredValue><RequiredValue>Static</RequiredValue></NominalScaledType></Constraint></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/PropertyContainer\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/DataSourceManifests\\\" /></InternalElement><InternalElement Name=\\\"AAS Resource Monitoring\\\" ID=\\\"5f3fc0cf-167e-4acb-ac49-d6807ea87ef4\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Submodel\\\"><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><InternalElement Name=\\\"Data Source Manifest - Description\\\" ID=\\\"b5595a4a-40a5-46e6-a9c6-f493f99a72a1\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSM\\\"><Attribute Name=\\\"macAddress\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><Attribute Name=\\\"semanticId\\\" AttributeDataType=\\\"xs:IDREF\\\"><Value>0173-1#02-AAU734#001</Value></Attribute><Attribute Name=\\\"isWritable\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>False</DefaultValue><Value>False</Value></Attribute><Attribute Name=\\\"isEventable\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>False</DefaultValue><Value>False</Value></Attribute><InternalElement Name=\\\"System Description\\\" ID=\\\"4d2f1be3-52db-495a-b4a3-be3ff916e1a4\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSD\\\"><Description>Textual description of the resource hardware. It includes the full name and the version identification of the system's hardware type, software operating system, and networking software.  </Description><InternalElement ID=\\\"4152e105-a503-42ca-97fa-d4c6a4a552f9\\\" Name=\\\"DI\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DI\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"communicationProtocol\\\"><Value></Value></Attribute><InternalElement ID=\\\"eb02baed-2ec7-4757-b169-52e92e69db59\\\" Name=\\\"Parameters\\\"><InternalElement Name=\\\"protocol\\\" ID=\\\"7e5f1bc5-34e1-4f1a-835b-7d1b6f72bb96\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>snmp</Value></Attribute></InternalElement><InternalElement Name=\\\"address\\\" ID=\\\"5e95da25-7400-4fe6-849b-a708696a5d28\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>localhost</Value></Attribute></InternalElement><InternalElement Name=\\\"oid\\\" ID=\\\"cc1ca40b-e97e-4282-b799-36ceb2513044\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>1.3.6.1.2.1.1.1.0</Value></Attribute></InternalElement><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Internal\\\" /></InternalElement><InternalElement ID=\\\"2d5b30b6-16f8-41b0-b6f8-26366192e1dc\\\" Name=\\\"sysDescr\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DK\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"format\\\"><Value>Plain text</Value></Attribute><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"quantityKind\\\"><DefaultValue>N/A</DefaultValue><Value>N/A</Value></Attribute><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value>Observation</Value></Attribute><Attribute Name=\\\"content\\\" AttributeDataType=\\\"xs:string\\\"><Value>Static</Value><Constraint Name=\\\"ContentValues\\\"><NominalScaledType><RequiredValue>Dynamic</RequiredValue><RequiredValue>Static</RequiredValue></NominalScaledType></Constraint></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><InternalElement Name=\\\"Data Source Manifest - CPU Load 1\\\" ID=\\\"37847f87-fe4d-47fa-9fc5-aba7879ccda2\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSM\\\"><Attribute Name=\\\"macAddress\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><Attribute Name=\\\"semanticId\\\" AttributeDataType=\\\"xs:IDREF\\\"><Value>N/A</Value></Attribute><Attribute Name=\\\"isWritable\\\" AttributeDataType=\\\"xs:boolean\\\" /><Attribute Name=\\\"isEventable\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>True</DefaultValue><Value>True</Value></Attribute><InternalElement Name=\\\"CPU 1m Load\\\" ID=\\\"5ce6fc2b-66d6-468d-8381-41c99c67757e\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSD\\\"><InternalElement ID=\\\"0037d0eb-b5be-4245-a254-691924b0009e\\\" Name=\\\"DI\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DI\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"communicationProtocol\\\"><Value></Value></Attribute><InternalElement ID=\\\"acf77e29-679f-493e-9b38-e33405e3a0a4\\\" Name=\\\"Parameters\\\"><InternalElement Name=\\\"protocol\\\" ID=\\\"0780364d-9e55-4ba4-bfb0-f26c03c54059\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>snmp</Value></Attribute></InternalElement><InternalElement Name=\\\"address\\\" ID=\\\"b7ef026e-c259-4a20-9f3f-d0af3a5f7824\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>localhost</Value></Attribute></InternalElement><InternalElement Name=\\\"oid\\\" ID=\\\"3ba3f101-fc01-4bf5-8576-78032b69aa81\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>1.3.6.1.4.1.2021.10.1.3.1</Value></Attribute></InternalElement><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Internal\\\" /></InternalElement><InternalElement ID=\\\"22c16520-365e-4ac5-814e-03ab0e5287cd\\\" Name=\\\"CPU 1 minute Load in plain text\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DK\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"format\\\"><Value>Plain Text</Value></Attribute><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"quantityKind\\\"><Value></Value></Attribute><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value>Observation</Value></Attribute><Attribute Name=\\\"content\\\" AttributeDataType=\\\"xs:string\\\"><Value>Dynamic</Value><Constraint Name=\\\"ContentValues\\\"><NominalScaledType><RequiredValue>Dynamic</RequiredValue><RequiredValue>Static</RequiredValue></NominalScaledType></Constraint></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><InternalElement Name=\\\"Data Source Manifest - CPU Load 2\\\" ID=\\\"1e662338-8a8f-4e65-89e3-77cfa1f333bd\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSM\\\"><Attribute Name=\\\"macAddress\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><Attribute Name=\\\"semanticId\\\" AttributeDataType=\\\"xs:IDREF\\\"><Value>N/A</Value></Attribute><Attribute Name=\\\"isWritable\\\" AttributeDataType=\\\"xs:boolean\\\" /><Attribute Name=\\\"isEventable\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>True</DefaultValue><Value>True</Value></Attribute><InternalElement Name=\\\"CPU 5m Load\\\" ID=\\\"02f4c856-a224-4ea2-baea-9c613dc15f8d\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSD\\\"><InternalElement ID=\\\"34539165-47aa-4151-b4cb-dc9d9bce8199\\\" Name=\\\"DI\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DI\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"communicationProtocol\\\"><Value></Value></Attribute><InternalElement ID=\\\"6a420732-5b3f-46d7-a5ab-9c17489f9839\\\" Name=\\\"Parameters\\\"><InternalElement Name=\\\"protocol\\\" ID=\\\"fcfd040d-5497-4ac8-8de7-6a906235e406\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>snmp</Value></Attribute></InternalElement><InternalElement Name=\\\"address\\\" ID=\\\"7cd504e4-da69-464a-b179-bb2a3e8fe25f\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>localhost</Value></Attribute></InternalElement><InternalElement Name=\\\"oid\\\" ID=\\\"a4fd3c3f-9e7a-4d51-9e6c-7cb61e25b4c5\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>1.3.6.1.4.1.2021.10.1.3.2</Value></Attribute></InternalElement><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Internal\\\" /></InternalElement><InternalElement ID=\\\"13d0492a-62ee-4205-b7f5-3285f1869d5d\\\" Name=\\\"CPU 5 minute Load in plain text\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DK\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"format\\\"><Value>Plain text</Value></Attribute><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"quantityKind\\\"><Value></Value></Attribute><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value>Observation</Value></Attribute><Attribute Name=\\\"content\\\" AttributeDataType=\\\"xs:string\\\"><Value>Dynamic</Value><Constraint Name=\\\"ContentValues\\\"><NominalScaledType><RequiredValue>Dynamic</RequiredValue><RequiredValue>Static</RequiredValue></NominalScaledType></Constraint></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><InternalElement Name=\\\"Data Source Manifest - CPU Load 3\\\" ID=\\\"e65bd7f7-8879-4aa7-bb83-71b9fc7881ee\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSM\\\"><Attribute Name=\\\"macAddress\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><Attribute Name=\\\"semanticId\\\" AttributeDataType=\\\"xs:IDREF\\\"><Value>N/A</Value></Attribute><Attribute Name=\\\"isWritable\\\" AttributeDataType=\\\"xs:boolean\\\" /><Attribute Name=\\\"isEventable\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>True</DefaultValue><Value>True</Value></Attribute><InternalElement Name=\\\"CPU 15m Load\\\" ID=\\\"30fe2ada-85aa-4e48-855b-b80ba93b4286\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSD\\\"><InternalElement ID=\\\"dda3c7af-750e-44c9-a6ce-ff8b9adc8c96\\\" Name=\\\"DI\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DI\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"communicationProtocol\\\"><Value></Value></Attribute><InternalElement ID=\\\"a2365478-4bf2-4b84-a120-2339a4cc4600\\\" Name=\\\"Parameters\\\"><InternalElement Name=\\\"protocol\\\" ID=\\\"848a806c-3e43-47a0-b5d1-4029ee89f2cc\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>snmp</Value></Attribute></InternalElement><InternalElement Name=\\\"address\\\" ID=\\\"19100813-c482-4d8b-8ec3-c1017260fe24\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>localhost</Value></Attribute></InternalElement><InternalElement Name=\\\"oid\\\" ID=\\\"c5d564c0-b392-4901-887e-f1518bd0a5bf\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>1.3.6.1.4.1.2021.10.1.3.3</Value></Attribute></InternalElement><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Internal\\\" /></InternalElement><InternalElement ID=\\\"05f04660-68ee-42b3-ad1a-8cf2e875fe6f\\\" Name=\\\"CPU 15 minute Load in plain text\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DK\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"format\\\"><Value>Plain text</Value></Attribute><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"quantityKind\\\"><Value></Value></Attribute><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value>Observation</Value></Attribute><Attribute Name=\\\"content\\\" AttributeDataType=\\\"xs:string\\\"><Value>Dynamic</Value><Constraint Name=\\\"ContentValues\\\"><NominalScaledType><RequiredValue>Dynamic</RequiredValue><RequiredValue>Static</RequiredValue></NominalScaledType></Constraint></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><InternalElement Name=\\\"Data Source Manifest - Up Time\\\" ID=\\\"18e74242-f1a7-418c-be28-2179f6ca0631\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSM\\\"><Attribute Name=\\\"macAddress\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><Attribute Name=\\\"semanticId\\\" AttributeDataType=\\\"xs:IDREF\\\"><Value>0173-1#02-AAJ500#003</Value></Attribute><Attribute Name=\\\"isWritable\\\" AttributeDataType=\\\"xs:boolean\\\" /><Attribute Name=\\\"isEventable\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>True</DefaultValue><Value>True</Value></Attribute><InternalElement Name=\\\"System Uptime\\\" ID=\\\"1608d415-9d7f-4f91-90cb-e38357f296a2\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSD\\\"><InternalElement ID=\\\"37473a66-5249-4531-99e8-586a04ffff9c\\\" Name=\\\"DI\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DI\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"communicationProtocol\\\"><Value></Value></Attribute><InternalElement ID=\\\"d0fc9b63-fd84-457c-94df-e63c0801f568\\\" Name=\\\"Parameters\\\"><InternalElement Name=\\\"protocol\\\" ID=\\\"50de3542-b98f-45ea-827b-b13b8f34462a\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>snmp</Value></Attribute></InternalElement><InternalElement Name=\\\"address\\\" ID=\\\"cd5f8f99-85f4-4141-b4c8-1931b5209924\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>localhost</Value></Attribute></InternalElement><InternalElement Name=\\\"oid\\\" ID=\\\"01450824-367b-4eb3-8fd7-06970471661a\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>1.3.6.1.2.1.1.3.0</Value></Attribute></InternalElement><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Internal\\\" /></InternalElement><InternalElement ID=\\\"d7b2166f-0ce7-4be0-a7c7-1847f76fa544\\\" Name=\\\"sysUpTime in plain text\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DK\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"format\\\"><Value>Plain text</Value></Attribute><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"quantityKind\\\"><DefaultValue>N/A</DefaultValue><Value>Time Ticks</Value></Attribute><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value>Observation</Value></Attribute><Attribute Name=\\\"content\\\" AttributeDataType=\\\"xs:string\\\"><Value>Dynamic</Value><Constraint Name=\\\"ContentValues\\\"><NominalScaledType><RequiredValue>Dynamic</RequiredValue><RequiredValue>Static</RequiredValue></NominalScaledType></Constraint></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/PropertyContainer\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/DataSourceManifests\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Generic\\\" /></InternalElement><InternalElement Name=\\\"AAS Health Monitoring\\\" ID=\\\"20bcc9b1-5e94-446d-ae0e-1ae3a5a9b427\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Submodel\\\"><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><InternalElement Name=\\\"Data Source Manifest - Health Check\\\" ID=\\\"f918cf01-90f4-4a35-afc2-4d2219a2b1fb\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSM\\\"><Attribute Name=\\\"macAddress\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><Attribute Name=\\\"semanticId\\\" AttributeDataType=\\\"xs:IDREF\\\"><Value>0173-1#02-BAG100#003</Value></Attribute><Attribute Name=\\\"isWritable\\\" AttributeDataType=\\\"xs:boolean\\\" /><Attribute Name=\\\"isEventable\\\" AttributeDataType=\\\"xs:boolean\\\"><Value>True</Value></Attribute><InternalElement Name=\\\"Health Check\\\" ID=\\\"94bd05e0-9599-44bf-bebf-9a630fce2460\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSD\\\"><InternalElement ID=\\\"ac61ccae-a1e0-4f49-bbbd-477f0c0802d1\\\" Name=\\\"DI\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DI\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"communicationProtocol\\\"><Value></Value></Attribute><InternalElement ID=\\\"3fe8d02d-4221-418f-b05e-64f42059c514\\\" Name=\\\"Parameters\\\"><InternalElement ID=\\\"332bda96-722a-4812-8374-31ae45960be5\\\" Name=\\\"protocol\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>rest</Value></Attribute></InternalElement><InternalElement ID=\\\"48277a2a-ac91-472f-ab30-11eb4d2c699a\\\" Name=\\\"method\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>GET</Value></Attribute></InternalElement><InternalElement ID=\\\"1d905f8e-338b-4359-ab55-baab0e8d5178\\\" Name=\\\"url\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>http://localhost:1880/aas/health</Value></Attribute></InternalElement><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Internal\\\" /></InternalElement><InternalElement ID=\\\"51ed9f21-f86f-4917-834a-4a04125924cf\\\" Name=\\\"Health Check Info in plain text\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DK\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"format\\\"><Value>Plain text</Value></Attribute><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"quantityKind\\\"><Value></Value></Attribute><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value>Observation</Value></Attribute><Attribute Name=\\\"content\\\" AttributeDataType=\\\"xs:string\\\"><Value>Dynamic</Value><Constraint Name=\\\"ContentValues\\\"><NominalScaledType><RequiredValue>Dynamic</RequiredValue><RequiredValue>Static</RequiredValue></NominalScaledType></Constraint></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/PropertyContainer\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/DataSourceManifests\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Generic\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/SubmodelContainer\\\" /></InternalElement><Version>1.0.0</Version></InstanceHierarchy><InterfaceClassLib Name=\\\"AASInterfaceClassLib\\\"><Version>1.0.0</Version></InterfaceClassLib><RoleClassLib Name=\\\"AASManifestRoleClassLib\\\"><RoleClass Name=\\\"PropertyContainer\\\" /><RoleClass Name=\\\"Statement\\\" /><RoleClass Name=\\\"AASIdentification\\\" /><RoleClass Name=\\\"SubmodelContainer\\\" /><RoleClass Name=\\\"ParameterContainer\\\" /><RoleClass Name=\\\"DataSourceManifests\\\" /><RoleClass Name=\\\"LiveDataset\\\" /><RoleClass Name=\\\"Generic\\\" /><RoleClass Name=\\\"VendorSpecific\\\" /><RoleClass Name=\\\"Supported\\\" /><RoleClass Name=\\\"Custom\\\" /><RoleClass Name=\\\"Internal\\\" /><Version></Version></RoleClassLib><SystemUnitClassLib Name=\\\"AASSystemUnitClassLib\\\"><SystemUnitClass Name=\\\"Submodel\\\"><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/PropertyContainer\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/DataSourceManifests\\\" /></SystemUnitClass><SystemUnitClass Name=\\\"Property\\\"><Description></Description><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /><SystemUnitClass ID=\\\"15250019-f6d1-4721-8ffc-49e309f57d7f\\\" Name=\\\"DSD\\\" RefBaseClassPath=\\\"AASSystemUnitClassLib/Property\\\"><Description>PROPHESY Data Source Definition</Description><InternalElement ID=\\\"e45f2f0d-38e3-4d7f-bec8-1ba7a0220d95\\\" Name=\\\"DI\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DI\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"communicationProtocol\\\"><Value></Value></Attribute><InternalElement ID=\\\"634ca4cf-6dd7-4a90-81c4-19cc8aac07a1\\\" Name=\\\"Parameters\\\"><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><InternalElement ID=\\\"a40cbfd0-ac48-413f-911a-a5915c40e071\\\" Name=\\\"DK\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DK\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"format\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"quantityKind\\\"><Value></Value></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement></SystemUnitClass><SystemUnitClass ID=\\\"124e5d81-d58f-40c8-ad14-8e62e003467c\\\" Name=\\\"DI\\\" RefBaseClassPath=\\\"AASSystemUnitClassLib/Property\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"communicationProtocol\\\"><Value></Value></Attribute><InternalElement ID=\\\"79d506e7-b991-4b1a-aa29-8161da867a9e\\\" Name=\\\"Parameters\\\"><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement></SystemUnitClass><SystemUnitClass ID=\\\"6edf24e3-dc69-4857-b268-f9e355e0898f\\\" Name=\\\"DK\\\" RefBaseClassPath=\\\"AASSystemUnitClassLib/Property\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"format\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"quantityKind\\\"><Value></Value></Attribute><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"content\\\" AttributeDataType=\\\"xs:string\\\"><Constraint Name=\\\"ContentValues\\\"><NominalScaledType><RequiredValue>Dynamic</RequiredValue><RequiredValue>Static</RequiredValue></NominalScaledType></Constraint></Attribute><Description></Description></SystemUnitClass><SystemUnitClass ID=\\\"88da950a-5c94-4027-98e7-d673a9694f8b\\\" Name=\\\"Identifier\\\"><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"namespace\\\"><Value></Value></Attribute><Description></Description><InternalElement ID=\\\"35063688-a0e9-47ea-8bf3-1afd38d16ccb\\\" Name=\\\"Location\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Location\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"geoLocation\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"latitude\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"longitude\\\"><Value></Value></Attribute></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"virtualLocation\\\"><Value></Value></Attribute></InternalElement></SystemUnitClass><SystemUnitClass Name=\\\"DSM\\\" ID=\\\"96a19b7b-e91f-4707-bf97-03d9c84452c9\\\" RefBaseClassPath=\\\"AASSystemUnitClassLib/Property\\\"><Attribute Name=\\\"macAddress\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><Attribute Name=\\\"semanticId\\\" AttributeDataType=\\\"xs:IDREF\\\" /><Attribute Name=\\\"isWritable\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>False</DefaultValue><Value>False</Value></Attribute><Attribute Name=\\\"isEventable\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>False</DefaultValue><Value>False</Value></Attribute><InternalElement Name=\\\"DSD\\\" ID=\\\"5d0afb31-a84e-424b-a4bf-1786e2e49ff4\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSD\\\"><InternalElement ID=\\\"7dad5dfb-167d-4b43-955d-112b7813eea2\\\" Name=\\\"DI\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DI\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"communicationProtocol\\\"><Value></Value></Attribute><InternalElement ID=\\\"b1578493-e760-483c-a7dd-d14899da6ea0\\\" Name=\\\"Parameters\\\"><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><InternalElement ID=\\\"ff601314-0223-4549-ab65-9ba575dae884\\\" Name=\\\"DK\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DK\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"format\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"quantityKind\\\"><Value></Value></Attribute><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\" /><Attribute Name=\\\"content\\\" AttributeDataType=\\\"xs:string\\\"><Constraint Name=\\\"\\\"><NominalScaledType><RequiredValue>Dynamic</RequiredValue><RequiredValue>Static</RequiredValue></NominalScaledType></Constraint></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement></SystemUnitClass></SystemUnitClass><SystemUnitClass ID=\\\"e5ab0092-4b4e-4529-95bd-62a264177805\\\" Name=\\\"Parameter\\\" RefBaseClassPath=\\\"\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value></Value></Attribute><Description></Description></SystemUnitClass><SystemUnitClass ID=\\\"b0a00287-0441-46ed-8926-df3fc07b8545\\\" Name=\\\"Location\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"geoLocation\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"latitude\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"longitude\\\"><Value></Value></Attribute></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"virtualLocation\\\"><Value></Value></Attribute></SystemUnitClass><Version>1.0.0</Version></SystemUnitClassLib></CAEXFile>\";\nvar emptyManifest = context.flow.get(\"emptyManifest\") || \"<?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?><CAEXFile FileName=\\\"Aml_as_manifest_models_20200124_prophesy.aml\\\" SchemaVersion=\\\"2.15\\\" xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\" xsi:noNamespaceSchemaLocation=\\\"CAEX_ClassModel_V2.15.xsd\\\"><AdditionalInformation><WriterHeader><LastWritingDateTime>2018-10-16T16:12:49.4126198+01:00</LastWritingDateTime><WriterID>916578CA-FE0D-474E-A4FC-9E1719892369</WriterID><WriterName>AutomationML Editor</WriterName><WriterProjectID>unspecified</WriterProjectID><WriterProjectTitle>unspecified</WriterProjectTitle><WriterRelease>4.7.0.0</WriterRelease><WriterVendor>AutomationML e.V.</WriterVendor><WriterVendorURL>www.AutomationML.org</WriterVendorURL><WriterVersion>4.7.0.0</WriterVersion></WriterHeader></AdditionalInformation><AdditionalInformation AutomationMLVersion=\\\"2.0\\\" /><InstanceHierarchy ID=\\\"90a789b3-d644-43f7-b8ec-fdfda0bdbbcd\\\" Name=\\\"AASManifest\\\"><InternalElement ID=\\\"611c9074-ad8d-47c1-a26f-3d8d9f517ae1\\\" Name=\\\"Header\\\"><InternalElement ID=\\\"921669c9-4e9a-4580-afe4-4fc3dad4b6b4\\\" Name=\\\"AAS Identifiers\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Submodel\\\"><InternalElement ID=\\\"751eb2cb-3ec6-4e7f-95b8-4bb4b3876db0\\\" Name=\\\"Identifier\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/Identifier\\\"><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"namespace\\\"><Value>http://10.0.2.15:1880</Value></Attribute><InternalElement ID=\\\"068eaa56-f1ab-4d31-972b-51165ec15124\\\" Name=\\\"Location\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Location\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"geoLocation\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"latitude\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"longitude\\\"><Value></Value></Attribute></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"virtualLocation\\\"><Value>DESKTOP-NEJ4OQ5</Value></Attribute></InternalElement></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/PropertyContainer\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/AASIdentification\\\" /></InternalElement><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/AASIdentification\\\" /></InternalElement><InternalElement ID=\\\"b66b5437-4fee-4ccb-8009-1d28c8159f9e\\\" Name=\\\"Body\\\"><InternalElement ID=\\\"44152b0c-c1db-4a9a-ba5f-a38cbfff43f7\\\" Name=\\\"Asset Condition Monitoring\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Submodel\\\"><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>true</Value></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/PropertyContainer\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/DataSourceManifests\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/VendorSpecific\\\" /></InternalElement><InternalElement Name=\\\"AAS API Docs\\\" ID=\\\"8c53547a-d697-4e83-90db-db8042ce745e\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Submodel\\\"><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><InternalElement Name=\\\"Data Source Manifest - AAS Documentation\\\" ID=\\\"3940b81b-2c1f-45f9-a067-58758e9da590\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSM\\\"><Attribute Name=\\\"macAddress\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><Attribute Name=\\\"semanticId\\\" AttributeDataType=\\\"xs:IDREF\\\" /><Attribute Name=\\\"isWritable\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>False</DefaultValue><Value>False</Value></Attribute><Attribute Name=\\\"isEventable\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>False</DefaultValue><Value>False</Value></Attribute><InternalElement Name=\\\"API documentation\\\" ID=\\\"51ac93cb-d822-403e-bf45-9607321dbecd\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSD\\\"><InternalElement ID=\\\"c755ccce-6342-46ea-aea4-26fb9a5f2f6b\\\" Name=\\\"DI\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DI\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"communicationProtocol\\\"><Value></Value></Attribute><InternalElement ID=\\\"b08d0a41-6bd3-4706-861a-a8351b4ec1df\\\" Name=\\\"Parameters\\\"><InternalElement Name=\\\"url\\\" ID=\\\"fa8628ff-f008-421d-943a-98d1b7512cd4\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>/http-api/swagger.json</Value></Attribute></InternalElement><InternalElement Name=\\\"internalLinkId\\\" ID=\\\"3c19f645-8cd4-47fa-85c4-e2e778eafe00\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>WebDocs</Value></Attribute></InternalElement><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Internal\\\" /></InternalElement><InternalElement ID=\\\"dfedd423-92cc-49ff-a12f-5e845c378838\\\" Name=\\\"DK\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DK\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"format\\\"><Value>Plain text</Value></Attribute><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"quantityKind\\\"><Value>N/A</Value></Attribute><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value>Observation</Value></Attribute><Attribute Name=\\\"content\\\" AttributeDataType=\\\"xs:string\\\"><Value>static</Value><Constraint Name=\\\"\\\"><NominalScaledType><RequiredValue>Dynamic</RequiredValue><RequiredValue>Static</RequiredValue></NominalScaledType></Constraint></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/PropertyContainer\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/DataSourceManifests\\\" /></InternalElement><InternalElement Name=\\\"AAS Data Streaming Docs\\\" ID=\\\"8fc3123c-ad98-4435-9ee5-d9b9d45182b2\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Submodel\\\"><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><InternalElement Name=\\\"Data Source Manifest - Data Streaming Documentation\\\" ID=\\\"39ee8897-f919-4956-acc6-5c78a6fa9aee\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSM\\\"><Attribute Name=\\\"macAddress\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><Attribute Name=\\\"semanticId\\\" AttributeDataType=\\\"xs:IDREF\\\"><Value>0173-1#02-AAO694#001</Value></Attribute><Attribute Name=\\\"isWritable\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>False</DefaultValue><Value>False</Value></Attribute><Attribute Name=\\\"isEventable\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>False</DefaultValue><Value>False</Value></Attribute><InternalElement Name=\\\"API documentation\\\" ID=\\\"00a14294-c0e5-4cd0-b7c0-0a5cdcd4e48f\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSD\\\"><InternalElement ID=\\\"8b5916c4-f52e-4238-98cb-f4204b62ec8a\\\" Name=\\\"DI\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DI\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"communicationProtocol\\\"><Value></Value></Attribute><InternalElement ID=\\\"ae2e2a55-6558-43b4-99f8-ca52b697c54c\\\" Name=\\\"Parameters\\\"><InternalElement Name=\\\"url\\\" ID=\\\"4b948e20-8fb8-4dee-acce-e8f7f35047d9\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>http://sensap.ddns.net:58001/swagger-ui.html#/</Value></Attribute></InternalElement><InternalElement Name=\\\"internalLinkId\\\" ID=\\\"344b8d63-67b0-43b5-a13f-ea5cef04b776\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>WebDocs</Value></Attribute></InternalElement><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Internal\\\" /></InternalElement><InternalElement ID=\\\"01ee4617-7c11-42a7-bc99-6d361792c404\\\" Name=\\\"Online Swagger documentation resource\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DK\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"format\\\"><Value>URL</Value></Attribute><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"quantityKind\\\"><Value></Value></Attribute><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value>Observation</Value></Attribute><Attribute Name=\\\"content\\\" AttributeDataType=\\\"xs:string\\\"><Value>Static</Value><Constraint Name=\\\"\\\"><NominalScaledType><RequiredValue>Dynamic</RequiredValue><RequiredValue>Static</RequiredValue></NominalScaledType></Constraint></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/PropertyContainer\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/DataSourceManifests\\\" /></InternalElement><InternalElement Name=\\\"AAS Resource Monitoring\\\" ID=\\\"5f3fc0cf-167e-4acb-ac49-d6807ea87ef4\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Submodel\\\"><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><InternalElement Name=\\\"Data Source Manifest - Description\\\" ID=\\\"b5595a4a-40a5-46e6-a9c6-f493f99a72a1\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSM\\\"><Attribute Name=\\\"macAddress\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><Attribute Name=\\\"semanticId\\\" AttributeDataType=\\\"xs:IDREF\\\"><Value>0173-1#02-AAU734#001</Value></Attribute><Attribute Name=\\\"isWritable\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>False</DefaultValue><Value>False</Value></Attribute><Attribute Name=\\\"isEventable\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>False</DefaultValue><Value>False</Value></Attribute><InternalElement Name=\\\"System Description\\\" ID=\\\"4d2f1be3-52db-495a-b4a3-be3ff916e1a4\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSD\\\"><Description>Textual description of the resource hardware. It includes the full name and the version identification of the system's hardware type, software operating system, and networking software.  </Description><InternalElement ID=\\\"4152e105-a503-42ca-97fa-d4c6a4a552f9\\\" Name=\\\"DI\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DI\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"communicationProtocol\\\"><Value></Value></Attribute><InternalElement ID=\\\"eb02baed-2ec7-4757-b169-52e92e69db59\\\" Name=\\\"Parameters\\\"><InternalElement Name=\\\"protocol\\\" ID=\\\"7e5f1bc5-34e1-4f1a-835b-7d1b6f72bb96\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>snmp</Value></Attribute></InternalElement><InternalElement Name=\\\"address\\\" ID=\\\"5e95da25-7400-4fe6-849b-a708696a5d28\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>localhost</Value></Attribute></InternalElement><InternalElement Name=\\\"oid\\\" ID=\\\"cc1ca40b-e97e-4282-b799-36ceb2513044\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>1.3.6.1.2.1.1.1.0</Value></Attribute></InternalElement><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><InternalElement ID=\\\"2d5b30b6-16f8-41b0-b6f8-26366192e1dc\\\" Name=\\\"sysDescr\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DK\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"format\\\"><Value>Plain text</Value></Attribute><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"quantityKind\\\"><DefaultValue>N/A</DefaultValue><Value>N/A</Value></Attribute><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value>Observation</Value></Attribute><Attribute Name=\\\"content\\\" AttributeDataType=\\\"xs:string\\\"><Value>Static</Value><Constraint Name=\\\"ContentValues\\\"><NominalScaledType><RequiredValue>Dynamic</RequiredValue><RequiredValue>Static</RequiredValue></NominalScaledType></Constraint></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><InternalElement Name=\\\"Data Source Manifest - CPU Load 1\\\" ID=\\\"37847f87-fe4d-47fa-9fc5-aba7879ccda2\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSM\\\"><Attribute Name=\\\"macAddress\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><Attribute Name=\\\"semanticId\\\" AttributeDataType=\\\"xs:IDREF\\\"><Value>N/A</Value></Attribute><Attribute Name=\\\"isWritable\\\" AttributeDataType=\\\"xs:boolean\\\" /><Attribute Name=\\\"isEventable\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>True</DefaultValue><Value>True</Value></Attribute><InternalElement Name=\\\"CPU 1m Load\\\" ID=\\\"5ce6fc2b-66d6-468d-8381-41c99c67757e\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSD\\\"><InternalElement ID=\\\"0037d0eb-b5be-4245-a254-691924b0009e\\\" Name=\\\"DI\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DI\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"communicationProtocol\\\"><Value></Value></Attribute><InternalElement ID=\\\"acf77e29-679f-493e-9b38-e33405e3a0a4\\\" Name=\\\"Parameters\\\"><InternalElement Name=\\\"protocol\\\" ID=\\\"0780364d-9e55-4ba4-bfb0-f26c03c54059\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>snmp</Value></Attribute></InternalElement><InternalElement Name=\\\"address\\\" ID=\\\"b7ef026e-c259-4a20-9f3f-d0af3a5f7824\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>localhost</Value></Attribute></InternalElement><InternalElement Name=\\\"oid\\\" ID=\\\"3ba3f101-fc01-4bf5-8576-78032b69aa81\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>1.3.6.1.4.1.2021.10.1.3.1</Value></Attribute></InternalElement><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><InternalElement ID=\\\"22c16520-365e-4ac5-814e-03ab0e5287cd\\\" Name=\\\"CPU 1 minute Load in plain text\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DK\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"format\\\"><Value>Plain Text</Value></Attribute><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"quantityKind\\\"><Value></Value></Attribute><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value>Observation</Value></Attribute><Attribute Name=\\\"content\\\" AttributeDataType=\\\"xs:string\\\"><Value>Dynamic</Value><Constraint Name=\\\"ContentValues\\\"><NominalScaledType><RequiredValue>Dynamic</RequiredValue><RequiredValue>Static</RequiredValue></NominalScaledType></Constraint></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><InternalElement Name=\\\"Data Source Manifest - CPU Load 2\\\" ID=\\\"1e662338-8a8f-4e65-89e3-77cfa1f333bd\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSM\\\"><Attribute Name=\\\"macAddress\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><Attribute Name=\\\"semanticId\\\" AttributeDataType=\\\"xs:IDREF\\\"><Value>N/A</Value></Attribute><Attribute Name=\\\"isWritable\\\" AttributeDataType=\\\"xs:boolean\\\" /><Attribute Name=\\\"isEventable\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>True</DefaultValue><Value>True</Value></Attribute><InternalElement Name=\\\"CPU 5m Load\\\" ID=\\\"02f4c856-a224-4ea2-baea-9c613dc15f8d\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSD\\\"><InternalElement ID=\\\"34539165-47aa-4151-b4cb-dc9d9bce8199\\\" Name=\\\"DI\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DI\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"communicationProtocol\\\"><Value></Value></Attribute><InternalElement ID=\\\"6a420732-5b3f-46d7-a5ab-9c17489f9839\\\" Name=\\\"Parameters\\\"><InternalElement Name=\\\"protocol\\\" ID=\\\"fcfd040d-5497-4ac8-8de7-6a906235e406\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>snmp</Value></Attribute></InternalElement><InternalElement Name=\\\"address\\\" ID=\\\"7cd504e4-da69-464a-b179-bb2a3e8fe25f\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>localhost</Value></Attribute></InternalElement><InternalElement Name=\\\"oid\\\" ID=\\\"a4fd3c3f-9e7a-4d51-9e6c-7cb61e25b4c5\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>1.3.6.1.4.1.2021.10.1.3.2</Value></Attribute></InternalElement><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><InternalElement ID=\\\"13d0492a-62ee-4205-b7f5-3285f1869d5d\\\" Name=\\\"CPU 5 minute Load in plain text\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DK\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"format\\\"><Value>Plain text</Value></Attribute><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"quantityKind\\\"><Value></Value></Attribute><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value>Observation</Value></Attribute><Attribute Name=\\\"content\\\" AttributeDataType=\\\"xs:string\\\"><Value>Dynamic</Value><Constraint Name=\\\"ContentValues\\\"><NominalScaledType><RequiredValue>Dynamic</RequiredValue><RequiredValue>Static</RequiredValue></NominalScaledType></Constraint></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><InternalElement Name=\\\"Data Source Manifest - CPU Load 3\\\" ID=\\\"e65bd7f7-8879-4aa7-bb83-71b9fc7881ee\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSM\\\"><Attribute Name=\\\"macAddress\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><Attribute Name=\\\"semanticId\\\" AttributeDataType=\\\"xs:IDREF\\\"><Value>N/A</Value></Attribute><Attribute Name=\\\"isWritable\\\" AttributeDataType=\\\"xs:boolean\\\" /><Attribute Name=\\\"isEventable\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>True</DefaultValue><Value>True</Value></Attribute><InternalElement Name=\\\"CPU 15m Load\\\" ID=\\\"30fe2ada-85aa-4e48-855b-b80ba93b4286\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSD\\\"><InternalElement ID=\\\"dda3c7af-750e-44c9-a6ce-ff8b9adc8c96\\\" Name=\\\"DI\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DI\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"communicationProtocol\\\"><Value></Value></Attribute><InternalElement ID=\\\"a2365478-4bf2-4b84-a120-2339a4cc4600\\\" Name=\\\"Parameters\\\"><InternalElement Name=\\\"protocol\\\" ID=\\\"848a806c-3e43-47a0-b5d1-4029ee89f2cc\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>snmp</Value></Attribute></InternalElement><InternalElement Name=\\\"address\\\" ID=\\\"19100813-c482-4d8b-8ec3-c1017260fe24\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>localhost</Value></Attribute></InternalElement><InternalElement Name=\\\"oid\\\" ID=\\\"c5d564c0-b392-4901-887e-f1518bd0a5bf\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>1.3.6.1.4.1.2021.10.1.3.3</Value></Attribute></InternalElement><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><InternalElement ID=\\\"05f04660-68ee-42b3-ad1a-8cf2e875fe6f\\\" Name=\\\"CPU 15 minute Load in plain text\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DK\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"format\\\"><Value>Plain text</Value></Attribute><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"quantityKind\\\"><Value></Value></Attribute><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value>Observation</Value></Attribute><Attribute Name=\\\"content\\\" AttributeDataType=\\\"xs:string\\\"><Value>Dynamic</Value><Constraint Name=\\\"ContentValues\\\"><NominalScaledType><RequiredValue>Dynamic</RequiredValue><RequiredValue>Static</RequiredValue></NominalScaledType></Constraint></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><InternalElement Name=\\\"Data Source Manifest - Up Time\\\" ID=\\\"18e74242-f1a7-418c-be28-2179f6ca0631\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSM\\\"><Attribute Name=\\\"macAddress\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><Attribute Name=\\\"semanticId\\\" AttributeDataType=\\\"xs:IDREF\\\"><Value>0173-1#02-AAJ500#003</Value></Attribute><Attribute Name=\\\"isWritable\\\" AttributeDataType=\\\"xs:boolean\\\" /><Attribute Name=\\\"isEventable\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>True</DefaultValue><Value>True</Value></Attribute><InternalElement Name=\\\"System Uptime\\\" ID=\\\"1608d415-9d7f-4f91-90cb-e38357f296a2\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSD\\\"><InternalElement ID=\\\"37473a66-5249-4531-99e8-586a04ffff9c\\\" Name=\\\"DI\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DI\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"communicationProtocol\\\"><Value></Value></Attribute><InternalElement ID=\\\"d0fc9b63-fd84-457c-94df-e63c0801f568\\\" Name=\\\"Parameters\\\"><InternalElement Name=\\\"protocol\\\" ID=\\\"50de3542-b98f-45ea-827b-b13b8f34462a\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>snmp</Value></Attribute></InternalElement><InternalElement Name=\\\"address\\\" ID=\\\"cd5f8f99-85f4-4141-b4c8-1931b5209924\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>localhost</Value></Attribute></InternalElement><InternalElement Name=\\\"oid\\\" ID=\\\"01450824-367b-4eb3-8fd7-06970471661a\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>1.3.6.1.2.1.1.3.0</Value></Attribute></InternalElement><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><InternalElement ID=\\\"d7b2166f-0ce7-4be0-a7c7-1847f76fa544\\\" Name=\\\"sysUpTime in plain text\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DK\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"format\\\"><Value>Plain text</Value></Attribute><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"quantityKind\\\"><DefaultValue>N/A</DefaultValue><Value>Time Ticks</Value></Attribute><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value>Observation</Value></Attribute><Attribute Name=\\\"content\\\" AttributeDataType=\\\"xs:string\\\"><Value>Dynamic</Value><Constraint Name=\\\"ContentValues\\\"><NominalScaledType><RequiredValue>Dynamic</RequiredValue><RequiredValue>Static</RequiredValue></NominalScaledType></Constraint></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/PropertyContainer\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/DataSourceManifests\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Generic\\\" /></InternalElement><InternalElement Name=\\\"AAS Health Monitoring\\\" ID=\\\"20bcc9b1-5e94-446d-ae0e-1ae3a5a9b427\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Submodel\\\"><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><InternalElement Name=\\\"Data Source Manifest - Health Check\\\" ID=\\\"f918cf01-90f4-4a35-afc2-4d2219a2b1fb\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSM\\\"><Attribute Name=\\\"macAddress\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><Attribute Name=\\\"semanticId\\\" AttributeDataType=\\\"xs:IDREF\\\"><Value>0173-1#02-BAG100#003</Value></Attribute><Attribute Name=\\\"isWritable\\\" AttributeDataType=\\\"xs:boolean\\\" /><Attribute Name=\\\"isEventable\\\" AttributeDataType=\\\"xs:boolean\\\"><Value>True</Value></Attribute><InternalElement Name=\\\"Health Check\\\" ID=\\\"94bd05e0-9599-44bf-bebf-9a630fce2460\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSD\\\"><InternalElement ID=\\\"ac61ccae-a1e0-4f49-bbbd-477f0c0802d1\\\" Name=\\\"DI\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DI\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"communicationProtocol\\\"><Value></Value></Attribute><InternalElement ID=\\\"3fe8d02d-4221-418f-b05e-64f42059c514\\\" Name=\\\"Parameters\\\"><InternalElement ID=\\\"332bda96-722a-4812-8374-31ae45960be5\\\" Name=\\\"protocol\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>rest</Value></Attribute></InternalElement><InternalElement ID=\\\"48277a2a-ac91-472f-ab30-11eb4d2c699a\\\" Name=\\\"method\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>GET</Value></Attribute></InternalElement><InternalElement ID=\\\"1d905f8e-338b-4359-ab55-baab0e8d5178\\\" Name=\\\"url\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>http://localhost:1880/aas/health</Value></Attribute></InternalElement><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><InternalElement ID=\\\"51ed9f21-f86f-4917-834a-4a04125924cf\\\" Name=\\\"Health Check Info in plain text\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DK\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"format\\\"><Value>Plain text</Value></Attribute><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"quantityKind\\\"><Value></Value></Attribute><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value>Observation</Value></Attribute><Attribute Name=\\\"content\\\" AttributeDataType=\\\"xs:string\\\"><Value>Dynamic</Value><Constraint Name=\\\"ContentValues\\\"><NominalScaledType><RequiredValue>Dynamic</RequiredValue><RequiredValue>Static</RequiredValue></NominalScaledType></Constraint></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/PropertyContainer\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/DataSourceManifests\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Generic\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/SubmodelContainer\\\" /></InternalElement><Version>1.0.0</Version></InstanceHierarchy><InterfaceClassLib Name=\\\"AASInterfaceClassLib\\\"><Version>1.0.0</Version></InterfaceClassLib><RoleClassLib Name=\\\"AASManifestRoleClassLib\\\"><RoleClass Name=\\\"PropertyContainer\\\" /><RoleClass Name=\\\"Statement\\\" /><RoleClass Name=\\\"AASIdentification\\\" /><RoleClass Name=\\\"SubmodelContainer\\\" /><RoleClass Name=\\\"ParameterContainer\\\" /><RoleClass Name=\\\"DataSourceManifests\\\" /><RoleClass Name=\\\"LiveDataset\\\" /><RoleClass Name=\\\"Generic\\\" /><RoleClass Name=\\\"VendorSpecific\\\" /><RoleClass Name=\\\"DataStreaming\\\" /><RoleClass Name=\\\"Custom\\\" /><RoleClass Name=\\\"Internal\\\" /><Version></Version></RoleClassLib><SystemUnitClassLib Name=\\\"AASSystemUnitClassLib\\\"><SystemUnitClass Name=\\\"Submodel\\\"><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/PropertyContainer\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/DataSourceManifests\\\" /></SystemUnitClass><SystemUnitClass Name=\\\"Property\\\"><Description></Description><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /><SystemUnitClass ID=\\\"15250019-f6d1-4721-8ffc-49e309f57d7f\\\" Name=\\\"DSD\\\" RefBaseClassPath=\\\"AASSystemUnitClassLib/Property\\\"><Description>PROPHESY Data Source Definition</Description><InternalElement ID=\\\"e45f2f0d-38e3-4d7f-bec8-1ba7a0220d95\\\" Name=\\\"DI\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DI\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"communicationProtocol\\\"><Value></Value></Attribute><InternalElement ID=\\\"634ca4cf-6dd7-4a90-81c4-19cc8aac07a1\\\" Name=\\\"Parameters\\\"><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><InternalElement ID=\\\"a40cbfd0-ac48-413f-911a-a5915c40e071\\\" Name=\\\"DK\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DK\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"format\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"quantityKind\\\"><Value></Value></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement></SystemUnitClass><SystemUnitClass ID=\\\"124e5d81-d58f-40c8-ad14-8e62e003467c\\\" Name=\\\"DI\\\" RefBaseClassPath=\\\"AASSystemUnitClassLib/Property\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"communicationProtocol\\\"><Value></Value></Attribute><InternalElement ID=\\\"79d506e7-b991-4b1a-aa29-8161da867a9e\\\" Name=\\\"Parameters\\\"><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement></SystemUnitClass><SystemUnitClass ID=\\\"6edf24e3-dc69-4857-b268-f9e355e0898f\\\" Name=\\\"DK\\\" RefBaseClassPath=\\\"AASSystemUnitClassLib/Property\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"format\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"quantityKind\\\"><Value></Value></Attribute><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"content\\\" AttributeDataType=\\\"xs:string\\\"><Constraint Name=\\\"ContentValues\\\"><NominalScaledType><RequiredValue>Dynamic</RequiredValue><RequiredValue>Static</RequiredValue></NominalScaledType></Constraint></Attribute><Description></Description></SystemUnitClass><SystemUnitClass ID=\\\"88da950a-5c94-4027-98e7-d673a9694f8b\\\" Name=\\\"Identifier\\\"><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"namespace\\\"><Value></Value></Attribute><Description></Description><InternalElement ID=\\\"35063688-a0e9-47ea-8bf3-1afd38d16ccb\\\" Name=\\\"Location\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Location\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"geoLocation\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"latitude\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"longitude\\\"><Value></Value></Attribute></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"virtualLocation\\\"><Value></Value></Attribute></InternalElement></SystemUnitClass><SystemUnitClass Name=\\\"DSM\\\" ID=\\\"96a19b7b-e91f-4707-bf97-03d9c84452c9\\\" RefBaseClassPath=\\\"AASSystemUnitClassLib/Property\\\"><Attribute Name=\\\"macAddress\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><Attribute Name=\\\"semanticId\\\" AttributeDataType=\\\"xs:IDREF\\\" /><Attribute Name=\\\"isWritable\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>False</DefaultValue><Value>False</Value></Attribute><Attribute Name=\\\"isEventable\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>False</DefaultValue><Value>False</Value></Attribute><InternalElement Name=\\\"DSD\\\" ID=\\\"5d0afb31-a84e-424b-a4bf-1786e2e49ff4\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSD\\\"><InternalElement ID=\\\"7dad5dfb-167d-4b43-955d-112b7813eea2\\\" Name=\\\"DI\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DI\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"communicationProtocol\\\"><Value></Value></Attribute><InternalElement ID=\\\"b1578493-e760-483c-a7dd-d14899da6ea0\\\" Name=\\\"Parameters\\\"><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><InternalElement ID=\\\"ff601314-0223-4549-ab65-9ba575dae884\\\" Name=\\\"DK\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DK\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"format\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"quantityKind\\\"><Value></Value></Attribute><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\" /><Attribute Name=\\\"content\\\" AttributeDataType=\\\"xs:string\\\"><Constraint Name=\\\"\\\"><NominalScaledType><RequiredValue>Dynamic</RequiredValue><RequiredValue>Static</RequiredValue></NominalScaledType></Constraint></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement></SystemUnitClass></SystemUnitClass><SystemUnitClass ID=\\\"e5ab0092-4b4e-4529-95bd-62a264177805\\\" Name=\\\"Parameter\\\" RefBaseClassPath=\\\"\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value></Value></Attribute><Description></Description></SystemUnitClass><SystemUnitClass ID=\\\"b0a00287-0441-46ed-8926-df3fc07b8545\\\" Name=\\\"Location\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"geoLocation\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"latitude\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"longitude\\\"><Value></Value></Attribute></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"virtualLocation\\\"><Value></Value></Attribute></SystemUnitClass><Version>1.0.0</Version></SystemUnitClassLib></CAEXFile>\";\n//var emptyDSM = context.flow.get(\"emptyDSM\") || \"<?xml version=\\\"1.0\\\"?><InternalElement ID=\\\"b5595a4a-40a5-46e6-a9c6-f493f99a72a1\\\" Name=\\\"Name\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Property/DSM\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"macAddress\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:boolean\\\" Name=\\\"Visibility\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><InternalElement ID=\\\"4d2f1be3-52db-495a-b4a3-be3ff916e1a4\\\" Name=\\\"System Description\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Property/DSD\\\"><Description>Textual description of the resource hardware. It includes the full name and the version identification of the system's hardware type, software operating system, and networking software.</Description><InternalElement ID=\\\"4152e105-a503-42ca-97fa-d4c6a4a552f9\\\" Name=\\\"DI\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Property/DI\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"communicationProtocol\\\"><Value></Value></Attribute><InternalElement ID=\\\"eb02baed-2ec7-4757-b169-52e92e69db59\\\" Name=\\\"Parameters\\\"><InternalElement ID=\\\"7e5f1bc5-34e1-4f1a-835b-7d1b6f72bb96\\\" Name=\\\"protocol\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>snmp</Value></Attribute></InternalElement><InternalElement ID=\\\"5e95da25-7400-4fe6-849b-a708696a5d28\\\" Name=\\\"address\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>localhost</Value></Attribute></InternalElement><InternalElement ID=\\\"cc1ca40b-e97e-4282-b799-36ceb2513044\\\" Name=\\\"oid\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>1.3.6.1.2.1.1.1.0</Value></Attribute></InternalElement><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\"/></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\"/></InternalElement><InternalElement ID=\\\"2d5b30b6-16f8-41b0-b6f8-26366192e1dc\\\" Name=\\\"sysDescr\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Property/DK\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"format\\\"><Value>Plain text</Value></Attribute><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"quantityKind\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"modelType\\\"><Value>Observation</Value></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\"/></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\"/></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\"/></InternalElement>\";\nvar emptyDSM = context.flow.get(\"emptyDSM\") || \"<?xml version=\\\"1.0\\\"?><InternalElement Name=\\\"Name\\\" ID=\\\"b5595a4a-40a5-46e6-a9c6-f493f99a72a1\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSM\\\"><Attribute Name=\\\"macAddress\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><Attribute Name=\\\"semanticId\\\" AttributeDataType=\\\"xs:IDREF\\\"><Value>0173-1#02-AAU734#001</Value></Attribute><Attribute Name=\\\"isWritable\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>False</DefaultValue><Value>False</Value></Attribute><Attribute Name=\\\"isEventable\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>False</DefaultValue><Value>False</Value></Attribute><InternalElement Name=\\\"System Description\\\" ID=\\\"4d2f1be3-52db-495a-b4a3-be3ff916e1a4\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSD\\\"><Description>Textual description of the resource hardware. It includes the full name and the version identification of the system's hardware type, software operating system, and networking software.  </Description><InternalElement ID=\\\"4152e105-a503-42ca-97fa-d4c6a4a552f9\\\" Name=\\\"DI\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DI\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"communicationProtocol\\\"><Value/></Attribute><InternalElement ID=\\\"eb02baed-2ec7-4757-b169-52e92e69db59\\\" Name=\\\"Parameters\\\"><InternalElement Name=\\\"protocol\\\" ID=\\\"7e5f1bc5-34e1-4f1a-835b-7d1b6f72bb96\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value/></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>snmp</Value></Attribute></InternalElement><InternalElement Name=\\\"address\\\" ID=\\\"5e95da25-7400-4fe6-849b-a708696a5d28\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value/></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>localhost</Value></Attribute></InternalElement><InternalElement Name=\\\"oid\\\" ID=\\\"cc1ca40b-e97e-4282-b799-36ceb2513044\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value/></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>1.3.6.1.2.1.1.1.0</Value></Attribute></InternalElement><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><InternalElement ID=\\\"2d5b30b6-16f8-41b0-b6f8-26366192e1dc\\\" Name=\\\"sysDescr\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DK\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"format\\\"><Value>Plain text</Value></Attribute><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"quantityKind\\\"><DefaultValue>N/A</DefaultValue><Value>N/A</Value></Attribute><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value>Observation</Value></Attribute><Attribute Name=\\\"content\\\" AttributeDataType=\\\"xs:string\\\"><Value>Static</Value><Constraint Name=\\\"ContentValues\\\"><NominalScaledType><RequiredValue>Dynamic</RequiredValue><RequiredValue>Static</RequiredValue></NominalScaledType></Constraint></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement>\";\n//var AASIdentifier = context.flow.get(\"AASIdentifier\") || uuid;\nvar manifest = context.flow.get(\"manifest\") || \"\";\nvar header = context.flow.get(\"header\") || \"\";\nvar body = context.flow.get(\"body\") || \"\";\n//var submodels = context.flow.get(\"submodels\") || \"\";\n//var properties = context.flow.get(\"properties\") || \"\";\n\ncontext.flow.set(\"emptyManifest\", emptyManifest);\ncontext.flow.set(\"emptyDSM\", emptyDSM);\ncontext.global.set(\"AASIdentifier\", uuid);\ncontext.flow.set(\"manifest\", manifest);\ncontext.flow.set(\"header\", header);\ncontext.flow.set(\"body\", body);\n\nreturn msg;\n","outputs":1,"noerr":0,"x":673.0261840820312,"y":93.38336181640625,"wires":[[]]},{"id":"1637117f.61492f","type":"actionflows","z":"2e7b7c8b.80c47c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"persistManifest","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1109.88330078125,"y":171.38336181640625,"wires":[["e81db6c8.e21a3"]]},{"id":"13cd3692.4c04b1","type":"set-defaults","z":"ea9678a6.7fc468","name":"set-startTime","rules":[{"p":"startTime","pt":"msg","to":"","tot":"date"}],"chbox_DoOutputToMessage":true,"chbox_SetCurrentToMsg":false,"howSend":{"text":"payload","type":"msg","modifiedValue":"payload"},"dropdown_HowManyMessages":"single","dropdownObjOrVal":"value","outputs":1,"x":430,"y":1380,"wires":[["5d8e1f61.141728"]]},{"id":"3d966a83.f25b46","type":"subflow:3bcb972f.6d23c8","z":"ea9678a6.7fc468","name":"","env":[],"x":1810,"y":1420,"wires":[],"icon":"node-red-contrib-viseo-log/log.svg"},{"id":"72a2f52b.604d44","type":"subflow:3bcb972f.6d23c8","z":"ea9678a6.7fc468","name":"","x":1810,"y":1620,"wires":[],"icon":"node-red-contrib-viseo-log/log.svg"},{"id":"f535deb4.899ba8","type":"subflow:3bcb972f.6d23c8","z":"ea9678a6.7fc468","name":"","x":1810,"y":1820,"wires":[],"icon":"node-red-contrib-viseo-log/log.svg"},{"id":"16c067db.a92dd8","type":"subflow:3bcb972f.6d23c8","z":"ea9678a6.7fc468","name":"","x":1810,"y":2000,"wires":[],"icon":"node-red-contrib-viseo-log/log.svg"},{"id":"fc071a75.9dc878","type":"set-defaults","z":"ea9678a6.7fc468","name":"set-startTime","rules":[{"p":"startTime","pt":"msg","to":"","tot":"date"}],"chbox_DoOutputToMessage":true,"chbox_SetCurrentToMsg":false,"howSend":{"text":"payload","type":"msg","modifiedValue":"payload"},"dropdown_HowManyMessages":"single","dropdownObjOrVal":"value","outputs":1,"x":430,"y":1580,"wires":[["725e3aa9.5a7204"]]},{"id":"d17f6aae.3a7f78","type":"set-defaults","z":"ea9678a6.7fc468","name":"set-startTime","rules":[{"p":"startTime","pt":"msg","to":"","tot":"date"}],"chbox_DoOutputToMessage":true,"chbox_SetCurrentToMsg":false,"howSend":{"text":"payload","type":"msg","modifiedValue":"payload"},"dropdown_HowManyMessages":"single","dropdownObjOrVal":"value","outputs":1,"x":440,"y":1780,"wires":[["6072385f.f3ce68"]]},{"id":"1b34e557.e00bf3","type":"set-defaults","z":"ea9678a6.7fc468","name":"set-startTime","rules":[{"p":"startTime","pt":"msg","to":"","tot":"date"}],"chbox_DoOutputToMessage":true,"chbox_SetCurrentToMsg":false,"howSend":{"text":"payload","type":"msg","modifiedValue":"payload"},"dropdown_HowManyMessages":"single","dropdownObjOrVal":"value","outputs":1,"x":500,"y":1960,"wires":[["698f6a15.ef8724"]]},{"id":"bfea6c45.d0357","type":"subflow:3bcb972f.6d23c8","z":"ea9678a6.7fc468","name":"","x":1810,"y":2180,"wires":[],"icon":"node-red-contrib-viseo-log/log.svg"},{"id":"f994d19d.da4258","type":"set-defaults","z":"ea9678a6.7fc468","name":"set-startTime","rules":[{"p":"startTime","pt":"msg","to":"","tot":"date"}],"chbox_DoOutputToMessage":true,"chbox_SetCurrentToMsg":false,"howSend":{"text":"payload","type":"msg","modifiedValue":"payload"},"dropdown_HowManyMessages":"single","dropdownObjOrVal":"value","outputs":1,"x":450,"y":2140,"wires":[["58a70303.1f0d74"]]},{"id":"15617b9d.75bf7c","type":"rdkafka in","z":"6ba1a42a.072f84","name":"","topic":"aas-topic","cgroup":"prophesy","autocommit":true,"broker":"a4c40ea9.7e657","x":220,"y":320,"wires":[["2709700.dd1689","2f3dd400.aabd44"]]},{"id":"b1c9bda.76f004","type":"set-defaults","z":"ea9678a6.7fc468","name":"set-startTime","rules":[{"p":"startTime","pt":"msg","to":"","tot":"date"}],"chbox_DoOutputToMessage":true,"chbox_SetCurrentToMsg":false,"howSend":{"text":"payload","type":"msg","modifiedValue":"payload"},"dropdown_HowManyMessages":"single","dropdownObjOrVal":"value","outputs":1,"x":440,"y":2340,"wires":[["8a691399.524998"]]},{"id":"5e11f50.387678c","type":"subflow:3bcb972f.6d23c8","z":"ea9678a6.7fc468","name":"","x":1810,"y":2380,"wires":[],"icon":"node-red-contrib-viseo-log/log.svg"},{"id":"fe652f1b.0ce43","type":"set-defaults","z":"ea9678a6.7fc468","name":"set-startTime","rules":[{"p":"startTime","pt":"msg","to":"","tot":"date"}],"chbox_DoOutputToMessage":true,"chbox_SetCurrentToMsg":false,"howSend":{"text":"payload","type":"msg","modifiedValue":"payload"},"dropdown_HowManyMessages":"single","dropdownObjOrVal":"value","outputs":1,"x":450,"y":2560,"wires":[["417fcbd6.4b6644"]]},{"id":"4f8176d7.c28508","type":"subflow:3bcb972f.6d23c8","z":"ea9678a6.7fc468","name":"","env":[],"x":1810,"y":2600,"wires":[],"icon":"node-red-contrib-viseo-log/log.svg"},{"id":"a213e076.c06b78","type":"set-defaults","z":"ea9678a6.7fc468","name":"set-startTime","rules":[{"p":"startTime","pt":"msg","to":"","tot":"date"}],"chbox_DoOutputToMessage":true,"chbox_SetCurrentToMsg":false,"howSend":{"text":"payload","type":"msg","modifiedValue":"payload"},"dropdown_HowManyMessages":"single","dropdownObjOrVal":"value","outputs":1,"x":470,"y":2740,"wires":[["b2075a99.61fe38"]]},{"id":"a54ff9dc.7cd3","type":"subflow:3bcb972f.6d23c8","z":"ea9678a6.7fc468","name":"","x":1810,"y":2780,"wires":[],"icon":"node-red-contrib-viseo-log/log.svg"},{"id":"1fc369f.e9ea116","type":"set-defaults","z":"ea9678a6.7fc468","name":"set-startTime","rules":[{"p":"startTime","pt":"msg","to":"","tot":"date"}],"chbox_DoOutputToMessage":true,"chbox_SetCurrentToMsg":false,"howSend":{"text":"payload","type":"msg","modifiedValue":"payload"},"dropdown_HowManyMessages":"single","dropdownObjOrVal":"value","outputs":1,"x":470,"y":2900,"wires":[["80203a3d.8931a8"]]},{"id":"6c3d18e7.4ee7b","type":"subflow:3bcb972f.6d23c8","z":"ea9678a6.7fc468","name":"","x":1810,"y":2940,"wires":[],"icon":"node-red-contrib-viseo-log/log.svg"},{"id":"1a98e30a.e61aed","type":"set-defaults","z":"ea9678a6.7fc468","name":"set-startTime","rules":[{"p":"startTime","pt":"msg","to":"","tot":"date"}],"chbox_DoOutputToMessage":true,"chbox_SetCurrentToMsg":false,"howSend":{"text":"payload","type":"msg","modifiedValue":"payload"},"dropdown_HowManyMessages":"single","dropdownObjOrVal":"value","outputs":1,"x":520,"y":3160,"wires":[["84fffa0b.e11e2"]]},{"id":"22de2fbd.b15698","type":"set-defaults","z":"ea9678a6.7fc468","name":"set-startTime","rules":[{"p":"startTime","pt":"msg","to":"","tot":"date"}],"chbox_DoOutputToMessage":true,"chbox_SetCurrentToMsg":false,"howSend":{"text":"payload","type":"msg","modifiedValue":"payload"},"dropdown_HowManyMessages":"single","dropdownObjOrVal":"value","outputs":1,"x":520,"y":3280,"wires":[["c96eb7ad.5a7a4"]]},{"id":"8b315941.2e8e58","type":"subflow:3bcb972f.6d23c8","z":"ea9678a6.7fc468","name":"","x":1810,"y":3320,"wires":[],"icon":"node-red-contrib-viseo-log/log.svg"},{"id":"863bacf8.ec603","type":"set-defaults","z":"ea9678a6.7fc468","name":"set-startTime","rules":[{"p":"startTime","pt":"msg","to":"","tot":"date"}],"chbox_DoOutputToMessage":true,"chbox_SetCurrentToMsg":false,"howSend":{"text":"payload","type":"msg","modifiedValue":"payload"},"dropdown_HowManyMessages":"single","dropdownObjOrVal":"value","outputs":1,"x":530,"y":3440,"wires":[["37e18dde.c34792"]]},{"id":"5b456453.f5f2c4","type":"subflow:3bcb972f.6d23c8","z":"ea9678a6.7fc468","name":"","x":1810,"y":3480,"wires":[],"icon":"node-red-contrib-viseo-log/log.svg"},{"id":"59d8644f.7fae0c","type":"template","z":"ea9678a6.7fc468","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<html>\n    <head>\n        <link rel=\"stylesheet\" href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css\" integrity=\"sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO\" crossorigin=\"anonymous\">\n        <script src=\"https://code.jquery.com/jquery-3.3.1.slim.min.js\" integrity=\"sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo\" crossorigin=\"anonymous\"></script>\n        <script src=\"https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js\" integrity=\"sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49\" crossorigin=\"anonymous\"></script>\n        <script src=\"https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js\" integrity=\"sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy\" crossorigin=\"anonymous\"></script>\n    </head>\n    <div>\n        <form action=\"/aas/initialize\" method=\"POST\" enctype=\"multipart/form-data\">\n        \t<!-- COMPONENT START -->\n        \t<div class=\"form-group\">\n        \t\t<div class=\"input-group input-file\" name=\"manifest\">\n            \t\t<input type=\"text\" class=\"form-control\" placeholder='Choose a file...' />\t\t\t\n                    <span class=\"input-group-btn\">\n                \t\t<button class=\"btn btn-default btn-choose\" type=\"button\">Choose</button>\n            \t\t</span>\n        \n        \n        \t\t</div>\n        \t</div>\n        \t<!-- COMPONENT END -->\n        \t<div class=\"form-group\">\n        \t\t<button type=\"submit\" class=\"btn btn-primary pull-right\">Submit</button>\n        \t\t<button type=\"reset\" class=\"btn btn-danger\">Reset</button>\n        \t</div>\n        </form>\n    </div>\n    <script>\n        function bs_input_file() {\n\t$(\".input-file\").before(\n\t\tfunction() {\n\t\t\tif ( ! $(this).prev().hasClass('input-ghost') ) {\n\t\t\t\tvar element = $(\"<input type='file' class='input-ghost' style='visibility:hidden; height:0'>\");\n\t\t\t\telement.attr(\"name\",$(this).attr(\"name\"));\n\t\t\t\telement.change(function(){\n\t\t\t\t\telement.next(element).find('input').val((element.val()).split('\\\\').pop());\n\t\t\t\t});\n\t\t\t\t$(this).find(\"button.btn-choose\").click(function(){\n\t\t\t\t\telement.click();\n\t\t\t\t});\n\t\t\t\t$(this).find(\"button.btn-reset\").click(function(){\n\t\t\t\t\telement.val(null);\n\t\t\t\t\t$(this).parents(\".input-file\").find('input').val('');\n\t\t\t\t});\n\t\t\t\t$(this).find('input').css(\"cursor\",\"pointer\");\n\t\t\t\t$(this).find('input').mousedown(function() {\n\t\t\t\t\t$(this).parents('.input-file').prev().click();\n\t\t\t\t\treturn false;\n\t\t\t\t});\n\t\t\t\treturn element;\n\t\t\t}\n\t\t}\n\t);\n}\n$(function() {\n\tbs_input_file();\n});\n    </script>\n</html>","output":"str","x":280,"y":120,"wires":[["cbcbd016.9163a","e4d263e1.a01ec"]]},{"id":"a7e81cb2.e359","type":"comment","z":"ea9678a6.7fc468","name":"External Interface - Health Check","info":"","x":150,"y":1060,"wires":[]},{"id":"75d845e4.a4eea4","type":"http in","z":"ea9678a6.7fc468","name":"","url":"/aas/health","method":"get","upload":false,"swaggerDoc":"7a7fd440.9e5af4","x":120,"y":1120,"wires":[["31d13e22.8d595a"]]},{"id":"31d13e22.8d595a","type":"set-defaults","z":"ea9678a6.7fc468","name":"set-startTime","rules":[{"p":"startTime","pt":"msg","to":"","tot":"date"}],"chbox_DoOutputToMessage":true,"chbox_SetCurrentToMsg":false,"howSend":{"text":"payload","type":"msg","modifiedValue":"payload"},"dropdown_HowManyMessages":"single","dropdownObjOrVal":"value","outputs":1,"x":330,"y":1120,"wires":[["4cabe4fc.a31fc4"]]},{"id":"c0024f44.e5f59","type":"http response","z":"ea9678a6.7fc468","name":"","statusCode":"","headers":{},"x":1850,"y":1120,"wires":[]},{"id":"7c38ab9f.35bb4c","type":"subflow:3bcb972f.6d23c8","z":"ea9678a6.7fc468","name":"","env":[],"x":1830,"y":1160,"wires":[],"icon":"node-red-contrib-viseo-log/log.svg"},{"id":"1bfcb892.583d3f","type":"unsafe-function","z":"7d8ace.ba650534","name":"DataStreamingMsgNotification","func":"var outMsg = {};\noutMsg.payload = msg.payload.statusMessage;\nreturn outMsg; ","outputs":1,"noerr":0,"x":1424.8541259765625,"y":1081.1041259765625,"wires":[["52147f48.b7b63","72841200.562638","93a871bd.8dc49"]]},{"id":"52147f48.b7b63","type":"ui_toast","z":"7d8ace.ba650534","position":"bottom right","displayTime":"1","highlight":"","outputs":0,"ok":"OK","cancel":"","topic":"Logs","name":"Notify (Un)Subscription ","x":1698.6041259765625,"y":1081.1041259765625,"wires":[]},{"id":"e97ceba4.b32e2","type":"ui_ui_control","z":"7d8ace.ba650534","name":"","x":300,"y":180,"wires":[["3d9748a0.55238"]]},{"id":"f508c1e2.3eb928","type":"debug","z":"7d8ace.ba650534","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":703.881103515625,"y":121.2618637084961,"wires":[]},{"id":"3d9748a0.55238","type":"unsafe-function","z":"7d8ace.ba650534","name":"detectBrowserReload","func":"var payload = msg.payload;\nif(payload === \"connect\"){\n    return msg;\n}\n\nreturn null;\n//context.flow.set('Body', \"\");","outputs":1,"noerr":0,"x":520,"y":180,"wires":[["f508c1e2.3eb928","3d2ec782.b349e8"]]},{"id":"58e1ab82.7d2394","type":"unsafe-function","z":"6ba1a42a.072f84","name":"Update_Internal_subscriptions_registry","func":"var subscriptions = context.flow.get('subscriptions');\nvar element = msg.payload.body;\nif(msg.statusCode == \"200\" && !msg.payload.statusMessage.includes(\"not found\")){\n    subscriptions.splice(element, 1);\n    context.flow.set('subscriptions', subscriptions);\n}\n\nreturn msg;","outputs":1,"noerr":0,"x":2190,"y":900,"wires":[["4c77f9d5.547b4"]]},{"id":"6da2d66b.1350f8","type":"unsafe-function","z":"6ba1a42a.072f84","name":"Update_Internal_subscriptions_registry","func":"var subscriptions = context.flow.get('subscriptions');\nvar element = msg.payload.body;\nif(msg.statusCode == \"200\" && !msg.payload.statusMessage.includes(\"Error\")){\n    subscriptions.push(element);\n    context.flow.set(\"subscriptions\", subscriptions);\n}\n\nreturn msg;","outputs":1,"noerr":0,"x":2190,"y":820,"wires":[["549f930.f8a666c"]]},{"id":"d4f18158.afe588","type":"actionflows_in","z":"6ba1a42a.072f84","name":"getSubscriptions in","priority":"50","links":[],"scope":"global","x":250,"y":1060,"wires":[["748a55b0.727fc4"]]},{"id":"9bf90676.cbc808","type":"actionflows_out","z":"6ba1a42a.072f84","name":"getSubscriptions out","links":[],"x":2840,"y":1060,"wires":[]},{"id":"748a55b0.727fc4","type":"unsafe-function","z":"6ba1a42a.072f84","name":"getCurrentSubscriptions","func":"var subscriptions = context.flow.get('subscriptions');\nmsg.payload = subscriptions;\nreturn msg;","outputs":1,"noerr":0,"x":1530,"y":1060,"wires":[["9bf90676.cbc808"]]},{"id":"c3941d26.2f39e8","type":"actionflows_out","z":"7d8ace.ba650534","name":"informAASUI_NewLog out","links":[],"x":1994.0831298828125,"y":414.1041564941406,"wires":[]},{"id":"f5f83789.de15d8","type":"actionflows_in","z":"7d8ace.ba650534","name":"informAASUI_NewLog in","priority":"50","links":[],"scope":"global","x":1418.88330078125,"y":425.6333312988281,"wires":[["b54b0553.35085"]]},{"id":"a46d35d4.50cf48","type":"ui_toast","z":"7d8ace.ba650534","position":"bottom right","displayTime":"1","highlight":"","outputs":0,"ok":"OK","cancel":"","topic":"Logs","name":"Notify Logs","x":2408.0000610351562,"y":694.9999389648438,"wires":[]},{"id":"728efdb8.7a2f2c","type":"unsafe-function","z":"7d8ace.ba650534","name":"NewLogsNotification","func":"//Retreiving Libraries from the Settings.json file\nmsg.payload = \"new Log\";\nreturn msg; ","outputs":1,"noerr":0,"x":2112.9999389648438,"y":693.333251953125,"wires":[["a46d35d4.50cf48"]]},{"id":"e2529be0.c4e458","type":"debug","z":"7d8ace.ba650534","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":2593.0997924804688,"y":722.4334106445312,"wires":[]},{"id":"170bd409.ffbd34","type":"debug","z":"7d8ace.ba650534","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1715.0475463867188,"y":681.2620239257812,"wires":[]},{"id":"859e401b.aa9bf","type":"actionflows_in","z":"7d8ace.ba650534","name":"notifyAASUI_DataStreamingMsg in","priority":"50","links":[],"scope":"global","x":1128.533203125,"y":1078.099853515625,"wires":[["1bfcb892.583d3f"]]},{"id":"72841200.562638","type":"actionflows_out","z":"7d8ace.ba650534","name":"notifyAASUI_DataStreamingMsg out","links":[],"x":1736.533203125,"y":1128.566650390625,"wires":[]},{"id":"dc467e43.4d981","type":"http response","z":"ea9678a6.7fc468","name":"","statusCode":"","headers":{},"x":1850,"y":340,"wires":[]},{"id":"6b355f38.2a6b4","type":"actionflows_in","z":"6ba1a42a.072f84","name":"callDataStreaming_DeviceRegistry in","priority":"50","links":[],"scope":"global","x":300,"y":1320,"wires":[["2aa6bf53.7cec28"]]},{"id":"2e403bfa.b6025c","type":"actionflows_out","z":"6ba1a42a.072f84","name":"callDataStreaming_DeviceRegistry out","links":[],"x":2790,"y":1300,"wires":[]},{"id":"6110fd23.24d2c4","type":"comment","z":"2e7b7c8b.80c47c","name":"Factory","info":"","x":337.5,"y":1905.9375,"wires":[]},{"id":"34009d7c.a306a2","type":"actionflows_in","z":"2e7b7c8b.80c47c","name":"createProperty in","priority":"50","links":[],"scope":"global","x":363.75,"y":1985.3125,"wires":[["d3af6654.e0e7b"]]},{"id":"4787978d.ff004","type":"actionflows_out","z":"2e7b7c8b.80c47c","name":"createProperty out","links":[],"x":1501.25,"y":1985.4375,"wires":[]},{"id":"d3af6654.e0e7b","type":"unsafe-function","z":"2e7b7c8b.80c47c","name":"createPropertyDSM","func":"//Retreiving Libraries from the Settings.json file\nvar XML = context.global.get('XML');\n\nmsg.newDSM = context.flow.get('emptyDSM');\nif(typeof msg.newDSM != 'undefined'){\n    var xml_string = msg.newDSM;\n    var newDSM = XML.parse( xml_string, { preserveAttributes: true, forceArrays: true  } );\n    msg.newDSM = newDSM;\n    return msg;\n} else {\n    msg.newDSM = null;\n    return msg;\n}","outputs":1,"noerr":0,"x":827.1875,"y":1986.5625,"wires":[["4787978d.ff004","cc1670f9.7584d"]]},{"id":"42a68392.018d54","type":"inject","z":"2e7b7c8b.80c47c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":466.875,"y":2086.5625,"wires":[["d3af6654.e0e7b"]]},{"id":"cc1670f9.7584d","type":"debug","z":"2e7b7c8b.80c47c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1079.375,"y":2085.625,"wires":[]},{"id":"509c4a47.6516f4","type":"change","z":"6ba1a42a.072f84","name":"","rules":[{"t":"set","p":"testing","pt":"msg","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1740,"y":580,"wires":[["8248b622.405b28","b5f7eda0.e11de"]]},{"id":"729cd43.e74962c","type":"switch","z":"6ba1a42a.072f84","name":"IF_mep_test","property":"mep","propertyType":"msg","rules":[{"t":"eq","v":"subscribe","vt":"str"},{"t":"eq","v":"unsubscribe","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":2249.1272583007812,"y":638.2936706542969,"wires":[["db0ebf4f.127da"],["465b318a.1cc3e8"]]},{"id":"8248b622.405b28","type":"switch","z":"6ba1a42a.072f84","name":"IF_Test_is_enabled","property":"testing","propertyType":"msg","rules":[{"t":"false"},{"t":"true"}],"checkall":"true","repair":false,"outputs":2,"x":2030,"y":580,"wires":[["41a108a3.efbfa8"],["729cd43.e74962c"]]},{"id":"db0ebf4f.127da","type":"actionflows","z":"6ba1a42a.072f84","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"subscribeTest","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"private","perf":false,"seq":false,"x":2441.8176879882812,"y":643.84130859375,"wires":[["5a992b57.f2e724"]]},{"id":"465b318a.1cc3e8","type":"actionflows","z":"6ba1a42a.072f84","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"unsubscribeTest","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"private","perf":false,"seq":false,"x":2441.8176879882812,"y":692.4127197265625,"wires":[["5a992b57.f2e724"]]},{"id":"93a871bd.8dc49","type":"actionflows","z":"7d8ace.ba650534","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"informAASUI_NewLog","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"private","perf":false,"seq":false,"x":1700,"y":1180,"wires":[[]]},{"id":"1090ea08.b152a6","type":"gate","z":"6ba1a42a.072f84","name":"","controlTopic":"control","defaultState":"open","openCmd":"open","closeCmd":"close","toggleCmd":"toggle","defaultCmd":"default","persist":false,"x":970,"y":1400,"wires":[["7d0098cc.31b698"]]},{"id":"7d0098cc.31b698","type":"unsafe-function","z":"6ba1a42a.072f84","name":"retrieve registry info (DSMs)","func":"msg.headers = {\"Content-type\" : \"application/json\"}\nmsg.url = context.global.get(\"RegistryEndpoint\") + \"/registry/assets/full/all\";\nmsg.method = \"GET\";\nreturn msg;","outputs":1,"noerr":0,"x":1220,"y":1400,"wires":[["6ae88bcd.12b10c","7965d403.98c0dc"]]},{"id":"6ae88bcd.12b10c","type":"http request","z":"6ba1a42a.072f84","name":"","method":"use","ret":"txt","paytoqs":false,"url":"","tls":"","proxy":"","x":1450,"y":1400,"wires":[["9f0edf84.49d74"]]},{"id":"db92748.e995d88","type":"inject","z":"1c8a5487.efc133","name":"","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":130,"y":100,"wires":[["f2deff62.ba42d8"]]},{"id":"f2deff62.ba42d8","type":"unsafe-function","z":"1c8a5487.efc133","name":"flowVariables","func":"context.flow.set('subscriptions', []);","outputs":1,"noerr":0,"x":714.3749389648438,"y":100.00001525878906,"wires":[[]]},{"id":"8b5483eb.da59e8","type":"inject","z":"d17857fb.cb70e8","name":"","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":150,"y":160,"wires":[["ed30f031.67455"]]},{"id":"ed30f031.67455","type":"unsafe-function","z":"d17857fb.cb70e8","name":"flowVariables","func":"context.flow.set('subscriptions', []);","outputs":1,"noerr":0,"x":734.3749389648438,"y":160.00001525878906,"wires":[[]]},{"id":"7819ca53.7c8b1c","type":"link out","z":"ea9678a6.7fc468","name":"1_Out","links":["b2a8e7fe.7a924"],"x":795,"y":340,"wires":[]},{"id":"54ab3735.d181","type":"actionflows","z":"4e17cbaa.9e3b0c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"createManifest","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1220,"y":100,"wires":[["4a2429a2.66d928","6bdd26b1.ac74c"]]},{"id":"4a2429a2.66d928","type":"actionflows","z":"4e17cbaa.9e3b0c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"informAASUI_ManifestChange","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1930,"y":100,"wires":[["52ce67b3.4891d8","8cc0f78c.426858","c2247fb5.890438"]]},{"id":"6bdd26b1.ac74c","type":"debug","z":"4e17cbaa.9e3b0c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1410,"y":40,"wires":[]},{"id":"52ce67b3.4891d8","type":"debug","z":"4e17cbaa.9e3b0c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":2110,"y":60,"wires":[]},{"id":"4fbe38e8.06beb8","type":"actionflows","z":"4e17cbaa.9e3b0c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"handleAttachment","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"private","perf":false,"seq":false,"x":990,"y":100,"wires":[["54ab3735.d181"]]},{"id":"e47e7e90.cb58f8","type":"switch","z":"4e17cbaa.9e3b0c","name":"IF_Manifest_File_Is_Attached","property":"req.files","propertyType":"msg","rules":[{"t":"nempty"},{"t":"null"},{"t":"empty"}],"checkall":"true","repair":false,"outputs":3,"x":700,"y":240,"wires":[["4fbe38e8.06beb8"],["298545b5.b2eb62"],["8d246c1c.ad9bd8"]]},{"id":"eb4d4a31.50781","type":"actionflows_out","z":"4e17cbaa.9e3b0c","name":"initFromBot out","links":[],"x":2320,"y":160,"wires":[]},{"id":"ce010ffa.bcea3","type":"wait-paths","z":"4e17cbaa.9e3b0c","name":"","paths":"[\"path_1\",\"path_2\"]","timeout":15000,"finalTimeout":60000,"x":1960,"y":220,"wires":[["e3b95763.c2835"]]},{"id":"db355207.bc45","type":"change","z":"4e17cbaa.9e3b0c","name":"","rules":[{"t":"set","p":"paths[\"path_1\"]","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1770,"y":180,"wires":[["ce010ffa.bcea3"]]},{"id":"c724aa8.f9b67d8","type":"change","z":"4e17cbaa.9e3b0c","name":"","rules":[{"t":"set","p":"paths[\"path_2\"]","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1770,"y":240,"wires":[["ce010ffa.bcea3"]]},{"id":"341346fa.eea002","type":"switch","z":"4e17cbaa.9e3b0c","name":"IF_Initi_From_Bot","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":2330,"y":200,"wires":[["7ae4b829.246da"]]},{"id":"7ae4b829.246da","type":"actionflows","z":"4e17cbaa.9e3b0c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"notifyBOT_AASInitialized","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":2550,"y":200,"wires":[[]]},{"id":"e3b95763.c2835","type":"msg-router","z":"4e17cbaa.9e3b0c","routerType":"broadcast","topicDependent":false,"counterReset":false,"msgKeyField":"payload","undefinedHash":false,"outputsInfo":[{"active":true,"clone":false,"delay":"0","weight":"0"},{"active":true,"clone":false,"delay":"0","weight":"0"},{"active":true,"clone":false,"delay":"0","weight":"0"}],"name":"","delaying":"unrelated","msgControl":false,"outputs":3,"x":2120,"y":220,"wires":[["eb4d4a31.50781"],["341346fa.eea002"],["c2247fb5.890438"]]},{"id":"5b27a482.f4e034","type":"actionflows","z":"4e17cbaa.9e3b0c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"readCPSConfiguration","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"private","perf":false,"seq":false,"x":1180,"y":260,"wires":[["6adbf6e5.c1aeb","7194cdb6.d9113c"]]},{"id":"298545b5.b2eb62","type":"actionflows","z":"4e17cbaa.9e3b0c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"createManifest","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":980,"y":180,"wires":[["5b27a482.f4e034","db355207.bc45"]]},{"id":"8d246c1c.ad9bd8","type":"unsafe-function","z":"4e17cbaa.9e3b0c","name":"406 - Not Acceptable","func":"msg.statusCode = 406;\nmsg.payload = \"Not Acceptable\";\nreturn msg;","outputs":1,"noerr":0,"x":1760,"y":380,"wires":[["c2247fb5.890438"]]},{"id":"8cc0f78c.426858","type":"actionflows","z":"4e17cbaa.9e3b0c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"notifyBOT_AASInitialized","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":2530,"y":100,"wires":[[]]},{"id":"cb2abbc.714e548","type":"actionflows","z":"4e17cbaa.9e3b0c","info":"Describe your action API here.","untilproptype":"msg","proptype":"msg","name":"populateManifest","prop":"loop","untilprop":"retrievedAssets.length","until":"gte","loop":"inc0","scope":"global","perf":false,"seq":false,"x":1540,"y":240,"wires":[["c724aa8.f9b67d8"]]},{"id":"b2a8e7fe.7a924","type":"link in","z":"4e17cbaa.9e3b0c","name":"1_In","links":["7819ca53.7c8b1c"],"x":235,"y":240,"wires":[["fb848161.0a9518"]]},{"id":"c2247fb5.890438","type":"link out","z":"4e17cbaa.9e3b0c","name":"1_Out","links":["f95d325.87de5d"],"x":3135,"y":200,"wires":[]},{"id":"f95d325.87de5d","type":"link in","z":"ea9678a6.7fc468","name":"1_In","links":["c2247fb5.890438"],"x":1295,"y":340,"wires":[["dc467e43.4d981","21bfdce8.33c624"]]},{"id":"92af27ef.cfaa7","type":"actionflows_in","z":"4e17cbaa.9e3b0c","name":"handleAttachment in","priority":"50","links":[],"scope":"private","x":1010,"y":580,"wires":[["501e89d6.c0a22","dec976e4.ff0ef8"]]},{"id":"e9e99b8.837dc68","type":"actionflows_out","z":"4e17cbaa.9e3b0c","name":"handleAttachment out","links":[],"x":2160,"y":580,"wires":[]},{"id":"85ae60c9.66aa38","type":"fs-ops-move","z":"4e17cbaa.9e3b0c","name":"","sourcePath":"req.files.manifest[0].destination","sourcePathType":"msg","sourceFilename":"req.files.manifest[0].filename","sourceFilenameType":"msg","destPath":"ModelDir","destPathType":"global","destFilename":"req.files.manifest[0].originalname","destFilenameType":"msg","link":false,"x":1520,"y":520,"wires":[["9400dd66.1698f","34ef15b9.aa4e3a"]]},{"id":"9400dd66.1698f","type":"unsafe-function","z":"4e17cbaa.9e3b0c","name":"Read File ","func":"var fs = context.global.get('fs');\n\nfs.readFile(context.global.get('ModelFilePath'), \"utf8\", function read(err, data) {\n    if (err) {\n        throw err;\n    }\n    content = data;\n\n    // Invoke the next step here however you like\n    //console.log(content);   // Put all of the code here (not the best solution)\n    processFile();          // Or put the next step in a function and invoke it\n});\n\nfunction processFile() {\n    msg.payload = content;\n    node.send(msg);\n}\n","outputs":1,"noerr":0,"x":1692.018310546875,"y":519.6482543945312,"wires":[["e9e99b8.837dc68","b3cb6715.338178"]]},{"id":"b3cb6715.338178","type":"debug","z":"4e17cbaa.9e3b0c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1930,"y":520,"wires":[]},{"id":"501e89d6.c0a22","type":"debug","z":"4e17cbaa.9e3b0c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1170,"y":520,"wires":[]},{"id":"34ef15b9.aa4e3a","type":"debug","z":"4e17cbaa.9e3b0c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1670,"y":480,"wires":[]},{"id":"dec976e4.ff0ef8","type":"switch","z":"4e17cbaa.9e3b0c","name":"IF_Manifest_File_Metadata","property":"req.files.manifest","propertyType":"msg","rules":[{"t":"nnull"},{"t":"null"}],"checkall":"true","repair":false,"outputs":2,"x":1280,"y":580,"wires":[["85ae60c9.66aa38"],["e9e99b8.837dc68"]]},{"id":"45313c24.484d1c","type":"actionflows_in","z":"4e17cbaa.9e3b0c","name":"populateManifest in","priority":"50","links":[],"scope":"private","x":1010,"y":720,"wires":[["a9c2e789.1b4cf8","48c41b32.447d74"]]},{"id":"fac34432.63dc68","type":"actionflows_out","z":"4e17cbaa.9e3b0c","name":"populateManifest out","links":[],"x":2160,"y":720,"wires":[]},{"id":"a9c2e789.1b4cf8","type":"debug","z":"4e17cbaa.9e3b0c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1192.2333374023438,"y":680.2333374023438,"wires":[]},{"id":"48c41b32.447d74","type":"actionflows","z":"4e17cbaa.9e3b0c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"createProperty","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1340,"y":720,"wires":[["209290cc.bd8a68","6202d6cd.66795"]]},{"id":"6202d6cd.66795","type":"unsafe-function","z":"4e17cbaa.9e3b0c","name":"Fill Property Fields","func":"msg.newDSM._Attribs.ID = msg.retrievedAssets[msg.loop].id;\nmsg.newDSM._Attribs.Name = msg.retrievedAssets[msg.loop].name;\nmsg.newDSM.Attribute[0].Value[0] = msg.retrievedAssets[msg.loop].macAddress;\nmsg.newDSM.Attribute[2].Value[0] = \"N/A\";\nmsg.newDSM.Attribute[3].Value[0] = \"False\";\nmsg.newDSM.Attribute[4].Value[0] = \"True\";\nmsg.newDSM.SupportedRoleClass[1] = \"AASManifestRoleClassLib/DataStreaming\";\n\n\n// Data Source Definition (DSD)\nvar dsd = msg.retrievedAssets[msg.loop].dataSourceDefinitionReferenceID;\nmsg.newDSM.InternalElement[0]._Attribs.ID = dsd.id;\nmsg.newDSM.InternalElement[0]._Attribs.Name = dsd.name;\nmsg.newDSM.InternalElement[0].Description[0] = dsd.description;\n\n// Data Interface (DI)\nvar di = msg.retrievedAssets[msg.loop].dataSourceDefinitionReferenceID.dataInterfaceReferenceID;\nmsg.newDSM.InternalElement[0].InternalElement[0]._Attribs.ID = di.id;\nmsg.newDSM.InternalElement[0].InternalElement[0]._Attribs.Name = di.name;\nmsg.newDSM.InternalElement[0].InternalElement[0].Attribute[0].Value[0] = di.communicationProtocol;\n\nvar Attribute = msg.newDSM.InternalElement[0].InternalElement[0].InternalElement[0].InternalElement[0];\nmsg.newDSM.InternalElement[0].InternalElement[0].InternalElement[0].InternalElement = [];\nfor(var parameter in di.parameters.parameter){\n    \n    //var newAttribute = Object.assign({}, Attribute);\n    var newAttribute = JSON.parse(JSON.stringify(Attribute));\n    newAttribute._Attribs.ID = di.parameters.parameter[parameter]._id;\n    newAttribute._Attribs.Name = di.parameters.parameter[parameter].name;\n    newAttribute.Attribute[0].Value[0] = di.parameters.parameter[parameter].dataType;\n    newAttribute.Attribute[1].Value[0] = di.parameters.parameter[parameter].defaultValue;\n    newAttribute.Attribute[2].Value[0] = di.parameters.parameter[parameter].actualValue;\n    \n    msg.newDSM.InternalElement[0].InternalElement[0].InternalElement[0].InternalElement.push(newAttribute);\n}\n\n// Data Kind (DK)\nvar dk = msg.retrievedAssets[msg.loop].dataSourceDefinitionReferenceID.dataKindReferenceID;\nmsg.newDSM.InternalElement[0].InternalElement[1]._Attribs.ID = dk.id;\nmsg.newDSM.InternalElement[0].InternalElement[1]._Attribs.Name = dk.name;\nmsg.newDSM.InternalElement[0].InternalElement[1].Attribute[0].Value[0] = dk.format;\nmsg.newDSM.InternalElement[0].InternalElement[1].Attribute[1].Value[0] = dk.quantityKind;\nmsg.newDSM.InternalElement[0].InternalElement[1].Attribute[2].Value[0] = dk.modelType;\nmsg.newDSM.InternalElement[0].InternalElement[1].Attribute[3].Value[0] = \"Dynamic\";\n\nmsg.payload = msg.newDSM;\nmsg.req = {\"params\":{\"id\": \"44152b0c-c1db-4a9a-ba5f-a38cbfff43f7\"}};\n\n\nreturn msg;","outputs":1,"noerr":0,"x":1592.0388793945312,"y":720.3722534179688,"wires":[["72701002.26b348","bec2a9b3.9e0cb"]]},{"id":"bec2a9b3.9e0cb","type":"actionflows","z":"4e17cbaa.9e3b0c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"addProperty","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1870,"y":720,"wires":[["fac34432.63dc68","f16612ac.0064"]]},{"id":"72701002.26b348","type":"debug","z":"4e17cbaa.9e3b0c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1772.2333374023438,"y":680.2333374023438,"wires":[]},{"id":"f16612ac.0064","type":"debug","z":"4e17cbaa.9e3b0c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":2052.2333374023438,"y":680.2333374023438,"wires":[]},{"id":"7b470981.272e","type":"inject","z":"4e17cbaa.9e3b0c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1080,"y":780,"wires":[["48c41b32.447d74"]]},{"id":"21bfdce8.33c624","type":"subflow:3bcb972f.6d23c8","z":"ea9678a6.7fc468","name":"","env":[],"x":1830,"y":380,"wires":[],"icon":"node-red-contrib-viseo-log/log.svg"},{"id":"67f0449a.f1b48c","type":"link in","z":"4e17cbaa.9e3b0c","name":"2_In","links":["668329d2.6ce7c8"],"x":235,"y":920,"wires":[["7682c6bd.42654"]]},{"id":"b32c0e73.c9eea","type":"link out","z":"4e17cbaa.9e3b0c","name":"2_Out","links":["4dc457e4.77d418"],"x":3135,"y":920,"wires":[]},{"id":"7682c6bd.42654","type":"actionflows","z":"4e17cbaa.9e3b0c","info":"Describe your action API here.","untilproptype":"msg","proptype":"msg","name":"populateManifest","prop":"loop","untilprop":"payload.length","until":"gte","loop":"inc0","scope":"global","perf":false,"seq":false,"x":1510,"y":920,"wires":[["b32c0e73.c9eea"]]},{"id":"79e0879f.4094b","type":"link out","z":"ea9678a6.7fc468","name":"3_Out","links":["17535529.e9535b"],"x":795,"y":540,"wires":[]},{"id":"a2a718fe.807e9","type":"link in","z":"ea9678a6.7fc468","name":"3_In","links":["f4dddb3a.f054a"],"x":1295,"y":540,"wires":[["d028aace.7bf9a","3b27b8e9.38c008"]]},{"id":"17535529.e9535b","type":"link in","z":"4e17cbaa.9e3b0c","name":"3_In","links":["79e0879f.4094b"],"x":235,"y":1060,"wires":[["7684bd3b.99c7b4"]]},{"id":"f4dddb3a.f054a","type":"link out","z":"4e17cbaa.9e3b0c","name":"3_Out","links":["a2a718fe.807e9"],"x":3135,"y":1060,"wires":[]},{"id":"7684bd3b.99c7b4","type":"actionflows","z":"4e17cbaa.9e3b0c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"persistManifest","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1500,"y":1060,"wires":[["f4dddb3a.f054a"]]},{"id":"9fa8bbdc.a87f78","type":"link out","z":"ea9678a6.7fc468","name":"4_Out","links":["1b9bd566.da7d63"],"x":795,"y":740,"wires":[]},{"id":"cae86ee7.ca7f8","type":"link in","z":"ea9678a6.7fc468","name":"4_In","links":["a1c1685c.c871e"],"x":1295,"y":740,"wires":[["6c738f44.4274a8","fe3bd907.1be7a"]]},{"id":"1b9bd566.da7d63","type":"link in","z":"4e17cbaa.9e3b0c","name":"4_In","links":["9fa8bbdc.a87f78"],"x":235,"y":1180,"wires":[["a70b7351.c384c8"]]},{"id":"a1c1685c.c871e","type":"link out","z":"4e17cbaa.9e3b0c","name":"4_Out","links":["cae86ee7.ca7f8"],"x":3135,"y":1180,"wires":[]},{"id":"18ab814e.0a53ff","type":"unsafe-function","z":"4e17cbaa.9e3b0c","name":"Object2XMLString","func":"var XML = context.global.get('XML');\nvar xml_string_composed = XML.stringify(msg.payload, 'CAEXFile');\nmsg.payload = xml_string_composed;\nmsg.headers = {};\nmsg.headers['content-type'] = 'application/xml';\nreturn msg;","outputs":1,"noerr":0,"x":1790,"y":1180,"wires":[["a1c1685c.c871e"]]},{"id":"a70b7351.c384c8","type":"actionflows","z":"4e17cbaa.9e3b0c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"readManifest","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1230,"y":1180,"wires":[["18ab814e.0a53ff"]]},{"id":"34c7b931.5b2c2e","type":"debug","z":"ea9678a6.7fc468","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":410,"y":780,"wires":[]},{"id":"32f8f931.764856","type":"debug","z":"ea9678a6.7fc468","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":410,"y":920,"wires":[]},{"id":"9750cbe2.6ec5","type":"link out","z":"ea9678a6.7fc468","name":"5_Out","links":["7be5fb69.96615c"],"x":795,"y":880,"wires":[]},{"id":"fcbc2989.b87ef8","type":"link in","z":"ea9678a6.7fc468","name":"5_In","links":["95918ecf.394aa"],"x":1295,"y":880,"wires":[["82c2b63e.a5269","33e0954b.990732"]]},{"id":"54d7bb28.2ef6ac","type":"actionflows","z":"4e17cbaa.9e3b0c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"readHeaders","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1230,"y":1280,"wires":[["1b2803a7.b303c4"]]},{"id":"1b2803a7.b303c4","type":"unsafe-function","z":"4e17cbaa.9e3b0c","name":"Object2XMLString","func":"var XML = context.global.get('XML');\nvar xml_string_composed = XML.stringify(msg.payload, 'InternalElement');\nmsg.payload = xml_string_composed;\nmsg.headers = {};\nmsg.headers['content-type'] = 'application/xml';\nreturn msg;","outputs":1,"noerr":0,"x":1790,"y":1280,"wires":[["95918ecf.394aa"]]},{"id":"7be5fb69.96615c","type":"link in","z":"4e17cbaa.9e3b0c","name":"5_In","links":["9750cbe2.6ec5"],"x":235,"y":1280,"wires":[["54d7bb28.2ef6ac"]]},{"id":"95918ecf.394aa","type":"link out","z":"4e17cbaa.9e3b0c","name":"5_Out","links":["fcbc2989.b87ef8"],"x":3135,"y":1280,"wires":[]},{"id":"4cabe4fc.a31fc4","type":"link out","z":"ea9678a6.7fc468","name":"6_Out","links":["a9e3cd81.0b9e6"],"x":795,"y":1120,"wires":[]},{"id":"416e4b9c.c89ea4","type":"link in","z":"ea9678a6.7fc468","name":"6_In","links":["466ecde7.7eda94"],"x":1295,"y":1120,"wires":[["c0024f44.e5f59","7c38ab9f.35bb4c"]]},{"id":"74ecf1cf.313588","type":"switch","z":"4e17cbaa.9e3b0c","name":"IF_Error_Detected","property":"payload.errors","propertyType":"msg","rules":[{"t":"empty"},{"t":"nempty"}],"checkall":"false","repair":false,"outputs":2,"x":1630,"y":1420,"wires":[["168d683c.4d75"],["d2c16a52.5ff0a8"]]},{"id":"6409a442.65ce9c","type":"unsafe-function","z":"4e17cbaa.9e3b0c","name":"preparingCheckingRules","func":"var errors = [];\nvar manifest = msg.payload;\nmsg.payload = {};\n\nif((typeof context.global.get('DataStreamingEndpoint') == \"undefined\") || \n   (typeof context.global.get('ModelDir') == \"undefined\") ||\n   (typeof context.global.get('ModelFilePath') == \"undefined\") ||\n   (typeof context.global.get('namespace') == \"undefined\") ||\n   (manifest === \"\"))\n   {\n        errors.push(\"Asset Administration Shell not configured\");\n    } \n \nmsg.payload.errors = errors;\n    \n\nreturn msg;","outputs":1,"noerr":0,"x":1370,"y":1420,"wires":[["74ecf1cf.313588","4836a2a1.2e4374"]]},{"id":"168d683c.4d75","type":"unsafe-function","z":"4e17cbaa.9e3b0c","name":"createOutputMsg","func":"msg.statusCode = 200;\nmsg.payload = \"ok\";\nmsg.headers = {};\nmsg.headers['content-type'] = 'text/plain';\nreturn msg;","outputs":1,"noerr":0,"x":1890,"y":1380,"wires":[["466ecde7.7eda94"]]},{"id":"d2c16a52.5ff0a8","type":"unsafe-function","z":"4e17cbaa.9e3b0c","name":"createOutputMsg","func":"msg.statusCode = 503;\nmsg.payload = msg.payload.errors;\nmsg.headers = {};\nmsg.headers['content-type'] = 'text/plain';\nreturn msg;","outputs":1,"noerr":0,"x":1890,"y":1440,"wires":[["466ecde7.7eda94"]]},{"id":"97f3ea68.11ba6","type":"actionflows","z":"4e17cbaa.9e3b0c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"readManifest","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1150,"y":1420,"wires":[["6409a442.65ce9c"]]},{"id":"a9e3cd81.0b9e6","type":"link in","z":"4e17cbaa.9e3b0c","name":"6_In","links":["4cabe4fc.a31fc4"],"x":235,"y":1420,"wires":[["97f3ea68.11ba6"]]},{"id":"466ecde7.7eda94","type":"link out","z":"4e17cbaa.9e3b0c","name":"6_Out","links":["416e4b9c.c89ea4"],"x":3135,"y":1420,"wires":[]},{"id":"5d8e1f61.141728","type":"link out","z":"ea9678a6.7fc468","name":"7_Out","links":["41a13306.7ee844"],"x":795,"y":1380,"wires":[]},{"id":"7c40eb2.d702a94","type":"link in","z":"ea9678a6.7fc468","name":"7_In","links":["2c3e5af9.316706"],"x":1295,"y":1380,"wires":[["bb4ede7f.a73df8","3d966a83.f25b46"]]},{"id":"e75c822c.f11288","type":"actionflows","z":"4e17cbaa.9e3b0c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"readSubmodels","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1160,"y":1580,"wires":[["84ef8e9f.c1c2b8","a8c6a56f.546768"]]},{"id":"84ef8e9f.c1c2b8","type":"debug","z":"4e17cbaa.9e3b0c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1350,"y":1540,"wires":[]},{"id":"84ef4e48.505348","type":"debug","z":"4e17cbaa.9e3b0c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":2270,"y":1540,"wires":[]},{"id":"b1ed3e8c.3cb91","type":"unsafe-function","z":"4e17cbaa.9e3b0c","name":"Object2XMLString","func":"var XML = context.global.get('XML');\nvar xml_string_composed = XML.stringify(msg.payload, 'InternalElement');\nmsg.payload = xml_string_composed;\nmsg.headers = {};\nmsg.headers['content-type'] = 'application/xml';\nreturn msg;","outputs":1,"noerr":0,"x":2030,"y":1580,"wires":[["84ef4e48.505348","2c3e5af9.316706"]]},{"id":"a8c6a56f.546768","type":"unsafe-function","z":"4e17cbaa.9e3b0c","name":"OnlyPublicSubmodels","func":"var submodels = msg.payload.InternalElement;\n//var visibleSubmodels = [];\nfor(var submodel = 0; submodel < submodels.length; submodel++){\n    var attributes = submodels[submodel].Attribute;\n    for(var attribute in attributes){\n        if(attributes[attribute]._Attribs.Name == \"Visibility\" && attributes[attribute].Value[0].toLowerCase() == \"false\"){\n            //Remove from the list\n            submodels.splice(submodel, 1);\n            submodel--;\n            break;\n        } else if(attributes[attribute]._Attribs.Name == \"Visibility\" && attributes[attribute].Value[0].toLowerCase() == \"true\"){\n            //Check only DataManifests\n            var dsms = submodels[submodel].InternalElement;\n            if(typeof dsms !== \"undefined\"){\n                for(var dsm = 0; dsm < dsms.length; dsm++){\n                    var dsm_attributes = dsms[dsm].Attribute;\n                    for(var dsm_attribute in dsm_attributes){\n                        if(dsm_attributes[dsm_attribute]._Attribs.Name == \"Visibility\" && dsm_attributes[dsm_attribute].Value[0] == \"false\"){\n                            //Remove from the list\n                            dsms.splice(dsm, 1);\n                            dsm--;\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n    }\n}\n\nreturn msg;","outputs":1,"noerr":0,"x":1720,"y":1580,"wires":[["b1ed3e8c.3cb91","a5ee1ee3.19de38"]]},{"id":"a5ee1ee3.19de38","type":"debug","z":"4e17cbaa.9e3b0c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1910,"y":1540,"wires":[]},{"id":"41a13306.7ee844","type":"link in","z":"4e17cbaa.9e3b0c","name":"7_In","links":["5d8e1f61.141728"],"x":235,"y":1580,"wires":[["e75c822c.f11288"]]},{"id":"2c3e5af9.316706","type":"link out","z":"4e17cbaa.9e3b0c","name":"7_Out","links":["7c40eb2.d702a94"],"x":3135,"y":1580,"wires":[]},{"id":"725e3aa9.5a7204","type":"link out","z":"ea9678a6.7fc468","name":"8_Out","links":["a485353a.89ead"],"x":795,"y":1580,"wires":[]},{"id":"c95f408a.d20e68","type":"link in","z":"ea9678a6.7fc468","name":"8_In","links":["581221c1.985bf"],"x":1295,"y":1580,"wires":[["a70c6126.52b63","72a2f52b.604d44"]]},{"id":"83b0b801.fcbe1","type":"debug","z":"4e17cbaa.9e3b0c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1350,"y":1680,"wires":[]},{"id":"84fa726f.c78588","type":"actionflows","z":"4e17cbaa.9e3b0c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"readSubmodel","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1160,"y":1720,"wires":[["83b0b801.fcbe1","634801f.4ab1b8"]]},{"id":"634801f.4ab1b8","type":"unsafe-function","z":"4e17cbaa.9e3b0c","name":"Object2XMLString","func":"if(msg.statusCode == '200'){\n    var XML = context.global.get('XML');\n    /*var strignSubmodels = \"\";\n    for(var submodelIndex in msg.payload){\n        strignSubmodels = strignSubmodels + XML.stringify(msg.payload[submodelIndex], 'InternalElement'); \n    }\n    var xml_string_composed = strignSubmodels;//XML.stringify(strignSubmodels, 'InternalElement');\n    */\n    var xml_string_composed = XML.stringify(msg.payload, 'InternalElement');\n    msg.payload = xml_string_composed;\n    msg.headers = {};\n    msg.headers['content-type'] = 'application/xml';\n    return msg;\n}\nmsg.headers = {};\nmsg.headers['content-type'] = 'text/plain';\nreturn msg;\n","outputs":1,"noerr":0,"x":1710,"y":1720,"wires":[["581221c1.985bf"]]},{"id":"581221c1.985bf","type":"link out","z":"4e17cbaa.9e3b0c","name":"8_Out","links":["c95f408a.d20e68"],"x":3135,"y":1720,"wires":[]},{"id":"a485353a.89ead","type":"link in","z":"4e17cbaa.9e3b0c","name":"8_In","links":["725e3aa9.5a7204"],"x":235,"y":1720,"wires":[["84fa726f.c78588"]]},{"id":"6072385f.f3ce68","type":"link out","z":"ea9678a6.7fc468","name":"9_Out","links":["91b761a1.b1282"],"x":795,"y":1780,"wires":[]},{"id":"59260a88.ab72ec","type":"link in","z":"ea9678a6.7fc468","name":"9_In","links":["3a695c7.9397824"],"x":1295,"y":1780,"wires":[["be8b2954.b1652","f535deb4.899ba8"]]},{"id":"9b082ee.c9e0a5","type":"unsafe-function","z":"4e17cbaa.9e3b0c","name":"Invoke Manifest CRUD","func":"/*if(msg.req.headers['content-type'] != \"application/xml\"){\n    msg.statusCode = 400;\n    return msg;\n}*/\nvar XML = context.global.get('XML');\nvar submodel = XML.parse( msg.payload, { preserveAttributes: true, forceArrays: true  } );\nif(submodel._Attribs.RefBaseSystemUnitPath == \"ASSSystemUnitClassLib/Submodel\"){\n    msg.payload = submodel;\n    msg.receivedObject = submodel;\n    var af = context.global.get(\"actionflows\");\n    var action_ = af.invoke(\"addSubmodel\", msg);\n    action_.then(function(msg){\n        node.send(msg);\n        return msg;\n    });\n} else{\n    msg.statusCode = 400;\n    return msg;\n}\n\n\n","outputs":1,"noerr":0,"x":1180,"y":1880,"wires":[["83587aa5.8d0be8","3c04944b.c8511c"]]},{"id":"83587aa5.8d0be8","type":"debug","z":"4e17cbaa.9e3b0c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1360,"y":1820,"wires":[]},{"id":"eeb2e239.662578","type":"actionflows","z":"4e17cbaa.9e3b0c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"informAASUI_ManifestChange","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1740,"y":1900,"wires":[[]]},{"id":"37c4ca01.0b129e","type":"actionflows","z":"4e17cbaa.9e3b0c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"notifyBOT_SubmodelAdd","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1710,"y":1940,"wires":[[]]},{"id":"3c04944b.c8511c","type":"msg-router","z":"4e17cbaa.9e3b0c","routerType":"broadcast","topicDependent":false,"counterReset":false,"msgKeyField":"payload","undefinedHash":false,"outputsInfo":[{"active":true,"clone":false,"delay":"0","weight":"0"},{"active":true,"clone":false,"delay":"0","weight":"0"},{"active":true,"clone":false,"delay":"0","weight":"0"}],"name":"","delaying":"unrelated","msgControl":false,"outputs":3,"x":1420,"y":1880,"wires":[["3a695c7.9397824"],["eeb2e239.662578"],["37c4ca01.0b129e"]]},{"id":"3a695c7.9397824","type":"link out","z":"4e17cbaa.9e3b0c","name":"9_Out","links":["59260a88.ab72ec"],"x":3135,"y":1860,"wires":[]},{"id":"91b761a1.b1282","type":"link in","z":"4e17cbaa.9e3b0c","name":"9_In","links":["6072385f.f3ce68"],"x":235,"y":1880,"wires":[["9b082ee.c9e0a5"]]},{"id":"698f6a15.ef8724","type":"link out","z":"ea9678a6.7fc468","name":"10_Out","links":[],"x":795,"y":1960,"wires":[]},{"id":"ea4f13b4.205a18","type":"link in","z":"ea9678a6.7fc468","name":"10_In","links":["72a33712.55ad4"],"x":1295,"y":1960,"wires":[["6da23218.e9b50c","16c067db.a92dd8"]]},{"id":"563581de.050b9","type":"debug","z":"4e17cbaa.9e3b0c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1370,"y":2020,"wires":[]},{"id":"46d83659.26ed48","type":"actionflows","z":"4e17cbaa.9e3b0c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"removeSubmodel","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1170,"y":2080,"wires":[["563581de.050b9","28ce05bb.c2d12a"]]},{"id":"1d14316.798a74f","type":"actionflows","z":"4e17cbaa.9e3b0c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"informAASUI_ManifestChange","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1750,"y":2100,"wires":[[]]},{"id":"a636ba23.91ff48","type":"actionflows","z":"4e17cbaa.9e3b0c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"notifyBOT_SubmodelRemove","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1750,"y":2140,"wires":[[]]},{"id":"28ce05bb.c2d12a","type":"msg-router","z":"4e17cbaa.9e3b0c","routerType":"broadcast","topicDependent":false,"counterReset":false,"msgKeyField":"payload","undefinedHash":false,"outputsInfo":[{"active":true,"clone":false,"delay":"0","weight":"0"},{"active":true,"clone":false,"delay":"0","weight":"0"},{"active":true,"clone":false,"delay":"0","weight":"0"}],"name":"","delaying":"unrelated","msgControl":false,"outputs":3,"x":1430,"y":2080,"wires":[["72a33712.55ad4"],["1d14316.798a74f"],["a636ba23.91ff48"]]},{"id":"72a33712.55ad4","type":"link out","z":"4e17cbaa.9e3b0c","name":"10_Out","links":["ea4f13b4.205a18"],"x":3135,"y":2060,"wires":[]},{"id":"7440f672.524998","type":"link in","z":"4e17cbaa.9e3b0c","name":"10_In","links":[],"x":235,"y":2080,"wires":[["46d83659.26ed48"]]},{"id":"58a70303.1f0d74","type":"link out","z":"ea9678a6.7fc468","name":"11_Out","links":["dc14ec19.77cf5"],"x":795,"y":2140,"wires":[]},{"id":"1b1bfa83.91ed5d","type":"link in","z":"ea9678a6.7fc468","name":"11_In","links":["9f4640fb.8087c"],"x":1295,"y":2140,"wires":[["69767f8f.5dd148","bfea6c45.d0357"]]},{"id":"423b5b9d.9778ec","type":"debug","z":"4e17cbaa.9e3b0c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1370,"y":2198,"wires":[]},{"id":"6931ef61.f77a2","type":"unsafe-function","z":"4e17cbaa.9e3b0c","name":"Invoke Manifest CRUD","func":"/*if(msg.req.headers['content-type'] != \"application/xml\"){\n    msg.statusCode = 400;\n    return msg;\n}*/\nvar XML = context.global.get('XML');\nvar submodel = XML.parse( msg.payload, { preserveAttributes: true, forceArrays: true  } );\nif(submodel._Attribs.RefBaseSystemUnitPath == \"ASSSystemUnitClassLib/Submodel\"){\n    msg.payload = submodel;\n    msg.receivedObject = submodel;\n    var af = context.global.get(\"actionflows\");\n    var action_ = af.invoke(\"updateSubmodel\", msg);\n    action_.then(function(msg){\n        node.send(msg);\n        return msg;\n    });\n} else{\n    msg.statusCode = 400;\n    return msg;\n}\n\n","outputs":1,"noerr":0,"x":1170,"y":2258,"wires":[["423b5b9d.9778ec","ea8c5831.228328"]]},{"id":"692b3e37.7f821","type":"actionflows","z":"4e17cbaa.9e3b0c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"informAASUI_ManifestChange","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1750,"y":2278,"wires":[[]]},{"id":"2ef0b78b.710788","type":"actionflows","z":"4e17cbaa.9e3b0c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"notifyBOT_SubmodelUpdate","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1740,"y":2318,"wires":[[]]},{"id":"ea8c5831.228328","type":"msg-router","z":"4e17cbaa.9e3b0c","routerType":"broadcast","topicDependent":false,"counterReset":false,"msgKeyField":"payload","undefinedHash":false,"outputsInfo":[{"active":true,"clone":false,"delay":"0","weight":"0"},{"active":true,"clone":false,"delay":"0","weight":"0"},{"active":true,"clone":false,"delay":"0","weight":"0"}],"name":"","delaying":"unrelated","msgControl":false,"outputs":3,"x":1430,"y":2258,"wires":[["9f4640fb.8087c"],["692b3e37.7f821"],["2ef0b78b.710788"]]},{"id":"9f4640fb.8087c","type":"link out","z":"4e17cbaa.9e3b0c","name":"11_Out","links":["1b1bfa83.91ed5d"],"x":3135,"y":2238,"wires":[]},{"id":"dc14ec19.77cf5","type":"link in","z":"4e17cbaa.9e3b0c","name":"11_In","links":["58a70303.1f0d74"],"x":235,"y":2258,"wires":[["6931ef61.f77a2"]]},{"id":"bcdfb8fc.9ff61","type":"actionflows_in","z":"4e17cbaa.9e3b0c","name":"readSubmodelsFromAASUI in","priority":"50","links":[],"scope":"global","x":720,"y":2460,"wires":[["d1657ecf.ddf538"]]},{"id":"d1657ecf.ddf538","type":"actionflows","z":"4e17cbaa.9e3b0c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"readSubmodels","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1280,"y":2460,"wires":[["94578d4b.fd4c","5bf7707b.c84fd"]]},{"id":"94578d4b.fd4c","type":"actionflows_out","z":"4e17cbaa.9e3b0c","name":"readSubmodelsFromAASUI out","links":[],"x":2670,"y":2460,"wires":[]},{"id":"5bf7707b.c84fd","type":"debug","z":"4e17cbaa.9e3b0c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1470,"y":2420,"wires":[]},{"id":"6d50beb5.99b0b8","type":"actionflows_in","z":"4e17cbaa.9e3b0c","name":"updateSubmodelsFromAASUI in","priority":"50","links":[],"scope":"global","x":730,"y":2540,"wires":[["48263ce8.07a1e4"]]},{"id":"cc255e2f.29d798","type":"actionflows_out","z":"4e17cbaa.9e3b0c","name":"updateSubmodelsFromAASUI out","links":[],"x":2680,"y":2540,"wires":[]},{"id":"3bbf9344.4852bc","type":"actionflows","z":"4e17cbaa.9e3b0c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"updateSubmodel","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1870,"y":2540,"wires":[["cc255e2f.29d798"]]},{"id":"48263ce8.07a1e4","type":"unsafe-function","z":"4e17cbaa.9e3b0c","name":"reterieveSubmodels","func":"var submodels = msg.payload.InternalElement;\nmsg.payload = submodels;\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1300,"y":2540,"wires":[["6beb208f.9773e8"]]},{"id":"6beb208f.9773e8","type":"split","z":"4e17cbaa.9e3b0c","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1570,"y":2540,"wires":[["17dc425e.714cd6","3bbf9344.4852bc"]]},{"id":"17dc425e.714cd6","type":"debug","z":"4e17cbaa.9e3b0c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1690,"y":2500,"wires":[]},{"id":"7567bde9.b1b774","type":"comment","z":"4e17cbaa.9e3b0c","name":"Interaction with the AASUI, to be checked","info":"","x":460,"y":2360,"wires":[]},{"id":"8a691399.524998","type":"link out","z":"ea9678a6.7fc468","name":"12_Out","links":["4edee9b1.93c678"],"x":795,"y":2340,"wires":[]},{"id":"506ab521.20d31c","type":"link in","z":"ea9678a6.7fc468","name":"12_In","links":["8d82914c.dafbf"],"x":1295,"y":2340,"wires":[["9bc9c1e.4cf5bc","5e11f50.387678c"]]},{"id":"9c1c0576.86ed6","type":"debug","z":"4e17cbaa.9e3b0c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1390,"y":2660,"wires":[]},{"id":"dbbe7761.80101","type":"actionflows","z":"4e17cbaa.9e3b0c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"readProperty","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1150,"y":2700,"wires":[["9c1c0576.86ed6","3aef6447.edcb04"]]},{"id":"3aef6447.edcb04","type":"unsafe-function","z":"4e17cbaa.9e3b0c","name":"Object2XMLString","func":"if(msg.statusCode == '200'){\n    var XML = context.global.get('XML');\n    /*var strignSubmodels = \"\";\n    for(var submodelIndex in msg.payload){\n        strignSubmodels = strignSubmodels + XML.stringify(msg.payload[submodelIndex], 'InternalElement'); \n    }\n    var xml_string_composed = strignSubmodels;//XML.stringify(strignSubmodels, 'InternalElement');\n    */\n    var xml_string_composed = XML.stringify(msg.payload, 'InternalElement');\n    msg.payload = xml_string_composed;\n    msg.headers = {};\n    msg.headers['content-type'] = 'application/xml';\n    return msg;\n}\nmsg.headers = {};\nmsg.headers['content-type'] = 'text/plain';\nreturn msg;","outputs":1,"noerr":0,"x":1450,"y":2700,"wires":[["8d82914c.dafbf"]]},{"id":"8d82914c.dafbf","type":"link out","z":"4e17cbaa.9e3b0c","name":"12_Out","links":["506ab521.20d31c"],"x":3115,"y":2700,"wires":[]},{"id":"4edee9b1.93c678","type":"link in","z":"4e17cbaa.9e3b0c","name":"12_In","links":["8a691399.524998"],"x":235,"y":2700,"wires":[["dbbe7761.80101"]]},{"id":"b8c53069.e4017","type":"link in","z":"ea9678a6.7fc468","name":"13_In","links":["c6b55380.daa878"],"x":1295,"y":2560,"wires":[["7e438514.a4ae94","4f8176d7.c28508"]]},{"id":"417fcbd6.4b6644","type":"link out","z":"ea9678a6.7fc468","name":"13_Out","links":[],"x":795,"y":2560,"wires":[]},{"id":"d6dbaaf8.d3c41","type":"unsafe-function","z":"4e17cbaa.9e3b0c","name":"Invoke Manifest CRUD","func":"/*if(msg.req.headers['content-type'] != \"application/xml\"){\n    msg.statusCode = 400;\n    return msg;\n}*/\nvar XML = context.global.get('XML');\nvar property = XML.parse( msg.payload, { preserveAttributes: true, forceArrays: true  } );\nif(property._Attribs.RefBaseSystemUnitPath.includes(\"ASSSystemUnitClassLib/Property\")){\n    msg.payload = property;\n    msg.receivedObject = property;\n    var af = context.global.get(\"actionflows\");\n    var action_ = af.invoke(\"addProperty\", msg);\n    action_.then(function(msg){\n        node.send(msg);\n        return msg;\n    });\n} else{\n    msg.statusCode = 400;\n    return msg;\n}\n\n\n","outputs":1,"noerr":0,"x":1180,"y":2880,"wires":[["ff597d.4fe5668","e7f51621.1a4e58"]]},{"id":"ff597d.4fe5668","type":"debug","z":"4e17cbaa.9e3b0c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1390,"y":2820,"wires":[]},{"id":"ae025367.a6e","type":"actionflows","z":"4e17cbaa.9e3b0c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"informAASUI_ManifestChange","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1760,"y":2900,"wires":[[]]},{"id":"f1b95f92.6b24a","type":"actionflows","z":"4e17cbaa.9e3b0c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"notifyBOT_PropertyAdd","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1740,"y":2940,"wires":[[]]},{"id":"e7f51621.1a4e58","type":"msg-router","z":"4e17cbaa.9e3b0c","routerType":"broadcast","topicDependent":false,"counterReset":false,"msgKeyField":"payload","undefinedHash":false,"outputsInfo":[{"active":true,"clone":false,"delay":"0","weight":"0"},{"active":true,"clone":false,"delay":"0","weight":"0"},{"active":true,"clone":false,"delay":"0","weight":"0"}],"name":"","delaying":"unrelated","msgControl":false,"outputs":3,"x":1420,"y":2880,"wires":[["c6b55380.daa878"],["ae025367.a6e"],["f1b95f92.6b24a"]]},{"id":"c6b55380.daa878","type":"link out","z":"4e17cbaa.9e3b0c","name":"13_Out","links":["b8c53069.e4017"],"x":3115,"y":2860,"wires":[]},{"id":"ec67cf6e.bb7158","type":"link in","z":"4e17cbaa.9e3b0c","name":"13_In","links":[],"x":235,"y":2880,"wires":[["d6dbaaf8.d3c41"]]},{"id":"67aa9e04.28f74","type":"link in","z":"ea9678a6.7fc468","name":"14_In","links":["3507336e.8c6344"],"x":1295,"y":2740,"wires":[["bdc7eb83.b0df88","a54ff9dc.7cd3"]]},{"id":"b2075a99.61fe38","type":"link out","z":"ea9678a6.7fc468","name":"14_Out","links":["ea3ea500.4a83d"],"x":795,"y":2740,"wires":[]},{"id":"48c122b8.5d01ac","type":"actionflows","z":"4e17cbaa.9e3b0c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"removeProperty","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1160,"y":3040,"wires":[["edaadd74.2a9fb8","32311212.e48986"]]},{"id":"edaadd74.2a9fb8","type":"debug","z":"4e17cbaa.9e3b0c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1390,"y":2980,"wires":[]},{"id":"427c4ad2.492924","type":"actionflows","z":"4e17cbaa.9e3b0c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"informAASUI_ManifestChange","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1770,"y":3060,"wires":[[]]},{"id":"1c7fb5c2.54e4ea","type":"actionflows","z":"4e17cbaa.9e3b0c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"notifyBOT_PropertyRemove","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1760,"y":3100,"wires":[[]]},{"id":"32311212.e48986","type":"msg-router","z":"4e17cbaa.9e3b0c","routerType":"broadcast","topicDependent":false,"counterReset":false,"msgKeyField":"payload","undefinedHash":false,"outputsInfo":[{"active":true,"clone":false,"delay":"0","weight":"0"},{"active":true,"clone":false,"delay":"0","weight":"0"},{"active":true,"clone":false,"delay":"0","weight":"0"}],"name":"","delaying":"unrelated","msgControl":false,"outputs":3,"x":1420,"y":3040,"wires":[["3507336e.8c6344"],["427c4ad2.492924"],["1c7fb5c2.54e4ea"]]},{"id":"3507336e.8c6344","type":"link out","z":"4e17cbaa.9e3b0c","name":"14_Out","links":["67aa9e04.28f74"],"x":3115,"y":3020,"wires":[]},{"id":"ea3ea500.4a83d","type":"link in","z":"4e17cbaa.9e3b0c","name":"14_In","links":["b2075a99.61fe38"],"x":235,"y":3040,"wires":[["48c122b8.5d01ac"]]},{"id":"ed6c7151.b69ce","type":"link in","z":"ea9678a6.7fc468","name":"15_In","links":["a070fe8d.324598"],"x":1295,"y":2900,"wires":[["e49bccf2.2ac54","6c3d18e7.4ee7b"]]},{"id":"80203a3d.8931a8","type":"link out","z":"ea9678a6.7fc468","name":"15_Out","links":["6db5ae5e.6d831"],"x":795,"y":2900,"wires":[]},{"id":"eb7198b9.e05568","type":"debug","z":"4e17cbaa.9e3b0c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1390,"y":3160,"wires":[]},{"id":"8ba1cab8.5a98a","type":"unsafe-function","z":"4e17cbaa.9e3b0c","name":"Invoke Manifest CRUD","func":"/*if(msg.req.headers['content-type'] != \"application/xml\"){\n    msg.statusCode = 400;\n    return msg;\n}*/\nvar XML = context.global.get('XML');\nvar submodel = XML.parse( msg.payload, { preserveAttributes: true, forceArrays: true  } );\nif(submodel._Attribs.RefBaseSystemUnitPath.includes(\"ASSSystemUnitClassLib/Property\")){\n    msg.payload = property;\n    msg.receivedObject = property;\n    var af = context.global.get(\"actionflows\");\n    var action_ = af.invoke(\"updateProperty\", msg);\n    action_.then(function(msg){\n        node.send(msg);\n        return msg;\n    });\n} else{\n    msg.statusCode = 400;\n    return msg;\n}\n\n","outputs":1,"noerr":0,"x":1170,"y":3220,"wires":[["eb7198b9.e05568","26174a18.ee4026"]]},{"id":"3f04b6e5.f3e202","type":"actionflows","z":"4e17cbaa.9e3b0c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"informAASUI_ManifestChange","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1750,"y":3240,"wires":[[]]},{"id":"d77a90a1.ed4eb8","type":"actionflows","z":"4e17cbaa.9e3b0c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"notifyBOT_PropertyUpdate","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1740,"y":3280,"wires":[[]]},{"id":"26174a18.ee4026","type":"msg-router","z":"4e17cbaa.9e3b0c","routerType":"broadcast","topicDependent":false,"counterReset":false,"msgKeyField":"payload","undefinedHash":false,"outputsInfo":[{"active":true,"clone":false,"delay":"0","weight":"0"},{"active":true,"clone":false,"delay":"0","weight":"0"},{"active":true,"clone":false,"delay":"0","weight":"0"}],"name":"","delaying":"unrelated","msgControl":false,"outputs":3,"x":1420,"y":3220,"wires":[["a070fe8d.324598"],["3f04b6e5.f3e202"],["d77a90a1.ed4eb8"]]},{"id":"a070fe8d.324598","type":"link out","z":"4e17cbaa.9e3b0c","name":"15_Out","links":["ed6c7151.b69ce"],"x":3115,"y":3200,"wires":[]},{"id":"6db5ae5e.6d831","type":"link in","z":"4e17cbaa.9e3b0c","name":"15_In","links":["80203a3d.8931a8"],"x":235,"y":3220,"wires":[["8ba1cab8.5a98a"]]},{"id":"84fffa0b.e11e2","type":"link out","z":"ea9678a6.7fc468","name":"16_Out_a","links":["f3cf3aad.8c4f28"],"x":795,"y":3160,"wires":[]},{"id":"c96eb7ad.5a7a4","type":"link out","z":"ea9678a6.7fc468","name":"16_Out_b","links":["9b4ca624.f69168"],"x":795,"y":3280,"wires":[]},{"id":"41eabfbe.aaa7e","type":"actionflows","z":"4e17cbaa.9e3b0c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"configureDataFlow","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"protected","perf":false,"seq":false,"x":1670,"y":3460,"wires":[["474a2753.480a58"]]},{"id":"247e89ac.84e65e","type":"debug","z":"4e17cbaa.9e3b0c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1140.65478515625,"y":3489.7274169921875,"wires":[]},{"id":"bde6295f.e3bea8","type":"change","z":"4e17cbaa.9e3b0c","name":"","rules":[{"t":"set","p":"requestedProperty","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1430,"y":3460,"wires":[["41eabfbe.aaa7e"]]},{"id":"474a2753.480a58","type":"actionflows","z":"4e17cbaa.9e3b0c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"callInternalInterface","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1870,"y":3460,"wires":[["4f6b7e91.3db12","db513159.8dc24","153f2721.d0fcd1","af492592.7d7ba8"]]},{"id":"392b3961.0af14e","type":"actionflows","z":"4e17cbaa.9e3b0c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"readProperty","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":990,"y":3540,"wires":[["247e89ac.84e65e","b7da4471.6c828"]]},{"id":"b7da4471.6c828","type":"switch","z":"4e17cbaa.9e3b0c","name":"IF_StatusCode","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"200","vt":"str"},{"t":"eq","v":"400","vt":"str"},{"t":"eq","v":"404","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":1180,"y":3540,"wires":[["bde6295f.e3bea8"],["153f2721.d0fcd1"],["153f2721.d0fcd1"]]},{"id":"4f6b7e91.3db12","type":"actionflows","z":"4e17cbaa.9e3b0c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"notifyBOT_NewLivedata","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":2550,"y":3420,"wires":[[]]},{"id":"db513159.8dc24","type":"actionflows_out","z":"4e17cbaa.9e3b0c","name":"getSnmpSysDscrProperty out","links":[],"x":2560,"y":3460,"wires":[]},{"id":"d4c9a3e4.64d4e","type":"change","z":"4e17cbaa.9e3b0c","name":"","rules":[{"t":"set","p":"mep","pt":"msg","to":"subscribe","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":770,"y":3540,"wires":[["392b3961.0af14e"]]},{"id":"f528e024.b3627","type":"change","z":"4e17cbaa.9e3b0c","name":"","rules":[{"t":"set","p":"mep","pt":"msg","to":"requestReply","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":770,"y":3420,"wires":[["392b3961.0af14e"]]},{"id":"153f2721.d0fcd1","type":"unsafe-function","z":"4e17cbaa.9e3b0c","name":"checkMsgRequest","func":"if(msg.res){\n    return msg;\n}\n","outputs":1,"noerr":0,"x":2190,"y":3540,"wires":[["d0a5290b.b57c2","a1e9729f.7f2f58"]]},{"id":"354ab099.91d918","type":"actionflows","z":"4e17cbaa.9e3b0c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"notifyAASUI_DataStreamingMsg","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":2570,"y":3340,"wires":[[]]},{"id":"af492592.7d7ba8","type":"switch","z":"4e17cbaa.9e3b0c","name":"IF_status_true_from_DataStream","property":"payload.status","propertyType":"msg","rules":[{"t":"eq","v":"true","vt":"str"},{"t":"eq","v":"500","vt":"str"},{"t":"eq","v":"false","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":2200,"y":3340,"wires":[["354ab099.91d918","ead75f7e.003b3"],["354ab099.91d918"],["354ab099.91d918"]]},{"id":"d0a5290b.b57c2","type":"debug","z":"4e17cbaa.9e3b0c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":2390,"y":3500,"wires":[]},{"id":"f3cf3aad.8c4f28","type":"link in","z":"4e17cbaa.9e3b0c","name":"16_In_a","links":["84fffa0b.e11e2"],"x":235,"y":3420,"wires":[["f528e024.b3627"]]},{"id":"9b4ca624.f69168","type":"link in","z":"4e17cbaa.9e3b0c","name":"16_In_b","links":["c96eb7ad.5a7a4"],"x":235,"y":3540,"wires":[["d4c9a3e4.64d4e"]]},{"id":"a1e9729f.7f2f58","type":"link out","z":"4e17cbaa.9e3b0c","name":"16_Out","links":["333da9f1.2a0fbe"],"x":3115,"y":3540,"wires":[]},{"id":"333da9f1.2a0fbe","type":"link in","z":"ea9678a6.7fc468","name":"16_In","links":["a1e9729f.7f2f58"],"x":1295,"y":3280,"wires":[["dc58b665.bb412","8b315941.2e8e58"]]},{"id":"6314135a.3cfa6c","type":"link in","z":"ea9678a6.7fc468","name":"17_In","links":["febbc52d.c0da7"],"x":1295,"y":3440,"wires":[["4857378d.3ace4","5b456453.f5f2c4"]]},{"id":"37e18dde.c34792","type":"link out","z":"ea9678a6.7fc468","name":"17_Out","links":["8a3ac0b2.30a5d8"],"x":795,"y":3440,"wires":[]},{"id":"cb553b28.9f373","type":"actionflows","z":"4e17cbaa.9e3b0c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"callInternalInterface","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1410,"y":3660,"wires":[["febbc52d.c0da7"]]},{"id":"a05a8ba1.6bdb8","type":"change","z":"4e17cbaa.9e3b0c","name":"","rules":[{"t":"set","p":"mep","pt":"msg","to":"unsubscribe","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1160,"y":3660,"wires":[["cb553b28.9f373"]]},{"id":"febbc52d.c0da7","type":"link out","z":"4e17cbaa.9e3b0c","name":"17_Out","links":["6314135a.3cfa6c"],"x":3115,"y":3660,"wires":[]},{"id":"8a3ac0b2.30a5d8","type":"link in","z":"4e17cbaa.9e3b0c","name":"17_In","links":["37e18dde.c34792"],"x":235,"y":3660,"wires":[["a05a8ba1.6bdb8"]]},{"id":"e4e1d216.86dfd","type":"actionflows_in","z":"4e17cbaa.9e3b0c","name":"configureDataFlow in","priority":"50","links":[],"scope":"global","x":820,"y":3820,"wires":[["92972e23.5f9f58","5002a5a4.1234ac"]]},{"id":"c0bfd5db.811838","type":"actionflows_out","z":"4e17cbaa.9e3b0c","name":"configureDataFlow out","links":[],"x":2840,"y":3820,"wires":[]},{"id":"cd0e21df.0e161","type":"comment","z":"4e17cbaa.9e3b0c","name":"Configure DataFlows & Drivers","info":"","x":564.1310526529951,"y":3757.655385335287,"wires":[]},{"id":"7cacf3d7.e07b04","type":"comment","z":"4e17cbaa.9e3b0c","name":"Physical Connection Internal iInterface","info":"","x":590,"y":3900,"wires":[]},{"id":"c0764b88.2a4de8","type":"actionflows_in","z":"4e17cbaa.9e3b0c","name":"callInternalInterface in","priority":"50","links":[],"scope":"global","x":819.2023315429688,"y":3967.900146484375,"wires":[["7ea23b42.6f90fc","39ad4c61.e9da4c"]]},{"id":"d4fcf3ed.c31f6","type":"actionflows_out","z":"4e17cbaa.9e3b0c","name":"callInternalInterface out","links":[],"x":2849.2023315429688,"y":3967.900146484375,"wires":[]},{"id":"685b69b4.b9f968","type":"debug","z":"4e17cbaa.9e3b0c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":690,"y":4040,"wires":[]},{"id":"92972e23.5f9f58","type":"debug","z":"4e17cbaa.9e3b0c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1050,"y":3800,"wires":[]},{"id":"5002a5a4.1234ac","type":"unsafe-function","z":"4e17cbaa.9e3b0c","name":"RetrievingInternalDriverName","func":"var dsm = msg.payload;\nmsg.dsm = dsm;\nvar di =  dsm.InternalElement[0].InternalElement[0];\nmsg.di = di;\nvar parameters = dsm.InternalElement[0].InternalElement[0].InternalElement[0].InternalElement;\nmsg.parameters = parameters;\n\nif(typeof di.SupportedRoleClass[1] === \"undefined\"){\n    if(typeof dsm.SupportedRoleClass[1] === \"undefined\"){\n        for(var parameter in parameters){\n            if(parameters[parameter]._Attribs.Name === 'protocol'){\n                var attributes = parameters[parameter].Attribute;\n                for(var attribute in attributes){\n                    if(attributes[attribute]._Attribs.Name === 'actualValue'){\n                        msg.internalDriver = attributes[attribute].Value[0]; \n                    }\n                }\n            }\n        }\n    } else {\n        msg.internalDriver = \"callDataStreaming_DataFlows\";\n    }\n    \n} else {\n    for(var parameter in parameters){\n        if(parameters[parameter]._Attribs.Name === 'internalLinkId'){\n            var attributes = parameters[parameter].Attribute;\n            for(var attribute in attributes){\n                if(attributes[attribute]._Attribs.Name === 'actualValue'){\n                    msg.internalDriver = attributes[attribute].Value[0]; \n                }\n            }\n        }\n    }\n}\n//msg.payload = di;\nreturn msg;","outputs":1,"noerr":0,"x":1372.1428527832031,"y":3819.690460205078,"wires":[["c0bfd5db.811838","ce0561cd.9695b8"]]},{"id":"ce0561cd.9695b8","type":"debug","z":"4e17cbaa.9e3b0c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1630,"y":3800,"wires":[]},{"id":"503111f5.6525a","type":"actionflows","z":"4e17cbaa.9e3b0c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"callDataStreaming_DataFlows","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1830,"y":4000,"wires":[["d4fcf3ed.c31f6"]]},{"id":"39ad4c61.e9da4c","type":"unsafe-function","z":"4e17cbaa.9e3b0c","name":"InvokeInternalDriver","func":"var af = context.global.get(\"actionflows\");\nvar action_ = af.invoke(msg.internalDriver, msg);\naction_.then(function(msg){\n    node.send(msg);\n});\n\n","outputs":1,"noerr":0,"x":1800,"y":3960,"wires":[["d4fcf3ed.c31f6"]]},{"id":"ebfb41ab.ba3858","type":"switch","z":"4e17cbaa.9e3b0c","name":"IF_msg_mep","property":"mep","propertyType":"msg","rules":[{"t":"eq","v":"requestReply","vt":"str"},{"t":"cont","v":"subscribe","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":1210,"y":3900,"wires":[["39ad4c61.e9da4c"],[]]},{"id":"84624571.5122","type":"actionflows","z":"4e17cbaa.9e3b0c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"handleRetrievedData","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1820,"y":4100,"wires":[["c76b5c1e.84b84","351e9b38.0795c4"]]},{"id":"cc104e7d.0f30d8","type":"actionflows_in","z":"4e17cbaa.9e3b0c","name":"handleRetrievedData in","priority":"50","links":[],"scope":"global","x":1240,"y":4220,"wires":[["f22717c3.ea37b8"]]},{"id":"fefb1e32.f640a8","type":"actionflows_out","z":"4e17cbaa.9e3b0c","name":"handleRetrievedData out","links":[],"x":2540,"y":4220,"wires":[]},{"id":"f22717c3.ea37b8","type":"unsafe-function","z":"4e17cbaa.9e3b0c","name":"InvokeInformationManager","func":"var af = context.global.get(\"actionflows\");\nvar action_ = af.invoke(\"imInform\", msg);\naction_.then(function(msg){\n    node.send(msg);\n});\n\n","outputs":1,"noerr":0,"x":1810,"y":4220,"wires":[["fefb1e32.f640a8"]]},{"id":"cab00405.8650f","type":"comment","z":"4e17cbaa.9e3b0c","name":"Connect to Data Streaming Endpoint, Retrieving Device Registry Entries","info":"","x":690,"y":4320,"wires":[]},{"id":"37edfaf9.bbfd2e","type":"actionflows_out","z":"4e17cbaa.9e3b0c","name":"readCPSConfiguration out","links":[],"x":2860,"y":4380,"wires":[]},{"id":"672d741e.7d9434","type":"actionflows_in","z":"4e17cbaa.9e3b0c","name":"readCPSConfiguration in","priority":"50","links":[],"scope":"global","x":830,"y":4380,"wires":[["a279f46f.33f8c8"]]},{"id":"a279f46f.33f8c8","type":"actionflows","z":"4e17cbaa.9e3b0c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"callDataStreaming_DeviceRegistry","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1820,"y":4380,"wires":[["37edfaf9.bbfd2e"]]},{"id":"4836a2a1.2e4374","type":"debug","z":"4e17cbaa.9e3b0c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1585.5833740234375,"y":1374.7291259765625,"wires":[]},{"id":"dbd64f94.2e0358","type":"snmp","z":"4e17cbaa.9e3b0c","host":"localhost","community":"public","version":"1","oids":"1.3.6.1.2.1.6.9.0","timeout":5,"name":"","x":1860,"y":4560,"wires":[["df86a518.b3fe08"]]},{"id":"837dde17.893e88","type":"actionflows_in","z":"4e17cbaa.9e3b0c","name":"snmpTCPConnections in","priority":"50","links":[],"scope":"global","x":830,"y":4560,"wires":[["dbd64f94.2e0358"]]},{"id":"df86a518.b3fe08","type":"actionflows_out","z":"4e17cbaa.9e3b0c","name":"snmpTCPConnections out","links":[],"x":2870,"y":4560,"wires":[]},{"id":"4eeb94a6.b83754","type":"snmp","z":"4e17cbaa.9e3b0c","host":"localhost","community":"public","version":"1","oids":"1.3.6.1.2.1.1.3.0","timeout":5,"name":"sysUpTime","x":1850,"y":4620,"wires":[["56749547.e24ecc","b7cdc159.47817"]]},{"id":"485a1b4.5c88e64","type":"actionflows_in","z":"4e17cbaa.9e3b0c","name":"snmpSysUpTime in","priority":"50","links":[],"scope":"global","x":810,"y":4620,"wires":[["4eeb94a6.b83754"]]},{"id":"56749547.e24ecc","type":"actionflows_out","z":"4e17cbaa.9e3b0c","name":"snmpSysUpTime out","links":[],"x":2860,"y":4620,"wires":[]},{"id":"b7cdc159.47817","type":"debug","z":"4e17cbaa.9e3b0c","name":"","active":false,"console":"false","complete":"payload","x":2050,"y":4640,"wires":[]},{"id":"2ed7b994.f0f5be","type":"actionflows_in","z":"4e17cbaa.9e3b0c","name":"snmpLoad in","priority":"50","links":[],"scope":"global","x":790,"y":4740,"wires":[["a2ea1842.9f6a6"]]},{"id":"a2ea1842.9f6a6","type":"snmp","z":"4e17cbaa.9e3b0c","host":"localhost","community":"public","version":"1","oids":"1.3.6.1.4.1.2021.10.1.3.1,\n1.3.6.1.4.1.2021.10.1.3.2,\n1.3.6.1.4.1.2021.10.1.3.3","timeout":"8","name":"oneMinuteLoad","x":1860,"y":4740,"wires":[["ad225ddd.814f9","6c61829d.56533c"]]},{"id":"ad225ddd.814f9","type":"actionflows_out","z":"4e17cbaa.9e3b0c","name":"snmpLoad out","links":[],"x":2840,"y":4740,"wires":[]},{"id":"6c61829d.56533c","type":"debug","z":"4e17cbaa.9e3b0c","name":"","active":false,"tosidebar":true,"console":false,"complete":"payload","x":2050,"y":4760,"wires":[]},{"id":"afba2e0e.317cf","type":"inject","z":"4e17cbaa.9e3b0c","name":"Test","topic":"","payload":"","payloadType":"none","repeat":"","crontab":"","once":false,"x":1190,"y":4760,"wires":[["a2ea1842.9f6a6"]]},{"id":"551dd714.455d","type":"snmp","z":"4e17cbaa.9e3b0c","host":"localhost","community":"public","version":"1","oids":"1.3.6.1.2.1.1.1.0","timeout":5,"name":"sysDscr","x":1840,"y":4800,"wires":[["b3b817e3.952b8","3e1043c4.69f3e4"]]},{"id":"bc1d88b5.e88178","type":"actionflows_in","z":"4e17cbaa.9e3b0c","name":"snmpSysDscr in","priority":"50","links":[],"scope":"global","x":800,"y":4800,"wires":[["551dd714.455d"]]},{"id":"b3b817e3.952b8","type":"actionflows_out","z":"4e17cbaa.9e3b0c","name":"snmpSysDscr out","links":[],"x":2850,"y":4800,"wires":[]},{"id":"23d7e782.0e8bf8","type":"inject","z":"4e17cbaa.9e3b0c","name":"Test","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":false,"x":1190,"y":4820,"wires":[["551dd714.455d"]]},{"id":"3e1043c4.69f3e4","type":"debug","z":"4e17cbaa.9e3b0c","name":"","active":false,"console":"false","complete":"payload","x":2050,"y":4820,"wires":[]},{"id":"da389173.8083f","type":"comment","z":"4e17cbaa.9e3b0c","name":"AAS Rosource Monitoring - Component Manger","info":"","x":610,"y":4460,"wires":[]},{"id":"7ea23b42.6f90fc","type":"debug","z":"4e17cbaa.9e3b0c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1050,"y":3940,"wires":[]},{"id":"e7343ca2.0ba7f8","type":"link in","z":"4e17cbaa.9e3b0c","name":"18_In","links":["2f3dd400.aabd44","8da7ecab.eb3228"],"x":235,"y":4100,"wires":[["84624571.5122","568c8184.ec7618"]]},{"id":"c76b5c1e.84b84","type":"link out","z":"4e17cbaa.9e3b0c","name":"18_out","links":[],"x":3115,"y":4100,"wires":[]},{"id":"2f3dd400.aabd44","type":"link out","z":"6ba1a42a.072f84","name":"1_out","links":["e7343ca2.0ba7f8"],"x":835,"y":320,"wires":[]},{"id":"b881e5aa.06a49","type":"http in","z":"6ba1a42a.072f84","name":"","url":"aas/notifyRegistryChanges/","method":"post","upload":false,"swaggerDoc":"c0cbda38.01bb4","x":290,"y":1540,"wires":[["8b98bd0c.f4527"]]},{"id":"8b98bd0c.f4527","type":"set-defaults","z":"6ba1a42a.072f84","name":"set-startTime","rules":[{"p":"startTime","pt":"msg","to":"","tot":"date"}],"chbox_DoOutputToMessage":true,"chbox_SetCurrentToMsg":false,"howSend":{"text":"payload","type":"msg","modifiedValue":"payload"},"dropdown_HowManyMessages":"single","dropdownObjOrVal":"value","outputs":1,"x":990,"y":1540,"wires":[["668329d2.6ce7c8"]]},{"id":"ffe01f2c.529d88","type":"http response","z":"6ba1a42a.072f84","name":"","statusCode":"","headers":{},"x":2890,"y":1540,"wires":[]},{"id":"f98346c4.6069c8","type":"subflow:3bcb972f.6d23c8","z":"6ba1a42a.072f84","name":"","env":[],"x":2870,"y":1580,"wires":[],"icon":"node-red-contrib-viseo-log/log.svg"},{"id":"668329d2.6ce7c8","type":"link out","z":"6ba1a42a.072f84","name":"2_Out","links":["67f0449a.f1b48c"],"x":1175,"y":1540,"wires":[]},{"id":"4dc457e4.77d418","type":"link in","z":"6ba1a42a.072f84","name":"2_In","links":["b32c0e73.c9eea"],"x":2255,"y":1540,"wires":[["ffe01f2c.529d88","f98346c4.6069c8"]]},{"id":"80060ea3.165ae8","type":"unsafe-function","z":"4e17cbaa.9e3b0c","name":"InvokeInternalDriver","func":"var af = context.global.get(\"actionflows\");\nvar action_ = af.invoke(msg.communicationProtocol, msg);\naction_.then(function(msg){\n    node.send(msg);\n});\n\n","outputs":1,"noerr":0,"x":1820,"y":4040,"wires":[["d4fcf3ed.c31f6"]]},{"id":"3eb175fe.c86ac2","type":"debug","z":"1c8a5487.efc133","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1133.0003662109375,"y":451.3333740234375,"wires":[]},{"id":"721db3c3.fa26ec","type":"actionflows_in","z":"4e17cbaa.9e3b0c","name":"callBack in","priority":"50","links":[],"scope":"global","x":280,"y":4180,"wires":[["84624571.5122"]]},{"id":"351e9b38.0795c4","type":"actionflows_out","z":"4e17cbaa.9e3b0c","name":"callBack out","links":[],"x":3050,"y":4180,"wires":[]},{"id":"25c86d79.aa28e2","type":"debug","z":"1c8a5487.efc133","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":973.0003662109375,"y":431.3333740234375,"wires":[]},{"id":"9f1f0404.0dcc58","type":"switch","z":"1c8a5487.efc133","name":"","property":"payload.requestedProperty","propertyType":"msg","rules":[{"t":"null"},{"t":"nnull"}],"checkall":"true","repair":false,"outputs":2,"x":510,"y":520,"wires":[["2d753dd4.158b42"],["bb1408f8.bf52c8"]]},{"id":"bb1408f8.bf52c8","type":"change","z":"1c8a5487.efc133","name":"","rules":[{"t":"set","p":"url","pt":"msg","to":"payload.url","tot":"msg"},{"t":"set","p":"method","pt":"msg","to":"payload.method","tot":"msg"},{"t":"set","p":"requestedProperty","pt":"msg","to":"payload.requestedProperty","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":760,"y":560,"wires":[["63fd5e55.088e48"]]},{"id":"a4f5b37.d5997d","type":"inject","z":"1c8a5487.efc133","name":"","topic":"","payload":"","payloadType":"date","repeat":"5","crontab":"","once":false,"onceDelay":"","x":150,"y":880,"wires":[["d434d45c.2ad1b"]]},{"id":"d434d45c.2ad1b","type":"unsafe-function","z":"1c8a5487.efc133","name":"Get HTTP requests Configurations","func":"var subscriptions = context.flow.get(\"subscriptions\");\nif(subscriptions.length > 0){\n    var msg = {};\n    msg.payload = subscriptions;\n    return msg;\n}\nelse return;","outputs":1,"noerr":0,"x":720,"y":880,"wires":[["e54f3ab4.f0106","c0bedf5c.5f8598"]]},{"id":"e54f3ab4.f0106","type":"debug","z":"1c8a5487.efc133","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":950,"y":820,"wires":[]},{"id":"a0ca54d0.33952","type":"switch","z":"d17857fb.cb70e8","name":"","property":"payload.requestedProperty","propertyType":"msg","rules":[{"t":"null"},{"t":"nnull"}],"checkall":"true","repair":false,"outputs":2,"x":490,"y":580,"wires":[["83239ca4.93dea"],["f4d3f5d4.50a18"]]},{"id":"f4d3f5d4.50a18","type":"change","z":"d17857fb.cb70e8","name":"","rules":[{"t":"set","p":"host","pt":"msg","to":"payload.address","tot":"msg"},{"t":"set","p":"oid","pt":"msg","to":"payload.oid","tot":"msg"},{"t":"set","p":"requestedProperty","pt":"msg","to":"payload.requestedProperty","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":680,"y":620,"wires":[["2a4aac69.0399bc"]]},{"id":"fa6505ce.e1aad","type":"saveflow","z":"d17857fb.cb70e8","name":"","path":"C:\\Users\\Giovanni Di Orio\\.asmodels\\flows\\drivers\\","enabled":false,"exporttype":"addflow","x":1000,"y":1040,"wires":[[]]},{"id":"2cde961d.b30022","type":"inject","z":"d17857fb.cb70e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":540,"y":1042,"wires":[["fa6505ce.e1aad"]]},{"id":"13feb441.b4ed74","type":"comment","z":"d17857fb.cb70e8","name":"Subscribe Message Exchange Pattern  (Protocol TranslationI)","info":"","x":300,"y":820,"wires":[]},{"id":"c53aa8b5.cade78","type":"inject","z":"d17857fb.cb70e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"5","crontab":"","once":false,"onceDelay":"","x":170,"y":900,"wires":[["903292b3.4caac"]]},{"id":"903292b3.4caac","type":"unsafe-function","z":"d17857fb.cb70e8","name":"Get SNMP requests Configurations","func":"var subscriptions = context.flow.get(\"subscriptions\");\nif(subscriptions.length > 0){\n    var msg = {};\n    msg.payload = subscriptions;\n    return msg;\n}\nelse return;","outputs":1,"noerr":0,"x":740,"y":900,"wires":[["2d00b190.e1ed36","486edc5f.326d5c"]]},{"id":"2d00b190.e1ed36","type":"debug","z":"d17857fb.cb70e8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":990,"y":840,"wires":[]},{"id":"c0bedf5c.5f8598","type":"actionflows","z":"1c8a5487.efc133","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"requestReply","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"private","perf":false,"seq":false,"x":1120,"y":880,"wires":[[]]},{"id":"486edc5f.326d5c","type":"actionflows","z":"d17857fb.cb70e8","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"requestReply","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"private","perf":false,"seq":false,"x":1190,"y":900,"wires":[[]]},{"id":"72d013e5.cc8c94","type":"unsafe-function","z":"6ba1a42a.072f84","name":"preprocess data (DSMs)","func":"var assets = msg.payload;\n\nfor (var asset in assets){\n    //getting the data source manifest\n    var dsm = assets[asset];\n    \n    // working on data Interface (merging definition interface parameters with data interface)\n    var interfaceParameters = assets[asset].dataSourceDefinitionInterfaceParameters.parameter;\n    var dataInterfaceParameters = dsm.dataSourceDefinitionReferenceID.dataInterfaceReferenceID.parameters.parameter;\n    for(var interfaceParameter in interfaceParameters){\n        for(var parameter in dataInterfaceParameters){\n            if(interfaceParameters[interfaceParameter].key === dataInterfaceParameters[parameter].name){\n                dataInterfaceParameters[parameter].actualValue = interfaceParameters[interfaceParameter].value; \n            }\n        }\n    }\n}\n\nmsg.retrievedAssets = assets;\nmsg.payload = null;\nreturn msg;","outputs":1,"noerr":0,"x":1930,"y":1400,"wires":[["7ed9572d.d83c8","2e403bfa.b6025c"]]},{"id":"58b405d0.0e6edc","type":"debug","z":"6ba1a42a.072f84","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1790,"y":1340,"wires":[]},{"id":"e1481180.76549","type":"inject","z":"6ba1a42a.072f84","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":960,"y":1360,"wires":[["7d0098cc.31b698"]]},{"id":"9f0edf84.49d74","type":"json","z":"6ba1a42a.072f84","name":"","property":"payload","action":"","pretty":false,"x":1630,"y":1400,"wires":[["58b405d0.0e6edc","72d013e5.cc8c94"]]},{"id":"7ed9572d.d83c8","type":"debug","z":"6ba1a42a.072f84","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":2070,"y":1340,"wires":[]},{"id":"209290cc.bd8a68","type":"debug","z":"4e17cbaa.9e3b0c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1530,"y":780,"wires":[]},{"id":"cda28ed9.8bc2c","type":"ui_ui_control","z":"7d8ace.ba650534","name":"","x":300,"y":260,"wires":[["7d59c7c.6f85cb8"]]},{"id":"510a4706.e372d8","type":"actionflows_in","z":"ea9678a6.7fc468","name":"initFromBot in","priority":"50","links":[],"scope":"global","x":510,"y":280,"wires":[["e21be4d8.1a2538"]]},{"id":"38c8b3a8.d8b27c","type":"http request","z":"7d8ace.ba650534","name":"","method":"use","ret":"txt","paytoqs":false,"url":"","tls":"","persist":false,"proxy":"","authType":"basic","x":790,"y":380,"wires":[["3d2ec782.b349e8"]]},{"id":"6767f67a.0cccb","type":"unsafe-function","z":"7d8ace.ba650534","name":"trigger","func":"msg.method = 'POST';\nmsg.url = context.global.get('namespace') + \"/aas/initialize\";\nmsg.requestTimeout = 3000;\nmsg.payload = \"\";\n\nreturn msg;","outputs":1,"noerr":0,"x":630,"y":380,"wires":[["38c8b3a8.d8b27c"]]},{"id":"2379395b.48c2f6","type":"debug","z":"4e17cbaa.9e3b0c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":670,"y":160,"wires":[]},{"id":"82a3a346.578ca8","type":"actionflows","z":"7d8ace.ba650534","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"informAASUI_NewLog","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"private","perf":false,"seq":false,"x":1540,"y":520,"wires":[[]]},{"id":"b5f7eda0.e11de","type":"debug","z":"6ba1a42a.072f84","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":2069.1272583007812,"y":518.2936706542969,"wires":[]},{"id":"14709a44.bc4df6","type":"json","z":"6ba1a42a.072f84","name":"","property":"payload","action":"","pretty":false,"x":1490,"y":820,"wires":[["ba0a3fc4.32e9e","6da2d66b.1350f8"]]},{"id":"2dfae11b.a3ec2e","type":"json","z":"6ba1a42a.072f84","name":"","property":"payload","action":"","pretty":false,"x":1490,"y":900,"wires":[["777248d8.70bfb8","58e1ab82.7d2394"]]},{"id":"777248d8.70bfb8","type":"debug","z":"6ba1a42a.072f84","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1630,"y":960,"wires":[]},{"id":"ba0a3fc4.32e9e","type":"debug","z":"6ba1a42a.072f84","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1630,"y":760,"wires":[]},{"id":"568c8184.ec7618","type":"msg-speed","z":"4e17cbaa.9e3b0c","name":"","frequency":"min","estimation":true,"ignore":false,"x":460,"y":4040,"wires":[["685b69b4.b9f968"],[]]},{"id":"ead75f7e.003b3","type":"debug","z":"4e17cbaa.9e3b0c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":2480,"y":3280,"wires":[]},{"id":"6423d487.ad3f04","type":"unsafe-function","z":"6ba1a42a.072f84","name":"retrieve subscriptions info","func":"msg.headers = {\"Content-type\" : \"application/json\"}\nmsg.url = context.global.get(\"DataStreamingEndpoint\") + \"/dataStream/dataFlows/get/all\";\nmsg.method = \"GET\";\nreturn msg;","outputs":1,"noerr":0,"x":790,"y":580,"wires":[["46955f41.e5cac","46bebbb6.0a3bb4"]]},{"id":"46955f41.e5cac","type":"http request","z":"6ba1a42a.072f84","name":"","method":"use","ret":"txt","paytoqs":false,"url":"","tls":"","proxy":"","x":1010,"y":580,"wires":[["2527d8a3.10f108","857e0dbb.24644"]]},{"id":"2527d8a3.10f108","type":"unsafe-function","z":"6ba1a42a.072f84","name":"saveCurrentSubscriptions","func":"if(msg.payload !== \"\" && msg.statusCode == \"200\"){\n    var subscriptions = JSON.parse(msg.payload);\n    context.flow.set('subscriptions', subscriptions);\n} else {\n    context.flow.set('subscriptions', []);\n}\nreturn msg;\n","outputs":1,"noerr":0,"x":1250,"y":580,"wires":[["78cff431.48941c"]]},{"id":"857e0dbb.24644","type":"debug","z":"6ba1a42a.072f84","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1210,"y":620,"wires":[]},{"id":"165133ff.b5d29c","type":"conf ping","z":"6ba1a42a.072f84","name":"","host":"","timeout":"5","requests":"1","x":600,"y":180,"wires":[["49886688.cf83a","5705b4df.3da5c4"]]},{"id":"b03e9ad8.5d629","type":"unsafe-function","z":"6ba1a42a.072f84","name":"host DataStreaming","func":"var loc = new URL(context.global.get(\"DataStreamingEndpoint\"));\nmsg.host = loc.hostname;\nreturn msg;","outputs":1,"noerr":0,"x":390,"y":180,"wires":[["165133ff.b5d29c","53b43746.4836a8"]]},{"id":"9b3b046f.3309d8","type":"inject","z":"6ba1a42a.072f84","name":"","topic":"","payload":"","payloadType":"str","repeat":"5","crontab":"","once":false,"onceDelay":0.1,"x":210,"y":180,"wires":[["b03e9ad8.5d629"]]},{"id":"49886688.cf83a","type":"switch","z":"6ba1a42a.072f84","name":"","property":"payload","propertyType":"msg","rules":[{"t":"gt","v":"0","vt":"num"},{"t":"false"}],"checkall":"false","repair":false,"outputs":2,"x":790,"y":180,"wires":[["d0128f22.986658"],["66f02a7c.f26c34"]]},{"id":"66f02a7c.f26c34","type":"change","z":"6ba1a42a.072f84","name":"","rules":[{"t":"set","p":"connected","pt":"flow","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":970,"y":200,"wires":[[]]},{"id":"d0128f22.986658","type":"change","z":"6ba1a42a.072f84","name":"","rules":[{"t":"set","p":"connected","pt":"flow","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":970,"y":160,"wires":[[]]},{"id":"aba0368b.f50128","type":"switch","z":"6ba1a42a.072f84","name":"","property":"connected","propertyType":"flow","rules":[{"t":"false"},{"t":"true"}],"checkall":"false","repair":false,"outputs":2,"x":550,"y":480,"wires":[["70b060b3.e93fe"],["6423d487.ad3f04"]]},{"id":"70b060b3.e93fe","type":"unsafe-function","z":"6ba1a42a.072f84","name":"statusMessage","func":"msg.payload.status = \"false\";\nmsg.payload.statusMessage = \"DataStreaming is not avaialble\"; \nreturn msg;","outputs":1,"noerr":0,"x":1240,"y":460,"wires":[["5a992b57.f2e724"]]},{"id":"fd4dce63.1c13f","type":"unsafe-function","z":"6ba1a42a.072f84","name":"statusMessage","func":"msg.payload = {};\nmsg.payload.status = \"false\";\nmsg.payload.statusMessage = \"DataStreaming is not avaialble\"; \nreturn msg;","outputs":1,"noerr":0,"x":1480,"y":1300,"wires":[["2e403bfa.b6025c","9b757c21.6913b"]]},{"id":"2aa6bf53.7cec28","type":"switch","z":"6ba1a42a.072f84","name":"","property":"connected","propertyType":"flow","rules":[{"t":"false"},{"t":"true"}],"checkall":"false","repair":false,"outputs":2,"x":590,"y":1320,"wires":[["fd4dce63.1c13f"],["1090ea08.b152a6"]]},{"id":"6adbf6e5.c1aeb","type":"switch","z":"4e17cbaa.9e3b0c","name":"","property":"payload.status","propertyType":"msg","rules":[{"t":"neq","v":"false","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":1370,"y":280,"wires":[["cb2abbc.714e548"],["c2247fb5.890438","75d046be.6aa1d"]]},{"id":"75d046be.6aa1d","type":"actionflows","z":"4e17cbaa.9e3b0c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"notifyAASUI_DataStreamingMsg","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1790,"y":320,"wires":[[]]},{"id":"7194cdb6.d9113c","type":"debug","z":"4e17cbaa.9e3b0c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1370,"y":200,"wires":[]},{"id":"9b757c21.6913b","type":"debug","z":"6ba1a42a.072f84","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1730,"y":1260,"wires":[]},{"id":"15a8793a.8afda7","type":"comment","z":"6ba1a42a.072f84","name":"Monitor DataStreaming Connectivity","info":"","x":280,"y":140,"wires":[]},{"id":"4a231606.b384e8","type":"saveflow","z":"13fb0e4.a365172","name":"","path":"C:\\Users\\Giovanni Di Orio\\.asmodels\\flows\\drivers\\","enabled":false,"exporttype":"addflow","x":1000,"y":1120,"wires":[[]]},{"id":"8f7eb273.bb9fa8","type":"inject","z":"13fb0e4.a365172","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":540,"y":1122,"wires":[["4a231606.b384e8"]]},{"id":"5fa0f05a.f93fa8","type":"actionflows_in","z":"13fb0e4.a365172","name":"WebDocs in","priority":"50","links":[],"scope":"global","x":150,"y":360,"wires":[["9fce38b1.4c11e8","508679d7.576fa"]]},{"id":"92e93c17.34baa","type":"actionflows_out","z":"13fb0e4.a365172","name":"WebDocs out","links":[],"x":1360,"y":360,"wires":[]},{"id":"df7a6bee.8595c8","type":"unsafe-function","z":"13fb0e4.a365172","name":"PrepareOutput","func":"var outputMsgs = [];\nvar uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });\nvar property = msg.requestedProperty;\n\n// Create an Observation Object ------------------------------------\nvar observation = {};\nobservation.id = uuid;\nobservation.edgeGatewayReferenceID = msg.AASID;\nobservation.dataManifestReferenceID = property._Attribs.ID;\nobservation.dataKindReferenceID = property.InternalElement[0]._Attribs.ID;\nobservation.acquisitionTimestamp = new Date().getTime();\nobservation.collectionTimestamp = new Date().getTime();\nobservation.value = msg.payload;\n// END Create an Observation Object --------------------------------\n//outputMsgs.push(observation);\n\n//msg.payload = outputMsgs;\nmsg.payload = JSON.stringify(observation);\nreturn msg;\n\n\n","outputs":1,"noerr":0,"x":1220,"y":620,"wires":[["8156dfc3.20b4c","3aef8849.6010b"]]},{"id":"8156dfc3.20b4c","type":"debug","z":"13fb0e4.a365172","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1488.0000610351562,"y":718.666748046875,"wires":[]},{"id":"b7a712cb.4bf8e","type":"change","z":"13fb0e4.a365172","name":"","rules":[{"t":"set","p":"url","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":620,"wires":[["538442a7.7bd6dc","a59daa8d.051348","df7a6bee.8595c8"]]},{"id":"149ea184.7783b6","type":"actionflows","z":"13fb0e4.a365172","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"requestReply","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"private","perf":false,"seq":false,"x":990,"y":360,"wires":[["92e93c17.34baa"]]},{"id":"ebb536b.13acec8","type":"actionflows_in","z":"13fb0e4.a365172","name":"requestReply in","priority":"50","links":[],"scope":"global","x":160,"y":620,"wires":[["feeb24cf.49c78","b7a712cb.4bf8e"]]},{"id":"3aef8849.6010b","type":"actionflows_out","z":"13fb0e4.a365172","name":"requestReply out","links":[],"x":1591.3333740234375,"y":621,"wires":[]},{"id":"feeb24cf.49c78","type":"debug","z":"13fb0e4.a365172","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":355.66650390625,"y":693.333251953125,"wires":[]},{"id":"9fce38b1.4c11e8","type":"unsafe-function","z":"13fb0e4.a365172","name":"Prepare client configuration and msg object","func":"if(msg.requestedProperty !== \"\" && msg.parameters !== \"\" && msg.mep === \"requestReply\"){\n    //msg.submodel = msg.payload;\n    \n    //var parameters = msg.payload.InternalElement[0].InternalElement;\n    var parameters = msg.parameters;\n    var url = \"\";\n    for(var parameterIndex in parameters){\n        if(parameters[parameterIndex]._Attribs.Name == \"url\"){\n            url = parameters[parameterIndex].Attribute[2].Value[0];\n            msg.payload = url;\n            return msg;\n        }\n    }\n}\n","outputs":1,"noerr":0,"x":530,"y":360,"wires":[["149ea184.7783b6"]]},{"id":"f6f5218f.3e7d38","type":"comment","z":"13fb0e4.a365172","name":"Request Reply Message Exchange Pattern","info":"","x":251.333251953125,"y":516.6666259765625,"wires":[]},{"id":"ee3e414.db16bc","type":"comment","z":"13fb0e4.a365172","name":"Internal Interface Entry Point","info":"","x":184.047607421875,"y":123.142822265625,"wires":[]},{"id":"508679d7.576fa","type":"debug","z":"13fb0e4.a365172","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":354.2856750488281,"y":423.5238037109375,"wires":[]},{"id":"538442a7.7bd6dc","type":"debug","z":"13fb0e4.a365172","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":993.0003662109375,"y":531.3333740234375,"wires":[]},{"id":"adb7b1e9.9e0a3","type":"javafunction","z":"13fb0e4.a365172","name":"open local browser","jars":[],"imports":[],"func":"URI uri = new URI(msg.get(\"payload\").getAsString());\nDesktop.getDesktop().browse(uri);\nreturn msg;","outputs":1,"x":1170,"y":820,"wires":[[]]},{"id":"a59daa8d.051348","type":"unsafe-function","z":"13fb0e4.a365172","name":"","func":"var outMsg = {};\n// expression = /(https?:\\/\\/.)?(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_\\+.~#?&//=]*)/g;\nvar expression = /(https?:\\/\\/(?:www\\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\\.[^\\s]{2,}|www\\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\\.[^\\s]{2,}|https?:\\/\\/(?:www\\.|(?!www))[a-zA-Z0-9]+\\.[^\\s]{2,}|www\\.[a-zA-Z0-9]+\\.[^\\s]{2,})/gi;\nvar regex = new RegExp(expression);\nif(msg.payload.match(regex)){\n   outMsg.payload = msg.payload;\n    return outMsg; \n} else {\n    var tryAASurl = context.global.get(\"namespace\") + msg.payload;\n    if(tryAASurl.match(regex)){\n        outMsg.payload = tryAASurl;\n        return outMsg;\n    } else {\n        return null;\n    }\n    \n}\n","outputs":1,"noerr":0,"x":900,"y":820,"wires":[["ee15063e.7f9","adb7b1e9.9e0a3"]]},{"id":"ee15063e.7f9","type":"debug","z":"13fb0e4.a365172","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1110,"y":760,"wires":[]},{"id":"ff03e1f8.eaaef","type":"inject","z":"13fb0e4.a365172","name":"Tester","topic":"","payload":"/http-api/swagger.json","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":630,"y":820,"wires":[["a59daa8d.051348"]]},{"id":"fb848161.0a9518","type":"function","z":"4e17cbaa.9e3b0c","name":"Intialize Global Variables","func":"var os = context.global.get('os');\nvar path = context.global.get('path');\n\n\n//context.global.set(\"ModelFilePath\", \"\");\n// http://sensap.ddns.net:58001\nlet dataStreamingEndpoint = env.get(\"DATASTREAMING_ENDPOINT\");\ncontext.global.set(\"DataStreamingEndpoint\", dataStreamingEndpoint);\n//context.global.set(\"stringManifest\", \"<?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?>\\r\\n<CAEXFile FileName=\\\"Aml_as_manifest_empty.aml\\\" SchemaVersion=\\\"2.15\\\" xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\" xsi:noNamespaceSchemaLocation=\\\"CAEX_ClassModel_V2.15.xsd\\\">\\r\\n\\t<AdditionalInformation>\\r\\n\\t\\t<WriterHeader>\\r\\n\\t\\t\\t<LastWritingDateTime>2018-10-16T16:12:49.4126198+01:00</LastWritingDateTime>\\r\\n\\t\\t\\t<WriterID>916578CA-FE0D-474E-A4FC-9E1719892369</WriterID>\\r\\n\\t\\t\\t<WriterName>AutomationML Editor</WriterName>\\r\\n\\t\\t\\t<WriterProjectID>unspecified</WriterProjectID>\\r\\n\\t\\t\\t<WriterProjectTitle>unspecified</WriterProjectTitle>\\r\\n\\t\\t\\t<WriterRelease>4.7.0.0</WriterRelease>\\r\\n\\t\\t\\t<WriterVendor>AutomationML e.V.</WriterVendor>\\r\\n\\t\\t\\t<WriterVendorURL>www.AutomationML.org</WriterVendorURL>\\r\\n\\t\\t\\t<WriterVersion>4.7.0.0</WriterVersion>\\r\\n\\t\\t</WriterHeader>\\r\\n\\t</AdditionalInformation>\\r\\n\\t<AdditionalInformation AutomationMLVersion=\\\"2.0\\\" />\\r\\n\\t<InstanceHierarchy ID=\\\"90a789b3-d644-43f7-b8ec-fdfda0bdbbcd\\\" Name=\\\"AASManifest\\\">\\r\\n\\t\\t<InternalElement ID=\\\"611c9074-ad8d-47c1-a26f-3d8d9f517ae1\\\" Name=\\\"Header\\\">\\r\\n\\t\\t\\t<InternalElement ID=\\\"2eda359b-8f68-4a8e-84be-b32f2e16d7a2\\\" Name=\\\"Identifiers\\\"><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Asset&amp;AASIdentification\\\" />\\r\\n\\t\\t\\t\\t\\r\\n\\t\\t\\t</InternalElement>\\r\\n\\t\\t\\t\\r\\n\\t\\t</InternalElement>\\r\\n\\t\\t<InternalElement ID=\\\"b66b5437-4fee-4ccb-8009-1d28c8159f9e\\\" Name=\\\"Body\\\">\\r\\n\\t\\t\\t\\r\\n\\t\\t\\t\\r\\n\\t\\t\\t<SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/SubmodelContainer\\\" />\\r\\n\\t\\t</InternalElement>\\r\\n\\t\\t<Version>1.0.0</Version>\\r\\n\\t</InstanceHierarchy>\\r\\n\\t<InterfaceClassLib Name=\\\"AASInterfaceClassLib\\\">\\r\\n\\t\\t<InterfaceClass Name=\\\"SupportedDataConnectors\\\">\\r\\n\\t\\t\\t<InterfaceClass Name=\\\"Connector\\\" RefBaseClassPath=\\\"AASInterfaceClassLib/SupportedDataConnectors\\\">\\r\\n\\t\\t\\t\\t<Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"Address\\\">\\r\\n\\t\\t\\t\\t\\t<Value>-</Value>\\r\\n\\t\\t\\t\\t</Attribute>\\r\\n\\t\\t\\t\\t<InterfaceClass Name=\\\"OPCUAConnector\\\" RefBaseClassPath=\\\"AASInterfaceClassLib/SupportedDataConnectors/Connector\\\">\\r\\n\\t\\t\\t\\t\\t<Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"ItemOPCUAAddress\\\">\\r\\n\\t\\t\\t\\t\\t\\t<Value>-</Value>\\r\\n\\t\\t\\t\\t\\t</Attribute>\\r\\n\\t\\t\\t\\t\\t<Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"Action\\\">\\r\\n\\t\\t\\t\\t\\t\\t<Constraint Name=\\\"ActionValueList\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<NominalScaledType>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<RequiredValue>READ</RequiredValue>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<RequiredValue>WRITE</RequiredValue>\\r\\n\\t\\t\\t\\t\\t\\t\\t</NominalScaledType>\\r\\n\\t\\t\\t\\t\\t\\t</Constraint>\\r\\n\\t\\t\\t\\t\\t\\t<Value>-</Value>\\r\\n\\t\\t\\t\\t\\t</Attribute>\\r\\n\\t\\t\\t\\t</InterfaceClass>\\r\\n\\t\\t\\t\\t<InterfaceClass Name=\\\"RESTConnector\\\" RefBaseClassPath=\\\"AASInterfaceClassLib/SupportedDataConnectors/Connector\\\">\\r\\n\\t\\t\\t\\t\\t<Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"Method\\\">\\r\\n\\t\\t\\t\\t\\t\\t<Constraint Name=\\\"MethodValueList\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<NominalScaledType>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<RequiredValue>GET</RequiredValue>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<RequiredValue>POST</RequiredValue>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<RequiredValue>PUT</RequiredValue>\\r\\n\\t\\t\\t\\t\\t\\t\\t</NominalScaledType>\\r\\n\\t\\t\\t\\t\\t\\t</Constraint>\\r\\n\\t\\t\\t\\t\\t\\t<Value>-</Value>\\r\\n\\t\\t\\t\\t\\t</Attribute>\\r\\n\\t\\t\\t\\t</InterfaceClass>\\r\\n\\t\\t\\t\\t<InterfaceClass Name=\\\"AMQPConnector\\\" RefBaseClassPath=\\\"AASInterfaceClassLib/SupportedDataConnectors/Connector\\\">\\r\\n\\t\\t\\t\\t\\t<Attribute Name=\\\"ReadFrom\\\" />\\r\\n\\t\\t\\t\\t\\t<Attribute Name=\\\"Exchange_QueueName\\\" />\\r\\n\\t\\t\\t\\t</InterfaceClass>\\r\\n\\t\\t\\t</InterfaceClass>\\r\\n\\t\\t</InterfaceClass>\\r\\n\\t\\t<Version>1.0.0</Version>\\r\\n\\t</InterfaceClassLib>\\r\\n\\t<RoleClassLib Name=\\\"AASManifestRoleClassLib\\\">\\r\\n\\t\\t<RoleClass Name=\\\"PropertyContainer\\\" />\\r\\n\\t\\t<RoleClass Name=\\\"Statement\\\" />\\r\\n\\t\\t<RoleClass Name=\\\"FunctionalityExposed\\\" />\\r\\n\\t\\t<RoleClass Name=\\\"Asset&amp;AASIdentification\\\" />\\r\\n\\t\\t<RoleClass Name=\\\"SubmodelContainer\\\" />\\r\\n\\t\\t<Version></Version>\\r\\n\\t</RoleClassLib>\\r\\n\\t<SystemUnitClassLib Name=\\\"ASSSystemUnitClassLib\\\">\\r\\n\\t\\t<SystemUnitClass Name=\\\"Submodel\\\">\\r\\n\\t\\t\\t<SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/PropertyContainer\\\" />\\r\\n\\t\\t</SystemUnitClass>\\r\\n\\t\\t<SystemUnitClass Name=\\\"Property\\\">\\r\\n\\t\\t\\t<Attribute Name=\\\"ExpressionLogic\\\">\\r\\n\\t\\t\\t\\t<Constraint Name=\\\"ExpressionLogicList\\\">\\r\\n\\t\\t\\t\\t\\t<NominalScaledType>\\r\\n\\t\\t\\t\\t\\t\\t<RequiredValue>EQUAL</RequiredValue>\\r\\n\\t\\t\\t\\t\\t\\t<RequiredValue>LESS</RequiredValue>\\r\\n\\t\\t\\t\\t\\t</NominalScaledType>\\r\\n\\t\\t\\t\\t</Constraint>\\r\\n\\t\\t\\t\\t<Value>-</Value>\\r\\n\\t\\t\\t</Attribute>\\r\\n\\t\\t\\t<Attribute Name=\\\"Views\\\">\\r\\n\\t\\t\\t\\t<Constraint Name=\\\"ViewsList\\\">\\r\\n\\t\\t\\t\\t\\t<NominalScaledType>\\r\\n\\t\\t\\t\\t\\t\\t<RequiredValue>PERFORMANCE</RequiredValue>\\r\\n\\t\\t\\t\\t\\t\\t<RequiredValue>BUSINESS</RequiredValue>\\r\\n\\t\\t\\t\\t\\t</NominalScaledType>\\r\\n\\t\\t\\t\\t</Constraint>\\r\\n\\t\\t\\t\\t<Value>-</Value>\\r\\n\\t\\t\\t</Attribute>\\r\\n\\t\\t\\t\\r\\n\\t\\t\\t<Attribute Name=\\\"ValueList\\\">\\r\\n\\t\\t\\t\\t<Constraint Name=\\\"ValueListList\\\">\\r\\n\\t\\t\\t\\t\\t<NominalScaledType>\\r\\n\\t\\t\\t\\t\\t\\t<RequiredValue>n/a</RequiredValue>\\r\\n\\t\\t\\t\\t\\t\\t<RequiredValue>0..*</RequiredValue>\\r\\n\\t\\t\\t\\t\\t\\t<RequiredValue>{}</RequiredValue>\\r\\n\\t\\t\\t\\t\\t</NominalScaledType>\\r\\n\\t\\t\\t\\t</Constraint>\\r\\n\\t\\t\\t\\t<Value>n/a</Value>\\r\\n\\t\\t\\t</Attribute>\\r\\n\\t\\t\\t<Attribute AttributeDataType=\\\"-\\\" Name=\\\"Value\\\" Unit=\\\"-\\\">\\r\\n\\t\\t\\t\\t<Description>-</Description>\\r\\n\\t\\t\\t\\t<Value>-</Value>\\r\\n\\t\\t\\t</Attribute><Attribute Name=\\\"ValueFormat\\\" AttributeDataType=\\\"xs:string\\\"><Value>-</Value></Attribute>\\r\\n\\t\\t\\t<Attribute Name=\\\"ExpressionSemantic\\\">\\r\\n\\t\\t\\t\\t<Constraint Name=\\\"ExpressionSemanticList\\\">\\r\\n\\t\\t\\t\\t\\t<NominalScaledType>\\r\\n\\t\\t\\t\\t\\t\\t<RequiredValue>n/a</RequiredValue>\\r\\n\\t\\t\\t\\t\\t\\t<RequiredValue>MEASUREMENT</RequiredValue><RequiredValue>CONFIRMATION</RequiredValue>\\r\\n\\t\\t\\t\\t\\t</NominalScaledType>\\r\\n\\t\\t\\t\\t</Constraint>\\r\\n\\t\\t\\t\\t<Value>n/a</Value>\\r\\n\\t\\t\\t</Attribute>\\r\\n\\t\\t\\t<SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" />\\r\\n\\t\\t</SystemUnitClass>\\r\\n\\t\\t<Version>1.0.0</Version>\\r\\n\\t</SystemUnitClassLib>\\r\\n</CAEXFile>\\r\\n\"); \nlet registryEndpoint = env.get(\"REGISTRY_ENDPOINT\");\ncontext.global.set(\"RegistryEndpoint\", registryEndpoint);\n\nvar interfaces = os.networkInterfaces();\nvar addresses = [];\n\nfor (var k in interfaces) {\n    for (var k2 in interfaces[k]) {\n        var address = interfaces[k][k2];\n        if (address.family === 'IPv4' && !address.internal) {\n            addresses.push(address.address);\n        }\n    }\n}\ncontext.global.set('namespace',\"http://\" + addresses[0] + \":\" + context.global.get('uiPort'));\n\n//Retrieving the home directory\nvar homedirectory = os.homedir();\n//Building up the model directory\nvar asmodels = \".asmodels\";\nvar modelDir = path.join(homedirectory, asmodels);\ncontext.global.set(\"ModelDir\", modelDir);\n//Building up the path to find the models\nvar fileName = \"Aml_as_manifest.xml\";\n\nvar filePath = path.join(homedirectory, asmodels, fileName);\ncontext.global.set(\"ModelFilePath\", filePath);\n//Building up the path to load connectors\n//msg.filename = filePath;\nreturn msg;\n","outputs":1,"noerr":0,"x":410,"y":240,"wires":[["e47e7e90.cb58f8","2379395b.48c2f6"]]},{"id":"a34a2933.94b028","type":"unsafe-function","z":"4e17cbaa.9e3b0c","name":"Initialize Global Variables","func":"var os = context.global.get('os');\nvar path = context.global.get('path');\n\n\n//context.global.set(\"ModelFilePath\", \"\");\ncontext.global.set(\"DataStreamingEndpoint\", \"http://sensap.ddns.net:58001\");\n//context.global.set(\"stringManifest\", \"<?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?>\\r\\n<CAEXFile FileName=\\\"Aml_as_manifest_empty.aml\\\" SchemaVersion=\\\"2.15\\\" xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\" xsi:noNamespaceSchemaLocation=\\\"CAEX_ClassModel_V2.15.xsd\\\">\\r\\n\\t<AdditionalInformation>\\r\\n\\t\\t<WriterHeader>\\r\\n\\t\\t\\t<LastWritingDateTime>2018-10-16T16:12:49.4126198+01:00</LastWritingDateTime>\\r\\n\\t\\t\\t<WriterID>916578CA-FE0D-474E-A4FC-9E1719892369</WriterID>\\r\\n\\t\\t\\t<WriterName>AutomationML Editor</WriterName>\\r\\n\\t\\t\\t<WriterProjectID>unspecified</WriterProjectID>\\r\\n\\t\\t\\t<WriterProjectTitle>unspecified</WriterProjectTitle>\\r\\n\\t\\t\\t<WriterRelease>4.7.0.0</WriterRelease>\\r\\n\\t\\t\\t<WriterVendor>AutomationML e.V.</WriterVendor>\\r\\n\\t\\t\\t<WriterVendorURL>www.AutomationML.org</WriterVendorURL>\\r\\n\\t\\t\\t<WriterVersion>4.7.0.0</WriterVersion>\\r\\n\\t\\t</WriterHeader>\\r\\n\\t</AdditionalInformation>\\r\\n\\t<AdditionalInformation AutomationMLVersion=\\\"2.0\\\" />\\r\\n\\t<InstanceHierarchy ID=\\\"90a789b3-d644-43f7-b8ec-fdfda0bdbbcd\\\" Name=\\\"AASManifest\\\">\\r\\n\\t\\t<InternalElement ID=\\\"611c9074-ad8d-47c1-a26f-3d8d9f517ae1\\\" Name=\\\"Header\\\">\\r\\n\\t\\t\\t<InternalElement ID=\\\"2eda359b-8f68-4a8e-84be-b32f2e16d7a2\\\" Name=\\\"Identifiers\\\"><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Asset&amp;AASIdentification\\\" />\\r\\n\\t\\t\\t\\t\\r\\n\\t\\t\\t</InternalElement>\\r\\n\\t\\t\\t\\r\\n\\t\\t</InternalElement>\\r\\n\\t\\t<InternalElement ID=\\\"b66b5437-4fee-4ccb-8009-1d28c8159f9e\\\" Name=\\\"Body\\\">\\r\\n\\t\\t\\t\\r\\n\\t\\t\\t\\r\\n\\t\\t\\t<SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/SubmodelContainer\\\" />\\r\\n\\t\\t</InternalElement>\\r\\n\\t\\t<Version>1.0.0</Version>\\r\\n\\t</InstanceHierarchy>\\r\\n\\t<InterfaceClassLib Name=\\\"AASInterfaceClassLib\\\">\\r\\n\\t\\t<InterfaceClass Name=\\\"SupportedDataConnectors\\\">\\r\\n\\t\\t\\t<InterfaceClass Name=\\\"Connector\\\" RefBaseClassPath=\\\"AASInterfaceClassLib/SupportedDataConnectors\\\">\\r\\n\\t\\t\\t\\t<Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"Address\\\">\\r\\n\\t\\t\\t\\t\\t<Value>-</Value>\\r\\n\\t\\t\\t\\t</Attribute>\\r\\n\\t\\t\\t\\t<InterfaceClass Name=\\\"OPCUAConnector\\\" RefBaseClassPath=\\\"AASInterfaceClassLib/SupportedDataConnectors/Connector\\\">\\r\\n\\t\\t\\t\\t\\t<Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"ItemOPCUAAddress\\\">\\r\\n\\t\\t\\t\\t\\t\\t<Value>-</Value>\\r\\n\\t\\t\\t\\t\\t</Attribute>\\r\\n\\t\\t\\t\\t\\t<Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"Action\\\">\\r\\n\\t\\t\\t\\t\\t\\t<Constraint Name=\\\"ActionValueList\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<NominalScaledType>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<RequiredValue>READ</RequiredValue>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<RequiredValue>WRITE</RequiredValue>\\r\\n\\t\\t\\t\\t\\t\\t\\t</NominalScaledType>\\r\\n\\t\\t\\t\\t\\t\\t</Constraint>\\r\\n\\t\\t\\t\\t\\t\\t<Value>-</Value>\\r\\n\\t\\t\\t\\t\\t</Attribute>\\r\\n\\t\\t\\t\\t</InterfaceClass>\\r\\n\\t\\t\\t\\t<InterfaceClass Name=\\\"RESTConnector\\\" RefBaseClassPath=\\\"AASInterfaceClassLib/SupportedDataConnectors/Connector\\\">\\r\\n\\t\\t\\t\\t\\t<Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"Method\\\">\\r\\n\\t\\t\\t\\t\\t\\t<Constraint Name=\\\"MethodValueList\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<NominalScaledType>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<RequiredValue>GET</RequiredValue>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<RequiredValue>POST</RequiredValue>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<RequiredValue>PUT</RequiredValue>\\r\\n\\t\\t\\t\\t\\t\\t\\t</NominalScaledType>\\r\\n\\t\\t\\t\\t\\t\\t</Constraint>\\r\\n\\t\\t\\t\\t\\t\\t<Value>-</Value>\\r\\n\\t\\t\\t\\t\\t</Attribute>\\r\\n\\t\\t\\t\\t</InterfaceClass>\\r\\n\\t\\t\\t\\t<InterfaceClass Name=\\\"AMQPConnector\\\" RefBaseClassPath=\\\"AASInterfaceClassLib/SupportedDataConnectors/Connector\\\">\\r\\n\\t\\t\\t\\t\\t<Attribute Name=\\\"ReadFrom\\\" />\\r\\n\\t\\t\\t\\t\\t<Attribute Name=\\\"Exchange_QueueName\\\" />\\r\\n\\t\\t\\t\\t</InterfaceClass>\\r\\n\\t\\t\\t</InterfaceClass>\\r\\n\\t\\t</InterfaceClass>\\r\\n\\t\\t<Version>1.0.0</Version>\\r\\n\\t</InterfaceClassLib>\\r\\n\\t<RoleClassLib Name=\\\"AASManifestRoleClassLib\\\">\\r\\n\\t\\t<RoleClass Name=\\\"PropertyContainer\\\" />\\r\\n\\t\\t<RoleClass Name=\\\"Statement\\\" />\\r\\n\\t\\t<RoleClass Name=\\\"FunctionalityExposed\\\" />\\r\\n\\t\\t<RoleClass Name=\\\"Asset&amp;AASIdentification\\\" />\\r\\n\\t\\t<RoleClass Name=\\\"SubmodelContainer\\\" />\\r\\n\\t\\t<Version></Version>\\r\\n\\t</RoleClassLib>\\r\\n\\t<SystemUnitClassLib Name=\\\"ASSSystemUnitClassLib\\\">\\r\\n\\t\\t<SystemUnitClass Name=\\\"Submodel\\\">\\r\\n\\t\\t\\t<SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/PropertyContainer\\\" />\\r\\n\\t\\t</SystemUnitClass>\\r\\n\\t\\t<SystemUnitClass Name=\\\"Property\\\">\\r\\n\\t\\t\\t<Attribute Name=\\\"ExpressionLogic\\\">\\r\\n\\t\\t\\t\\t<Constraint Name=\\\"ExpressionLogicList\\\">\\r\\n\\t\\t\\t\\t\\t<NominalScaledType>\\r\\n\\t\\t\\t\\t\\t\\t<RequiredValue>EQUAL</RequiredValue>\\r\\n\\t\\t\\t\\t\\t\\t<RequiredValue>LESS</RequiredValue>\\r\\n\\t\\t\\t\\t\\t</NominalScaledType>\\r\\n\\t\\t\\t\\t</Constraint>\\r\\n\\t\\t\\t\\t<Value>-</Value>\\r\\n\\t\\t\\t</Attribute>\\r\\n\\t\\t\\t<Attribute Name=\\\"Views\\\">\\r\\n\\t\\t\\t\\t<Constraint Name=\\\"ViewsList\\\">\\r\\n\\t\\t\\t\\t\\t<NominalScaledType>\\r\\n\\t\\t\\t\\t\\t\\t<RequiredValue>PERFORMANCE</RequiredValue>\\r\\n\\t\\t\\t\\t\\t\\t<RequiredValue>BUSINESS</RequiredValue>\\r\\n\\t\\t\\t\\t\\t</NominalScaledType>\\r\\n\\t\\t\\t\\t</Constraint>\\r\\n\\t\\t\\t\\t<Value>-</Value>\\r\\n\\t\\t\\t</Attribute>\\r\\n\\t\\t\\t\\r\\n\\t\\t\\t<Attribute Name=\\\"ValueList\\\">\\r\\n\\t\\t\\t\\t<Constraint Name=\\\"ValueListList\\\">\\r\\n\\t\\t\\t\\t\\t<NominalScaledType>\\r\\n\\t\\t\\t\\t\\t\\t<RequiredValue>n/a</RequiredValue>\\r\\n\\t\\t\\t\\t\\t\\t<RequiredValue>0..*</RequiredValue>\\r\\n\\t\\t\\t\\t\\t\\t<RequiredValue>{}</RequiredValue>\\r\\n\\t\\t\\t\\t\\t</NominalScaledType>\\r\\n\\t\\t\\t\\t</Constraint>\\r\\n\\t\\t\\t\\t<Value>n/a</Value>\\r\\n\\t\\t\\t</Attribute>\\r\\n\\t\\t\\t<Attribute AttributeDataType=\\\"-\\\" Name=\\\"Value\\\" Unit=\\\"-\\\">\\r\\n\\t\\t\\t\\t<Description>-</Description>\\r\\n\\t\\t\\t\\t<Value>-</Value>\\r\\n\\t\\t\\t</Attribute><Attribute Name=\\\"ValueFormat\\\" AttributeDataType=\\\"xs:string\\\"><Value>-</Value></Attribute>\\r\\n\\t\\t\\t<Attribute Name=\\\"ExpressionSemantic\\\">\\r\\n\\t\\t\\t\\t<Constraint Name=\\\"ExpressionSemanticList\\\">\\r\\n\\t\\t\\t\\t\\t<NominalScaledType>\\r\\n\\t\\t\\t\\t\\t\\t<RequiredValue>n/a</RequiredValue>\\r\\n\\t\\t\\t\\t\\t\\t<RequiredValue>MEASUREMENT</RequiredValue><RequiredValue>CONFIRMATION</RequiredValue>\\r\\n\\t\\t\\t\\t\\t</NominalScaledType>\\r\\n\\t\\t\\t\\t</Constraint>\\r\\n\\t\\t\\t\\t<Value>n/a</Value>\\r\\n\\t\\t\\t</Attribute>\\r\\n\\t\\t\\t<SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" />\\r\\n\\t\\t</SystemUnitClass>\\r\\n\\t\\t<Version>1.0.0</Version>\\r\\n\\t</SystemUnitClassLib>\\r\\n</CAEXFile>\\r\\n\"); \n\nvar interfaces = os.networkInterfaces();\nvar addresses = [];\n\nfor (var k in interfaces) {\n    for (var k2 in interfaces[k]) {\n        var address = interfaces[k][k2];\n        if (address.family === 'IPv4' && !address.internal) {\n            addresses.push(address.address);\n        }\n    }\n}\ncontext.global.set('namespace',\"http://\" + addresses[0] + \":\" + context.global.get('uiPort'));\n\n//Retrieving the home directory\nvar homedirectory = os.homedir();\n//Building up the model directory\nvar asmodels = \".asmodels\";\nvar modelDir = path.join(homedirectory, asmodels);\ncontext.global.set(\"ModelDir\", modelDir);\n//Building up the path to find the models\nvar fileName = \"Aml_as_manifest.xml\";\n\nvar filePath = path.join(homedirectory, asmodels, fileName);\ncontext.global.set(\"ModelFilePath\", filePath);\n//Building up the path to load connectors\n//msg.filename = filePath;\nreturn msg;\n","outputs":1,"noerr":0,"x":390,"y":420,"wires":[[]]},{"id":"90a81e5d.343b4","type":"debug","z":"7d8ace.ba650534","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":395,"y":869,"wires":[]},{"id":"572d7e2f.2419d8","type":"debug","z":"7d8ace.ba650534","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1050,"y":940,"wires":[]},{"id":"8d34d40d.5bfd48","type":"actionflows_in","z":"27aab035.83aa3","name":"imInform in","priority":"50","links":[],"scope":"global","x":160,"y":160,"wires":[["be9a25d3.f50048","ff3b0ba3.f90048"]]},{"id":"25aa74be.7e5574","type":"actionflows_out","z":"27aab035.83aa3","name":"imInform out","links":[],"x":1730,"y":160,"wires":[]},{"id":"ef9b8779.bea68","type":"unsafe-function","z":"27aab035.83aa3","name":"PayloadProcessing","func":"var msg1 = {};\n\n//msg1.topic = context.global.get('AASIdentifier');\nmsg1.topic = msg.payload.dataSourceManifestReferenceID;\nmsg1.payload = msg.payload;\n\nreturn msg1;","outputs":1,"noerr":0,"x":1070,"y":140,"wires":[["1765561f.22337a","efc9561f.b62718","25aa74be.7e5574"]]},{"id":"4af6ddca.0eea2c","type":"json","z":"27aab035.83aa3","name":"","property":"payload","action":"","pretty":false,"x":850,"y":140,"wires":[["ef9b8779.bea68"]]},{"id":"1765561f.22337a","type":"debug","z":"27aab035.83aa3","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1290,"y":60,"wires":[]},{"id":"efc9561f.b62718","type":"mqtt out","z":"27aab035.83aa3","name":"","topic":"","qos":"","retain":"","broker":"1d81f70b.03e8d1","x":1290,"y":100,"wires":[]},{"id":"ff3b0ba3.f90048","type":"change","z":"27aab035.83aa3","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"thingsboard","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":370,"y":160,"wires":[["852effae.a9227"]]},{"id":"852effae.a9227","type":"switch","z":"27aab035.83aa3","name":"","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"mqtt","vt":"str"},{"t":"eq","v":"thingsboard","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":580,"y":160,"wires":[["4af6ddca.0eea2c"],["cf1fc431.4208a8"]]},{"id":"23fcb89e.3ff6e","type":"mqtt out","z":"27aab035.83aa3","name":"","topic":"v1/devices/me/telemetry","qos":"","retain":"","broker":"1683b072.02027","x":1390,"y":260,"wires":[]},{"id":"aea7d833.c51968","type":"unsafe-function","z":"27aab035.83aa3","name":"PayloadProcessing","func":"var msg1 = {};\nmsg1.payload = {};\nvar key = msg.payload.dataSourceManifestReferenceID;\n//var key = \"observation\";\nmsg1.payload[key] = JSON.stringify(msg.payload);\nvar date = new Date(msg.payload.collectionTimestamp.string);\nmsg1.payload.ts = date.getTime();\nvar values = {};\nvalues[key + \"_col_ts\"] = msg.payload.value;\nmsg1.payload.values = values;\n//msg1.payload = JSON.stringify(msg1[msg.payload.dataSourceManifestReferenceID]);\n//msg1.topic = context.global.get('AASIdentifier');\n//msg1.topic = msg.payload.dataSourceManifestReferenceID;\n//msg1.payload = msg.payload;\n\nreturn msg1;","outputs":1,"noerr":0,"x":1070,"y":220,"wires":[["25aa74be.7e5574","cf796c09.72b8c","23fcb89e.3ff6e"]]},{"id":"dfd09768.ae65a8","type":"comment","z":"27aab035.83aa3","name":"To MQTT within ThingsBoard","info":"","x":1100,"y":180,"wires":[]},{"id":"cf1fc431.4208a8","type":"json","z":"27aab035.83aa3","name":"","property":"payload","action":"","pretty":false,"x":850,"y":180,"wires":[["aea7d833.c51968","ccc526fe.df82e"]]},{"id":"137fcaad.793f75","type":"comment","z":"27aab035.83aa3","name":"To MQTT","info":"","x":1040,"y":100,"wires":[]},{"id":"d7dd4bd1.24611","type":"inject","z":"4e17cbaa.9e3b0c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":180,"y":540,"wires":[["7bbe3d5e.e129ac"]]},{"id":"7bbe3d5e.e129ac","type":"function","z":"4e17cbaa.9e3b0c","name":"","func":"var datastreaming = context.global.get(\"DataStreamingEndpoint\");\ndatastreaming = \"http://84.254.42.48:58002\";\ncontext.global.set(\"DataStreamingEndpoint\", datastreaming);\nvar registry = \"http://84.254.42.48:58001\";\ncontext.global.set(\"RegistryEndpoint\", registry);\nreturn msg;","outputs":1,"noerr":0,"x":370,"y":540,"wires":[[]]},{"id":"53b43746.4836a8","type":"debug","z":"6ba1a42a.072f84","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":620,"y":127.5,"wires":[]},{"id":"5705b4df.3da5c4","type":"debug","z":"6ba1a42a.072f84","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":758.75,"y":128.75,"wires":[]},{"id":"7965d403.98c0dc","type":"debug","z":"6ba1a42a.072f84","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1450,"y":1340,"wires":[]},{"id":"be9a25d3.f50048","type":"debug","z":"27aab035.83aa3","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":317.77783203125,"y":92.22222137451172,"wires":[]},{"id":"46bebbb6.0a3bb4","type":"debug","z":"6ba1a42a.072f84","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1010,"y":540,"wires":[]},{"id":"cf796c09.72b8c","type":"debug","z":"27aab035.83aa3","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1250,"y":340,"wires":[]},{"id":"d6bfb788.bf899","type":"inject","z":"27aab035.83aa3","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":800,"y":280,"wires":[["aea7d833.c51968"]]},{"id":"ccc526fe.df82e","type":"debug","z":"27aab035.83aa3","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":990,"y":340,"wires":[]},{"id":"fbf2795f.6b126","type":"comment","z":"8267c016.e4a32","name":"/Initialize","info":"","x":480,"y":200,"wires":[]},{"id":"9257fd3a.351288","type":"telegram command","z":"8267c016.e4a32","name":"/getSubmodels","command":"/getSubmodels","bot":"280e2990.5b984e","strict":false,"x":360,"y":844,"wires":[["1e29f60.9870b0a"],[]]},{"id":"71f8ab9a.24b89c","type":"function","z":"8267c016.e4a32","name":"send submodels","func":"var XML = context.global.get('XML');\nvar xml_string_composed = XML.stringify(msg.payload, 'InternalElement');\n\nmsg.payload.content = xml_string_composed;\nmsg.payload.type = 'message';\nmsg.payload.chatId = msg.originalMessage.chat.id;\n\n/* type can be one of the following\nphoto\naudio\nvideo\nsticker\nvoice\ndocument\n*/\n\nreturn msg;","outputs":1,"noerr":0,"x":920,"y":844,"wires":[["42f67316.b3f8b4"]]},{"id":"42f67316.b3f8b4","type":"telegram sender","z":"8267c016.e4a32","name":"","bot":"280e2990.5b984e","x":1270,"y":844,"wires":[[]]},{"id":"1e29f60.9870b0a","type":"actionflows","z":"8267c016.e4a32","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"readSubmodels","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":680,"y":844,"wires":[["71f8ab9a.24b89c"]]},{"id":"7a575053.d0a91","type":"telegram command","z":"8267c016.e4a32","name":"/getManifest","command":"/getManifest","bot":"280e2990.5b984e","strict":false,"x":350,"y":635,"wires":[["d920ec0b.a3fdc8"],[]]},{"id":"d920ec0b.a3fdc8","type":"function","z":"8267c016.e4a32","name":"send manifest","func":"msg.payload.content = context.global.get('ModelFilePath');\nmsg.payload.type = 'document';\n\n/* type can be one of the following\nphoto\naudio\nvideo\nsticker\nvoice\ndocument\n*/\n\nreturn msg;","outputs":1,"noerr":0,"x":720,"y":635,"wires":[["806a0930.926e08"]]},{"id":"806a0930.926e08","type":"telegram sender","z":"8267c016.e4a32","name":"","bot":"280e2990.5b984e","x":1270,"y":635,"wires":[[]]},{"id":"2787395d.5cec86","type":"telegram command","z":"8267c016.e4a32","name":"/getDataStreamingConnectionDetails","command":"/getDataStreamingConnectionDetails","bot":"280e2990.5b984e","strict":false,"x":420,"y":480,"wires":[["a5e1ec7a.26d5d8"],[]]},{"id":"a5e1ec7a.26d5d8","type":"function","z":"8267c016.e4a32","name":"send DataStreaming Connection Details","func":"msg.payload.content = context.global.get('DataStreamingEndpoint');\nmsg.payload.type = 'message';\n\n/* type can be one of the following\nphoto\naudio\nvideo\nsticker\nvoice\ndocument\n*/\n\nreturn msg;","outputs":1,"noerr":0,"x":800,"y":480,"wires":[["2c8c787d.24d7e8"]]},{"id":"2c8c787d.24d7e8","type":"telegram sender","z":"8267c016.e4a32","name":"","bot":"280e2990.5b984e","x":1270,"y":480,"wires":[[]]},{"id":"4689d7f3.853ce8","type":"telegram command","z":"8267c016.e4a32","name":"/getRegistryConnectionDetails","command":"/getRegistryConnectionDetails","bot":"280e2990.5b984e","strict":false,"x":400,"y":400,"wires":[["6718a21.5b8af5c"],[]]},{"id":"6718a21.5b8af5c","type":"function","z":"8267c016.e4a32","name":"send Registry Connection Details","func":"msg.payload.content = context.global.get('RegistryEndpoint');\nmsg.payload.type = 'message';\n\n/* type can be one of the following\nphoto\naudio\nvideo\nsticker\nvoice\ndocument\n*/\n\nreturn msg;","outputs":1,"noerr":0,"x":780,"y":400,"wires":[["d717ddf5.671d2"]]},{"id":"d717ddf5.671d2","type":"telegram sender","z":"8267c016.e4a32","name":"","bot":"280e2990.5b984e","x":1270,"y":400,"wires":[[]]},{"id":"e107cf1.995843","type":"telegram command","z":"8267c016.e4a32","name":"/getAASIdentifier","command":"/getAASIdentifier","bot":"280e2990.5b984e","strict":false,"x":360,"y":560,"wires":[["ee9ab9ed.808a1"],[]]},{"id":"ee9ab9ed.808a1","type":"function","z":"8267c016.e4a32","name":"send AAS Identifier","func":"msg.payload.content = context.global.get('AASIdentifier');\nmsg.payload.type = 'message';\n\n/* type can be one of the following\nphoto\naudio\nvideo\nsticker\nvoice\ndocument\n*/\n\nreturn msg;","outputs":1,"noerr":0,"x":730,"y":560,"wires":[["68ea8e2c.19d0e8"]]},{"id":"68ea8e2c.19d0e8","type":"telegram sender","z":"8267c016.e4a32","name":"","bot":"280e2990.5b984e","x":1270,"y":560,"wires":[[]]},{"id":"18b2aee0.6bf2d1","type":"unsafe-function","z":"27aab035.83aa3","name":"PayloadProcessing","func":"var msg1 = {};\nmsg1.payload = {};\n//var key = msg.payload.dataSourceManifestReferenceID;\nvar key = \"observation\";\nmsg1.payload[key] = JSON.stringify(msg.payload);\n//msg1.payload = JSON.stringify(msg1[msg.payload.dataSourceManifestReferenceID]);\n//msg1.topic = context.global.get('AASIdentifier');\n//msg1.topic = msg.payload.dataSourceManifestReferenceID;\n//msg1.payload = msg.payload;\n\nreturn msg1;","outputs":1,"noerr":0,"x":1101,"y":769,"wires":[[]]},{"id":"dd06ef33.c59b9","type":"debug","z":"2e7b7c8b.80c47c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":520,"y":220,"wires":[]}]