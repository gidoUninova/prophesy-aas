[{"id":"2a540cc7.026154","type":"tab","label":"AAS - External Interface","disabled":false,"info":""},{"id":"8eb9b9b8.c0df48","type":"tab","label":"AAS - Component Manager","disabled":false,"info":""},{"id":"d615cce6.1a41c","type":"tab","label":"AAS - Manifest","disabled":false,"info":""},{"id":"6d97086b.090b98","type":"tab","label":"DataStreaming - SouthboundInterface (PROPHESY)","disabled":false,"info":""},{"id":"6f5697aa.38c758","type":"tab","label":"AAS - UserInterface","disabled":false,"info":""},{"id":"e8827dd4.9f445","type":"tab","label":"AAS - Bot Manager","disabled":true,"info":""},{"id":"ef6160d1.7c319","type":"tab","label":"RESTdriver - SouthboundInterface","disabled":false,"info":""},{"id":"927cab2b.acef18","type":"tab","label":"SNMPdriver - SouthboundInterface","disabled":false,"info":""},{"id":"2dc3c8a2.8eb818","type":"tab","label":"WebDocs","disabled":true,"info":""},{"id":"ddaf1ac4.429e18","type":"tab","label":"AAS - NorthboundInterface","disabled":false,"info":""},{"id":"45d2dea1.5ee6","type":"tab","label":"ExternalApplicationThingsBoardConnector","disabled":false,"info":""},{"id":"f12812f1.b3e42","type":"tab","label":"ExternalApplicationSHARE","disabled":false,"info":""},{"id":"b9d9d9b3.744408","type":"subflow","name":"AML_Manifest_RetrievingSubmodels","info":"","category":"as_subflows","in":[{"x":120,"y":240,"wires":[]}],"out":[{"x":873.3333129882812,"y":240.00001525878906,"wires":[]}]},{"id":"d9180baf.1f0b3","type":"subflow","name":"AML_Manifest_AddSubmodel","info":"","category":"as_subflows","in":[{"x":48.333343505859375,"y":180,"wires":[]}],"out":[{"x":978,"y":186,"wires":[]}]},{"id":"d22a217c.611cf","type":"subflow","name":"AML_Manifest_RetrievingHeaders","info":"","category":"as_subflows","in":[{"x":94.99996948242188,"y":300,"wires":[]}],"out":[{"x":840,"y":300,"wires":[]}]},{"id":"edf29731.99346","type":"subflow","name":"OpenAAS_Manifest_RetrievingHeaders","info":"","category":"as_subflows","in":[{"x":220,"y":80,"wires":[]}],"out":[{"x":860,"y":80,"wires":[]}]},{"id":"b3967a98.7bd668","type":"subflow","name":"OpenAAS_Manifest_RetrievingSubmodels","info":"","category":"as_subflows","in":[{"x":60,"y":80,"wires":[]}],"out":[{"x":1100,"y":220,"wires":[]}]},{"id":"6a2989.2b1ea678","type":"subflow","name":"OpenAAS_Manifest_RetrievingPropertyById","info":"","category":"as_subflows","in":[{"x":40,"y":40,"wires":[]}],"out":[{"x":1180,"y":200,"wires":[]}]},{"id":"a6e18902.7b35d8","type":"subflow","name":"AddFlowFromFile","info":"","category":"","in":[{"x":171.6666259765625,"y":196.66673278808594,"wires":[]}],"out":[{"x":1064.9996948242188,"y":196.66673278808594,"wires":[]}]},{"id":"32545645.ac53e2","type":"subflow","name":"AML_Manifest_RetrievingSubmodelById","info":"","category":"as_subflows","in":[{"x":48.333343505859375,"y":180,"wires":[]}],"out":[{"x":820,"y":180,"wires":[]}]},{"id":"d6703d6b.ec7c7","type":"subflow","name":"AML_Manifest_RemoveSubmodel","info":"","category":"as_subflows","in":[{"x":62,"y":270,"wires":[]}],"out":[{"x":992,"y":278,"wires":[]}]},{"id":"a95355c.29c89a8","type":"subflow","name":"AML_Manifest_UpdateSubmodel","info":"","category":"as_subflows","in":[{"x":100,"y":220,"wires":[]}],"out":[{"x":1040,"y":224,"wires":[]}]},{"id":"273d5036.a3442","type":"subflow","name":"DeleteFlowsFromDirectory","info":"","category":"as_subflows","in":[{"x":222.3333740234375,"y":375.46429443359375,"wires":[]}],"out":[{"x":1326,"y":322,"wires":[]}]},{"id":"9b0db7c7.e3ad48","type":"subflow","name":"Manifest","info":"","category":"as_subflows","in":[],"out":[]},{"id":"3bcb972f.6d23c8","type":"subflow","name":"APILogger","info":"","category":"","in":[{"x":413.88330078125,"y":302.8833312988281,"wires":[{"id":"abfb596f.080a8"}]}],"out":[]},{"id":"b0b49eac.8f39e8","type":"ui_base","theme":{"name":"theme-custom","lightTheme":{"default":"#0094CE","baseColor":"#0094CE","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"darkTheme":{"default":"#097479","baseColor":"#097479","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"customTheme":{"name":"AASGreen","default":"#4B7930","baseColor":"#14524e","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","reset":false},"themeState":{"base-color":{"default":"#14524e","value":"#14524e","edited":true},"page-titlebar-backgroundColor":{"value":"#14524e","edited":false},"page-backgroundColor":{"value":"#f0f0f0","edited":true},"page-sidebar-backgroundColor":{"value":"#ffffff","edited":true},"group-textColor":{"value":"#000000","edited":true},"group-borderColor":{"value":"#ffffff","edited":true},"group-backgroundColor":{"value":"#ffffff","edited":true},"widget-textColor":{"value":"#000000","edited":true},"widget-backgroundColor":{"value":"#14524e","edited":true},"widget-borderColor":{"value":"#ffffff","edited":true},"base-font":{"value":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"}},"angularTheme":{"primary":"indigo","accents":"blue","warn":"red","background":"grey"}},"site":{"name":"PROPHESY - Asset Administration Shell","hideToolbar":"false","allowSwipe":"false","lockMenu":"true","allowTempTheme":"true","dateFormat":"DD/MM/YYYY","sizes":{"sx":48,"sy":48,"gx":6,"gy":6,"cx":6,"cy":6,"px":0,"py":0}}},{"id":"9a7b1b88.32cc4","type":"ui_group","z":"","name":"Commands","tab":"b0749fcb.caa5c","order":1,"disp":true,"width":"3","collapse":false},{"id":"1d09ad14.bb7613","type":"ui_group","z":"","name":"CPULoad","tab":"708f8cd2.c22b14","order":1,"disp":true,"width":"20","collapse":false},{"id":"3ddfb2b3.b7372e","type":"ui_group","z":"","name":"TCP Connections Establised","tab":"708f8cd2.c22b14","order":8,"disp":true,"width":"8","collapse":false},{"id":"93b67aca.cb61","type":"ui_group","z":"","name":"numeric","tab":"708f8cd2.c22b14","order":2,"disp":true,"width":"4","collapse":false},{"id":"11193e87.ede119","type":"ui_group","z":"","name":"System Up Time","tab":"708f8cd2.c22b14","order":9,"disp":true,"width":"8","collapse":false},{"id":"551247b1.2b4698","type":"ui_spacer","name":"spacer","group":"","order":3,"width":"3","height":"18"},{"id":"7801b126.8686e","type":"ui_spacer","name":"spacer","group":"b93c6fee.cdc1","order":8,"width":"3","height":"10"},{"id":"5adb0d65.1d8b6c","type":"ui_spacer","name":"spacer","group":"2cf81c1a.c087a4","order":7,"width":"3","height":"10"},{"id":"58bde2d6.52a53c","type":"ui_spacer","name":"spacer","group":"9d7444d0.760228","order":6,"width":"3","height":"10"},{"id":"2826d134.b8d476","type":"ui_spacer","name":"spacer","group":"d44f6b71.a207b8","order":5,"width":"10","height":"10"},{"id":"3335064c.59e0a2","type":"ui_spacer","name":"spacer","group":"","order":4,"width":"3","height":"19"},{"id":"a379e8a1.2dd198","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"cert.pem","keyname":"key.pem","caname":"","servername":"","verifyservercert":true},{"id":"92557070.1f765","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"3ec67e45.e7ea8a","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"f4101bfd.7b4878","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"e81cee6c.b6f38","type":"ui_group","z":"","name":"Default","tab":"aa61bed2.5a9338","order":1,"disp":false,"width":"24","collapse":false},{"id":"f13ae9ad.32ccb8","type":"ui_group","z":"","name":"Login","tab":"b0749fcb.caa5c","order":3,"disp":true,"width":"8","collapse":false},{"id":"b0749fcb.caa5c","type":"ui_tab","z":"","name":"Login","icon":"lock","order":7,"disabled":false,"hidden":false},{"id":"395267b0.ccc668","type":"ui_group","z":"","name":"Configuration","tab":"b0749fcb.caa5c","order":2,"disp":true,"width":"20","collapse":false},{"id":"21796e70.28d8b2","type":"ui_tab","z":"","name":"Overview","icon":"home","order":1,"disabled":false,"hidden":false},{"id":"c0201919.ac8d08","type":"ui_group","z":"","name":"Counters","tab":"21796e70.28d8b2","order":1,"disp":true,"width":"10","collapse":false},{"id":"e9159a32.a5fc","type":"ui_group","z":"","name":"AAS Information","tab":"21796e70.28d8b2","order":2,"disp":true,"width":"10","collapse":false},{"id":"aa61bed2.5a9338","type":"ui_tab","z":"","name":"Home","icon":"dashboard","order":9},{"id":"cf9381a0.17dce8","type":"ui_tab","z":"","name":"Logs","icon":"view_list","order":4,"disabled":false,"hidden":false},{"id":"ba5ba4e0.65d9e","type":"ui_spacer","name":"spacer","group":"","order":3,"width":"3","height":"18"},{"id":"18c528ee.bbde0f","type":"ui_spacer","name":"spacer","group":"b93c6fee.cdc1","order":8,"width":"3","height":"10"},{"id":"f0613731.b4a77","type":"ui_spacer","name":"spacer","group":"2cf81c1a.c087a4","order":7,"width":"3","height":"10"},{"id":"4146773c.242088","type":"ui_spacer","name":"spacer","group":"9d7444d0.760228","order":6,"width":"3","height":"10"},{"id":"3a45cd44.12c152","type":"ui_spacer","name":"spacer","group":"d44f6b71.a207b8","order":5,"width":"10","height":"10"},{"id":"eda8ca02.3c5d38","type":"ui_spacer","name":"spacer","group":"","order":4,"width":"3","height":"19"},{"id":"543de4a6.a76bfc","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"cert.pem","keyname":"key.pem","caname":"","servername":"","verifyservercert":true},{"id":"677d213c.3d39e8","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"ffc5a899.b3a528","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"f71ee422.f3ddf8","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"ac595b8b.53edc8","type":"ui_spacer","name":"spacer","group":"","order":4,"width":1,"height":"9"},{"id":"c5878d3c.32d15","type":"ui_group","z":"","name":"Commands","tab":"","order":1,"disp":true,"width":"3","collapse":false},{"id":"db682736.c68b58","type":"ui_group","z":"","name":"CPULoad","tab":"708f8cd2.c22b14","order":5,"disp":true,"width":"20","collapse":false},{"id":"f384eebc.aef8f","type":"ui_spacer","name":"spacer","group":"","order":3,"width":"3","height":"18"},{"id":"c4a40446.756ba8","type":"ui_spacer","name":"spacer","group":"b93c6fee.cdc1","order":8,"width":"3","height":"10"},{"id":"7171602e.e238","type":"ui_spacer","name":"spacer","group":"2cf81c1a.c087a4","order":7,"width":"3","height":"10"},{"id":"8a659e1f.f4e428","type":"ui_spacer","name":"spacer","group":"9d7444d0.760228","order":6,"width":"3","height":"10"},{"id":"b11e5172.f6b988","type":"ui_spacer","name":"spacer","group":"d44f6b71.a207b8","order":5,"width":"10","height":"10"},{"id":"76962106.87284","type":"ui_spacer","name":"spacer","group":"768e00.eab492","order":4,"width":"3","height":"19"},{"id":"768e00.eab492","type":"ui_group","z":"","name":"Commands","tab":"6c93b6c.09bd1c8","order":1,"disp":true,"width":"3","collapse":false},{"id":"95665ea.259a6a","type":"ui_group","z":"","name":"Headers","tab":"6c93b6c.09bd1c8","order":3,"disp":true,"width":"10","collapse":false},{"id":"6c93b6c.09bd1c8","type":"ui_tab","z":"","name":"Manifest","icon":"description","order":2,"disabled":false,"hidden":false},{"id":"f6ab83e8.416e5","type":"ui_group","z":"","name":"Body","tab":"6c93b6c.09bd1c8","order":4,"disp":true,"width":"20","collapse":false},{"id":"29ad3d07.d8e48a","type":"ui_group","z":"","name":"Logs","tab":"cf9381a0.17dce8","order":2,"disp":true,"width":"30","collapse":false},{"id":"dc5b5bab.a3916","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"cert.pem","keyname":"key.pem","caname":"","servername":"","verifyservercert":true},{"id":"38bd00f5.27ec08","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"3589fa2b.6f4866","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"76caa24c.6312bc","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"39f23940.8c51ae","type":"ui_group","z":"","name":"AAS Data Interface","tab":"9c6af04f.fd89c8","order":1,"disp":true,"width":"30","collapse":false},{"id":"9c6af04f.fd89c8","type":"ui_tab","z":"","name":"Data Interfaces","icon":"insert_link","order":3,"disabled":false,"hidden":false},{"id":"86fd9f.309a7a6","type":"ui_group","z":"","name":"Default","tab":"708f8cd2.c22b14","order":3,"disp":false,"width":"24","collapse":false},{"id":"393bcf13.7c294","type":"ui_group","z":"","name":"Login","tab":"b0749fcb.caa5c","order":3,"disp":true,"width":"8","collapse":false},{"id":"bbdefc7.10a7c","type":"ui_group","z":"","name":"Configuration","tab":"","order":2,"disp":true,"width":"20","collapse":false},{"id":"59a9a12f.dc2d08","type":"ui_group","z":"","name":"Counters","tab":"21796e70.28d8b2","order":3,"disp":true,"width":"10","collapse":false},{"id":"ab09af3a.fe2f2","type":"node-red-contrib-httpauthfile","z":"","name":"","authType":"Basic","realm":"myRealm","filePath":"/home/gido/.node-red/httpauth/httpauthfile.txt","hashed":false},{"id":"bc68dcde.54105","type":"ui_group","z":"","name":"AAS Information","tab":"21796e70.28d8b2","order":4,"disp":true,"width":"12","collapse":false},{"id":"708f8cd2.c22b14","type":"ui_tab","z":"","name":"Statistics","icon":"memory","order":6,"disabled":false,"hidden":false},{"id":"21163bff.6beb24","type":"ui_group","z":"","name":"Network Tx/Rx","tab":"708f8cd2.c22b14","order":6,"disp":true,"width":"20","collapse":false},{"id":"48b34339.fd8494","type":"ui_group","z":"","name":"Real-Time RX/TX Monitoring","tab":"708f8cd2.c22b14","order":7,"disp":true,"width":"20","collapse":false},{"id":"24e4a18c.c9b60e","type":"ui_spacer","name":"spacer","group":"","order":3,"width":"3","height":"18"},{"id":"fa3114c4.882fb8","type":"ui_spacer","name":"spacer","group":"b93c6fee.cdc1","order":8,"width":"3","height":"10"},{"id":"d81df1b.82aa01","type":"ui_spacer","name":"spacer","group":"2cf81c1a.c087a4","order":7,"width":"3","height":"10"},{"id":"875983bf.fda3d","type":"ui_spacer","name":"spacer","group":"9d7444d0.760228","order":6,"width":"3","height":"10"},{"id":"e8da5e77.98e298","type":"ui_spacer","name":"spacer","group":"d44f6b71.a207b8","order":5,"width":"10","height":"10"},{"id":"c21aedda.84f858","type":"ui_spacer","name":"spacer","group":"","order":4,"width":"3","height":"19"},{"id":"18080732.1003b1","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"cert.pem","keyname":"key.pem","caname":"","servername":"","verifyservercert":true},{"id":"65a2552a.211a9c","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"e311315d.0b4088","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"13bc59f2.2c7e36","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"82638f05.632d68","type":"ui_group","z":"","name":"Commands","tab":"708f8cd2.c22b14","order":4,"disp":true,"width":"3","collapse":false},{"id":"737672ec.f2a194","type":"ui_spacer","name":"spacer","group":"82638f05.632d68","order":4,"width":1,"height":"9"},{"id":"73116aab.5b102c","type":"ui_tab","z":"","name":"Test","icon":"dashboard"},{"id":"747493f1.eec294","type":"ui_group","z":"","name":"Default","tab":"d374f9bc.272d5","order":1,"disp":true,"width":"6","collapse":true},{"id":"d374f9bc.272d5","type":"ui_tab","z":"","name":"Home","icon":"dashboard"},{"id":"67a3a597.dab354","type":"ui_group","z":"","name":"Default","tab":"7815d14f.7c58a","order":1,"disp":true,"width":"6","collapse":true},{"id":"7815d14f.7c58a","type":"ui_tab","z":"","name":"Home","icon":"dashboard"},{"id":"574e8703.290e3","type":"ui_group","z":"","name":"Commands","tab":"cf9381a0.17dce8","order":1,"disp":true,"width":"3","collapse":false},{"id":"7a26a7d8.716968","type":"ui_spacer","name":"spacer","group":"574e8703.290e3","order":2,"width":"3","height":"19"},{"id":"a4c40ea9.7e657","type":"kafka-broker","z":"","broker":"84.254.42.48:58092","clientid":"AAS"},{"id":"161753fe.fe57c4","type":"key-value-store","z":"","filepath":"credentials.json","namespace":"","name":""},{"id":"44d5dc10.f2c87c","type":"ui_tab","z":"","name":"DashTest","icon":"dashboard","disabled":false,"hidden":false},{"id":"3090a7d2.6fef5","type":"ui_group","z":"","name":"Default","tab":"44d5dc10.f2c87c","order":1,"disp":true,"width":"20","collapse":false},{"id":"e38a9a01.1636a","type":"telegram bot","z":"","botname":"AASNodeRedBot","usernames":"","chatids":"","baseapiurl":"","updatemode":"polling","pollinterval":"300","usesocks":false,"sockshost":"","socksport":"6667","socksusername":"anonymous","sockspassword":"","bothost":"","localbotport":"8443","publicbotport":"8443","privatekey":"","certificate":"","useselfsignedcertificate":false,"verboselogging":false},{"id":"9e79146b.c1486","type":"mqtt-broker","z":"","name":"","broker":"192.168.56.101","port":"1883","clientid":"","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"d6c6b8ac.e79d88","type":"mqtt-broker","z":"","name":"","broker":"10.172.67.130","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"c7ae5e0a.4b5bc","type":"mqtt-broker","z":"","name":"","broker":"182.168.0.101","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"355a7b23.ff7144","type":"mqtt-broker","z":"","name":"","broker":"192.168.0.101","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"1d81f70b.03e8d1","type":"mqtt-broker","z":"","name":"","broker":"localhost","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"1683b072.02027","type":"mqtt-broker","z":"","name":"","broker":"192.168.1.98","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthRetain":"false","birthPayload":"","closeTopic":"","closeQos":"0","closeRetain":"false","closePayload":"","willTopic":"","willQos":"0","willRetain":"false","willPayload":""},{"id":"a6dd0a24.a85b58","type":"telegram bot","z":"e8827dd4.9f445","botname":"AASNodeRedBot","usernames":"","chatids":"","baseapiurl":"","updatemode":"polling","pollinterval":"300","usesocks":false,"sockshost":"","socksport":"","socksusername":"","sockspassword":"","bothost":"","localbotport":"8443","publicbotport":"8443","privatekey":"","certificate":"","useselfsignedcertificate":false,"verboselogging":false},{"id":"b99049dd.116568","type":"swagger-doc","z":"","summary":"Test the status of the AAS","description":"","tags":"","consumes":"","produces":"test/html","parameters":[],"responses":{"200":{"description":"OK"},"503":{"description":"Asset Administration Shell not configured"}},"deprecated":false},{"id":"c57e3fb4.a1694","type":"swagger-doc","z":"","summary":"Retrieve the current Manifest document","description":"","tags":"","consumes":"","produces":"","parameters":[],"responses":{"200":{"description":"Manifest aml document","code":"200"}},"deprecated":false},{"id":"c5250d73.d165a","type":"swagger-doc","z":"","summary":"Retrieve the AAS identificators (header part of the Manifest)","description":"AAS headers","tags":"","consumes":"","produces":"","parameters":[],"responses":{"200":{"description":"aml Manifest headers response","code":"200"}},"deprecated":false},{"id":"924a1324.8ff9e","type":"swagger-doc","z":"","summary":"Retrieve the list of the AAS submodels (Body part of the Manifest)","description":"AAS submodels","tags":"","consumes":"","produces":"","parameters":[],"responses":{"200":{"description":"List the submodels in the Manifest"}},"deprecated":false},{"id":"41c7222e.0e68ac","type":"swagger-doc","z":"","summary":"Retrieve the AAS submodel by Id","description":"AAS submodel by Id","tags":"","consumes":"","produces":"","parameters":[{"name":"id","in":"path","description":"submodel identificator","required":true,"type":"string"}],"responses":{"200":{"description":"xml specific submodel"},"404":{"description":"Submodel with id: {id} not found"}},"deprecated":false},{"id":"6001bd67.b9c9b4","type":"swagger-doc","z":"","summary":"","description":"","tags":"","consumes":"","produces":"","parameters":[],"responses":{},"deprecated":false},{"id":"40aec84e.2c4048","type":"ui_group","z":"","name":"Modal","tab":"6c93b6c.09bd1c8","order":5,"disp":false,"width":"6","collapse":false},{"id":"6e7b154.a3323ec","type":"file in","z":"b3967a98.7bd668","name":"","filename":"","format":"utf8","chunk":false,"sendError":false,"x":270,"y":80,"wires":[["21bba6fe.695eea"]]},{"id":"21bba6fe.695eea","type":"json","z":"b3967a98.7bd668","name":"","property":"payload","action":"str","pretty":true,"x":510,"y":80,"wires":[[]]},{"id":"688565cb.e950d4","type":"json","z":"b3967a98.7bd668","name":"","property":"jsonataResult","action":"str","pretty":true,"x":270,"y":220,"wires":[[]]},{"id":"c3413377.5d6f9","type":"file in","z":"6a2989.2b1ea678","name":"","filename":"","format":"utf8","chunk":false,"sendError":false,"x":450,"y":40,"wires":[["7c7a13e9.0af804"]]},{"id":"7c7a13e9.0af804","type":"json","z":"6a2989.2b1ea678","name":"","property":"payload","action":"str","pretty":true,"x":650,"y":40,"wires":[[]]},{"id":"ff81a109.1063d","type":"file in","z":"a6e18902.7b35d8","name":"","filename":"","format":"utf8","chunk":false,"sendError":false,"x":574.9998168945312,"y":196.6666717529297,"wires":[[]]},{"id":"8c910e5f.f6e82","type":"change","z":"a6e18902.7b35d8","name":"","rules":[{"t":"set","p":"filename","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":374.99993896484375,"y":196.6666717529297,"wires":[["ff81a109.1063d"]]},{"id":"deb320d.451cde","type":"file","z":"d9180baf.1f0b3","name":"PersistModel","filename":"","appendNewline":false,"createDir":false,"overwriteFile":"true","x":820,"y":122,"wires":[[]]},{"id":"72497bea.cf152c","type":"file","z":"d6703d6b.ec7c7","name":"PersistModel","filename":"","appendNewline":false,"createDir":false,"overwriteFile":"true","x":846,"y":172,"wires":[[]]},{"id":"76eebcef.e0d8c4","type":"switch","z":"d9180baf.1f0b3","name":"","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"201","vt":"str"},{"t":"eq","v":"409","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":463,"y":180,"wires":[[],[]]},{"id":"2591e3.4c6c761e","type":"file","z":"a95355c.29c89a8","name":"PersistModel","filename":"","appendNewline":false,"createDir":false,"overwriteFile":"true","x":870,"y":158,"wires":[[]]},{"id":"11559d41.5e99b3","type":"switch","z":"a95355c.29c89a8","name":"","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"200","vt":"str"},{"t":"eq","v":"404","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":515,"y":220,"wires":[[],[]]},{"id":"188a980.f272f68","type":"switch","z":"d6703d6b.ec7c7","name":"","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"200","vt":"str"},{"t":"eq","v":"404","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":451,"y":272,"wires":[[],[]]},{"id":"4fb6ae5a.4b75f8","type":"change","z":"273d5036.a3442","name":"","rules":[{"t":"set","p":"paths[\"path_1\"]","pt":"msg","to":"true","tot":"bool"},{"t":"set","p":"msg.paths_correlationId","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":924,"y":314,"wires":[[]]},{"id":"f2101f0.7399f6","type":"change","z":"273d5036.a3442","name":"","rules":[{"t":"set","p":"paths[\"path_2\"]","pt":"msg","to":"true","tot":"bool"},{"t":"set","p":"msg.paths_correlationId","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":922,"y":376,"wires":[[]]},{"id":"b469888e.d4acb","type":"logger","z":"3bcb972f.6d23c8","name":"","filename":"logs.log","maxsize":1,"maxfiles":10,"complete":"true","console":false,"file":true,"debug":false,"zip":false,"logtype":"info","x":1043.6332397460938,"y":298.88336181640625,"wires":[]},{"id":"abfb596f.080a8","type":"unsafe-function","z":"3bcb972f.6d23c8","name":"createLogEntry","func":"//var element = JSON.stringify(msg.payload);\nvar msg1 = {};\nvar outmsg = {};\n//msg1.payload = element;\nmsg1.requestedURL = msg.req.url;\nmsg1.headers = {};\nmsg1.headers[\"user-agent\"] = msg.req.headers[\"user-agent\"];\nmsg1.headers[\"authorization\"] = msg.req.headers[\"authorization\"];\nmsg1.headers[\"content-type\"] = msg.req.headers[\"content-type\"];\nmsg1.headers[\"host\"] = msg.req.headers[\"host\"];\nmsg1.startTime = msg.startTime;\nif(typeof msg.req.client._peername !== 'undefined'){\n    msg1.client = msg.req.client._peername.address;\n} else{\n    msg1.client = \"internal\";\n} \n\nmsg1.endTime = Date.now();\noutmsg.payload = JSON.stringify(msg1);\nreturn outmsg; // msg1;\n","outputs":1,"noerr":0,"x":573.88330078125,"y":302.8833312988281,"wires":[["af5ba88d.9d1c08"]]},{"id":"6058c3b5.137754","type":"actionflows_in","z":"9b0db7c7.e3ad48","name":"readSubmodels in","priority":"50","links":[],"scope":"global","x":258.8833312988281,"y":695.38330078125,"wires":[["8e9460f4.eca648"]]},{"id":"fb58bf32.4a9f18","type":"actionflows_out","z":"9b0db7c7.e3ad48","name":"readSubmodels out","links":[],"x":1397.2166137695312,"y":693.716552734375,"wires":[]},{"id":"c44cc657.4d591","type":"actionflows_in","z":"9b0db7c7.e3ad48","name":"readSubmodel in","priority":"50","links":[],"scope":"global","x":247.383056640625,"y":783.6214599609375,"wires":[["3e3b7dc4.35251a"]]},{"id":"229385db.a64fba","type":"actionflows_out","z":"9b0db7c7.e3ad48","name":"readSubmodel out","links":[],"x":1388.0497436523438,"y":783.9547119140625,"wires":[]},{"id":"72198621.e7b108","type":"actionflows_in","z":"9b0db7c7.e3ad48","name":"addSubmodel in","priority":"50","links":[],"scope":"global","x":250.76412963867188,"y":910.8594818115234,"wires":[["33935ea0.7523fa"]]},{"id":"85044e83.445dc","type":"actionflows_out","z":"9b0db7c7.e3ad48","name":"addSubmodel out","links":[],"x":1387.4309387207031,"y":914.1928558349609,"wires":[]},{"id":"2a2525d.9a621da","type":"actionflows_in","z":"9b0db7c7.e3ad48","name":"removeSubmodel in","priority":"50","links":[],"scope":"global","x":260.7641296386719,"y":1060.8594818115234,"wires":[["d0d84e.903defb"]]},{"id":"3ea9f8b9.6c5198","type":"actionflows_out","z":"9b0db7c7.e3ad48","name":"removeSubmodel out","links":[],"x":1395.7643127441406,"y":1067.5260467529297,"wires":[]},{"id":"8e9dff1c.8264a","type":"actionflows_in","z":"9b0db7c7.e3ad48","name":"updateSubmodel in","priority":"50","links":[],"scope":"global","x":264.4308166503906,"y":1175.192855834961,"wires":[["56a4c120.6852e8"]]},{"id":"f117b947.032448","type":"actionflows_out","z":"9b0db7c7.e3ad48","name":"updateSubmodel out","links":[],"x":1396.4309387207031,"y":1177.8594818115234,"wires":[]},{"id":"f1070c15.699028","type":"unsafe-function","z":"9b0db7c7.e3ad48","name":"PersistModel","func":"var XML = context.global.get('XML');\nvar manifest = context.flow.get('manifest');\n\nvar xml_string_composed = XML.stringify(manifest, 'CAEXFile');\nmsg.payload = xml_string_composed;\n\nreturn msg;","outputs":1,"noerr":0,"x":914.5379943847656,"y":1843.1214447021484,"wires":[["a1a18e6a.6951a"]]},{"id":"a1a18e6a.6951a","type":"file","z":"9b0db7c7.e3ad48","name":"PersistModel","filename":"","appendNewline":false,"createDir":true,"overwriteFile":"true","x":1113.7879943847656,"y":1842.8714447021484,"wires":[["f171b2bd.84e1f8"]]},{"id":"b7f485af.a48e58","type":"unsafe-function","z":"9b0db7c7.e3ad48","name":"RetrievingModelFilePath","func":"msg.filename = context.global.get(\"ModelFilePath\");\nreturn msg;","outputs":1,"noerr":0,"x":565.7879943847656,"y":1845.6214447021484,"wires":[["f1070c15.699028"]]},{"id":"8185e43e.cb06d","type":"actionflows_in","z":"9b0db7c7.e3ad48","name":"persistManifest in","priority":"50","links":[],"scope":"global","x":247.03799438476562,"y":1845.6214447021484,"wires":[["b7f485af.a48e58"]]},{"id":"f171b2bd.84e1f8","type":"actionflows_out","z":"9b0db7c7.e3ad48","name":"persistManifest out","links":[],"x":1368.2878723144531,"y":1841.8714447021484,"wires":[]},{"id":"8e9460f4.eca648","type":"unsafe-function","z":"9b0db7c7.e3ad48","name":"RetrievingSubmodels...","func":"//var xml_string = msg.payload;\n//var XML = context.global.get('XML');\n//var doc = XML.parse( xml_string, { preserveAttributes: true, forceArrays: true  } );\n/*\nvar xml_string_composed = XML.stringify( doc, 'CAEXFile');\nmsg.composed = xml_string_composed;\n*/\n\n/*var parser = null;\n\ntry {\n    parser = new XML.Parser(xml_string, { preserveAttributes: true, forceArrays: true} );\n}\ncatch (err) {\n    throw err;\n}*/\n//var manifest = parser.getTree();\n//var manifest = context.global.get(\"manifest\");\n//var submodelsList = manifest.InstanceHierarchy[0].InternalElement[1].InternalElement[0].InternalElement;\n\n/*if(typeof submodelsList === \"undefined\"){\n    submodelsList = {};\n}*/\n\n//msg.manifest.submodels = submodels;\n//msg.manifest = manifest;\nmsg.payload = context.flow.get(\"body\");\nmsg.AASID = context.flow.get('AASIdentifier');\nreturn msg;","outputs":1,"noerr":0,"x":1029.9546508789062,"y":693.0022583007812,"wires":[["fb58bf32.4a9f18"]]},{"id":"3e3b7dc4.35251a","type":"unsafe-function","z":"9b0db7c7.e3ad48","name":"RetrievingSubmodelById...","func":"var SubmodelId = msg.req.params.id;\nvar submodels = context.flow.get(\"submodels\");\nmsg.AASID = context.flow.get('AASIdentifier');\nfor(var submodelIndex in submodels){\n        var submodel = submodels[submodelIndex];\n        var id = submodel._Attribs.ID; \n        if (id.localeCompare(SubmodelId) === 0){\n                msg.payload = submodel;\n                msg.statusCode = \"200\";\n                return msg;\n        }\n    }\nmsg.statusCode = \"404\";\nmsg.payload = \"submodel with id:\" + SubmodelId + \" not found\"\nreturn msg;","outputs":1,"noerr":0,"x":1026.6211547851562,"y":784.9070434570312,"wires":[["229385db.a64fba"]]},{"id":"33935ea0.7523fa","type":"unsafe-function","z":"9b0db7c7.e3ad48","name":"AddingSubmodel...","func":"//var xml_string = msg.payload;\n//var XML = context.global.get('XML');\n\nvar submodel = msg.payload;\n//var doc = XML.parse( xml_string, { preserveAttributes: true, forceArrays: true  } );\n/*\nvar xml_string_composed = XML.stringify( doc, 'CAEXFile');\nmsg.composed = xml_string_composed;\n*/\n\n/*var parser = null;\n\ntry {\n    parser = new XML.Parser(xml_string, { preserveAttributes: true, forceArrays: true} );\n}\ncatch (err) {\n    throw err;\n}*/\n//var manifest = context.global.get(\"manifest\");\n//var manifest = parser.getTree();\nvar submodels = context.flow.get(\"submodels\");\nmsg.AASID = context.flow.get('AASIdentifier');\nfor(var submodelIndex in submodels){\n    if(submodel._Attribs.ID == submodels[submodelIndex]._Attribs.ID){\n        msg.payload = \"Error submodel ID already exists\";\n        msg.statusCode = \"409\";\n        return msg;\n    }\n}\nsubmodels.push(submodel);\nvar propertiesList = context.flow.get('properties');\nvar properties = submodel.InternalElement;\n    for(var propertyIndex in properties){\n        propertiesList.push(properties[propertyIndex]);\n    }\nmsg.statusCode = \"201\";\nreturn msg;","outputs":1,"noerr":0,"x":805.6689758300781,"y":908.4785614013672,"wires":[["894c904b.b920d"]]},{"id":"894c904b.b920d","type":"switch","z":"9b0db7c7.e3ad48","name":"","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"201","vt":"str"},{"t":"eq","v":"409","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":984.0023498535156,"y":908.4784393310547,"wires":[["a48238e8.a1e858"],["85044e83.445dc"]]},{"id":"a48238e8.a1e858","type":"actionflows","z":"9b0db7c7.e3ad48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"persistManifest","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1178.1689758300781,"y":858.4784393310547,"wires":[["85044e83.445dc"]]},{"id":"d0d84e.903defb","type":"unsafe-function","z":"9b0db7c7.e3ad48","name":"RemovingSubmodel...","func":"//var xml_string = msg.payload;\n//var XML = context.global.get('XML');\n\nvar submodelID = msg.req.params.id;\n//var doc = XML.parse( xml_string, { preserveAttributes: true, forceArrays: true  } );\n/*\nvar xml_string_composed = XML.stringify( doc, 'CAEXFile');\nmsg.composed = xml_string_composed;\n*/\n\n/*var parser = null;\n\ntry {\n    parser = new XML.Parser(xml_string, { preserveAttributes: true, forceArrays: true} );\n}\ncatch (err) {\n    throw err;\n}*/\n//var manifest = context.global.get(\"manifest\");\n//var manifest = parser.getTree();\nmsg.AASID = context.flow.get('AASIdentifier');\nvar submodels = context.flow.get(\"submodels\");\nfor(var submodelIndex in submodels){\n    if(submodelID == submodels[submodelIndex]._Attribs.ID){\n        var submodel = submodels[submodelIndex];\n        submodels.splice(submodelIndex, 1);\n        msg.statusCode = \"200\";\n        var propertiesList = context.flow.get('properties');\n        var properties = submodel.InternalElement;\n        for(var propertyIndex in properties){\n            for(var propertyIndex2 in propertiesList){\n                if(properties[propertyIndex]._Attribs.ID == propertiesList[propertyIndex2]._Attribs.ID){\n                    propertiesList.splice(propertyIndex2, 1);\n                }\n            }\n        }\n        return msg;\n    }\n}\n\nmsg.payload = \"Error Submodel not found for Id: \" + submodelID;\nmsg.statusCode = \"404\";\nreturn msg;","outputs":1,"noerr":0,"x":810.6688537597656,"y":1060.1451873779297,"wires":[["eb54f19e.3c9c"]]},{"id":"eb54f19e.3c9c","type":"switch","z":"9b0db7c7.e3ad48","name":"","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"200","vt":"str"},{"t":"eq","v":"404","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":984.0022277832031,"y":1060.1450653076172,"wires":[["f0fd7ec2.ab3ea8"],["3ea9f8b9.6c5198"]]},{"id":"f0fd7ec2.ab3ea8","type":"actionflows","z":"9b0db7c7.e3ad48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"persistManifest","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1179.0022277832031,"y":1015.1451873779297,"wires":[["3ea9f8b9.6c5198"]]},{"id":"56a4c120.6852e8","type":"unsafe-function","z":"9b0db7c7.e3ad48","name":"UpdatingSubmodel...","func":"var submodel = msg.payload;\n/*\nvar xml_string_composed = XML.stringify( doc, 'CAEXFile');\nmsg.composed = xml_string_composed;\n*/\n\n/*var parser = null;\n\ntry {\n    parser = new XML.Parser(xml_string, { preserveAttributes: true, forceArrays: true} );\n}\ncatch (err) {\n    throw err;\n}*/\n//var manifest = context.global.get(\"manifest\");\n//var manifest = parser.getTree();\nmsg.AASID = context.flow.get('AASIdentifier');\nvar submodels = context.flow.get(\"submodels\");\nfor(var submodelIndex in submodels){\n    if(submodel._Attribs.ID == submodels[submodelIndex]._Attribs.ID){\n        submodels[submodelIndex] = submodel;\n        msg.statusCode = \"200\";\n        var propertiesList = context.flow.get('properties');\n        var properties = submodel.InternalElement;\n        for(var propertyIndex in properties){\n            propertiesList.push(properties[propertyIndex]);\n        }\n        return msg;\n    }\n}\nmsg.statusCode = \"404\";\nreturn msg;","outputs":1,"noerr":0,"x":810.6688537597656,"y":1173.478256225586,"wires":[["c636c7cb.546c08"]]},{"id":"c636c7cb.546c08","type":"switch","z":"9b0db7c7.e3ad48","name":"","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"200","vt":"str"},{"t":"eq","v":"404","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":990.6688537597656,"y":1173.4781341552734,"wires":[["4061947c.fb7344"],["f117b947.032448"]]},{"id":"4061947c.fb7344","type":"actionflows","z":"9b0db7c7.e3ad48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"persistManifest","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1180.6688537597656,"y":1136.8118133544922,"wires":[["f117b947.032448"]]},{"id":"9297148c.30c39","type":"actionflows_in","z":"9b0db7c7.e3ad48","name":"readManifest in","priority":"50","links":[],"scope":"global","x":249.71652221679688,"y":494.9071350097656,"wires":[["59d5604f.f50e28"]]},{"id":"1207866d.ce98a2","type":"actionflows_out","z":"9b0db7c7.e3ad48","name":"readManifest out","links":[],"x":1395.4307861328125,"y":497.7642517089844,"wires":[]},{"id":"59d5604f.f50e28","type":"unsafe-function","z":"9b0db7c7.e3ad48","name":"RetrievingManifest...","func":"msg.payload = context.flow.get(\"manifest\");\nmsg.AASID = context.flow.get('AASIdentifier');\nreturn msg;","outputs":1,"noerr":0,"x":999.0023193359375,"y":496.33563232421875,"wires":[["1207866d.ce98a2"]]},{"id":"7f94785f.d22cd","type":"actionflows_in","z":"9b0db7c7.e3ad48","name":"readProperty in","priority":"50","links":[],"scope":"global","x":249.002197265625,"y":1289.1929168701172,"wires":[["4f0df6f2.b45f98"]]},{"id":"ff39d4e7.3135","type":"actionflows_out","z":"9b0db7c7.e3ad48","name":"readProperty out","links":[],"x":1389.6688842773438,"y":1289.5261688232422,"wires":[]},{"id":"4f0df6f2.b45f98","type":"unsafe-function","z":"9b0db7c7.e3ad48","name":"RetrievingPropertyById...","func":"msg.AASID = context.flow.get('AASIdentifier');\nvar propertyId = msg.req.params.id;\nvar properties = context.flow.get(\"properties\");\nfor(var propertyIndex in properties){\n        var property = properties[propertyIndex];\n        var id = property._Attribs.ID; \n        if (id.localeCompare(propertyId) === 0){\n                msg.payload = property;\n                msg.statusCode = \"200\";\n                return msg;\n        }\n    }\nmsg.statusCode = \"404\";\nmsg.payload = \"property with id:\" + propertyId + \" not found\"\nreturn msg;","outputs":1,"noerr":0,"x":1018.2402954101562,"y":1290.478500366211,"wires":[["ff39d4e7.3135"]]},{"id":"babede2f.8a685","type":"actionflows_in","z":"9b0db7c7.e3ad48","name":"addProperty in","priority":"50","links":[],"scope":"global","x":250.43075561523438,"y":1414.907211303711,"wires":[["517f8ef0.e3254"]]},{"id":"f56b5434.82e228","type":"actionflows_out","z":"9b0db7c7.e3ad48","name":"addProperty out","links":[],"x":1377.0975646972656,"y":1418.2405853271484,"wires":[]},{"id":"517f8ef0.e3254","type":"unsafe-function","z":"9b0db7c7.e3ad48","name":"AddingProperty...","func":"//var xml_string = msg.payload;\n//var XML = context.global.get('XML');\n\nvar property = msg.payload;\nvar submodelId = msg.req.params.id;\n\n//var doc = XML.parse( xml_string, { preserveAttributes: true, forceArrays: true  } );\n/*\nvar xml_string_composed = XML.stringify( doc, 'CAEXFile');\nmsg.composed = xml_string_composed;\n*/\n\n/*var parser = null;\n\ntry {\n    parser = new XML.Parser(xml_string, { preserveAttributes: true, forceArrays: true} );\n}\ncatch (err) {\n    throw err;\n}*/\n//var manifest = context.global.get(\"manifest\");\n//var manifest = parser.getTree();\nmsg.AASID = context.flow.get('AASIdentifier');\nvar properties = context.flow.get(\"properties\");\nfor(var propertyIndex in properties){\n    if(properties._Attribs.ID == properties[propertyIndex]._Attribs.ID){\n        msg.payload = \"Error property ID already exists\";\n        msg.statusCode = \"409\";\n        return msg;\n    }\n}\nproperties.push(property);\n\nvar submodels = context.flow.get('submodels');\n    for(var submodelIndex in submodels){\n        if(submodels[submodelIndex]._Attribs.ID == submodelId){\n            if(typeof submodels[submodelIndex].InternalElement === \"undefined\"){\n                submodels[submodelIndex].InternalElement = [];\n                submodels[submodelIndex].InternalElement.push(property)\n            }\n            else{\n                submodels[submodelIndex].InternalElement.push(property);\n            }\n            break;\n        }\n    }\n\nmsg.statusCode = \"201\";\nreturn msg;","outputs":1,"noerr":0,"x":805.3356018066406,"y":1412.5262908935547,"wires":[["40f504d3.948ee4"]]},{"id":"40f504d3.948ee4","type":"switch","z":"9b0db7c7.e3ad48","name":"","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"201","vt":"str"},{"t":"eq","v":"409","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":983.6689758300781,"y":1412.5261688232422,"wires":[["7833a607.cd20e"],["f56b5434.82e228"]]},{"id":"7833a607.cd20e","type":"actionflows","z":"9b0db7c7.e3ad48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"persistManifest","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1177.8356018066406,"y":1362.5261688232422,"wires":[["f56b5434.82e228"]]},{"id":"e17aaf0e.7ff5d8","type":"actionflows_in","z":"9b0db7c7.e3ad48","name":"removeProperty in","priority":"50","links":[],"scope":"global","x":257.5736083984375,"y":1544.9070892333984,"wires":[["83f91ea.9d7846"]]},{"id":"63ab7d8c.a6d364","type":"actionflows_out","z":"9b0db7c7.e3ad48","name":"removeProperty out","links":[],"x":1382.5737915039062,"y":1551.5736541748047,"wires":[]},{"id":"83f91ea.9d7846","type":"unsafe-function","z":"9b0db7c7.e3ad48","name":"RemovingProperty...","func":"//var xml_string = msg.payload;\n//var XML = context.global.get('XML');\n\nvar propertyID = msg.req.params.id;\n//var doc = XML.parse( xml_string, { preserveAttributes: true, forceArrays: true  } );\n/*\nvar xml_string_composed = XML.stringify( doc, 'CAEXFile');\nmsg.composed = xml_string_composed;\n*/\n\n/*var parser = null;\n\ntry {\n    parser = new XML.Parser(xml_string, { preserveAttributes: true, forceArrays: true} );\n}\ncatch (err) {\n    throw err;\n}*/\n//var manifest = context.global.get(\"manifest\");\n//var manifest = parser.getTree();\nmsg.AASID = context.flow.get('AASIdentifier');\nvar propertiesList = context.flow.get('properties');\nfor(var propertyIndex in propertiesList){\n    if(propertyID == propertiesList[propertyIndex]._Attribs.ID){\n        propertiesList.splice(propertyIndex, 1);\n        var submodels = context.flow.get(\"submodels\");\n        for(var submodelIndex in submodels){\n        var properties = submodel.InternalElement;\n        for(var propertyIndex2 in properties){\n            if(properties[propertyIndex2]._Attribs.ID == propertyID){\n                propertiesList.splice(propertyIndex2, 1);\n            }\n        }\n        msg.statusCode = \"200\";\n        return msg;\n        }\n    }\n}\n\nmsg.payload = \"Error Property not found for Id: \" + propertyID;\nmsg.statusCode = \"404\";\nreturn msg;","outputs":1,"noerr":0,"x":807.4783325195312,"y":1544.1927947998047,"wires":[["da219bd9.7c3a6"]]},{"id":"da219bd9.7c3a6","type":"switch","z":"9b0db7c7.e3ad48","name":"","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"200","vt":"str"},{"t":"eq","v":"404","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":980.8117065429688,"y":1544.1926727294922,"wires":[["d347022b.2bb93"],["63ab7d8c.a6d364"]]},{"id":"d347022b.2bb93","type":"actionflows","z":"9b0db7c7.e3ad48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"persistManifest","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1175.8117065429688,"y":1499.1927947998047,"wires":[["63ab7d8c.a6d364"]]},{"id":"3951c56.cb3caba","type":"actionflows_in","z":"9b0db7c7.e3ad48","name":"updateProperty in","priority":"50","links":[],"scope":"global","x":261.5736083984375,"y":1672.9070892333984,"wires":[["ec704705.bcf548"]]},{"id":"4448377.91462c8","type":"actionflows_out","z":"9b0db7c7.e3ad48","name":"updateProperty out","links":[],"x":1383.57373046875,"y":1675.573715209961,"wires":[]},{"id":"ec704705.bcf548","type":"unsafe-function","z":"9b0db7c7.e3ad48","name":"UpdatingProperty...","func":"var property = msg.payload;\n/*\nvar xml_string_composed = XML.stringify( doc, 'CAEXFile');\nmsg.composed = xml_string_composed;\n*/\n\n/*var parser = null;\n\ntry {\n    parser = new XML.Parser(xml_string, { preserveAttributes: true, forceArrays: true} );\n}\ncatch (err) {\n    throw err;\n}*/\n//var manifest = context.global.get(\"manifest\");\n//var manifest = parser.getTree();\nmsg.AASID = context.flow.get('AASIdentifier');\nvar propertiesList = context.flow.get('properties');\nfor(var propertyIndex in propertiesList){\n    if(property._Attribs.ID == propertiesList[propertyIndex]._Attribs.ID){\n        propertiesList[propertyIndex] = property;\n        msg.statusCode = \"200\";\n        return msg;\n    }\n}\n\n/*var submodels = context.flow.get(\"submodels\");\nfor(var submodelIndex in submodels){\n    if(submodel._Attribs.ID == submodels[submodelIndex]._Attribs.ID){\n        submodels[submodelIndex] = submodel;\n        msg.statusCode = \"200\";\n        var propertiesList = context.flow.get('properties');\n        var properties = submodel.InternalElement;\n        for(var propertyIndex in properties){\n            propertiesList.push(properties[propertyIndex]);\n        }\n        return msg;\n    }\n}*/\nmsg.statusCode = \"404\";\nreturn msg;","outputs":1,"noerr":0,"x":797.8116455078125,"y":1671.1924896240234,"wires":[["2307d90b.1b7e0e"]]},{"id":"2307d90b.1b7e0e","type":"switch","z":"9b0db7c7.e3ad48","name":"","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"200","vt":"str"},{"t":"eq","v":"404","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":987.8116455078125,"y":1671.192367553711,"wires":[["d8e12506.bf6f5"],["4448377.91462c8"]]},{"id":"d8e12506.bf6f5","type":"actionflows","z":"9b0db7c7.e3ad48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"persistManifest","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1177.8116455078125,"y":1634.5260467529297,"wires":[["4448377.91462c8"]]},{"id":"ee5d6dcd.3a55f","type":"actionflows_in","z":"9b0db7c7.e3ad48","name":"readPropertyInterface in","priority":"50","links":[],"scope":"global","x":264.7164611816406,"y":2030.6214447021484,"wires":[["bcf36008.215a4"]]},{"id":"916769cc.54b24","type":"actionflows_out","z":"9b0db7c7.e3ad48","name":"readPropertyInterface out","links":[],"x":1380.4307861328125,"y":2034.9070892333984,"wires":[]},{"id":"bcf36008.215a4","type":"unsafe-function","z":"9b0db7c7.e3ad48","name":"RetrievingPropertyById...","func":"msg.AASID = context.flow.get('AASIdentifier');\nvar propertyId = msg.req.params.id;\nvar properties = context.flow.get(\"properties\");\nfor(var propertyIndex in properties){\n        var property = properties[propertyIndex];\n        var id = property._Attribs.ID; \n        if (id.localeCompare(propertyId) === 0){\n                msg.payload = property;\n                msg.statusCode = \"200\";\n                return msg;\n        }\n    }\nmsg.statusCode = \"404\";\nmsg.payload = \"property with id:\" + propertyId + \" not found\"\nreturn msg;","outputs":1,"noerr":0,"x":579.0023193359375,"y":2030.6214447021484,"wires":[["cf27288b.06fff8"]]},{"id":"cf27288b.06fff8","type":"switch","z":"9b0db7c7.e3ad48","name":"","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"200","vt":"str"},{"t":"eq","v":"404","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":801.859375,"y":2029.192855834961,"wires":[["eff8ece.4c1c41"],["916769cc.54b24"]]},{"id":"eff8ece.4c1c41","type":"unsafe-function","z":"9b0db7c7.e3ad48","name":"RetrievingDataInterface...","func":"var property = msg.payload;\nvar di = property.InternalElement[1];\nmsg.payload = di;\nreturn msg;","outputs":1,"noerr":0,"x":1076.145263671875,"y":1986.3358001708984,"wires":[["916769cc.54b24"]]},{"id":"7cf57058.7d0c98","type":"unsafe-function","z":"9b0db7c7.e3ad48","name":"CreateInMemoryManifest","func":"//Retreiving Libraries from the Settings.json file\nvar XML = context.global.get('XML');\nvar os = context.global.get('os');\n\nvar xml_string = \"\";\nif(msg.payload === \"\" || (typeof msg.payload.chatId !== \"undefined\")){\n    xml_string = context.flow.get('emptyManifest');\n} else {\n    xml_string = msg.payload;\n}\n//context.global.set('stringManifest', xml_string);\n\nvar manifest = XML.parse( xml_string, { preserveAttributes: true, forceArrays: true  } );\ncontext.flow.set(\"manifest\", manifest);\nvar header = manifest.InstanceHierarchy[0].InternalElement[0];\ncontext.flow.set('header', header);\n\n// set AAS Identifier\nheader.InternalElement[0].InternalElement[0]._Attribs.ID = context.flow.get('AASIdentifier');\n// set AAS virtual Location\nheader.InternalElement[0].InternalElement[0].InternalElement[0].Attribute[1].Value[0] = os.hostname();\n//set AAS namespace\nheader.InternalElement[0].InternalElement[0].Attribute[0].Value[0] = context.global.get('namespace');\n\nvar body = manifest.InstanceHierarchy[0].InternalElement[1];\ncontext.flow.set('body', body);\nvar submodelsList = [];\nif(typeof body.InternalElement !== \"undefined\"){\n    submodelsList = body.InternalElement;\n}\ncontext.flow.set('submodels', submodelsList);\nvar propertiesList = [];\nfor(var submodelIndex in submodelsList){\n        var properties = submodelsList[submodelIndex].InternalElement;\n        for(var propertyIndex in properties){\n            propertiesList.push(properties[propertyIndex]);\n        }\n    }\ncontext.flow.set('properties', propertiesList);\n\n\nmsg.manifest = manifest;\n\n//var xml_string_composed = XML.stringify( doc, 'CAEXFile');\n//msg.payload = xml_string_composed;\n//msg.doc = doc;\n\nreturn msg;","outputs":1,"noerr":0,"x":581.4569091796875,"y":390.79042053222656,"wires":[["beba4445.9af568"]]},{"id":"1301936b.3f155d","type":"actionflows_in","z":"9b0db7c7.e3ad48","name":"createManifest in","priority":"50","links":[],"scope":"global","x":246.45697021484375,"y":390.79042053222656,"wires":[["7cf57058.7d0c98"]]},{"id":"48072cab.d76f5c","type":"actionflows_out","z":"9b0db7c7.e3ad48","name":"createManifest out","links":[],"x":1392.1712297712052,"y":392.218985421317,"wires":[]},{"id":"eedebfad.39d17","type":"actionflows_in","z":"9b0db7c7.e3ad48","name":"readHeaders in","priority":"50","links":[],"scope":"global","x":251.45693969726562,"y":595.7904205322266,"wires":[["ca53db9d.b7e59"]]},{"id":"51a6081b.47de3","type":"actionflows_out","z":"9b0db7c7.e3ad48","name":"readHeaders out","links":[],"x":1396.45703125,"y":595.7903594970703,"wires":[]},{"id":"ca53db9d.b7e59","type":"unsafe-function","z":"9b0db7c7.e3ad48","name":"RetrievingHeaders...","func":"//var xml_string = msg.payload;\n//var XML = context.global.get('XML');\n\n//var doc = XML.parse( xml_string, { preserveAttributes: true, forceArrays: true  } );\n/*\nvar xml_string_composed = XML.stringify( doc, 'CAEXFile');\nmsg.composed = xml_string_composed;\n*/\n\n/*try {\n    parser = new XML.Parser(xml_string, { preserveAttributes: true, forceArrays: true} );\n}\ncatch (err) {\n    throw err;\n}*/\n\n/*var manifest = context.global.get(\"manifest\");\nvar idsList = manifest.InstanceHierarchy[0].InternalElement[0].InternalElement[0].InternalElement;\nif (typeof idsList === \"undefined\") {\n    var ids = {};\n    msg.manifest = manifest;\n    msg.payload = ids;\n    return msg;\n}\n else {\n    // loop on the submodelsList to find the propeerty\n}*/\nmsg.payload = flow.get(\"header\");\nmsg.AASID = context.flow.get('$parent.AASIdentifier');\n//msg.manifest = manifest;\nreturn msg;","outputs":1,"noerr":0,"x":1016.6949462890625,"y":595.0760040283203,"wires":[["51a6081b.47de3"]]},{"id":"6a25c193.f699a8","type":"inject","z":"9b0db7c7.e3ad48","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":249.88333129882812,"y":312.8833312988281,"wires":[["5125ba85.d6776c"]]},{"id":"5125ba85.d6776c","type":"unsafe-function","z":"9b0db7c7.e3ad48","name":"IntializeVariables","func":"//Initialize flow variables\nvar uuid = context.get('AASIdentifier')||'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });\n/*var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });*/\n/*\ncontext.flow.set(\"emptyManifest\", \"<?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?><CAEXFile FileName=\\\"Aml_as_manifest.aml\\\" SchemaVersion=\\\"2.15\\\" xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\" xsi:noNamespaceSchemaLocation=\\\"CAEX_ClassModel_V2.15.xsd\\\"><AdditionalInformation><WriterHeader><LastWritingDateTime>2018-10-16T16:12:49.4126198+01:00</LastWritingDateTime><WriterID>916578CA-FE0D-474E-A4FC-9E1719892369</WriterID><WriterName>AutomationML Editor</WriterName><WriterProjectID>unspecified</WriterProjectID><WriterProjectTitle>unspecified</WriterProjectTitle><WriterRelease>4.7.0.0</WriterRelease><WriterVendor>AutomationML e.V.</WriterVendor><WriterVendorURL>www.AutomationML.org</WriterVendorURL><WriterVersion>4.7.0.0</WriterVersion></WriterHeader></AdditionalInformation><AdditionalInformation AutomationMLVersion=\\\"2.0\\\" /><InstanceHierarchy ID=\\\"90a789b3-d644-43f7-b8ec-fdfda0bdbbcd\\\" Name=\\\"AASManifest\\\"><InternalElement ID=\\\"611c9074-ad8d-47c1-a26f-3d8d9f517ae1\\\" Name=\\\"Header\\\"><InternalElement Name=\\\"AAS Identifiers\\\" ID=\\\"921669c9-4e9a-4580-afe4-4fc3dad4b6b4\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Submodel\\\"><InternalElement Name=\\\"Identifier\\\" ID=\\\"d4e9ab54-7ce8-4001-92d9-fcd33f581510\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Property/Identifier\\\"><Attribute Name=\\\"namespace\\\" AttributeDataType=\\\"xs:anyURI\\\"><Value></Value></Attribute><InternalElement Name=\\\"Location\\\" ID=\\\"068eaa56-f1ab-4d31-972b-51165ec15124\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Location\\\"><Attribute Name=\\\"geoLocation\\\" AttributeDataType=\\\"xs:string\\\"><Attribute Name=\\\"latitude\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute><Attribute Name=\\\"longitude\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute></Attribute><Attribute Name=\\\"virtualLocation\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute></InternalElement></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/PropertyContainer\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/AASIdentification\\\" /></InternalElement><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/AASIdentification\\\" /></InternalElement><InternalElement ID=\\\"b66b5437-4fee-4ccb-8009-1d28c8159f9e\\\" Name=\\\"Body\\\"><InternalElement Name=\\\"PROPHESY-CPS Condition Monitoring\\\" ID=\\\"44152b0c-c1db-4a9a-ba5f-a38cbfff43f7\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Submodel\\\"><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>true</Value></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/PropertyContainer\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/DataSourceManifests\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/SubmodelContainer\\\" /></InternalElement><Version>1.0.0</Version></InstanceHierarchy><InterfaceClassLib Name=\\\"AASInterfaceClassLib\\\"><Version>1.0.0</Version></InterfaceClassLib><RoleClassLib Name=\\\"AASManifestRoleClassLib\\\"><RoleClass Name=\\\"PropertyContainer\\\" /><RoleClass Name=\\\"Statement\\\" /><RoleClass Name=\\\"AASIdentification\\\" /><RoleClass Name=\\\"SubmodelContainer\\\" /><RoleClass Name=\\\"ParameterContainer\\\" /><RoleClass Name=\\\"DataSourceManifests\\\" /><RoleClass Name=\\\"LiveDataset\\\" /><Version></Version></RoleClassLib><SystemUnitClassLib Name=\\\"ASSSystemUnitClassLib\\\"><SystemUnitClass Name=\\\"Submodel\\\"><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value> </Value></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/PropertyContainer\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/DataSourceManifests\\\" /></SystemUnitClass><SystemUnitClass Name=\\\"Property\\\"><Description></Description><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /><SystemUnitClass Name=\\\"DSD\\\" ID=\\\"15250019-f6d1-4721-8ffc-49e309f57d7f\\\" RefBaseClassPath=\\\"ASSSystemUnitClassLib/Property\\\"><Description>PROPHESY Data Source Definition</Description><InternalElement Name=\\\"DI\\\" ID=\\\"e45f2f0d-38e3-4d7f-bec8-1ba7a0220d95\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Property/DI\\\"><Attribute Name=\\\"communicationProtocol\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute><InternalElement Name=\\\"Parameters\\\" ID=\\\"634ca4cf-6dd7-4a90-81c4-19cc8aac07a1\\\"><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><InternalElement Name=\\\"DK\\\" ID=\\\"a40cbfd0-ac48-413f-911a-a5915c40e071\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Property/DK\\\"><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute><Attribute Name=\\\"format\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"quantityKind\\\" AttributeDataType=\\\"xs:anyURI\\\"><Value> </Value></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement></SystemUnitClass><SystemUnitClass Name=\\\"DI\\\" ID=\\\"124e5d81-d58f-40c8-ad14-8e62e003467c\\\" RefBaseClassPath=\\\"ASSSystemUnitClassLib/Property\\\"><Attribute Name=\\\"communicationProtocol\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><InternalElement Name=\\\"Parameters\\\" ID=\\\"79d506e7-b991-4b1a-aa29-8161da867a9e\\\"><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement></SystemUnitClass><SystemUnitClass Name=\\\"DK\\\" ID=\\\"6edf24e3-dc69-4857-b268-f9e355e0898f\\\" RefBaseClassPath=\\\"ASSSystemUnitClassLib/Property\\\"><Description> </Description><Attribute Name=\\\"format\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"quantityKind\\\" AttributeDataType=\\\"xs:anyURI\\\"><Value> </Value></Attribute><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute></SystemUnitClass><SystemUnitClass Name=\\\"Identifier\\\" ID=\\\"88da950a-5c94-4027-98e7-d673a9694f8b\\\"><Description></Description><Attribute Name=\\\"namespace\\\" AttributeDataType=\\\"xs:anyURI\\\"><Value></Value></Attribute><InternalElement Name=\\\"Location\\\" ID=\\\"35063688-a0e9-47ea-8bf3-1afd38d16ccb\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Location\\\"><Attribute Name=\\\"geoLocation\\\" AttributeDataType=\\\"xs:string\\\"><Attribute Name=\\\"latitude\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute><Attribute Name=\\\"longitude\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute></Attribute><Attribute Name=\\\"virtualLocation\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute></InternalElement></SystemUnitClass><SystemUnitClass Name=\\\"DSM\\\" ID=\\\"514e6b53-aa50-4a1d-8df1-3ee8df752bb3\\\" RefBaseClassPath=\\\"ASSSystemUnitClassLib/Property\\\"><Attribute Name=\\\"macAddress\\\" AttributeDataType=\\\"xs:string\\\" /><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue></Attribute><InternalElement Name=\\\"DSD\\\" ID=\\\"cb0f8a81-1c87-4199-a5cb-44a66c854fba\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Property/DSD\\\"><InternalElement Name=\\\"DI\\\" ID=\\\"b3acb469-19d5-4002-b152-012366cf130f\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Property/DI\\\"><Attribute Name=\\\"communicationProtocol\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute><InternalElement Name=\\\"Parameters\\\" ID=\\\"9884244a-7a55-4c89-9951-f3c3314a1851\\\"><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><InternalElement Name=\\\"DK\\\" ID=\\\"5767b475-369d-46aa-a839-c274fb57a5e8\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Property/DK\\\"><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute><Attribute Name=\\\"format\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"quantityKind\\\" AttributeDataType=\\\"xs:anyURI\\\"><Value> </Value></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement></SystemUnitClass></SystemUnitClass><SystemUnitClass Name=\\\"Parameter\\\" ID=\\\"e5ab0092-4b4e-4529-95bd-62a264177805\\\" RefBaseClassPath=\\\"\\\"><Description> </Description><Attribute Name=\\\"dataType\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"defaultValue\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute><Attribute Name=\\\"actualValue\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute></SystemUnitClass><SystemUnitClass Name=\\\"Location\\\" ID=\\\"b0a00287-0441-46ed-8926-df3fc07b8545\\\"><Attribute Name=\\\"geoLocation\\\" AttributeDataType=\\\"xs:string\\\"><Attribute Name=\\\"latitude\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute><Attribute Name=\\\"longitude\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute></Attribute><Attribute Name=\\\"virtualLocation\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute></SystemUnitClass><Version>1.0.0</Version></SystemUnitClassLib></CAEXFile>\");\ncontext.flow.set(\"AASIdentifier\", uuid);\ncontext.flow.set(\"manifest\", \"\");\ncontext.flow.set(\"header\", \"\");\ncontext.flow.set(\"body\", \"\");\ncontext.flow.set(\"submodels\", \"\");\ncontext.flow.set(\"properties\", \"\");\n*/\n\nvar emptyManifest = context.flow.get(\"emptyManifest\") || \"<?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?><CAEXFile FileName=\\\"Aml_as_manifest.aml\\\" SchemaVersion=\\\"2.15\\\" xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\" xsi:noNamespaceSchemaLocation=\\\"CAEX_ClassModel_V2.15.xsd\\\"><AdditionalInformation><WriterHeader><LastWritingDateTime>2018-10-16T16:12:49.4126198+01:00</LastWritingDateTime><WriterID>916578CA-FE0D-474E-A4FC-9E1719892369</WriterID><WriterName>AutomationML Editor</WriterName><WriterProjectID>unspecified</WriterProjectID><WriterProjectTitle>unspecified</WriterProjectTitle><WriterRelease>4.7.0.0</WriterRelease><WriterVendor>AutomationML e.V.</WriterVendor><WriterVendorURL>www.AutomationML.org</WriterVendorURL><WriterVersion>4.7.0.0</WriterVersion></WriterHeader></AdditionalInformation><AdditionalInformation AutomationMLVersion=\\\"2.0\\\" /><InstanceHierarchy ID=\\\"90a789b3-d644-43f7-b8ec-fdfda0bdbbcd\\\" Name=\\\"AASManifest\\\"><InternalElement ID=\\\"611c9074-ad8d-47c1-a26f-3d8d9f517ae1\\\" Name=\\\"Header\\\"><InternalElement Name=\\\"AAS Identifiers\\\" ID=\\\"921669c9-4e9a-4580-afe4-4fc3dad4b6b4\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Submodel\\\"><InternalElement Name=\\\"Identifier\\\" ID=\\\"d4e9ab54-7ce8-4001-92d9-fcd33f581510\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Property/Identifier\\\"><Attribute Name=\\\"namespace\\\" AttributeDataType=\\\"xs:anyURI\\\"><Value></Value></Attribute><InternalElement Name=\\\"Location\\\" ID=\\\"068eaa56-f1ab-4d31-972b-51165ec15124\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Location\\\"><Attribute Name=\\\"geoLocation\\\" AttributeDataType=\\\"xs:string\\\"><Attribute Name=\\\"latitude\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute><Attribute Name=\\\"longitude\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute></Attribute><Attribute Name=\\\"virtualLocation\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute></InternalElement></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/PropertyContainer\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/AASIdentification\\\" /></InternalElement><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/AASIdentification\\\" /></InternalElement><InternalElement ID=\\\"b66b5437-4fee-4ccb-8009-1d28c8159f9e\\\" Name=\\\"Body\\\"><InternalElement Name=\\\"PROPHESY-CPS Condition Monitoring\\\" ID=\\\"44152b0c-c1db-4a9a-ba5f-a38cbfff43f7\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Submodel\\\"><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>true</Value></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/PropertyContainer\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/DataSourceManifests\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/SubmodelContainer\\\" /></InternalElement><Version>1.0.0</Version></InstanceHierarchy><InterfaceClassLib Name=\\\"AASInterfaceClassLib\\\"><Version>1.0.0</Version></InterfaceClassLib><RoleClassLib Name=\\\"AASManifestRoleClassLib\\\"><RoleClass Name=\\\"PropertyContainer\\\" /><RoleClass Name=\\\"Statement\\\" /><RoleClass Name=\\\"AASIdentification\\\" /><RoleClass Name=\\\"SubmodelContainer\\\" /><RoleClass Name=\\\"ParameterContainer\\\" /><RoleClass Name=\\\"DataSourceManifests\\\" /><RoleClass Name=\\\"LiveDataset\\\" /><Version></Version></RoleClassLib><SystemUnitClassLib Name=\\\"ASSSystemUnitClassLib\\\"><SystemUnitClass Name=\\\"Submodel\\\"><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value> </Value></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/PropertyContainer\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/DataSourceManifests\\\" /></SystemUnitClass><SystemUnitClass Name=\\\"Property\\\"><Description></Description><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /><SystemUnitClass Name=\\\"DSD\\\" ID=\\\"15250019-f6d1-4721-8ffc-49e309f57d7f\\\" RefBaseClassPath=\\\"ASSSystemUnitClassLib/Property\\\"><Description>PROPHESY Data Source Definition</Description><InternalElement Name=\\\"DI\\\" ID=\\\"e45f2f0d-38e3-4d7f-bec8-1ba7a0220d95\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Property/DI\\\"><Attribute Name=\\\"communicationProtocol\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute><InternalElement Name=\\\"Parameters\\\" ID=\\\"634ca4cf-6dd7-4a90-81c4-19cc8aac07a1\\\"><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><InternalElement Name=\\\"DK\\\" ID=\\\"a40cbfd0-ac48-413f-911a-a5915c40e071\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Property/DK\\\"><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute><Attribute Name=\\\"format\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"quantityKind\\\" AttributeDataType=\\\"xs:anyURI\\\"><Value> </Value></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement></SystemUnitClass><SystemUnitClass Name=\\\"DI\\\" ID=\\\"124e5d81-d58f-40c8-ad14-8e62e003467c\\\" RefBaseClassPath=\\\"ASSSystemUnitClassLib/Property\\\"><Attribute Name=\\\"communicationProtocol\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><InternalElement Name=\\\"Parameters\\\" ID=\\\"79d506e7-b991-4b1a-aa29-8161da867a9e\\\"><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement></SystemUnitClass><SystemUnitClass Name=\\\"DK\\\" ID=\\\"6edf24e3-dc69-4857-b268-f9e355e0898f\\\" RefBaseClassPath=\\\"ASSSystemUnitClassLib/Property\\\"><Description> </Description><Attribute Name=\\\"format\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"quantityKind\\\" AttributeDataType=\\\"xs:anyURI\\\"><Value> </Value></Attribute><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute></SystemUnitClass><SystemUnitClass Name=\\\"Identifier\\\" ID=\\\"88da950a-5c94-4027-98e7-d673a9694f8b\\\"><Description></Description><Attribute Name=\\\"namespace\\\" AttributeDataType=\\\"xs:anyURI\\\"><Value></Value></Attribute><InternalElement Name=\\\"Location\\\" ID=\\\"35063688-a0e9-47ea-8bf3-1afd38d16ccb\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Location\\\"><Attribute Name=\\\"geoLocation\\\" AttributeDataType=\\\"xs:string\\\"><Attribute Name=\\\"latitude\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute><Attribute Name=\\\"longitude\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute></Attribute><Attribute Name=\\\"virtualLocation\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute></InternalElement></SystemUnitClass><SystemUnitClass Name=\\\"DSM\\\" ID=\\\"514e6b53-aa50-4a1d-8df1-3ee8df752bb3\\\" RefBaseClassPath=\\\"ASSSystemUnitClassLib/Property\\\"><Attribute Name=\\\"macAddress\\\" AttributeDataType=\\\"xs:string\\\" /><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue></Attribute><InternalElement Name=\\\"DSD\\\" ID=\\\"cb0f8a81-1c87-4199-a5cb-44a66c854fba\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Property/DSD\\\"><InternalElement Name=\\\"DI\\\" ID=\\\"b3acb469-19d5-4002-b152-012366cf130f\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Property/DI\\\"><Attribute Name=\\\"communicationProtocol\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute><InternalElement Name=\\\"Parameters\\\" ID=\\\"9884244a-7a55-4c89-9951-f3c3314a1851\\\"><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><InternalElement Name=\\\"DK\\\" ID=\\\"5767b475-369d-46aa-a839-c274fb57a5e8\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Property/DK\\\"><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute><Attribute Name=\\\"format\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"quantityKind\\\" AttributeDataType=\\\"xs:anyURI\\\"><Value> </Value></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement></SystemUnitClass></SystemUnitClass><SystemUnitClass Name=\\\"Parameter\\\" ID=\\\"e5ab0092-4b4e-4529-95bd-62a264177805\\\" RefBaseClassPath=\\\"\\\"><Description> </Description><Attribute Name=\\\"dataType\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"defaultValue\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute><Attribute Name=\\\"actualValue\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute></SystemUnitClass><SystemUnitClass Name=\\\"Location\\\" ID=\\\"b0a00287-0441-46ed-8926-df3fc07b8545\\\"><Attribute Name=\\\"geoLocation\\\" AttributeDataType=\\\"xs:string\\\"><Attribute Name=\\\"latitude\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute><Attribute Name=\\\"longitude\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute></Attribute><Attribute Name=\\\"virtualLocation\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute></SystemUnitClass><Version>1.0.0</Version></SystemUnitClassLib></CAEXFile>\";\nvar AASIdentifier = context.flow.get(\"AASIdentifier\") || uuid;\nvar manifest = context.flow.get(\"manifest\") || \"\";\nvar header = context.flow.get(\"header\") || \"\";\nvar body = context.flow.get(\"body\") || \"\";\nvar submodels = context.flow.get(\"submodels\") || \"\";\nvar properties = context.flow.get(\"properties\") || \"\";\n\ncontext.flow.set(\"emptyManifest\", emptyManifest);\ncontext.flow.set(\"AASIdentifier\", AASIdentifier);\ncontext.flow.set(\"manifest\", manifest);\ncontext.flow.set(\"header\", header);\ncontext.flow.set(\"body\", body);\ncontext.flow.set(\"submodels\", submodels);\ncontext.flow.set(\"properties\", properties);\n\nreturn msg;\n","outputs":1,"noerr":0,"x":562.0261710030692,"y":312.88333783830916,"wires":[[]]},{"id":"beba4445.9af568","type":"actionflows","z":"9b0db7c7.e3ad48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"persistManifest","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1003.88330078125,"y":390.8833312988281,"wires":[["48072cab.d76f5c"]]},{"id":"af5ba88d.9d1c08","type":"unsafe-function","z":"3bcb972f.6d23c8","name":"checkLogging","func":"//var element = JSON.stringify(msg.payload);\nlet node_aas_log = process.env.NODE_AAS_RUNNNING_UNDER_PM2;\nif(typeof node_aas_log == \"undefined\"){\n    return [msg, null];\n} else {\n    return [null, msg];\n}\n\n","outputs":2,"noerr":0,"x":808.6041870117188,"y":304.85418701171875,"wires":[["b469888e.d4acb"],["1bf01ad5.cfc365"]]},{"id":"118bc124.5c82ef","type":"logger","z":"3bcb972f.6d23c8","name":"","filename":"logs.log","maxsize":1,"maxfiles":10,"complete":"true","console":true,"file":false,"debug":false,"zip":false,"logtype":"info","x":1044.7666015625,"y":351.76666259765625,"wires":[]},{"id":"1bf01ad5.cfc365","type":"debug","z":"3bcb972f.6d23c8","name":"","active":true,"tosidebar":false,"console":true,"tostatus":false,"complete":"payload","targetType":"msg","x":1075.5,"y":398.5,"wires":[]},{"id":"2657260f.fcfc4a","type":"telegram event","z":"e8827dd4.9f445","name":"","bot":"a6dd0a24.a85b58","event":"callback_query","autoanswer":true,"x":360,"y":2760,"wires":[["c5094396.e8458","db627d1b.a5d85"]]},{"id":"5efe0231.f276ec","type":"telegram sender","z":"e8827dd4.9f445","name":"answer callback query","bot":"a6dd0a24.a85b58","x":1592.509765625,"y":2753.414306640625,"wires":[[]]},{"id":"2fe854af.52b14c","type":"telegram event","z":"e8827dd4.9f445","name":"","bot":"a6dd0a24.a85b58","event":"inline_query","autoanswer":false,"x":350,"y":1024,"wires":[["839f55e5.8ed898"]]},{"id":"839f55e5.8ed898","type":"function","z":"e8827dd4.9f445","name":"create results","func":"// we have to set the results propery with the answer(s)\n// see https://core.telegram.org/bots/api#inlinequeryresult\nvar results = [\n    // result 1 is InlineQueryResultArticle\n    /*{\n        type : \"article\",\n        id : \"1\",\n        title : \"Initialize AAS\",\n        \n        // InputTextMessageContent see https://core.telegram.org/bots/api#inputmessagecontent\n        input_message_content : {\n            message_text : \"/initialize\",\n            parse_mode : \"Markdown\",\n            disable_web_page_preview : true\n        }\n    },*/\n    {\n        type : \"article\",\n        id : \"1\",\n        title : \"AAS Registry Connection Details\",\n        \n        // InputTextMessageContent see https://core.telegram.org/bots/api#inputmessagecontent\n        input_message_content : {\n            message_text : \"/getRegistryConnectionDetails\",\n            parse_mode : \"Markdown\",\n            disable_web_page_preview : true\n        }\n    },\n    \n    {\n        type : \"article\",\n        id : \"2\",\n        title : \"AAS DataStreaming Connection Details\",\n        \n        // InputTextMessageContent see https://core.telegram.org/bots/api#inputmessagecontent\n        input_message_content : {\n            message_text : \"/getDataStreamingConnectionDetails\",\n            parse_mode : \"Markdown\",\n            disable_web_page_preview : true\n        }\n    },\n    \n    {\n        type : \"article\",\n        id : \"3\",\n        title : \"AAS Identifier\",\n        \n        // InputTextMessageContent see https://core.telegram.org/bots/api#inputmessagecontent\n        input_message_content : {\n            message_text : \"/gaetAASIdentifier\",\n            parse_mode : \"Markdown\",\n            disable_web_page_preview : true\n        }\n    },\n    \n    // result 2 is InlineQueryResultArticle\n    {\n        type : \"article\",\n        id : \"4\",\n        title : \"AAS Manifest\",\n        \n        // InputTextMessageContent see https://core.telegram.org/bots/api#inputmessagecontent\n        input_message_content : {\n            message_text : \"/getManifest\",\n            parse_mode : \"Markdown\",\n            disable_web_page_preview : true\n        }\n    },\n    \n    {\n        type : \"article\",\n        id : \"5\",\n        title : \"AAS Location\",\n        \n        // InputTextMessageContent see https://core.telegram.org/bots/api#inputmessagecontent\n        input_message_content : {\n            message_text : \"/getLocation\",\n            parse_mode : \"Markdown\",\n            disable_web_page_preview : true\n        }\n    },\n    \n    {\n        type : \"article\",\n        id : \"6\",\n        title : \"AAS Submodels\",\n        \n        // InputTextMessageContent see https://core.telegram.org/bots/api#inputmessagecontent\n        input_message_content : {\n            message_text : \"/getSubmodels\",\n            parse_mode : \"Markdown\",\n            disable_web_page_preview : true\n        }\n    }\n    \n    /*{\n        type : \"article\",\n        id : \"5\",\n        title : \"AAS Properties\",\n        \n        // InputTextMessageContent see https://core.telegram.org/bots/api#inputmessagecontent\n        input_message_content : {\n            message_text : \"/getProperties\",\n            parse_mode : \"Markdown\",\n            disable_web_page_preview : true\n        }\n    }*/\n    ];\n\n\nmsg.payload.results = results;\nreturn msg;","outputs":1,"noerr":0,"x":720,"y":1024,"wires":[["d53d9ef2.c055a"]]},{"id":"d53d9ef2.c055a","type":"telegram sender","z":"e8827dd4.9f445","name":"","bot":"a6dd0a24.a85b58","x":1270,"y":1024,"wires":[[]]},{"id":"db627d1b.a5d85","type":"function","z":"e8827dd4.9f445","name":"evaluate callback query","func":"// This is a sample switch to demonstrate the handling of the user input.\nif(msg.payload.content === \"load yes really\")\n{\n    // Hide the keyboard and forget the messageId\n    msg.payload.type = 'deleteMessage';\n    msg.payload.options = context.global.keyboard.messageId\n    context.global.keyboard.messageId = null;\n    \n    // You could also send a editMessageReplyMarkup with an empty reply_markup here\n    return [ null, msg ];\n}\nelse\n{\n    var show_alert = false; // you can set this to true to open a dialog with the answer in the client.\n    \n    // msg.payload.content contains the callback data from the keyboard.\n    // You may change this value here.\n    msg.payload.options = show_alert;\n    \n    return [ msg, null ];\n}","outputs":"2","noerr":0,"x":657.0097045898438,"y":2868.7476196289062,"wires":[["5efe0231.f276ec"],["da73c188.576c4"]]},{"id":"c5094396.e8458","type":"function","z":"e8827dd4.9f445","name":"edit inline keyboard message","func":"// This is the message id of the initial keyboard that is simply exchanged by a new one.\nvar messageId = context.global.keyboard.messageId;\n\n// This is a sample of how to send a second inline keyboard with modified buttons\nvar reply_markup = JSON.stringify({\n    \"inline_keyboard\": [[\n                {\n                    \"text\": \"Are you really sure?\",\n                    \"callback_data\": \"load yes really\"            \n                }, \n                {\n                    \"text\": \"No\",\n                    \"callback_data\": \"load no\"            \n                }]\n            ]\n  });\n\n\nvar options = {\n    chat_id : msg.payload.chatId,\n    reply_markup : reply_markup,\n    message_id : messageId\n};\n\nmsg.payload.type = 'editMessageReplyMarkup';\nmsg.payload.content = reply_markup;\nmsg.payload.options = options;\n\nreturn [ msg ];\n","outputs":"1","noerr":0,"x":664.917236328125,"y":2761.416748046875,"wires":[["5efe0231.f276ec"]]},{"id":"da73c188.576c4","type":"function","z":"e8827dd4.9f445","name":"upload message","func":"msg.payload.type = 'message';\nmsg.payload.content = 'select the new Manifest';\nmsg.payload.options = {reply_to_message_id : msg.payload.messageId}\nreturn [ msg ];\n","outputs":"1","noerr":0,"x":884.0830078125,"y":2875.41650390625,"wires":[["d6224792.db71b8"]]},{"id":"d6224792.db71b8","type":"telegram sender","z":"e8827dd4.9f445","name":"send question","bot":"a6dd0a24.a85b58","x":1069.083251953125,"y":2875.4166870117188,"wires":[["8c9a3302.0acbd"]]},{"id":"8c9a3302.0acbd","type":"telegram reply","z":"e8827dd4.9f445","name":"get reply","bot":"a6dd0a24.a85b58","x":1237.4163818359375,"y":2875.4166870117188,"wires":[["99f21d86.fa96b"]]},{"id":"99f21d86.fa96b","type":"function","z":"e8827dd4.9f445","name":"show upload","func":"if(msg.payload.type === 'document')\n{\n    return msg;   \n}\n","outputs":1,"noerr":0,"x":1392.41650390625,"y":2873.75,"wires":[["dc685592.247aa8","5efe0231.f276ec"]]},{"id":"dc685592.247aa8","type":"debug","z":"e8827dd4.9f445","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1538.2498168945312,"y":2872.9165649414062,"wires":[]},{"id":"4a6c2e20.a21db","type":"debug","z":"e8827dd4.9f445","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":973.7496337890625,"y":1339.8330078125,"wires":[]},{"id":"2fb5a774.337a28","type":"unsafe-function","z":"e8827dd4.9f445","name":"","func":"var hound = context.global.get('hound');\n\n//retrieve model directory to be watched\nvar modelFilepath = context.global.get(\"ModelDir\");\n\n// Create a file watcher.\nvar watcher = hound.watch(modelFilepath)\n\n// Add callbacks for file and directory events.  The change event only applies\n// to files.\n\n\nwatcher.on('create', function(file, stats) {\n  //console.log(file + ' was created');\n  node.send({payload:file});\n})\n//watcher.clear()\n\nnode.on('close', function() {\n    watcher.clear();\n});\n\nreturn null;","outputs":1,"noerr":0,"x":709.5830078125,"y":1338.5831909179688,"wires":[["4a6c2e20.a21db"]]},{"id":"2f7cbe96.1a8d72","type":"http in","z":"2a540cc7.026154","name":"","url":"/aas/manifest/submodels","method":"get","upload":false,"swaggerDoc":"924a1324.8ff9e","x":160,"y":1380,"wires":[["ca68808c.bc50e","72f253da.41f03c"]]},{"id":"7a05bef6.1f493","type":"http in","z":"2a540cc7.026154","name":"","url":"/aas/manifest/submodel/:id","method":"get","upload":false,"swaggerDoc":"41c7222e.0e68ac","x":170,"y":1580,"wires":[["3d0d7ab8.32a3e6","492bb9a9.d66c58"]]},{"id":"b2a10fcf.fda9","type":"http in","z":"2a540cc7.026154","name":"","url":"/aas/manifest/headers","method":"get","upload":false,"swaggerDoc":"c5250d73.d165a","x":150,"y":880,"wires":[["f154745e.a88418","f5a93d82.efa2a"]]},{"id":"339ce7f7.3cc878","type":"http response","z":"2a540cc7.026154","name":"","statusCode":"","headers":{},"x":1850,"y":880,"wires":[]},{"id":"a3d0916.f70667","type":"http response","z":"2a540cc7.026154","name":"","statusCode":"","headers":{},"x":1830,"y":1380,"wires":[]},{"id":"76990c9e.fb6444","type":"comment","z":"2a540cc7.026154","name":"External Interface - Manifest - Configuration","info":"","x":190,"y":40,"wires":[]},{"id":"270734b8.1f17ac","type":"http response","z":"2a540cc7.026154","name":"","statusCode":"","headers":{},"x":1830,"y":1580,"wires":[]},{"id":"7ca3bc5a.feb5a4","type":"http in","z":"2a540cc7.026154","name":"","url":"/aas/manifest/addSubmodel/","method":"post","upload":false,"swaggerDoc":"","x":170,"y":1780,"wires":[["56ddaa0e.123c94","d62f0ee5.075c9"]]},{"id":"e443b97f.e9f4f8","type":"http in","z":"2a540cc7.026154","name":"","url":"/aas/manifest/removeSubmodel/:id","method":"delete","upload":false,"swaggerDoc":"","x":200,"y":1960,"wires":[["30673b5d.33fe94","a4bb6e77.da71a"]]},{"id":"5c7d1589.de3cac","type":"http in","z":"2a540cc7.026154","name":"","url":"/aas/manifest/updateSubmodel","method":"put","upload":false,"swaggerDoc":"","x":180,"y":2140,"wires":[["fa4d606.8d7dca","e9f8df33.35ab2"]]},{"id":"108aad52.5830a3","type":"http response","z":"2a540cc7.026154","name":"","statusCode":"","headers":{},"x":1830,"y":1780,"wires":[]},{"id":"98e1e3a8.94183","type":"http response","z":"2a540cc7.026154","name":"","statusCode":"","headers":{},"x":1830,"y":1960,"wires":[]},{"id":"c888ec81.ff43e","type":"http response","z":"2a540cc7.026154","name":"","statusCode":"","headers":{},"x":1830,"y":2140,"wires":[]},{"id":"56ddaa0e.123c94","type":"debug","z":"2a540cc7.026154","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":480,"y":1740,"wires":[]},{"id":"30673b5d.33fe94","type":"debug","z":"2a540cc7.026154","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":480,"y":1900,"wires":[]},{"id":"3d0d7ab8.32a3e6","type":"debug","z":"2a540cc7.026154","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":490,"y":1540,"wires":[]},{"id":"fa4d606.8d7dca","type":"debug","z":"2a540cc7.026154","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":490,"y":2100,"wires":[]},{"id":"e9d45fb7.12004","type":"http in","z":"2a540cc7.026154","name":"","url":"/aas/manifest/liveData/subscribe/property/:id","method":"put","upload":false,"swaggerDoc":"","x":220,"y":3280,"wires":[["a511255c.f0d1a8"]]},{"id":"eb99661b.e79fe8","type":"http in","z":"2a540cc7.026154","name":"","url":"/aas/manifest/liveData/unsubscribe/property/:id","method":"put","upload":false,"swaggerDoc":"","x":230,"y":3440,"wires":[["eff16971.db3338"]]},{"id":"6dc74edf.a7258","type":"http response","z":"2a540cc7.026154","name":"","statusCode":"","headers":{},"x":1830,"y":3440,"wires":[]},{"id":"e1ecd4cf.839198","type":"debug","z":"2a540cc7.026154","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":730,"y":280,"wires":[]},{"id":"ca68808c.bc50e","type":"debug","z":"2a540cc7.026154","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":490,"y":1340,"wires":[]},{"id":"56851efa.ac397","type":"http in","z":"2a540cc7.026154","name":"","url":"aas/persistManifest/","method":"post","upload":false,"swaggerDoc":"","x":150,"y":540,"wires":[["6d3d440f.dff89c","d0ffd048.9224c"]]},{"id":"3c1ef542.aa2baa","type":"http response","z":"2a540cc7.026154","name":"","statusCode":"","headers":{},"x":1850,"y":540,"wires":[]},{"id":"6d3d440f.dff89c","type":"debug","z":"2a540cc7.026154","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":410,"y":580,"wires":[]},{"id":"a7efbfed.f05c9","type":"http response","z":"2a540cc7.026154","name":"","statusCode":"","headers":{},"x":1850,"y":740,"wires":[]},{"id":"46fbfd19.0bcb74","type":"http in","z":"2a540cc7.026154","name":"","url":"aas/manifest","method":"get","upload":false,"swaggerDoc":"c57e3fb4.a1694","x":120,"y":740,"wires":[["8836a9a7.a1e1b8","cdc2edce.d346c"]]},{"id":"3ce13c6.b0753c4","type":"comment","z":"2a540cc7.026154","name":"External Interface - Data - Operations on Submodels","info":"","x":220,"y":1300,"wires":[]},{"id":"ac065dd2.bb1cc","type":"comment","z":"2a540cc7.026154","name":"External Interface - Data - Operations on Properties","info":"","x":200,"y":2260,"wires":[]},{"id":"9a64946b.beb6c8","type":"http in","z":"2a540cc7.026154","name":"","url":"/aas/manifest/property/:id","method":"get","upload":false,"swaggerDoc":"","x":160,"y":2340,"wires":[["ea6f3d3b.0bdb6","f6ee665.a58a898"]]},{"id":"ed70b7b6.375978","type":"http response","z":"2a540cc7.026154","name":"","statusCode":"","headers":{},"x":1830,"y":2340,"wires":[]},{"id":"ea6f3d3b.0bdb6","type":"debug","z":"2a540cc7.026154","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":480,"y":2300,"wires":[]},{"id":"5ed4e0b4.37fe3","type":"http in","z":"2a540cc7.026154","name":"","url":"/aas/manifest/addProperty/:id","method":"post","upload":false,"swaggerDoc":"","x":180,"y":2560,"wires":[["2fb5e848.519c38","b75af906.f91aa8"]]},{"id":"52a1a7cc.e19e68","type":"http response","z":"2a540cc7.026154","name":"","statusCode":"","headers":{},"x":1830,"y":2560,"wires":[]},{"id":"2fb5e848.519c38","type":"debug","z":"2a540cc7.026154","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":490,"y":2520,"wires":[]},{"id":"bcc50783.e62808","type":"debug","z":"2a540cc7.026154","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":490,"y":2700,"wires":[]},{"id":"65240ded.443364","type":"http in","z":"2a540cc7.026154","name":"","url":"/aas/manifest/removeProperty/:id","method":"delete","upload":false,"swaggerDoc":"","x":190,"y":2740,"wires":[["bcc50783.e62808","1961126a.52bdfe"]]},{"id":"1791bb2.2f81445","type":"http response","z":"2a540cc7.026154","name":"","statusCode":"","headers":{},"x":1830,"y":2740,"wires":[]},{"id":"c84a4d58.6688","type":"http in","z":"2a540cc7.026154","name":"","url":"/aas/manifest/updateProperty","method":"put","upload":false,"swaggerDoc":"","x":170,"y":2900,"wires":[["edc98289.3ffee","59c3b652.bf5b68"]]},{"id":"61157f50.eb84a","type":"http response","z":"2a540cc7.026154","name":"","statusCode":"","headers":{},"x":1830,"y":2900,"wires":[]},{"id":"edc98289.3ffee","type":"debug","z":"2a540cc7.026154","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":490,"y":2860,"wires":[]},{"id":"f1fb13dc.ab4b9","type":"ui_template","z":"6f5697aa.38c758","group":"f6ab83e8.416e5","name":"Submodels","order":1,"width":"20","height":"22","format":"<html>\n    <!--<script>\n        this.scope.sendRequest = function(op){\n            var reqType = (op.type == \"operation\")?\"invoke\":(op.type == \"event\")?\"subscribe\":\"error, unkown type!!\";\n            this.send({payload:{action:op.action,to:op.to,requestType:reqType}});\n        }\n    </script>\n    !-->\n    <head>\n        <link rel=\"stylesheet\" href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css\" integrity=\"sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO\" crossorigin=\"anonymous\">\n        <script src=\"https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js\" integrity=\"sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49\" crossorigin=\"anonymous\"></script>\n    \n        <script>\n            this.scope.sendRequest = function(op){\n                var reqType = (op.type == \"operation\")?\"invoke\":(op.type == \"event\")?\"subscribe\":\"error, unkown type!!\";\n                this.send({payload:{action:op.action,to:op.to,requestType:reqType}});\n            }\n            this.scope.extractingElement = function(element){\n                this.send({payload:element});\n            }\n            this.scope.init = function(){\n                this.send({payload:\"init\"});\n            }\n        \n        </script>\n    </head>\n        <div id=\"deck\" class=\"card-group\" ng-init=\"init()\">\n            <div class=\"card-body\">\n                <div class=\"input-group input-group-sm mb-3\">\n                    <input type=\"text\" class=\"form-control\" placeholder=\"global search...\" aria-label=\"Sizing example input\" aria-describedby=\"inputGroup-sizing-sm\" ng-model=\"search\">\n                </div>\n                <div class=\"card text-white bg-light mb-3\">\n                    <ul class=\"list-group list-group-flush\" >\n                        <li class=\"list-group-item\">\n                            <a class=\"text-dark\" data-toggle=\"collapse\" href=\"#collapse12\">Submodels</a>\n                            <ul id=\"collapse12\" class=\"list-group list-group-flush panel-collapse collapse\">\n                                <li class=\"list-group-item list-group-item-info\" ng-repeat=\"submodel in msg.payload.InternalElement | filter:search\">\n                                    <a class=\"text-white\" data-toggle=\"collapse\" href=\"#collapse22_{{submodel._Attribs.ID}}\" ng-if=\"submodel != ''\">{{submodel._Attribs.Name}}: <strong>{{submodel._Attribs.ID}}</strong></a>\n                                        <ul id=\"collapse22_{{submodel._Attribs.ID}}\" class=\"list-group list-group-flush panel-collapse collapse\">\n                                            <li class=\"list-group-item list-group-item-light\" ng-repeat=\"dataSourceManifest in submodel.InternalElement | filter:search\" ng-init=\"dsmIndex=$index\">\n                                                \n                                                <div class=\"custom-control custom-checkbox\">\n                                                    <input type=\"checkbox\" class=\"custom-control-input\" ng-disabled=\"dataSourceManifest.Attribute[3].Value[0]=='True'\" id=\"{{dataSourceManifest._Attribs.ID}}_{{$index}}\" ng-click=\"extractingElement(dataSourceManifest)\">\n                                                    <label class=\"custom-control-label\" for=\"{{dataSourceManifest._Attribs.ID}}_{{$index}}\"><a ng-class=\"dataSourceManifest.Attribute[4].Value[0]=='True' ? 'text-success' : 'text-warning'\" data-toggle=\"collapse\" href=\"#collapse32_{{dataSourceManifest._Attribs.ID}}\">{{dataSourceManifest._Attribs.Name}}: <strong>{{dataSourceManifest._Attribs.ID}}</strong>\n                                                     <br ng-if=\"dataSourceManifest.Attribute[2].Value[0]\">{{dataSourceManifest.Attribute[2]._Attribs.Name}}: <strong>{{dataSourceManifest.Attribute[2].Value[0]}}</strong></a></label>\n                                                    <!--<label class=\"custom-control-label\">{{$index}}</label>!-->\n                                                </div>\n                                                <!--<a class=\"text-black-50\" data-toggle=\"collapse\" href=\"#collapse32\">{{dataSourceManifest._Attribs.Name}}: <strong>{{dataSourceManifest._Attribs.ID}}</strong></a>!-->\n                                                    <ul id=\"collapse32_{{dataSourceManifest._Attribs.ID}}\" class=\"list-group list-group-flush panel-collapse collapse\">\n                                                        <li class=\"list-group-item list-group-item-info\" ng-repeat=\"dataSourceDefinition in dataSourceManifest.InternalElement | filter:search\" ng-init=\"dsdIndex=$index\">\n                                                            <a class=\"text-white\" data-toggle=\"collapse\" href=\"#collapse42_{{dataSourceDefinition._Attribs.ID}}_{{dsmIndex}}_{{dsdIndex}}\">{{dataSourceDefinition._Attribs.Name}}: <strong>{{dataSourceDefinition._Attribs.ID}}</strong>\n                                                            <br ng-if=\"dataSourceDefinition.Description[0]\">Description: <strong>{{dataSourceDefinition.Description[0]}}</strong></a>\n                                                                <ul id=\"collapse42_{{dataSourceDefinition._Attribs.ID}}_{{dsmIndex}}_{{dsdIndex}}\" class=\"list-group list-group-flush panel-collapse collapse\">\n                                                                    <li ng-repeat=\"element in dataSourceDefinition.InternalElement | filter:search\" ng-init=\"dkIndex=$index\" ng-if=\"element._Attribs.RefBaseSystemUnitPath == 'AASSystemUnitClassLib/Property/DK'\" class=\"list-group-item list-group-item-light\">\n                                                                        <a class=\"text-black-50\" data-toggle=\"collapse\" href=\"#collapse52_{{element._Attribs.ID}}_{{dsmIndex}}_{{dsdIndex}}_{{dkIndex}}\">{{element._Attribs.Name}}: <strong>{{element._Attribs.ID}}</strong></a>\n                                                                            <ul id=\"collapse52_{{element._Attribs.ID}}_{{dsmIndex}}_{{dsdIndex}}_{{dkIndex}}\" class=\"list-group list-group-flush panel-collapse collapse\">\n                                                                                <li ng-if=\"element.Description[0]\" class=\"list-group-item list-group-item-info\">\n                                                                                    <a class=\"text-white\">Description: <strong>{{element.Description[0]}}</strong></a>\n                                                                                </li>\n                                                                                <li ng-repeat=\"attribute in element.Attribute\" class=\"list-group-item list-group-item-info\">\n                                                                                    <a class=\"text-white\">{{attribute._Attribs.Name}}: <strong>{{attribute.Value[0]}}</strong></a>\n                                                                                </li>\n                                                                            </ul>\n                                                                    </li>\n                                                                </ul>\n                                                        </li>\n                                                    </ul>\n                                            </li>\n                                        </ul>\n                                    \n                                </li>\n                            </ul>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n</html>\n\n","storeOutMessages":false,"fwdInMessages":false,"templateScope":"local","x":2253.749755859375,"y":336.7867126464844,"wires":[["a281b152.c0c9d"]]},{"id":"e96426bd.d68d38","type":"http request","z":"6f5697aa.38c758","name":"","method":"use","ret":"txt","url":"","tls":"","x":1365.2498779296875,"y":283.79669189453125,"wires":[["954a231c.14e9f","509ff85a.12e798"]]},{"id":"954a231c.14e9f","type":"debug","z":"6f5697aa.38c758","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1510,"y":327.5466613769531,"wires":[]},{"id":"509ff85a.12e798","type":"unsafe-function","z":"6f5697aa.38c758","name":"SubmodelsProcessing","func":"//Retreiving Libraries from the Settings.json file\nvar XML = context.global.get('XML');\nvar os = context.global.get('os');\n\nvar xml_string = msg.payload;\n\nvar submodels = XML.parse( xml_string, { preserveAttributes: true, forceArrays: true  } );\nmsg.payload = submodels;\n\nreturn msg;","outputs":1,"noerr":0,"x":1660.2498779296875,"y":284.9167175292969,"wires":[["dcb64b43.daa4d8"]]},{"id":"f932b079.d4e0d","type":"debug","z":"6f5697aa.38c758","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":2235.2498779296875,"y":242.6666259765625,"wires":[]},{"id":"c38f32d4.80cd","type":"http request","z":"6f5697aa.38c758","name":"","method":"use","ret":"txt","url":"","tls":"","x":1340.0000915527344,"y":121.66668701171875,"wires":[["e5cae40d.f7ad78","fd7f9f07.a5f1c"]]},{"id":"6e0d6ea9.f3d56","type":"inject","z":"6f5697aa.38c758","name":"","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":530.9583740234375,"y":53.333335876464844,"wires":[["3dc5db89.f549b4"]]},{"id":"5bc551ed.32f14","type":"ui_button","z":"6f5697aa.38c758","name":"Refresh button","group":"768e00.eab492","order":3,"width":"3","height":"1","passthru":true,"label":"Refresh","tooltip":"","color":"","bgcolor":"#14524e","icon":"cached","payload":"","payloadType":"str","topic":"","x":540,"y":260,"wires":[["a9726315.b2cb9","989be8cf.678ad8"]]},{"id":"1e88869.3f73279","type":"actionflows_in","z":"6f5697aa.38c758","name":"informAASUI_ManifestChange in","priority":"50","links":[],"scope":"global","x":864.3751831054688,"y":477.0832824707031,"wires":[["a9195fe4.62ea6","b6631edc.bdd27","a9726315.b2cb9"]]},{"id":"964eb799.303758","type":"gate","z":"e8827dd4.9f445","name":"","controlTopic":"control","defaultState":"closed","openCmd":"open","closeCmd":"close","toggleCmd":"toggle","defaultCmd":"default","x":541.749755859375,"y":1338.4165649414062,"wires":[["2fb5a774.337a28"]]},{"id":"42110dac.2ce244","type":"function","z":"e8827dd4.9f445","name":"confirmation message","func":"context.global.keyboard = { pending : true };\n\nvar opts = {\n  reply_to_message_id: msg.payload.messageId,\n  reply_markup: JSON.stringify({\n    keyboard: [\n      ['Yes'],\n      ['No']],\n      'resize_keyboard' : true, \n      'one_time_keyboard' : true\n  })\n};\n\nmsg.payload.content = 'Do you want to initialize the Asset Administration Shell?';\nmsg.payload.options = opts;\n\nreturn [ msg ];\n","outputs":"1","noerr":0,"x":696.25,"y":186.2500228881836,"wires":[["c3e9c82f.a84678"]]},{"id":"c3e9c82f.a84678","type":"telegram sender","z":"e8827dd4.9f445","name":"show keyboard","bot":"a6dd0a24.a85b58","x":1250,"y":187.5000228881836,"wires":[[]]},{"id":"77658fed.c2afb","type":"actionflows","z":"e8827dd4.9f445","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"initFromBot","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":980,"y":261.2500228881836,"wires":[["f5ba1882.765018"]]},{"id":"f5ba1882.765018","type":"telegram sender","z":"e8827dd4.9f445","name":"send response","bot":"a6dd0a24.a85b58","x":1247.5,"y":260.0000228881836,"wires":[[]]},{"id":"7156d5e7.a0b0dc","type":"telegram sender","z":"e8827dd4.9f445","name":"send response","bot":"a6dd0a24.a85b58","x":1242.5,"y":307.5000228881836,"wires":[[]]},{"id":"d03a50a9.dd84f","type":"function","z":"e8827dd4.9f445","name":"create response","func":"if(context.global.keyboard.pending)\n{\n    context.global.keyboard.pending = false;\n    \n    if(msg.payload.content === 'Yes')\n    {\n        msg.payload.content = 'AAS Initialized';\n        return [msg, null];   \n    }\n    else\n    {\n        msg.payload.content = 'No Action';\n        return [null, msg];   \n    }\n}\n","outputs":"2","noerr":0,"x":672.5,"y":266.2500228881836,"wires":[["77658fed.c2afb"],["7156d5e7.a0b0dc"]]},{"id":"e8e2b093.33e8","type":"actionflows_in","z":"e8827dd4.9f445","name":"notifyBOT_SubmodelUpdate in","priority":"50","links":[],"scope":"global","x":408.624755859375,"y":1459.6666259765625,"wires":[["d7b303b5.a4494"]]},{"id":"e5ec4bba.838358","type":"telegram sender","z":"e8827dd4.9f445","name":"","bot":"a6dd0a24.a85b58","x":1100.499755859375,"y":1462.1666259765625,"wires":[[]]},{"id":"d7b303b5.a4494","type":"function","z":"e8827dd4.9f445","name":"notify submodel update","func":"msg.payload = {content : \"Submodel updated\", chatId : -330239092, type : \"message\"}\nreturn msg;","outputs":1,"noerr":0,"x":797.999755859375,"y":1459.6666259765625,"wires":[["e5ec4bba.838358","d3323dc3.07a76","dde3e9b2.e7c778"]]},{"id":"d3323dc3.07a76","type":"actionflows_out","z":"e8827dd4.9f445","name":"notifyBOT_SubmodelUpdate out","links":[],"x":1151.124755859375,"y":1517.1666259765625,"wires":[]},{"id":"dde3e9b2.e7c778","type":"debug","z":"e8827dd4.9f445","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1022.999755859375,"y":1403.4166259765625,"wires":[]},{"id":"40a45c9d.aa7b04","type":"telegram command","z":"e8827dd4.9f445","name":"/getLocation","command":"/getLocation","bot":"a6dd0a24.a85b58","strict":false,"x":350,"y":724,"wires":[["24104d73.8b5d82"],[]]},{"id":"24104d73.8b5d82","type":"function","z":"e8827dd4.9f445","name":"send Namespace","func":"msg.payload.content = context.global.get('namespace');\nmsg.payload.type = 'message';\n\n/* type can be one of the following\nphoto\naudio\nvideo\nsticker\nvoice\ndocument\n*/\n\nreturn msg;","outputs":1,"noerr":0,"x":730,"y":724,"wires":[["6919fc1b.f2a544"]]},{"id":"6919fc1b.f2a544","type":"telegram sender","z":"e8827dd4.9f445","name":"","bot":"a6dd0a24.a85b58","x":1270,"y":724,"wires":[[]]},{"id":"3c85fce3.dc5024","type":"actionflows_in","z":"e8827dd4.9f445","name":"notifyBOT_SubmodelAdd in","priority":"50","links":[],"scope":"global","x":399.249755859375,"y":1640.5,"wires":[["11cb63bc.06e0ac"]]},{"id":"f0c2af4a.cc483","type":"telegram sender","z":"e8827dd4.9f445","name":"","bot":"a6dd0a24.a85b58","x":1101.124755859375,"y":1643,"wires":[[]]},{"id":"11cb63bc.06e0ac","type":"function","z":"e8827dd4.9f445","name":"notify submodel add","func":"msg.payload = {content : \"Submodel added\", chatId : -330239092, type : \"message\"}\nreturn msg;","outputs":1,"noerr":0,"x":788.624755859375,"y":1640.5,"wires":[["f0c2af4a.cc483","7c7adf3b.6a4bb","daceb56f.23af98"]]},{"id":"7c7adf3b.6a4bb","type":"actionflows_out","z":"e8827dd4.9f445","name":"notifyBOT_SubmodelAdd out","links":[],"x":1141.749755859375,"y":1698,"wires":[]},{"id":"daceb56f.23af98","type":"debug","z":"e8827dd4.9f445","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1023.624755859375,"y":1584.25,"wires":[]},{"id":"4b6b3ddc.729e84","type":"actionflows_in","z":"e8827dd4.9f445","name":"notifyBOT_SubmodelRemove in","priority":"50","links":[],"scope":"global","x":410.9163818359375,"y":1803.833251953125,"wires":[["f770cf00.0c1f9"]]},{"id":"3c1a015c.43684e","type":"telegram sender","z":"e8827dd4.9f445","name":"","bot":"a6dd0a24.a85b58","x":1102.7913818359375,"y":1806.333251953125,"wires":[[]]},{"id":"f770cf00.0c1f9","type":"function","z":"e8827dd4.9f445","name":"notify submodel remove","func":"msg.payload = {content : \"Submodel removed\", chatId : -330239092, type : \"message\"}\nreturn msg;","outputs":1,"noerr":0,"x":800.2913818359375,"y":1803.833251953125,"wires":[["3c1a015c.43684e","20884fd8.a53fb","d0cc860e.980dc8"]]},{"id":"20884fd8.a53fb","type":"actionflows_out","z":"e8827dd4.9f445","name":"notifyBOT_SubmodelRemove out","links":[],"x":1163.4163818359375,"y":1861.333251953125,"wires":[]},{"id":"d0cc860e.980dc8","type":"debug","z":"e8827dd4.9f445","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1025.2913818359375,"y":1747.583251953125,"wires":[]},{"id":"1b7f5bd7.5c54d4","type":"actionflows_in","z":"e8827dd4.9f445","name":"notifyBOT_PropertyUpdate in","priority":"50","links":[],"scope":"global","x":400.9163818359375,"y":1963.8331298828125,"wires":[["98369d1f.bffa7"]]},{"id":"ce5d58f.9ff53a8","type":"telegram sender","z":"e8827dd4.9f445","name":"","bot":"a6dd0a24.a85b58","x":1102.7913818359375,"y":1966.3331298828125,"wires":[[]]},{"id":"98369d1f.bffa7","type":"function","z":"e8827dd4.9f445","name":"notify property update","func":"msg.payload = {content : \"Property updated\", chatId : -330239092, type : \"message\"}\nreturn msg;","outputs":1,"noerr":0,"x":790.2913818359375,"y":1963.8331298828125,"wires":[["ce5d58f.9ff53a8","653a93e4.6de7dc","5756b355.5e2fac"]]},{"id":"653a93e4.6de7dc","type":"actionflows_out","z":"e8827dd4.9f445","name":"notifyBOT_PropertyUpdate out","links":[],"x":1153.4163818359375,"y":2021.3331298828125,"wires":[]},{"id":"5756b355.5e2fac","type":"debug","z":"e8827dd4.9f445","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1025.2913818359375,"y":1907.5831298828125,"wires":[]},{"id":"5df958df.ccc938","type":"actionflows_in","z":"e8827dd4.9f445","name":"notifyBOT_PropertyAdd in","priority":"50","links":[],"scope":"global","x":394.249755859375,"y":2118.8331298828125,"wires":[["bdd2b2bc.ed4b1"]]},{"id":"be7e1569.e57928","type":"telegram sender","z":"e8827dd4.9f445","name":"","bot":"a6dd0a24.a85b58","x":1106.124755859375,"y":2121.3331298828125,"wires":[[]]},{"id":"bdd2b2bc.ed4b1","type":"function","z":"e8827dd4.9f445","name":"notify property add","func":"msg.payload = {content : \"Property added\", chatId : -330239092, type : \"message\"}\nreturn msg;","outputs":1,"noerr":0,"x":783.624755859375,"y":2118.8331298828125,"wires":[["be7e1569.e57928","19d08e35.de7fa2","9dbaba73.d3ef38"]]},{"id":"19d08e35.de7fa2","type":"actionflows_out","z":"e8827dd4.9f445","name":"notifyBOT_PropertyAdd out","links":[],"x":1146.749755859375,"y":2176.3331298828125,"wires":[]},{"id":"9dbaba73.d3ef38","type":"debug","z":"e8827dd4.9f445","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1028.624755859375,"y":2062.5831298828125,"wires":[]},{"id":"c0678888.5b9628","type":"actionflows_in","z":"e8827dd4.9f445","name":"notifyBOT_PropertyRemove in","priority":"50","links":[],"scope":"global","x":400.9163818359375,"y":2282.1666259765625,"wires":[["71c22db3.4ebc04"]]},{"id":"68c5ce6a.c8dec","type":"telegram sender","z":"e8827dd4.9f445","name":"","bot":"a6dd0a24.a85b58","x":1102.7913818359375,"y":2284.6666259765625,"wires":[[]]},{"id":"71c22db3.4ebc04","type":"function","z":"e8827dd4.9f445","name":"notify property remove","func":"msg.payload = {content : \"Property removed\", chatId : -330239092, type : \"message\"}\nreturn msg;","outputs":1,"noerr":0,"x":790.2913818359375,"y":2282.1666259765625,"wires":[["68c5ce6a.c8dec","2541d679.67309a","bef20dd5.24c69"]]},{"id":"2541d679.67309a","type":"actionflows_out","z":"e8827dd4.9f445","name":"notifyBOT_PropertyRemove out","links":[],"x":1153.4163818359375,"y":2339.6666259765625,"wires":[]},{"id":"bef20dd5.24c69","type":"debug","z":"e8827dd4.9f445","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1025.2913818359375,"y":2225.9166259765625,"wires":[]},{"id":"9c0be40f.d4d8b8","type":"actionflows_in","z":"e8827dd4.9f445","name":"notifyBOT_AASInitialized in","priority":"50","links":[],"scope":"global","x":400.9163818359375,"y":2448.8331298828125,"wires":[["5772dfcb.2cdeb"]]},{"id":"2e3b4a1a.5729e6","type":"telegram sender","z":"e8827dd4.9f445","name":"","bot":"a6dd0a24.a85b58","x":1102.7913818359375,"y":2451.3331298828125,"wires":[[]]},{"id":"5772dfcb.2cdeb","type":"function","z":"e8827dd4.9f445","name":"notify property remove","func":"msg.payload = {content : \"AAS initialized\", chatId : -330239092, type : \"message\"}\nreturn msg;","outputs":1,"noerr":0,"x":790.2913818359375,"y":2448.8331298828125,"wires":[["2e3b4a1a.5729e6","5ef53050.1a3d2","626028d8.6d26d8"]]},{"id":"5ef53050.1a3d2","type":"actionflows_out","z":"e8827dd4.9f445","name":"notifyBOT_AASInitialized out","links":[],"x":1143.4163818359375,"y":2506.3331298828125,"wires":[]},{"id":"626028d8.6d26d8","type":"debug","z":"e8827dd4.9f445","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1025.2913818359375,"y":2392.5831298828125,"wires":[]},{"id":"d4816bd0.5458c8","type":"ui_button","z":"6f5697aa.38c758","name":"Get button","group":"768e00.eab492","order":1,"width":"3","height":"1","passthru":false,"label":"Get","tooltip":"","color":"","bgcolor":"#14524e","icon":"swap_vert","payload":"","payloadType":"str","topic":"","x":1090,"y":660,"wires":[["d794c6c2.522ce8"]]},{"id":"2ddd4b37.4ac994","type":"ui_button","z":"6f5697aa.38c758","name":"Subscribe button","group":"768e00.eab492","order":2,"width":"3","height":"1","passthru":false,"label":"Subscribe","tooltip":"","color":"","bgcolor":"#14524e","icon":"publish","payload":"","payloadType":"str","topic":"","x":1116.666748046875,"y":837.8568115234375,"wires":[["badfe546.83f518"]]},{"id":"3dc5db89.f549b4","type":"unsafe-function","z":"6f5697aa.38c758","name":"flowVariables","func":"context.flow.set('selectedElements', []);\ncontext.flow.set('logs', []);\nreturn msg;\n//context.flow.set('Body', \"\");","outputs":1,"noerr":0,"x":687.0001220703125,"y":53.333351135253906,"wires":[["a9726315.b2cb9","bab64e2e.6d833"]]},{"id":"2764186f.d19d88","type":"debug","z":"6f5697aa.38c758","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":2719.166748046875,"y":335.7500305175781,"wires":[]},{"id":"91e46516.f972e8","type":"debug","z":"6f5697aa.38c758","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":2637.5956420898438,"y":779.6666259765625,"wires":[]},{"id":"d794c6c2.522ce8","type":"unsafe-function","z":"6f5697aa.38c758","name":"LiveDataToGet","func":"//Retreiving Libraries from the Settings.json file\nvar outputMsgs = [];\nvar selectedElements = context.flow.get('selectedElements');\nfor(var element in selectedElements){\n    var msg = {payload:selectedElements[element]._Attribs.ID};\n    msg.url = context.global.get('namespace') + \"/aas/manifest/liveData/request/property/\" + selectedElements[element]._Attribs.ID;\n    outputMsgs.push(msg);\n    \n}\n\nreturn [outputMsgs];","outputs":1,"noerr":0,"x":1371.666748046875,"y":660,"wires":[["db8ee54c.c8bea8","7f0b3831.fbe498"]]},{"id":"dd0fe537.21bbe8","type":"ui_template","z":"6f5697aa.38c758","group":"29ad3d07.d8e48a","name":"Log","order":0,"width":"30","height":"20","format":"<html>\n<head>\n    <link rel=\"stylesheet\" href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css\" integrity=\"sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO\" crossorigin=\"anonymous\">\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js\" integrity=\"sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49\" crossorigin=\"anonymous\"></script>\n    \n    <script>\n        (function(scope) {\n            scope.logs = [];\n        \n            scope.$watch('msg', function(msg){\n                if (msg) {\n                    if (msg.payload) {\n                        scope.logs = msg.payload;\n                    }\n                }\n            });\n            scope.init = function() {\n                //scope.observations = [];\n                scope.send({payload:scope.observations});\n            }\n        })(scope)\n    </script>\n</head>\n    <div id=\"deck\" ng-init=\"init()\">\n        <table class=\"table table-sm\">\n            <thead class=\"text-dark\">\n                <tr>\n                    <th scope=\"col\">AAS Id</th>\n                    <th scope=\"col\">_msgId</th>\n                    <th scope=\"col\">Timestamp</th>\n                    <th scope=\"col\">Value</th>\n                </tr>\n            </thead>\n            <tbody>\n            <tr class=\"table-info\" ng-repeat=\"i in logs\">\n                <td><a class=\"text-dark\">{{i.AASID}}</a></td>\n                <td><a class=\"text-dark\">{{i._msgid}}</a></td>\n                <td><a class=\"text-dark\">{{i.time}}</a></td>\n                <td><a class=\"text-dark\">{{i.value}}</a></td>\n                <!--<td style=\"cursor:pointer;\" ng-click=\"remove(i)\" title=\"Remove\">&times;</td>!-->\n            </tr>\n            </tbody>\n            \n        </table>\n    </div>\n</html>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":2501.2858276367188,"y":778.476318359375,"wires":[["91e46516.f972e8","4df4c4dd.ea74fc"]]},{"id":"46e5fc99.b6ce24","type":"http in","z":"2a540cc7.026154","name":"","url":"/aas/manifest/liveData/request/property/:id","method":"get","upload":false,"swaggerDoc":"","x":210,"y":3160,"wires":[["cc280ea6.fe4e4","b20e4ea5.7e20b"]]},{"id":"d9a88684.abfd08","type":"http response","z":"2a540cc7.026154","name":"","statusCode":"","headers":{},"x":1830,"y":3280,"wires":[]},{"id":"cc280ea6.fe4e4","type":"debug","z":"2a540cc7.026154","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":480,"y":3220,"wires":[]},{"id":"db8ee54c.c8bea8","type":"http request","z":"6f5697aa.38c758","name":"","method":"GET","ret":"txt","paytoqs":false,"url":"","tls":"","proxy":"","x":1541.047607421875,"y":778.0952758789062,"wires":[["dae58985.3c1a48","8d0480c6.52261"]]},{"id":"35fde27b.6fd59e","type":"unsafe-function","z":"6f5697aa.38c758","name":"LogsProcessing","func":"//Retreiving Libraries from the Settings.json file\nif(msg.payload){\n    var logs = context.flow.get('logs');\n    //for(var log in msg.payload){\n    //    logs.push(msg.payload[log]);\n    //}\n    var log = {};\n    log.value = msg.payload;\n    log.time = Date.now();\n    log._msgid = msg._msgid;\n    log.AASID = context.global.get('AASIdentifier');\n    if(logs.length > 25){\n        logs.pop();\n        logs.push(log);    \n    } else {\n        logs.push(log);\n    }\n    \n    context.flow.set('logs', logs);\n    var outputMsg = {};\n    //msg.payload = logs;\n    outputMsg.payload = logs;\n    return outputMsg;\n}\nmsg.payload = \"\";\nreturn msg; ","outputs":1,"noerr":0,"x":1980.6190795898438,"y":778.09521484375,"wires":[["bd668357.0c075","dd0fe537.21bbe8"]]},{"id":"169503f2.b652dc","type":"delay","z":"6f5697aa.38c758","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":2577.3333740234375,"y":850.6666259765625,"wires":[["dd0fe537.21bbe8"]]},{"id":"4df4c4dd.ea74fc","type":"unsafe-function","z":"6f5697aa.38c758","name":"GetLog","func":"//Retreiving Libraries from the Settings.json file\nmsg.payload = context.flow.get('logs');\nreturn msg; ","outputs":1,"noerr":0,"x":2314,"y":847.333251953125,"wires":[["169503f2.b652dc","34d016e0.2f288a"]]},{"id":"34d016e0.2f288a","type":"debug","z":"6f5697aa.38c758","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":2506.1666259765625,"y":885.9998779296875,"wires":[]},{"id":"a28c43b7.aece1","type":"actionflows_in","z":"e8827dd4.9f445","name":"notifyBOT_NewLivedata in","priority":"50","links":[],"scope":"global","x":390.9163818359375,"y":2602.1666259765625,"wires":[["f49d9cc5.8e67b"]]},{"id":"f49d9cc5.8e67b","type":"function","z":"e8827dd4.9f445","name":"notify livedata available","func":"//msg.observation = msg.payload;\nmsg.payload = {content : \"New Livedata Available: \" + msg.payload[0].id, chatId : -330239092, type : \"message\"}\nreturn msg;","outputs":1,"noerr":0,"x":795.9163818359375,"y":2603.4998779296875,"wires":[["9887399d.951478","8c69a7c1.59ffb8","ebdfdbfe.76c008"]]},{"id":"9887399d.951478","type":"actionflows_out","z":"e8827dd4.9f445","name":"notifyBOT_NewLivedata out","links":[],"x":1140.9163818359375,"y":2643.8331298828125,"wires":[]},{"id":"8c69a7c1.59ffb8","type":"telegram sender","z":"e8827dd4.9f445","name":"","bot":"a6dd0a24.a85b58","x":1110.9163818359375,"y":2603.8331298828125,"wires":[[]]},{"id":"ebdfdbfe.76c008","type":"debug","z":"e8827dd4.9f445","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1024.249755859375,"y":2560.4998779296875,"wires":[]},{"id":"7f0b3831.fbe498","type":"debug","z":"6f5697aa.38c758","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1524.1906127929688,"y":627.5238647460938,"wires":[]},{"id":"97a3d807.573f98","type":"debug","z":"6f5697aa.38c758","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1970,"y":840,"wires":[]},{"id":"a4217899.6fb838","type":"ui_template","z":"6f5697aa.38c758","group":"39f23940.8c51ae","name":"DataInterfaces","order":1,"width":"30","height":"20","format":"<html>\n<head>\n    <link rel=\"stylesheet\" href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css\" integrity=\"sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO\" crossorigin=\"anonymous\">\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js\" integrity=\"sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49\" crossorigin=\"anonymous\"></script>\n    \n    <script>\n        (function(scope) {\n            scope.$watch('msg', function(msg){\n                if (msg) {\n                    if (msg.payload) {\n\n                        scope.interfaces = [];\n                        var submodels = msg.payload.InternalElement; \n                        for(var submodel in submodels){\n                            //var dsms = msg.payload.InternalElement[0].InternalElement;\n                            var dsms = submodels[submodel].InternalElement;\n                            for(var dsm in dsms){\n                                var dataInterfaceElement = new Object();\n                                dataInterfaceElement.DSMId = dsms[dsm]._Attribs.ID;\n                                var dsds = dsms[dsm].InternalElement;\n                                //scope.send({payload:dsds});\n                                for(var dsd in dsds){\n                                    dataInterfaceElement.DSDId = dsds[dsd]._Attribs.ID;\n                                    dataInterfaceElement.DSDName = dsds[dsd]._Attribs.Name;\n                                    var elements = dsds[dsd].InternalElement;\n                                    for(var element in elements){\n                                        if(elements[element]._Attribs.RefBaseSystemUnitPath.includes(\"DI\")){\n                                            dataInterfaceElement.DIId = elements[element]._Attribs.ID;\n                                            var parameters = elements[element].InternalElement[0].InternalElement;\n                                            var parametersString = \"\";\n                                            for(var parameter in parameters){\n                                                parametersString = parametersString + parameters[parameter].Attribute[2].Value[0] + \", \";\n                                            }\n                                            dataInterfaceElement.Parameters = parametersString;\n                                        } else {\n                                            dataInterfaceElement.DKId = elements[element]._Attribs.ID;\n                                        }\n                                    }\n                                    //scope.send({payload:dataInterfaceElement});\n                                    scope.interfaces.push(dataInterfaceElement);\n                                }\n                            }\n                        \n                        }\n                        scope.send({payload:scope.interfaces})\n                    }\n                }\n            });\n/*            scope.init = function() {\n                //scope.observations = [];\n                scope.send({payload:scope.observations});\n            }*/\n        })(scope)\n    </script>\n</head>\n    <div id=\"deck\">\n        <table class=\"table table-sm\">\n            <thead class=\"text-dark\">\n                <tr>\n                    <th scope=\"col\">DSM Id</th>\n                    <th scope=\"col\">DSD Id</th>\n                    <th scope=\"col\">DSD Name</th>\n                    <th scope=\"col\">DK Id</th>\n                    <th scope=\"col\">DI Id</th>\n                    <th scope=\"col\">Parameters</th>\n                </tr>\n            </thead>\n            <tbody>\n            <tr ng-repeat=\"i in interfaces\">\n                <td><a class=\"text-dark\">{{i.DSMId}}</a></td>\n                <td><a class=\"text-dark\">{{i.DSDId}}</a></td>\n                <td><a class=\"text-dark\">{{i.DSDName}}</a></td>\n                <td><a class=\"text-dark\">{{i.DKId}}</a></td>\n                <td><a class=\"text-dark\">{{i.DIId}}</a></td>\n                <td><a class=\"text-dark\">{{i.Parameters}}</a></td>\n                <!--<td style=\"cursor:pointer;\" ng-click=\"remove(i)\" title=\"Remove\">&times;</td>!-->\n            </tr>\n            </tbody>\n            \n        </table>\n    </div>\n</html>","storeOutMessages":false,"fwdInMessages":false,"templateScope":"local","x":2261.964630126953,"y":384.5595703125,"wires":[["455e56ee.7480d8"]]},{"id":"455e56ee.7480d8","type":"debug","z":"6f5697aa.38c758","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":2473.928466796875,"y":384.3809509277344,"wires":[]},{"id":"a48e1d7.65352e","type":"ui_template","z":"6f5697aa.38c758","group":"86fd9f.309a7a6","name":"Logo / Clock","order":0,"width":0,"height":0,"format":"<script id=\"clockScript1\" type=\"text/javascript\">\n    var clockInterval;\n    $(function () {\n        if (clockInterval) return;\n\n        //add logo\n        var div1 = $('<div/>');\n        var logo = new Image();\n\n        logo.src = '\\\\images\\\\PROPHESY_LOGO_3.png'\n        logo.height = 45;\n        div1[0].style.margin = '10px auto';\n\n        div1.append(logo);\n\n        //add clock\n        var div2 = $('<div/>');\n        var p = $('<p/>');\n\n        div2.append(p);\n        div2[0].style.margin = '5px';\n\n        function displayTime() {\n            p.text(new Date().toLocaleString());\n        }\n        \n        clockInterval = setInterval(displayTime, 1000);\n\n        //add to toolbar when it's available\n        var addToToolbarTimer;\n        \n        function addToToolbar() {\n            var toolbar = $('.md-toolbar-tools');\n            \n            if(!toolbar.length) return;\n            \n            toolbar.append(div1);\n            toolbar.append(div2);\n            clearInterval(addToToolbarTimer);\n        }\n        addToToolbarTimer = setInterval(addToToolbar, 100);\n    });\n</script>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"global","x":621.7860412597656,"y":1713.5716857910156,"wires":[[]]},{"id":"1f8f09e.dac75f6","type":"node-red-contrib-httpauth","z":"2a540cc7.026154","name":"handle http Auth","file":"ab09af3a.fe2f2","cred":"","authType":"Basic","realm":"","username":"","password":"","hashed":false,"x":530,"y":340,"wires":[["e1ecd4cf.839198","a317febe.34127"]]},{"id":"a281b152.c0c9d","type":"unsafe-function","z":"6f5697aa.38c758","name":"LiveDataSelectedElements","func":"//Retreiving Libraries from the Settings.json file\nif(msg.payload != \"init\"){\n    var selectedElements = context.flow.get('selectedElements');\n    var selectedElement = msg.payload;\n    \n    if(selectedElements.lenght == 0){\n        //selectedElements.push(selectedElement._Attribs.ID);\n        selectedElements.push(selectedElement);\n    } else {\n        var found = false;\n        for(var element in selectedElements){\n            //if(selectedElement._Attribs.ID == selectedElements[element]){\n            if(selectedElement._Attribs.ID == selectedElements[element]._Attribs.ID){\n                selectedElements.splice(element, 1);\n                found = true;\n                break;\n            }\n        }\n        if(!found){\n            //selectedElements.push(selectedElement._Attribs.ID);\n            selectedElements.push(selectedElement);\n        }\n    }\n    context.flow.set('selectedElements', selectedElements);\n    msg.payload = selectedElements;\n    return msg;\n} else {\n    context.flow.set('selectedElements', []);\n    return msg;\n}","outputs":1,"noerr":0,"x":2508.75,"y":336.5000305175781,"wires":[["2764186f.d19d88"]]},{"id":"1e57f57b.3f724b","type":"ui_form","z":"6f5697aa.38c758","name":"Dashboard Login-In","label":"","group":"393bcf13.7c294","order":0,"width":"0","height":"0","options":[{"label":"username","value":"username","type":"text","required":true},{"label":"password","value":"password","type":"password","required":true}],"formValue":{"username":"","password":""},"payload":"","submit":"submit","cancel":"cancel","topic":"","x":143.33322143554688,"y":1249.6666259765625,"wires":[["c46a2b7d.3f4db8","142eaf0f.d2bb91"]]},{"id":"2ddc7522.e7024a","type":"debug","z":"6f5697aa.38c758","name":"Debug Account Log ","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","x":529.3332214355469,"y":1211.6666259765625,"wires":[]},{"id":"5737b8ca.210af8","type":"comment","z":"6f5697aa.38c758","name":"Sign-In Section","info":"","x":135.33322143554688,"y":1186.6666259765625,"wires":[]},{"id":"c46a2b7d.3f4db8","type":"function","z":"6f5697aa.38c758","name":"Account Log","func":"var accountlog =  flow.get(\"accountlog\") || [] ; \n\naccountlog.push({ accessAt : new Date(), username : msg.payload.username})\n\nflow.set(\"accountlog\", accountlog);\n\nmsg.payload = accountlog;\nreturn msg;","outputs":1,"noerr":0,"x":334.3332214355469,"y":1213.6666259765625,"wires":[["2ddc7522.e7024a"]]},{"id":"142eaf0f.d2bb91","type":"function","z":"6f5697aa.38c758","name":"Account Verification","func":"var accounts =  flow.get(\"accounts\") || [ { username : \"admin\", password : \"admin\"},{ username : \"guest\", password : \"guest\"}] ; \n\nvar username = msg.payload.username ;\nvar password = msg.payload.password ; \n\nvar newMsg = {}; newMsg.payload = 1;\n\naccounts.forEach(function ( account ){\n    if ( account.username == username ) {\n       newMsg.payload = 2;\n       if ( account.password == password ) {\n           newMsg.payload = 0;\n       } \n    }\n});\n\nreturn newMsg;","outputs":1,"noerr":0,"x":358.3332214355469,"y":1283.6666259765625,"wires":[["f0654240.52f6e"]]},{"id":"f0654240.52f6e","type":"switch","z":"6f5697aa.38c758","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"str"},{"t":"eq","v":"1","vt":"str"},{"t":"eq","v":"2","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":526.3332214355469,"y":1285.6666259765625,"wires":[["1d4739f2.fc0606"],["39746ba9.7358a4"],["5ef9e44.b3cc71c"]]},{"id":"1d4739f2.fc0606","type":"function","z":"6f5697aa.38c758","name":"= 0 : Success","func":"/* activate session timer */\nvar sessionTimer =  flow.get(\"sessionTimer\") || 0; \nvar currTime = Date.now();\nflow.set(\"sessionTimer\", currTime);\n\n/* ui-control payload */\nvar msg = {};\n\n/*msg.payload = { group: {\n    show : [\"Login_SensorData\", \"Login_History\"],\n    hide : [\"Login_Signin\"]\n}*/\n\n//msg.payload = {tab: \"Manifest\"};\n\nmsg.payload = { group: {\n        show : [\"Login_Commands\", \"Login_Configuration\"],\n        hide : [\"Login_Login\"]\n    }\n};\n\nreturn msg;","outputs":1,"noerr":0,"x":686.3332214355469,"y":1251.6666259765625,"wires":[["b92d090b.b49848"]]},{"id":"39746ba9.7358a4","type":"function","z":"6f5697aa.38c758","name":"= 1 : Unknown User","func":"msg.payload = \"Username Doesn't exist!!!\"\nreturn msg;","outputs":1,"noerr":0,"x":706.3332214355469,"y":1290.6666259765625,"wires":[["1fd157b.7dbbda8"]]},{"id":"5ef9e44.b3cc71c","type":"function","z":"6f5697aa.38c758","name":"= 2 : Wrong Password","func":"msg.payload = \"Invalid Password\";\nreturn msg;","outputs":1,"noerr":0,"x":709.3332214355469,"y":1329.6666259765625,"wires":[["1fd157b.7dbbda8"]]},{"id":"b92d090b.b49848","type":"ui_ui_control","z":"6f5697aa.38c758","name":"Go to Manifest Group","x":955.3332214355469,"y":1250.6666259765625,"wires":[[]]},{"id":"1fd157b.7dbbda8","type":"ui_toast","z":"6f5697aa.38c758","position":"dialog","displayTime":"3","highlight":"","outputs":1,"ok":"OK","cancel":"","topic":"Authentication Failed","name":"Authentication Failure Dialog","x":976.3332214355469,"y":1311.6666259765625,"wires":[[]]},{"id":"a2ceda34.9a6578","type":"comment","z":"6f5697aa.38c758","name":"Session Management - 15 secs for this demo","info":"","x":224.83322143554688,"y":1369.6666326522827,"wires":[]},{"id":"b05dfc27.2c67b","type":"inject","z":"6f5697aa.38c758","name":"Timer","topic":"","payload":"","payloadType":"date","repeat":"3","crontab":"","once":false,"onceDelay":0.1,"x":125.33321762084961,"y":1472.6666316986084,"wires":[["fd21b5df.681398","db8754b8.5d0988"]]},{"id":"fd21b5df.681398","type":"function","z":"6f5697aa.38c758","name":"Detect Session Timer","func":"var sessionTimer =  flow.get(\"sessionTimer\") || 0; \nvar currTime = Date.now();\nvar SESSION_TIMEOUT = 15000; //15 secs\n\nif ( sessionTimer === 0 /* Inactive, No user signed in */ ) {\n    msg.payload = 2;\n} else {\n    if ( currTime - sessionTimer > SESSION_TIMEOUT ) {\n      msg.payload = 0;  \n    } else {\n      msg.payload = 1;        \n    }\n}\nreturn msg;","outputs":1,"noerr":0,"x":309.3332214355469,"y":1434.6666240692139,"wires":[["8cde7f83.b7437"]]},{"id":"8cde7f83.b7437","type":"switch","z":"6f5697aa.38c758","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"str"},{"t":"eq","v":"1","vt":"str"},{"t":"eq","v":"2","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":483.33322525024414,"y":1434.6666240692139,"wires":[["fd861718.f64518"],["e8b3ef85.d4e48"],["47bc50be.83e6f"]]},{"id":"fd861718.f64518","type":"function","z":"6f5697aa.38c758","name":"Time-Out","func":"/* activate session timer */\nvar sessionTimer =  flow.get(\"sessionTimer\") || 0; \nflow.set(\"sessionTimer\", 0);\n\nmsg.payload = \"Session Expired! Please singin again!\";\nreturn msg;","outputs":1,"noerr":0,"x":623.3332214355469,"y":1394.6666259765625,"wires":[["aaaa25b8.3a4148","a928f5c7.b5cfc8"]]},{"id":"aaaa25b8.3a4148","type":"ui_toast","z":"6f5697aa.38c758","position":"dialog","displayTime":"3","highlight":"","outputs":1,"ok":"OK","cancel":"","topic":"Session Timeout","name":"Time-Out Dialog","x":812.8332672119141,"y":1371.6666355133057,"wires":[[]]},{"id":"e02d896e.22f368","type":"ui_ui_control","z":"6f5697aa.38c758","name":"Go to Signin Group","x":1020.8332405090332,"y":1412.6666231155396,"wires":[[]]},{"id":"a928f5c7.b5cfc8","type":"function","z":"6f5697aa.38c758","name":"Login Redirection","func":"var msg = {};\n//msg.payload = {tab: \"Login\"};\nmsg.payload = { group: {\n    hide : [\"Login_Commands\", \"Login_Configuration\"],\n    show : [\"Login_Login\"]\n}\n};\nreturn msg;","outputs":1,"noerr":0,"x":823.3332672119141,"y":1412.6666288375854,"wires":[["e02d896e.22f368"]]},{"id":"2eb3aad0.3f31e6","type":"ui_toast","z":"6f5697aa.38c758","position":"bottom right","displayTime":"1","highlight":"","outputs":0,"ok":"OK","cancel":"","topic":"Timer","name":"Display Remaining Time","x":639.8332138061523,"y":1536.6666240692139,"wires":[]},{"id":"db8754b8.5d0988","type":"function","z":"6f5697aa.38c758","name":"Calculating Remaining Time (Debug)","func":"var sessionTimer =  flow.get(\"sessionTimer\") || 0; \nvar currTime = Date.now();\nvar remainingSecs = Math.floor((15000 - (currTime - sessionTimer))/1000) + 1;\n    \nif ( sessionTimer == 0 /* Inactive, No user signed in */ ) {\n    return null;\n} else {\n    \n    if ( remainingSecs <= 7 ) msg.payload = \"Remaining : \" + remainingSecs + \" secs\";  \n    else return null;\n}\nreturn msg;","outputs":1,"noerr":0,"x":357.3332214355469,"y":1535.666639328003,"wires":[["2eb3aad0.3f31e6"]]},{"id":"f1ea6209.cbe34","type":"ui_ui_control","z":"6f5697aa.38c758","name":"Stay in Sensor Group","x":1009.8331909179688,"y":1450.666618347168,"wires":[[]]},{"id":"e8b3ef85.d4e48","type":"function","z":"6f5697aa.38c758","name":"Configuration Group","func":"var msg = {};\n\n//msg.payload = {tab: \"Manifest\"};\n\nmsg.payload = { group: {\n    show : [\"Login_Commands\", \"Login_Configuration\"],\n    hide : [\"Login_Signin\"]\n}\n};\nreturn msg;","outputs":1,"noerr":0,"x":697.8332214355469,"y":1455.6666202545166,"wires":[["f1ea6209.cbe34"]]},{"id":"47bc50be.83e6f","type":"function","z":"6f5697aa.38c758","name":"Login Group","func":"var msg = {};\n\n//msg.payload = {tab: \"Login\"};\n/*msg.payload = { group: {\n    hide : [\"Login_SensorData\", \"Login_History\"],\n    show : [\"Login_Signin\"]\n}\n};*/\n\nmsg.payload = { group: {\n    hide : [\"Login_Commands\", \"Login_Configuration\"],\n    show : [\"Login_Login\"]\n}\n};\n\nreturn msg;","outputs":1,"noerr":0,"x":674.8332443237305,"y":1495.6666479110718,"wires":[["f2b0d4bb.8bc748"]]},{"id":"f2b0d4bb.8bc748","type":"ui_ui_control","z":"6f5697aa.38c758","name":"Go to Signin Group","x":1014.8332977294922,"y":1491.666660308838,"wires":[[]]},{"id":"f74c0684.8a6468","type":"ui_toast","z":"6f5697aa.38c758","position":"bottom right","displayTime":"1","highlight":"","outputs":0,"ok":"OK","cancel":"","topic":"Manifest","name":"Notify Manifest Changes","x":1550,"y":480,"wires":[]},{"id":"8df24b10.8f4588","type":"ui_template","z":"6f5697aa.38c758","group":"395267b0.ccc668","name":"Submodels_Config","order":1,"width":"20","height":"22","format":"<html>\n    <!--<script>\n        this.scope.sendRequest = function(op){\n            var reqType = (op.type == \"operation\")?\"invoke\":(op.type == \"event\")?\"subscribe\":\"error, unkown type!!\";\n            this.send({payload:{action:op.action,to:op.to,requestType:reqType}});\n        }\n    </script>\n    !-->\n    <head>\n        <link rel=\"stylesheet\" href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css\" integrity=\"sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO\" crossorigin=\"anonymous\">\n        <script src=\"https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js\" integrity=\"sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49\" crossorigin=\"anonymous\"></script>\n    \n        <script>\n        \n\n            (function(scope) {\n                \n                scope.prop = {   \"type\": \"select\", \n                \"values\": [ \"true\", \"false\"] \n                };\n                \n                scope.init = function() {\n                //scope.observations = [];\n                    scope.send({payload:\"init\"});\n                }\n                \n                scope.extractingElement = function(element, visibility){\n                    scope.send({payload:element});\n                }\n                \n                scope.$watch('msg', function(msg){\n                if (msg) {\n                    if (msg.payload) {\n                        var submodels = msg.payload.InternalElement;\n                         for(var submodel in submodels){\n                            submodels[submodel].Attribute[0].Value[0] = submodels[submodel].Attribute[0].Value[0].toLowerCase();\n                            var dsms = submodels[submodel].InternalElement;\n                            for(var dsm in dsms){\n                                dsms[dsm].Attribute[1].Value[0] = dsms[dsm].Attribute[1].Value[0].toLowerCase(); \n                            }\n                        }\n                    }\n                }\n            });\n                \n            })(scope)\n       /*this.scope.extractingElement = function(element, visibility){\n                this.send({payload:element});\n        }*/\n        </script>\n    </head>\n        <div id=\"deck\" class=\"card-group\" ng-init=\"init()\">\n            <div class=\"card-body\">\n                <div class=\"card text-white bg-light mb-3\">\n                    <ul class=\"list-group list-group-flush\" >\n                        \n                        <li class=\"list-group-item\">\n                            <a class=\"text-dark\" data-toggle=\"collapse\" href=\"#collapse13\">Submodels</a>\n                            <ul id=\"collapse13\" class=\"list-group list-group-flush panel-collapse collapse\">\n                                <li class=\"list-group-item list-group-item-info\" ng-repeat=\"submodel in msg.payload.InternalElement\">\n                                    <a class=\"text-white\" data-toggle=\"collapse\" href=\"#collapse23\">{{submodel._Attribs.Name}}: <strong>{{submodel._Attribs.ID}}</strong></a>\n                                    <div class=\"form-group\">\n                                        <a class=\"text-white\">Visibility: </a>\n                                        <select id=\"submodelVisibility\" class=\"form-control form-control-sm\" ng-model=\"submodel.Attribute[0].Value[0]\" ng-options = \"x for x in prop.values\" ng-click=\"extractingElement(msg.payload)\"></select>\n                                    </div>\n                                        <ul id=\"collapse23\" class=\"list-group list-group-flush panel-collapse collapse\">\n                                            <li class=\"list-group-item list-group-item-light\" ng-repeat=\"dataSourceManifest in submodel.InternalElement\">\n                                                    <a class=\"text-black-50\" data-toggle=\"collapse\" href=\"#collapse33\">{{dataSourceManifest._Attribs.Name}}: <strong>{{dataSourceManifest._Attribs.ID}}</strong></a>\n                                                    <div class=\"form-group\">\n                                                        <a class=\"text-black-50\">Visibility: </a>\n                                                        <select class=\"form-control form-control-sm\" ng-model = \"dataSourceManifest.Attribute[1].Value[0]\" ng-options = \"v for v in prop.values\" ng-click=\"extractingElement(msg.payload)\"></select>\n                                                    </div>\n                                                    <ul id=\"collapse33\" class=\"list-group list-group-flush panel-collapse collapse\">\n                                                        <li class=\"list-group-item list-group-item-info\" ng-repeat=\"dataSourceDefinition in dataSourceManifest.InternalElement\">\n                                                            <a class=\"text-white\">{{dataSourceDefinition._Attribs.Name}}: <strong>{{dataSourceDefinition._Attribs.ID}}</strong>\n                                                            <br ng-if=\"dataSourceDefinition.Description[0]\">Description: <strong>{{dataSourceDefinition.Description[0]}}</strong></a>\n                                                        </li>\n                                                    </ul>\n                                            </li>\n                                        </ul>\n                                </li>\n                            </ul>\n                        </li>\n                        \n                    </ul>\n                </div>\n            </div>\n        </div>\n</html>\n\n","storeOutMessages":false,"fwdInMessages":false,"templateScope":"local","x":235.833251953125,"y":935.8336791992188,"wires":[["e6a4c7ec.1addb8","cb0d3f3b.a1a6b"]]},{"id":"4e88c069.1ed84","type":"debug","z":"6f5697aa.38c758","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":761.25,"y":889.1672973632812,"wires":[]},{"id":"cc386c1e.b8d52","type":"rbe","z":"6f5697aa.38c758","name":"","func":"rbe","gap":"","start":"","inout":"out","property":"payload","x":626.2501220703125,"y":938.3338317871094,"wires":[["4e88c069.1ed84","fd53b29.f4a6f5"]]},{"id":"5bc451b3.8db5","type":"ui_button","z":"6f5697aa.38c758","name":"","group":"9a7b1b88.32cc4","order":4,"width":0,"height":0,"passthru":false,"label":"Submit","tooltip":"","color":"","bgcolor":"","icon":"done","payload":"","payloadType":"str","topic":"","x":127.70828247070312,"y":649.9999389648438,"wires":[["3c9a0544.bc44aa"]]},{"id":"9e4573d.265e99","type":"actionflows","z":"6f5697aa.38c758","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"readSubmodelsFromAASUI","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":209.708251953125,"y":1038.5836791992188,"wires":[["92b31f81.93ad1","8df24b10.8f4588"]]},{"id":"92b31f81.93ad1","type":"debug","z":"6f5697aa.38c758","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":405.833251953125,"y":1073.3336791992188,"wires":[]},{"id":"fd53b29.f4a6f5","type":"unsafe-function","z":"6f5697aa.38c758","name":"setFlowVariable","func":"for(var index in msg.payload.InternalElement){\n    delete msg.payload.InternalElement[index].$$hashKey;\n}\ncontext.flow.set('Body', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":860,"y":940,"wires":[["134a1d84.efe3d2"]]},{"id":"3c9a0544.bc44aa","type":"unsafe-function","z":"6f5697aa.38c758","name":"getFlowVariable","func":"msg.payload = context.flow.get('Body');\nreturn msg;","outputs":1,"noerr":0,"x":365.8332824707031,"y":648.7499389648438,"wires":[["6f7f46b8.f143a8"]]},{"id":"6f7f46b8.f143a8","type":"actionflows","z":"6f5697aa.38c758","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"updateSubmodelsFromAASUI","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":590.8334350585938,"y":704.10693359375,"wires":[["7fdb4858.fc6948","5bc551ed.32f14"]]},{"id":"7fdb4858.fc6948","type":"debug","z":"6f5697aa.38c758","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":862.9762573242188,"y":702.8572387695312,"wires":[]},{"id":"e6a4c7ec.1addb8","type":"switch","z":"6f5697aa.38c758","name":"","property":"payload","propertyType":"msg","rules":[{"t":"neq","v":"init","vt":"str"},{"t":"eq","v":"init","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":419.16650390625,"y":935.0003051757812,"wires":[["cc386c1e.b8d52"],["9e4573d.265e99"]]},{"id":"bdbbb449.cb3338","type":"ui_template","z":"6f5697aa.38c758","group":"59a9a12f.dc2d08","name":"Counters","order":1,"width":"10","height":"12","format":"<html>\n    <head>\n        <link rel=\"stylesheet\" href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css\" integrity=\"sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO\" crossorigin=\"anonymous\">\n        <script src=\"https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js\" integrity=\"sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49\" crossorigin=\"anonymous\"></script>\n    \n        <script>\n        (function(scope) {\n            scope.$watch('msg', function(msg){\n                if (msg) {\n                    if (msg.payload) {\n                        var submodels = msg.payload.InternalElement;\n                        scope.submodelsCounter = submodels.length;\n                        scope.dsmsCounter = 0;\n                        scope.disCounter = 0;\n                        for(var submodel in submodels){\n                            if(typeof submodels[submodel].InternalElement != \"undefined\" && submodels[submodel].InternalElement != null){\n                                var dsms = submodels[submodel].InternalElement;\n                                scope.dsmsCounter = scope.dsmsCounter + dsms.length;\n                                for(var dsm in dsms){\n                                    var dsd = dsms[dsm].InternalElement[0];\n                                    var elements = dsd.InternalElement;\n                                    for(var element in elements){\n                                        if(elements[element]._Attribs.RefBaseSystemUnitPath.includes(\"DI\")){\n                                            scope.disCounter = scope.disCounter + 1;\n                                        }\n                                    }\n                                    \n                                }\n                            }\n                        }\n                    }\n                }\n            });\n/*            scope.init = function() {\n                //scope.observations = [];\n                scope.send({payload:scope.observations});\n            }*/\n        })(scope)\n    </script>\n    </head>\n        <div class=\"container\">\n            <h5><span class=\"badge badge-warning\">Submodels: {{submodelsCounter}}</span></h5>\n            <h5><span class=\"badge badge-warning\">Data Source Manifests: {{dsmsCounter}}</span></h5>\n            <h5><span class=\"badge badge-warning\">Data Interfaces: {{disCounter}}</span></h5>\n        </div>\n\n</html>\n\n","storeOutMessages":false,"fwdInMessages":false,"templateScope":"local","x":2242.0830078125,"y":284.9166259765625,"wires":[[]]},{"id":"a9195fe4.62ea6","type":"unsafe-function","z":"6f5697aa.38c758","name":"NotificationMessage","func":"//Retreiving Libraries from the Settings.json file\nmsg.payload = \"Manifest has been (re)loaded\"\n\nreturn msg;","outputs":1,"noerr":0,"x":1160,"y":480,"wires":[["f74c0684.8a6468","28723d3d.01ae72"]]},{"id":"9a8d891c.c44408","type":"network_stats","z":"6f5697aa.38c758","name":"","x":639.7619018554688,"y":2329.5396728515625,"wires":[["ee98d9a7.564ec8","b7312429.7fac98"]]},{"id":"2f09523a.0c30fe","type":"inject","z":"6f5697aa.38c758","name":"","topic":"","payload":"","payloadType":"date","repeat":"10","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":1900,"wires":[["e6513e33.0e316","b170b6f5.3247b8"]]},{"id":"f2d6576.449bca8","type":"DeviceStats","z":"6f5697aa.38c758","name":"","mem":false,"nw":true,"load":false,"hostname":false,"useString":false,"x":615.1785278320312,"y":2084.9562377929688,"wires":[["7aabc566.bedb3c","2d503145.6bc2be"]]},{"id":"b5a5652b.4cdf78","type":"comment","z":"6f5697aa.38c758","name":"AAS Device Monitoring","info":"","x":140,"y":1780,"wires":[]},{"id":"e6e1dab8.ec2d38","type":"ui_chart","z":"6f5697aa.38c758","name":"","group":"db682736.c68b58","order":0,"width":"20","height":"10","label":"","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":2,"x":1216.0950927734375,"y":1948.3453369140625,"wires":[[],[]]},{"id":"59f52976.f7dae8","type":"inject","z":"6f5697aa.38c758","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":696.4285278320312,"y":1848.4287414550781,"wires":[["46409637.cdb598"]]},{"id":"46409637.cdb598","type":"unsafe-function","z":"6f5697aa.38c758","name":"","func":"msg.payload = [];\nreturn msg;","outputs":1,"noerr":0,"x":935.8729858398438,"y":1848.5676879882812,"wires":[["e6e1dab8.ec2d38","26117a40.6b4236","cade762e.c28cd8"]]},{"id":"7aabc566.bedb3c","type":"unsafe-function","z":"6f5697aa.38c758","name":"Network Tx/Rx","func":"var msg1 = {};\nvar msg2 = {};\n\nmsg1.topic = 'RX KB';\nmsg1.payload = (msg.payload.nw.enp0s3.rx)/1000;\n\nmsg2.topic = 'TX KB';\nmsg2.payload = (msg.payload.nw.enp0s3.tx)/1000;\n\n\nreturn [msg1, msg2];","outputs":2,"noerr":0,"x":872.6785278320312,"y":2084.9562377929688,"wires":[["26117a40.6b4236"],["26117a40.6b4236","fb89d74e.6b02a8"]]},{"id":"26117a40.6b4236","type":"ui_chart","z":"6f5697aa.38c758","name":"","group":"21163bff.6beb24","order":0,"width":"20","height":"10","label":"","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"step","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":2,"x":1222.5396728515625,"y":2080.7896728515625,"wires":[[],[]]},{"id":"fb89d74e.6b02a8","type":"debug","z":"6f5697aa.38c758","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":998.0951538085938,"y":2140.7898559570312,"wires":[]},{"id":"cade762e.c28cd8","type":"ui_chart","z":"6f5697aa.38c758","name":"","group":"48b34339.fd8494","order":0,"width":"20","height":"10","label":"","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":2,"x":1221.428466796875,"y":2228.567626953125,"wires":[[],[]]},{"id":"68123ab3.22f454","type":"unsafe-function","z":"6f5697aa.38c758","name":"Network Tx/Rx","func":"var msg1 = {};\nvar msg2 = {};\n\nmsg1.topic = 'Current RX B/s';\nmsg1.payload = (msg.payload[0]);\n\nmsg2.topic = 'Current TX B/s';\nmsg2.payload = (msg.payload[1]);\n\n\nreturn [msg1, msg2];","outputs":2,"noerr":0,"x":978.6506958007812,"y":2227.3175048828125,"wires":[["cade762e.c28cd8"],["cade762e.c28cd8"]]},{"id":"8b199454.1ff9c8","type":"debug","z":"6f5697aa.38c758","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":994.7617797851562,"y":2279.6787109375,"wires":[]},{"id":"b859b6b6.ec7a28","type":"saveflow","z":"ef6160d1.7c319","name":"","path":"C:\\Users\\Giovanni Di Orio\\.asmodels\\flows\\drivers\\","enabled":false,"exporttype":"addflow","x":980,"y":1020,"wires":[[]]},{"id":"acae7740.2fea28","type":"inject","z":"ef6160d1.7c319","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":520,"y":1022,"wires":[["b859b6b6.ec7a28"]]},{"id":"6f2c96f8.478db8","type":"http request","z":"ef6160d1.7c319","name":"","method":"use","ret":"txt","paytoqs":false,"url":"","tls":"","proxy":"","authType":"","x":970,"y":520,"wires":[["5bbba977.7a8f78","651aa90e.d4f1f8"]]},{"id":"44c4870f.4749a8","type":"actionflows_in","z":"ef6160d1.7c319","name":"rest in","priority":"50","links":[],"scope":"global","x":110,"y":260,"wires":[["dcae2dbe.756cf","4d32c286.60376c"]]},{"id":"cd0189ce.061a18","type":"actionflows_out","z":"ef6160d1.7c319","name":"rest out","links":[],"x":1286.9998779296875,"y":263.0000305175781,"wires":[]},{"id":"2dd17548.faad3a","type":"unsafe-function","z":"ef6160d1.7c319","name":"PrepareOutput","func":"var outputMsgs = [];\ncontext.flow.set('outputMsgs', outputMsgs);\nvar uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });\nvar property = msg.requestedProperty;\n\n// Create an Observation Object ------------------------------------\nvar observation = {};\nobservation.id = uuid;\nobservation.edgeGatewayReferenceID = msg.AASID;\nobservation.dataManifestReferenceID = property._Attribs.ID;\nobservation.dataKindReferenceID = property.InternalElement[0]._Attribs.ID;\nobservation.acquisitionTimestamp = new Date().getTime();\nobservation.collectionTimestamp = new Date().getTime();\nobservation.value = msg.payload[0];\n// END Create an Observation Object --------------------------------\n//outputMsgs.push(observation);\n\n//msg.payload = outputMsgs;\nmsg.payload = JSON.stringify(observation);\nreturn msg;\n\n\n","outputs":1,"noerr":0,"x":1329.9999389648438,"y":520.6666259765625,"wires":[["a69a8fa2.3a36e","92222c68.e0aa9"]]},{"id":"5bbba977.7a8f78","type":"join","z":"ef6160d1.7c319","name":"","mode":"auto","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1155,"y":520,"wires":[["2dd17548.faad3a","7008767f.ae7ee8"]]},{"id":"a69a8fa2.3a36e","type":"debug","z":"ef6160d1.7c319","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1468.0000610351562,"y":618.666748046875,"wires":[]},{"id":"61eedf3a.3d1fc","type":"split","z":"ef6160d1.7c319","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":350,"y":520,"wires":[["2e37c5d9.6a7bca"]]},{"id":"1fcdc9b2.542746","type":"change","z":"ef6160d1.7c319","name":"","rules":[{"t":"set","p":"url","pt":"msg","to":"payload.url","tot":"msg"},{"t":"set","p":"method","pt":"msg","to":"payload.method","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":760,"y":500,"wires":[["6f2c96f8.478db8","eea68058.11cd1"]]},{"id":"157fcad7.a446c5","type":"switch","z":"ef6160d1.7c319","name":"","property":"mep","propertyType":"msg","rules":[{"t":"eq","v":"requestReply","vt":"str"},{"t":"eq","v":"subscribe","vt":"str"},{"t":"eq","v":"unsubscribe","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":790,"y":260,"wires":[["29672848.80f5c8"],["754c9cd0.afd204"],["76c455b9.cc5bec"]]},{"id":"29672848.80f5c8","type":"actionflows","z":"ef6160d1.7c319","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"requestReply","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"private","perf":false,"seq":false,"x":962.333251953125,"y":221.33334350585938,"wires":[["cd0189ce.061a18"]]},{"id":"8f7c3167.3a1fb","type":"actionflows_in","z":"ef6160d1.7c319","name":"requestReply in","priority":"50","links":[],"scope":"private","x":140,"y":520,"wires":[["76cbbd23.d430a4","61eedf3a.3d1fc"]]},{"id":"92222c68.e0aa9","type":"actionflows_out","z":"ef6160d1.7c319","name":"requestReply out","links":[],"x":1571.3333740234375,"y":521,"wires":[]},{"id":"754c9cd0.afd204","type":"actionflows","z":"ef6160d1.7c319","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"subscribe","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"protected","perf":false,"seq":false,"x":965.0001220703125,"y":266.6666564941406,"wires":[["cd0189ce.061a18"]]},{"id":"76cbbd23.d430a4","type":"debug","z":"ef6160d1.7c319","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":335.66650390625,"y":593.333251953125,"wires":[]},{"id":"dcae2dbe.756cf","type":"unsafe-function","z":"ef6160d1.7c319","name":"Prepare client configuration and msg object","func":"/*if(msg.dsm !== \"\" && msg.parameters !== \"\" && msg.mep === \"requestReply\"){\n    //msg.submodel = msg.payload;\n    var outputMsgs = [];\n    \n    //var parameters = msg.payload.InternalElement[0].InternalElement;\n    var parameters = msg.parameters;\n    var config = {};//{url:\"\", method:\"\"};\n    for(var parameterIndex in parameters){\n        if(parameters[parameterIndex]._Attribs.Name == \"url\"){\n            config.url = parameters[parameterIndex].Attribute[2].Value[0];\n        } else if(parameters[parameterIndex]._Attribs.Name == \"method\"){\n            config.method = parameters[parameterIndex].Attribute[2].Value[0];\n        }\n    }\n    outputMsgs.push(config);\n    context.flow.set('outputMsgs', outputMsgs);\n\n    msg.payload = outputMsgs;\n    return msg;\n} else if(msg.mep == \"subscribe\") {\n    var subscriptions = context.flow.get('subscriptions');\n    for(var element in subscriptions){\n        if(subscriptions[element].requestedProperty._Attribs.ID == msg.dsm._Attribs.ID){\n            msg.mep = \"unsubscribe\";\n            msg.payload = msg.dsm._Attribs.ID;\n            subscriptions.splice(element, 1);\n            return msg;\n        }\n    }\n    var newSubscription = {};\n    msg.mep = \"subscribe\";\n    //only for testing\n    //newSubscription.identifier = msg.dsm._Attribs.ID;\n    newSubscription.requestedProperty = msg.requestedProperty;\n    var parameters = msg.parameters;\n    for(var parameterIndex in parameters){\n        if(parameters[parameterIndex]._Attribs.Name == \"url\"){\n            newSubscription.url = parameters[parameterIndex].Attribute[2].Value[0];\n        } else if(parameters[parameterIndex]._Attribs.Name == \"method\"){\n            newSubscription.method = parameters[parameterIndex].Attribute[2].Value[0];\n        }\n    }\n    \n    msg.payload = msg.dsm._Attribs.ID;\n    subscriptions.push(newSubscription);\n    context.flow.set('subscriptions', subscriptions);\n    return msg;\n}*/\n\nif(msg.requestedProperty !== \"\" && msg.parameters !== \"\" && msg.mep === \"requestReply\"){\n    //msg.submodel = msg.payload;\n    var outputMsgs = [];\n    \n    //var parameters = msg.payload.InternalElement[0].InternalElement;\n    var parameters = msg.parameters;\n    var config = {};//{url:\"\", method:\"\"};\n    for(var parameterIndex in parameters){\n        if(parameters[parameterIndex]._Attribs.Name == \"url\"){\n            config.url = parameters[parameterIndex].Attribute[2].Value[0];\n        } else if(parameters[parameterIndex]._Attribs.Name == \"method\"){\n            config.method = parameters[parameterIndex].Attribute[2].Value[0];\n        }\n    }\n    outputMsgs.push(config);\n    context.flow.set('outputMsgs', outputMsgs);\n\n    msg.payload = outputMsgs;\n    return msg;\n} else if(msg.requestedProperty && msg.mep == \"subscribe\") {\n    var subscriptions = context.flow.get('subscriptions');\n    for(var element in subscriptions){\n        if(subscriptions[element].requestedProperty._Attribs.ID == msg.requestedProperty._Attribs.ID){\n            msg.mep = \"unsubscribe\";\n            msg.payload = msg.requestedProperty._Attribs.ID;\n            subscriptions.splice(element, 1);\n            return msg;\n        }\n    }\n    var newSubscription = {};\n    msg.mep = \"subscribe\";\n    //only for testing\n    //newSubscription.identifier = msg.dsm._Attribs.ID;\n    newSubscription.requestedProperty = msg.requestedProperty;\n    var parameters = msg.parameters;\n    for(var parameterIndex in parameters){\n        if(parameters[parameterIndex]._Attribs.Name == \"url\"){\n            newSubscription.url = parameters[parameterIndex].Attribute[2].Value[0];\n        } else if(parameters[parameterIndex]._Attribs.Name == \"method\"){\n            newSubscription.method = parameters[parameterIndex].Attribute[2].Value[0];\n        }\n    }\n    \n    msg.payload = msg.requestedProperty._Attribs.ID;\n    subscriptions.push(newSubscription);\n    context.flow.set('subscriptions', subscriptions);\n    return msg;\n}\n","outputs":1,"noerr":0,"x":510,"y":260,"wires":[["157fcad7.a446c5"]]},{"id":"76c455b9.cc5bec","type":"actionflows","z":"ef6160d1.7c319","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"unsubscribe","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"protected","perf":false,"seq":false,"x":960.66650390625,"y":314.9999694824219,"wires":[["cd0189ce.061a18"]]},{"id":"49b4b1c8.73852","type":"comment","z":"ef6160d1.7c319","name":"Request Reply Message Exchange Pattern","info":"","x":231.333251953125,"y":416.6666259765625,"wires":[]},{"id":"306b141f.07747c","type":"comment","z":"ef6160d1.7c319","name":"Subscribe Message Exchange Pattern  (Protocol TranslationI)","info":"","x":280,"y":800,"wires":[]},{"id":"7fec060c.e75258","type":"comment","z":"ef6160d1.7c319","name":"Internal Interface Entry Point","info":"","x":164.047607421875,"y":23.142822265625,"wires":[]},{"id":"7008767f.ae7ee8","type":"debug","z":"ef6160d1.7c319","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1291.57177734375,"y":616.2857360839844,"wires":[]},{"id":"4d32c286.60376c","type":"debug","z":"ef6160d1.7c319","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":334.2856750488281,"y":323.5238037109375,"wires":[]},{"id":"ee98d9a7.564ec8","type":"join","z":"6f5697aa.38c758","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":797.5396728515625,"y":2228.4287719726562,"wires":[["8b199454.1ff9c8","68123ab3.22f454"]]},{"id":"b7312429.7fac98","type":"debug","z":"6f5697aa.38c758","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":991.4285278320312,"y":2328.5675048828125,"wires":[]},{"id":"d111b511.9fb708","type":"switch","z":"6f5697aa.38c758","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":428.92852783203125,"y":2086.4285583496094,"wires":[["9a8d891c.c44408","8bd13b1.2f39ac8","9215c7f7.6b9768","f2d6576.449bca8"]]},{"id":"f2cdd929.e82888","type":"debug","z":"6f5697aa.38c758","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":322.6785888671875,"y":2000.1786499023438,"wires":[]},{"id":"a9726315.b2cb9","type":"unsafe-function","z":"6f5697aa.38c758","name":"parameterizedHttpRequest","func":"var msg1 = {};\nvar msg3 = {};\n\nmsg1.method = 'GET';\nmsg1.url = context.global.get('namespace') + \"/aas/manifest/headers\";\n\n//msg2.descriptionId = \"b5595a4a-40a5-46e6-a9c6-f493f99a72a1\"; \n\nmsg3.method = 'GET';\nmsg3.url = context.global.get('namespace') + \"/aas/manifest/submodels\";\n\nreturn [msg1, msg3, msg];","outputs":3,"noerr":0,"x":1091.666748046875,"y":259.6667175292969,"wires":[["c38f32d4.80cd"],["e96426bd.d68d38"],["5714807b.d05e"]]},{"id":"492d4c25.dc8a84","type":"ui_template","z":"6f5697aa.38c758","group":"95665ea.259a6a","name":"Header Submodel","order":1,"width":"10","height":"22","format":"<html>\n<head>\n    <link rel=\"stylesheet\" href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css\" integrity=\"sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO\" crossorigin=\"anonymous\">\n    <script src=\"https://code.jquery.com/jquery-3.3.1.slim.min.js\" integrity=\"sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo\" crossorigin=\"anonymous\"></script>\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js\" integrity=\"sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49\" crossorigin=\"anonymous\"></script>\n    <script src=\"https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js\" integrity=\"sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy\" crossorigin=\"anonymous\"></script>\n    <script>\n        this.scope.sendRequest = function(element){\n            this.send({payload:{virtualLocation:element.Attribute[1].Value[0]}});\n        }\n        this.scope.isVisible = function(element){\n            if(element.Attribute[0].Attribute[0].Value[0] == \"\" && element.Attribute[0].Attribute[0].Value[1] == \"\")\n                return false;\n            else return true;\n        }\n    </script>\n</head>\n    <div id=\"deck\" class=\"card-group\">\n            <div class=\"card-body\">\n            <div class=\"card text-white bg-light mb-3\" style=\"max-width: 30rem;\">\n                <ul class=\"list-group list-group-flush\">\n                 <li class=\"list-group-item\" ng-repeat=\"submodel in msg.payload[1].InternalElement\">\n                     <a class=\"text-dark\" data-toggle=\"collapse\" href=\"#collapse11\">{{submodel._Attribs.Name}}</a>\n                     <ul id=\"collapse11\" class=\"list-group list-group-flush panel-collapse collapse\">\n                        <li class=\"list-group-item list-group-item-info\" ng-repeat=\"property in submodel.InternalElement\">\n                        <a class=\"text-white\" data-toggle=\"collapse\" href=\"#collapse21\">{{property._Attribs.Name}} : <strong>{{property._Attribs.ID}}</strong></a>\n                        <ul id=\"collapse21\" class=\"list-group list-group-flush panel-collapse collapse\">\n                            <li class=\"list-group-item list-group-item-light\" ng-repeat=\"attribute in property.Attribute\">\n                                <a class=\"text-black-50\" data-toggle=\"collapse\" href=\"#collapse31\">{{attribute._Attribs.Name}} : <strong>{{attribute.Value[0]}}</strong></a>\n                                <ul id=\"collapse31\" class=\"list-group list-group-flush panel-collapse collapse\">\n                                    <li class=\"list-group-item list-group-item-info\" ng-repeat=\"element in property.InternalElement\" \n                                        style=\"cursor:pointer\">\n                                        <a class=\"text-white\" data-toggle=\"collapse\" href=\"#collapse41\">{{element._Attribs.Name}}</a>\n                                        <ul id=\"collapse41\" class=\"list-group list-group-flush panel-collapse collapse\">\n                                            <li class=\"list-group-item list-group-item-light\"><a class=\"text-black-50\">Virtual Location: <strong>{{element.Attribute[1].Value[0]}}</strong></a></li> \n                                            <li class=\"list-group-item list-group-item-light\" ng-hide=\"isVisible(element)\"><a class=\"text-white\">Physical Location:</a></li>\n                                            <ul class=\"list-group list-group-flush\">\n                                                <li ng-hide=\"isVisible(element)\"><a>Latitude: <strong>{{element.Attribute[0].Attribute[0].Value[0]}}</strong></a></li>\n                                                <li ng-hide=\"isVisible(element)\"><a>Longitude: <strong>{{element.Attribute[0].Attribute[1].Value[0]}}</strong></a></li>\n                                            <!--<font color=\"blue\">To:</font> {{operation.to}}!-->\n                                            </ul>\n                                        </ul>\n                                    </li>\n                                </ul>\n                            </li>\n                        </ul>\n                        </li>\n                    </ul>\n                 </li>\n                </ul>\n            </div>\n        </div>\n    </div>\n</html>\n\n","storeOutMessages":false,"fwdInMessages":true,"templateScope":"local","x":2800.08349609375,"y":122.08338928222656,"wires":[["a2c98165.7694d"]]},{"id":"9ecfb0fd.83103","type":"unsafe-function","z":"6f5697aa.38c758","name":"SubmodelsProcessing","func":"//Retreiving Libraries from the Settings.json file\nvar outMsg = {};\nvar payload = [];\noutMsg.payload = payload;\nfor(var element in msg.payload){\n    if(typeof(msg.payload[element]) !== 'object' && msg.payload[element] !== null){\n        var XML = context.global.get('XML');\n        var os = context.global.get('os');\n\n        var xml_string = msg.payload[element];\n\n        var submodels = XML.parse( xml_string, { preserveAttributes: true, forceArrays: true  } );\n\n         outMsg.payload[1] = submodels;\n    } else {\n        outMsg.payload[0] = msg.payload[element];\n    }\n}\n\nreturn outMsg;","outputs":1,"noerr":0,"x":2311.33349609375,"y":122.0833740234375,"wires":[["6f2977cd.59d178"]]},{"id":"8e8a96b3.4178d8","type":"debug","z":"6f5697aa.38c758","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":2757.08349609375,"y":68.58338928222656,"wires":[]},{"id":"a2c98165.7694d","type":"debug","z":"6f5697aa.38c758","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":3001.58349609375,"y":122.08338928222656,"wires":[]},{"id":"41eda8dc.1b6458","type":"ui_template","z":"6f5697aa.38c758","group":"bc68dcde.54105","name":"Header Overview","order":1,"width":"10","height":"12","format":"<html>\n<head>\n    <link rel=\"stylesheet\" href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css\" integrity=\"sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO\" crossorigin=\"anonymous\">\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js\" integrity=\"sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49\" crossorigin=\"anonymous\"></script>\n    \n    <script>\n        this.scope.sendRequest = function(element){\n            this.send({payload:{virtualLocation:element.Attribute[1].Value[0]}});\n        }\n        this.scope.isVisible = function(element){\n            if(element.Attribute[0].Attribute[0].Value[0] == \"\" && element.Attribute[0].Attribute[0].Value[1] == \"\")\n                return false;\n            else return true;\n        }\n    </script>\n</head>\n    <div id=\"deck\" class=\"card-group\">\n            <div class=\"card-body\">\n            <div class=\"card text-white bg-light mb-3\" style=\"max-width: 35rem;\">\n                <ul class=\"list-group list-group-flush\">\n                 <li class=\"list-group-item\" ng-repeat=\"submodel in msg.payload[1].InternalElement\">\n                     <a class=\"text-dark\">{{submodel._Attribs.Name}}</a>\n                     <ul class=\"list-group list-group-flush\">\n                        <li class=\"list-group-item list-group-item-info\" ng-repeat=\"property in submodel.InternalElement\">\n                        <a class=\"text-white\">{{property._Attribs.Name}} : <strong>{{property._Attribs.ID}}</strong></a>\n                        <ul class=\"list-group list-group-flush\">\n                            <li class=\"list-group-item list-group-item-light\" ng-repeat=\"attribute in property.Attribute\">\n                                <a class=\"text-black-50\">{{attribute._Attribs.Name}} : <strong>{{attribute.Value[0]}}</strong></a>\n                                <ul class=\"list-group list-group-flush\">\n                                    <li class=\"list-group-item list-group-item-info\" ng-repeat=\"element in property.InternalElement\" \n                                        style=\"cursor:pointer\">\n                                        <a class=\"text-white\">{{element._Attribs.Name}}</a>\n                                        <ul class=\"list-group list-group-flush\">\n                                            <li class=\"list-group-item list-group-item-light\"><a class=\"text-black-50\">Virtual Location: <strong>{{element.Attribute[1].Value[0]}}</strong></a></li> \n                                            <li class=\"list-group-item list-group-item-light\" ng-hide=\"isVisible(element)\"><a class=\"text-white\">Physical Location:</a></li>\n                                            <ul class=\"list-group list-group-flush\">\n                                                <li ng-hide=\"isVisible(element)\"><a>Latitude: <strong>{{element.Attribute[0].Attribute[0].Value[0]}}</strong></a></li>\n                                                <li ng-hide=\"isVisible(element)\"><a>Longitude: <strong>{{element.Attribute[0].Attribute[1].Value[0]}}</strong></a></li>\n                                            <!--<font color=\"blue\">To:</font> {{operation.to}}!-->\n                                            </ul>\n                                        </ul>\n                                    </li>\n                                </ul>\n                            </li>\n                        </ul>\n                        </li>\n                    </ul>\n                 </li>\n                </ul>\n            </div>\n        </div>\n    </div>\n    <div id=\"deck\" class=\"card-group\">\n            <div class=\"card-body\">\n            <div class=\"card text-white bg-light mb-3\" style=\"max-width: 35rem;\">\n                <ul class=\"list-group list-group-flush\">\n                 <li class=\"list-group-item\">\n                     <a class=\"text-dark\">AAS Running Platform</a>\n                     <ul class=\"list-group list-group-flush\">\n                        <li class=\"list-group-item list-group-item-info\">\n                            <a class=\"text-white\">Type : <strong>{{msg.payload[0].type}}</strong></a>\n                        </li>\n                        <li class=\"list-group-item list-group-item-info\">\n                            <a class=\"text-white\">Platform : <strong>{{msg.payload[0].platform}}</strong></a>\n                        </li>\n                        <li class=\"list-group-item list-group-item-info\">\n                            <a class=\"text-white\">Architecture : <strong>{{msg.payload[0].arch}}</strong></a>\n                        </li>\n                    </ul>\n                 </li>\n                </ul>\n            </div>\n        </div>\n        </div>\n    </html>\n\n\n","storeOutMessages":false,"fwdInMessages":true,"templateScope":"local","x":2801.3334045410156,"y":161.6667022705078,"wires":[[]]},{"id":"e5cae40d.f7ad78","type":"join","z":"6f5697aa.38c758","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":2121.83349609375,"y":121.66670227050781,"wires":[["8f4de857.469f68","9ecfb0fd.83103"]]},{"id":"8f4de857.469f68","type":"debug","z":"6f5697aa.38c758","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":2210,"y":40,"wires":[]},{"id":"5714807b.d05e","type":"actionflows_out","z":"6f5697aa.38c758","name":"informAASUI_ManifestChange out","links":[],"x":1449.9996337890625,"y":366.25,"wires":[]},{"id":"b6631edc.bdd27","type":"debug","z":"6f5697aa.38c758","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1177.5,"y":518.75,"wires":[]},{"id":"95f97a31.40ebf8","type":"unsafe-function","z":"6f5697aa.38c758","name":"gettingValue","func":"var msg1 = {};\nvar timeticks = msg.payload[0].value;\nvar timeticks_sec = timeticks/100;\nvar secs = Math.round(timeticks_sec);\nvar hours = Math.floor(secs / (60 * 60));\n\nvar divisor_for_minutes = secs % (60 * 60);\nvar minutes = Math.floor(divisor_for_minutes / 60);\n\nvar divisor_for_seconds = divisor_for_minutes % 60;\nvar seconds = Math.ceil(divisor_for_seconds);\n\nmsg1.payload = \"hh: \" + hours + \" mm: \" + minutes + \" ss: \" + seconds;\n\nreturn msg1;","outputs":1,"noerr":0,"x":839.0277709960938,"y":2438.5833740234375,"wires":[["d3812478.3b0a88","61d6366e.8d53e8"]]},{"id":"d3812478.3b0a88","type":"ui_text","z":"6f5697aa.38c758","group":"11193e87.ede119","order":0,"width":"6","height":"6","name":"","label":"","format":"<font size=6> {{msg.payload}}","layout":"row-left","x":1034.6527709960938,"y":2436.0833740234375,"wires":[]},{"id":"135c3eab.352b91","type":"actionflows_in","z":"927cab2b.acef18","name":"snmp in","priority":"50","links":[],"scope":"global","x":130,"y":320,"wires":[["7d06396a.db5ba8","5d67ce38.a506f"]]},{"id":"6a791555.de66bc","type":"actionflows_out","z":"927cab2b.acef18","name":"snmp out","links":[],"x":1306.9998779296875,"y":323.0000305175781,"wires":[]},{"id":"76dac420.88cc0c","type":"unsafe-function","z":"927cab2b.acef18","name":"PrepareOutput","func":"var outputMsgs = [];\ncontext.flow.set('outputMsgs', outputMsgs);\nvar uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });\nvar property = msg.requestedProperty;\n\n// Create an Observation Object ------------------------------------\nvar observation = {};\nobservation.id = uuid;\nobservation.edgeGatewayReferenceID = msg.AASID;\nobservation.dataManifestReferenceID = property._Attribs.ID;\nobservation.dataKindReferenceID = property.InternalElement[0]._Attribs.ID;\nobservation.acquisitionTimestamp = new Date().getTime();\nobservation.collectionTimestamp = new Date().getTime();\nobservation.value = msg.payload[0];\n// END Create an Observation Object --------------------------------\n//outputMsgs.push(observation);\n\n//msg.payload = outputMsgs;\nmsg.payload = JSON.stringify(observation);\nreturn msg;\n\n\n","outputs":1,"noerr":0,"x":1220,"y":580,"wires":[["3a5fe61c.05a6ba","8329e205.2887f"]]},{"id":"41253abb.cca634","type":"join","z":"927cab2b.acef18","name":"","mode":"auto","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1030,"y":580,"wires":[["76dac420.88cc0c","5129ee34.fd825"]]},{"id":"3a5fe61c.05a6ba","type":"debug","z":"927cab2b.acef18","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1344.9996948242188,"y":667.3333740234375,"wires":[]},{"id":"90b93fd7.f7044","type":"split","z":"927cab2b.acef18","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":350,"y":580,"wires":[["285b0def.8175c2"]]},{"id":"a5ac501e.f00cb","type":"change","z":"927cab2b.acef18","name":"","rules":[{"t":"set","p":"host","pt":"msg","to":"payload.address","tot":"msg"},{"t":"set","p":"oid","pt":"msg","to":"payload.oid","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":680,"y":560,"wires":[["d27b31bc.97b3d"]]},{"id":"f962e798.f5c2f8","type":"switch","z":"927cab2b.acef18","name":"","property":"mep","propertyType":"msg","rules":[{"t":"eq","v":"requestReply","vt":"str"},{"t":"eq","v":"subscribe","vt":"str"},{"t":"eq","v":"unsubscribe","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":790,"y":320,"wires":[["1ca53c81.baa573"],["996fcb0f.a55178"],["35bd8c34.c64e54"]]},{"id":"1ca53c81.baa573","type":"actionflows","z":"927cab2b.acef18","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"requestReply","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"private","perf":false,"seq":false,"x":982.333251953125,"y":281.3333435058594,"wires":[["6a791555.de66bc"]]},{"id":"9dd946f0.a004c8","type":"actionflows_in","z":"927cab2b.acef18","name":"requestReply in","priority":"50","links":[],"scope":"private","x":160,"y":580,"wires":[["5145a696.b5bf88","90b93fd7.f7044"]]},{"id":"8329e205.2887f","type":"actionflows_out","z":"927cab2b.acef18","name":"requestReply out","links":[],"x":1470,"y":580,"wires":[]},{"id":"996fcb0f.a55178","type":"actionflows","z":"927cab2b.acef18","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"subscribe","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"private","perf":false,"seq":false,"x":985.0001220703125,"y":326.6666564941406,"wires":[["6a791555.de66bc"]]},{"id":"5145a696.b5bf88","type":"debug","z":"927cab2b.acef18","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":355.66650390625,"y":653.333251953125,"wires":[]},{"id":"7d06396a.db5ba8","type":"unsafe-function","z":"927cab2b.acef18","name":"Prepare client configuration and msg object","func":"if(msg.dsm !== \"\" && msg.di !== \"\" && msg.mep == \"requestReply\"){\n    //msg.submodel = msg.payload;\n    var outputMsgs = [];\n    \n    //var parameters = msg.payload.InternalElement[0].InternalElement;\n    var parameters = msg.parameters;\n    var config = {};//{url:\"\", method:\"\"};\n    for(var parameterIndex in parameters){\n        if(parameters[parameterIndex]._Attribs.Name == \"address\"){\n            config.address = parameters[parameterIndex].Attribute[2].Value[0];\n        } else if(parameters[parameterIndex]._Attribs.Name == \"oid\"){\n            config.oid = parameters[parameterIndex].Attribute[2].Value[0];\n        }\n    }\n    outputMsgs.push(config);\n    context.flow.set('outputMsgs', outputMsgs);\n    \n    /*for(var element in files){\n        outputMsgs.push({payload:path.join(driversFilePath, files[element])});\n    }*/\n    //msg.outputMsgs = outputMsgs;\n    msg.payload = outputMsgs;\n    return msg;\n} else if(msg.mep == \"subscribe\") {\n    var subscriptions = context.flow.get('subscriptions');\n    for(var element in subscriptions){\n        if(subscriptions[element].identifier == dsm._Attribs.ID){\n            msg.mep = \"unsubscribe\";\n            msg.payload = dsm._Attribs.ID;\n            subscriptions.splice(element, 1);\n            return msg;\n        }\n    }\n    var newSubscription = {};\n    msg.mep = \"subscribe\";\n    //only for testing\n    newSubscription.identifier = dsm._Attribs.ID;\n    var parameters = msg.parameters;\n    for(var parameterIndex in parameters){\n        if(parameters[parameterIndex]._Attribs.Name == \"address\"){\n            newSubscription.url = parameters[parameterIndex].Attribute[2].Value[0];\n        } else if(parameters[parameterIndex]._Attribs.Name == \"oid\"){\n            newSubscription.method = parameters[parameterIndex].Attribute[2].Value[0];\n        }\n    }\n    \n    msg.payload = dsm._Attribs.ID;\n    subscriptions.push(newSubscription);\n    context.flow.set('subscriptions', subscriptions);\n    return msg;\n}","outputs":1,"noerr":0,"x":510,"y":320,"wires":[["f962e798.f5c2f8"]]},{"id":"35bd8c34.c64e54","type":"actionflows","z":"927cab2b.acef18","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"unsubscribe","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"protected","perf":false,"seq":false,"x":980.66650390625,"y":374.9999694824219,"wires":[["6a791555.de66bc"]]},{"id":"aefd17cc.de1068","type":"comment","z":"927cab2b.acef18","name":"Request Reply Message Exchange Pattern","info":"","x":251.333251953125,"y":476.6666259765625,"wires":[]},{"id":"d321ea90.ef57d8","type":"comment","z":"927cab2b.acef18","name":"Internal Interface Entry Point","info":"","x":192.52389526367188,"y":47.142852783203125,"wires":[]},{"id":"5129ee34.fd825","type":"debug","z":"927cab2b.acef18","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1168.5714111328125,"y":664.9523620605469,"wires":[]},{"id":"5d67ce38.a506f","type":"debug","z":"927cab2b.acef18","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":354.2856750488281,"y":383.5238037109375,"wires":[]},{"id":"d27b31bc.97b3d","type":"snmp","z":"927cab2b.acef18","host":"","community":"public","version":"1","oids":"","timeout":5,"name":"","x":870,"y":580,"wires":[["41253abb.cca634"]]},{"id":"2d503145.6bc2be","type":"debug","z":"6f5697aa.38c758","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":772.5831909179688,"y":2035.5554809570312,"wires":[]},{"id":"e6513e33.0e316","type":"debug","z":"6f5697aa.38c758","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":318.75,"y":1894.25,"wires":[]},{"id":"b170b6f5.3247b8","type":"ui_switch","z":"6f5697aa.38c758","name":"","label":"Enable Monitoring","tooltip":"","group":"82638f05.632d68","order":2,"width":"3","height":"1","passthru":true,"decouple":"false","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":203.75,"y":2082.25,"wires":[["f2cdd929.e82888","d111b511.9fb708"]]},{"id":"61d6366e.8d53e8","type":"debug","z":"6f5697aa.38c758","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1032.5277709960938,"y":2508.5833740234375,"wires":[]},{"id":"8bd13b1.2f39ac8","type":"actionflows","z":"6f5697aa.38c758","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"snmpSysUpTime","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":646.5277709960938,"y":2439.0833740234375,"wires":[["95f97a31.40ebf8"]]},{"id":"9215c7f7.6b9768","type":"actionflows","z":"6f5697aa.38c758","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"snmpLoad","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":623.0555419921875,"y":1986.9442138671875,"wires":[["83f4daa0.97f538","41ec81b7.46448"]]},{"id":"41ec81b7.46448","type":"unsafe-function","z":"6f5697aa.38c758","name":"CPULoad","func":"var msg1 = {};\nvar msg2 = {};\nvar msg3 = {};\nvar msg4 = {};\n\nmsg1.topic = 'Last minute CPU(s) usage';\nmsg1.payload = msg.payload[0].value;\n\nmsg2.topic = 'Last 5 minutes CPU(s) usage';\nmsg2.payload = msg.payload[1].value;\n\nmsg3.topic = 'Last 15 minutes CPU(s) usage';\nmsg3.payload = msg.payload[2].value;\n\n//msg4.topic = 'CPU(s) number';\n//msg4.payload = 2;\n\nreturn [msg1, msg2, msg3];","outputs":3,"noerr":0,"x":859.7222290039062,"y":1944.7222900390625,"wires":[["e6e1dab8.ec2d38"],["e6e1dab8.ec2d38"],["e6e1dab8.ec2d38"]]},{"id":"83f4daa0.97f538","type":"debug","z":"6f5697aa.38c758","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":769.7222900390625,"y":1890.27783203125,"wires":[]},{"id":"fd7f9f07.a5f1c","type":"actionflows","z":"6f5697aa.38c758","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"snmpSysDscr","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1480,"y":220,"wires":[["4e623692.7ef0b8","ba0a3b74.a4c208"]]},{"id":"ba0a3b74.a4c208","type":"unsafe-function","z":"6f5697aa.38c758","name":"SubmodelsProcessing","func":"var msg1 = {};\nvar payload = {};\n//var splitted = msg.payload[0].value[0].value.split(\" \");\n//var splitted = msg.payload.value[0].value.split(\" \");\nvar splitted = msg.payload[0].value.split(\" \");\npayload.type = splitted[0];\npayload.hostname = splitted[1];\npayload.release = splitted[2];\npayload.platform = splitted[3];\npayload.arch = splitted[11];\nmsg1.payload = payload;\nreturn msg1;","outputs":1,"noerr":0,"x":1930,"y":220,"wires":[["bc8ea7f8.39b178","e5cae40d.f7ad78"]]},{"id":"bc8ea7f8.39b178","type":"debug","z":"6f5697aa.38c758","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":2210,"y":180,"wires":[]},{"id":"4e623692.7ef0b8","type":"debug","z":"6f5697aa.38c758","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1582.75,"y":156.75,"wires":[]},{"id":"5749a74b.f354e8","type":"debug","z":"6f5697aa.38c758","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1998.7498779296875,"y":457.7500305175781,"wires":[]},{"id":"8879d923.1c0f18","type":"ui_button","z":"6f5697aa.38c758","name":"Clear button","group":"574e8703.290e3","order":2,"width":"3","height":"1","passthru":true,"label":"Clear","tooltip":"","color":"","bgcolor":"#14524e","icon":"clear_all","payload":"","payloadType":"str","topic":"","x":1696.75,"y":1035.75,"wires":[["43a65539.e8e37c"]]},{"id":"43a65539.e8e37c","type":"unsafe-function","z":"6f5697aa.38c758","name":"ResetObservations","func":"context.flow.set('logs', []);\nmsg.payload = context.flow.get('logs');\nreturn msg; ","outputs":1,"noerr":0,"x":1911.25,"y":1034.75,"wires":[["b1de9af4.510788"]]},{"id":"b1de9af4.510788","type":"debug","z":"6f5697aa.38c758","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":2110.25,"y":1036.75,"wires":[]},{"id":"6ecce539.f9dadc","type":"comment","z":"2a540cc7.026154","name":"External Interface - Zero-Configuration Networking Management","info":"","x":260,"y":3600,"wires":[]},{"id":"23383bf9.311f04","type":"inject","z":"2a540cc7.026154","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":140,"y":3660,"wires":[["3db74f4a.e7aef"]]},{"id":"bb9d8bed.174a28","type":"announce","z":"2a540cc7.026154","name":"PROPHESY_AAS","service":"_aas._tcp","port":"","txt":"","x":1790,"y":3660,"wires":[]},{"id":"3db74f4a.e7aef","type":"unsafe-function","z":"2a540cc7.026154","name":"InitializePort","func":"msg.port = context.global.get('uiPort');\nreturn msg;","outputs":1,"noerr":0,"x":1030,"y":3660,"wires":[["bb9d8bed.174a28"]]},{"id":"4926c19e.cf658","type":"debug","z":"6d97086b.090b98","name":"kafka_MSG","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":490,"y":340,"wires":[]},{"id":"7fd97a17.11c3b4","type":"http request","z":"6d97086b.090b98","name":"","method":"use","ret":"txt","paytoqs":false,"url":"","tls":"","persist":false,"proxy":"","authType":"","x":1230,"y":820,"wires":[["ab593d3b.a1e26","27ace876.910e48"]]},{"id":"ab593d3b.a1e26","type":"debug","z":"6d97086b.090b98","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1450,"y":760,"wires":[]},{"id":"e2dd486c.d7ed08","type":"http request","z":"6d97086b.090b98","name":"","method":"use","ret":"txt","paytoqs":false,"url":"","tls":"","persist":false,"proxy":"","authType":"","x":1230,"y":900,"wires":[["c8d72b02.de1e28","32d19241.cd187e"]]},{"id":"c8d72b02.de1e28","type":"debug","z":"6d97086b.090b98","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1450,"y":960,"wires":[]},{"id":"56c65afa.4192e4","type":"debug","z":"6d97086b.090b98","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1190,"y":760,"wires":[]},{"id":"872b9a32.ee1e08","type":"actionflows_in","z":"6d97086b.090b98","name":"callDataStreaming_DataFlows in","priority":"50","links":[],"scope":"global","x":290,"y":480,"wires":[["2896dd14.ed84d2","870f9b6a.9925c8"]]},{"id":"d8bbd412.d43c38","type":"actionflows_out","z":"6d97086b.090b98","name":"callDataStreaming_DataFlows out","links":[],"x":2800,"y":460,"wires":[]},{"id":"44313437.fe7a9c","type":"unsafe-function","z":"6d97086b.090b98","name":"Toggle_(un)subscription","func":"var dsm =  msg.dsm;\nvar subscriptions = context.flow.get('subscriptions');\nfor(var element in subscriptions){\n    if(subscriptions[element].includes(dsm._Attribs.ID) || subscriptions[element].includes(dsm._Attribs.Name)){\n        msg.mep = \"unsubscribe\";\n//*****************************************************\n//only for testing (it should be defined if which one between ID or Name should be used)\n        //msg.payload = dsm._Attribs.ID;\n        //msg.payload = dsm._Attribs.Name;\n        msg.payload = subscriptions[element];\n//*****************************************************\n        return msg;\n    }\n}\n//msg.payload = di._Attribs.ID;\nmsg.mep = \"subscribe\";\n\n\n//*****************************************************\n//only for testing (it should be defined if which one between ID or Name should be used)\n\n//msg.payload = dsm._Attribs.ID;\nmsg.payload = dsm._Attribs.Name;\n\n//*****************************************************\nreturn msg;","outputs":1,"noerr":0,"x":1510,"y":580,"wires":[["6e469e35.665d4","77f25148.3506d"]]},{"id":"226dfd7e.ac3812","type":"actionflows","z":"6d97086b.090b98","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"subscribe","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"private","perf":false,"seq":false,"x":2420,"y":540,"wires":[["d8bbd412.d43c38"]]},{"id":"7802d83d.4441c8","type":"switch","z":"6d97086b.090b98","name":"IF_mep","property":"mep","propertyType":"msg","rules":[{"t":"eq","v":"subscribe","vt":"str"},{"t":"eq","v":"unsubscribe","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":2239.1272583007812,"y":558.2936706542969,"wires":[["226dfd7e.ac3812"],["5d45380e.f71b88"]]},{"id":"5d45380e.f71b88","type":"actionflows","z":"6d97086b.090b98","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"unsubscribe","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"private","perf":false,"seq":false,"x":2432.5003662109375,"y":591.6666870117188,"wires":[["d8bbd412.d43c38"]]},{"id":"35bda622.beeb9a","type":"actionflows_in","z":"6d97086b.090b98","name":"subscribe in","priority":"50","links":[],"scope":"private","x":230,"y":820,"wires":[["872bc37e.7bf8b"]]},{"id":"96702dfd.7a9f1","type":"actionflows_out","z":"6d97086b.090b98","name":"subscribe out","links":[],"x":2870,"y":820,"wires":[]},{"id":"35d4b42.1dc564c","type":"actionflows_in","z":"6d97086b.090b98","name":"unsubscribe in","priority":"50","links":[],"scope":"private","x":230,"y":900,"wires":[["58e140ca.d20f1"]]},{"id":"4b5d924.2d3436c","type":"actionflows_out","z":"6d97086b.090b98","name":"unsubscribe out","links":[],"x":2860,"y":900,"wires":[]},{"id":"9b352b3a.204028","type":"debug","z":"6f5697aa.38c758","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1601.8055419921875,"y":837.916748046875,"wires":[]},{"id":"82f5a83b.6735d8","type":"http request","z":"6f5697aa.38c758","name":"","method":"PUT","ret":"txt","url":"","tls":"","x":1502.3541259765625,"y":926.1041870117188,"wires":[["ccdb1f85.e83ec"]]},{"id":"badfe546.83f518","type":"unsafe-function","z":"6f5697aa.38c758","name":"LiveDataToSubscribe","func":"//Retreiving Libraries from the Settings.json file\nvar outputMsgs = [];\nvar selectedElements = context.flow.get('selectedElements');\nfor(var element in selectedElements){\n    //var msg = {payload:selectedElements[element]};\n    var selected_element = selectedElements[element]._Attribs.ID;\n    var msg = {payload:selected_element};\n    msg.url = context.global.get('namespace') + \"/aas/manifest/liveData/subscribe/property/\" + selected_element;\n    outputMsgs.push(msg);\n    \n}\n\nreturn [outputMsgs];","outputs":1,"noerr":0,"x":1379.8541259765625,"y":838.6041870117188,"wires":[["82f5a83b.6735d8","9b352b3a.204028"]]},{"id":"872bc37e.7bf8b","type":"unsafe-function","z":"6d97086b.090b98","name":"Create Flow topic - aas-topic","func":"msg.headers = {\"Content-type\" : \"application/json\"}\nmsg.url = context.global.get(\"DataStreamingEndpoint\") + \"/dataStream/gateway/aas/newDataFlow?requestId=\" + msg.payload;\nmsg.method = \"GET\";\nreturn msg;","outputs":1,"noerr":0,"x":940,"y":820,"wires":[["56c65afa.4192e4","7fd97a17.11c3b4"]]},{"id":"58e140ca.d20f1","type":"unsafe-function","z":"6d97086b.090b98","name":"Remove Flow topic - aas-topic","func":"msg.headers = {\"Content-type\" : \"application/json\"}\nmsg.url = context.global.get(\"DataStreamingEndpoint\") + \"/dataStream/dataFlows/\"+ msg.payload;\nmsg.method = \"DELETE\";\nreturn msg;","outputs":1,"noerr":0,"x":950,"y":900,"wires":[["55fb0564.1770ac","e2dd486c.d7ed08"]]},{"id":"146bff98.2dbba","type":"inject","z":"6d97086b.090b98","name":"","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":209.8541717529297,"y":62.354164123535156,"wires":[["60470a5a.3adf74"]]},{"id":"60470a5a.3adf74","type":"unsafe-function","z":"6d97086b.090b98","name":"flowVariables","func":"context.flow.set('subscriptions', []);\ncontext.flow.set('connected', false);","outputs":1,"noerr":0,"x":794.2291107177734,"y":62.35417938232422,"wires":[[]]},{"id":"6e469e35.665d4","type":"debug","z":"6d97086b.090b98","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1710,"y":520,"wires":[]},{"id":"ccdb1f85.e83ec","type":"debug","z":"6f5697aa.38c758","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1671.1041259765625,"y":926.1041870117188,"wires":[]},{"id":"2896dd14.ed84d2","type":"debug","z":"6d97086b.090b98","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":470,"y":420,"wires":[]},{"id":"55fb0564.1770ac","type":"debug","z":"6d97086b.090b98","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1190,"y":960,"wires":[]},{"id":"dcb64b43.daa4d8","type":"msg-router","z":"6f5697aa.38c758","routerType":"broadcast","topicDependent":false,"counterReset":false,"msgKeyField":"payload","undefinedHash":false,"outputsInfo":[{"active":true,"clone":false,"delay":"0","weight":"0"},{"active":true,"clone":false,"delay":"0","weight":"0"},{"active":true,"clone":false,"delay":"0","weight":"0"},{"active":true,"clone":false,"delay":"0","weight":"0"}],"name":"","delaying":"unrelated","msgControl":false,"outputs":4,"x":2012.88330078125,"y":337.8833312988281,"wires":[["f932b079.d4e0d"],["bdbbb449.cb3338"],["f1fb13dc.ab4b9"],["a4217899.6fb838"]]},{"id":"6f2977cd.59d178","type":"msg-router","z":"6f5697aa.38c758","routerType":"broadcast","topicDependent":false,"counterReset":false,"msgKeyField":"payload","undefinedHash":false,"outputsInfo":[{"active":true,"clone":false,"delay":"0","weight":"0"},{"active":true,"clone":false,"delay":"0","weight":"0"},{"active":true,"clone":false,"delay":"0","weight":"0"}],"name":"","delaying":"unrelated","msgControl":false,"outputs":3,"x":2537.88330078125,"y":121.88334655761719,"wires":[["8e8a96b3.4178d8"],["492d4c25.dc8a84"],["41eda8dc.1b6458"]]},{"id":"77478d8a.3a8a14","type":"msg-router","z":"6f5697aa.38c758","routerType":"broadcast","topicDependent":false,"counterReset":false,"msgKeyField":"payload","undefinedHash":false,"outputsInfo":[{"active":true,"clone":false,"delay":"0","weight":"0"},{"active":true,"clone":true,"delay":"0","weight":"0"},{"active":true,"clone":true,"delay":"0","weight":"0"}],"name":"","delaying":"unrelated","msgControl":false,"outputs":3,"x":1752.88330078125,"y":425.8833312988281,"wires":[["5749a74b.f354e8","55e2598.ac676a8"],["528de101.6113e"],["35fde27b.6fd59e"]]},{"id":"dae58985.3c1a48","type":"msg-router","z":"6f5697aa.38c758","routerType":"broadcast","topicDependent":false,"counterReset":false,"msgKeyField":"payload","undefinedHash":false,"outputsInfo":[{"active":true,"clone":true,"delay":"0","weight":"0"},{"active":true,"clone":true,"delay":"0","weight":"0"},{"active":true,"clone":true,"delay":"0","weight":"0"}],"name":"","delaying":"unrelated","msgControl":false,"outputs":3,"x":1773.2164916992188,"y":778.550048828125,"wires":[["528de101.6113e"],["35fde27b.6fd59e"],["97a3d807.573f98"]]},{"id":"bab64e2e.6d833","type":"debug","z":"6f5697aa.38c758","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":894.8831787109375,"y":54.88335418701172,"wires":[]},{"id":"4e78765d.088b68","type":"set-defaults","z":"2a540cc7.026154","name":"set-startTime","rules":[{"p":"startTime","pt":"msg","to":"","tot":"date"}],"chbox_DoOutputToMessage":true,"chbox_SetCurrentToMsg":false,"howSend":{"text":"payload","type":"msg","modifiedValue":"payload"},"dropdown_HowManyMessages":"single","dropdownObjOrVal":"value","outputs":1,"x":330,"y":340,"wires":[["1f8f09e.dac75f6"]]},{"id":"d0ffd048.9224c","type":"set-defaults","z":"2a540cc7.026154","name":"set-startTime","rules":[{"p":"startTime","pt":"msg","to":"","tot":"date"}],"chbox_DoOutputToMessage":true,"chbox_SetCurrentToMsg":false,"howSend":{"text":"payload","type":"msg","modifiedValue":"payload"},"dropdown_HowManyMessages":"single","dropdownObjOrVal":"value","outputs":1,"x":430,"y":540,"wires":[["ebb94342.e038f"]]},{"id":"8b5c582c.2c0638","type":"subflow:3bcb972f.6d23c8","z":"2a540cc7.026154","name":"","env":[],"x":1830,"y":580,"wires":[],"icon":"node-red-contrib-viseo-log/log.svg"},{"id":"8836a9a7.a1e1b8","type":"set-defaults","z":"2a540cc7.026154","name":"set-startTime","rules":[{"p":"startTime","pt":"msg","to":"","tot":"date"}],"chbox_DoOutputToMessage":true,"chbox_SetCurrentToMsg":false,"howSend":{"text":"payload","type":"msg","modifiedValue":"payload"},"dropdown_HowManyMessages":"single","dropdownObjOrVal":"value","outputs":1,"x":420,"y":740,"wires":[["d7375bd2.443ed8"]]},{"id":"562e5eab.332f","type":"subflow:3bcb972f.6d23c8","z":"2a540cc7.026154","name":"","x":1830,"y":780,"wires":[],"icon":"node-red-contrib-viseo-log/log.svg"},{"id":"f154745e.a88418","type":"set-defaults","z":"2a540cc7.026154","name":"set-startTime","rules":[{"p":"startTime","pt":"msg","to":"","tot":"date"}],"chbox_DoOutputToMessage":true,"chbox_SetCurrentToMsg":false,"howSend":{"text":"payload","type":"msg","modifiedValue":"payload"},"dropdown_HowManyMessages":"single","dropdownObjOrVal":"value","outputs":1,"x":420,"y":880,"wires":[["ccff1be9.5cb038"]]},{"id":"8ac5685b.f35ce8","type":"subflow:3bcb972f.6d23c8","z":"2a540cc7.026154","name":"","env":[],"x":1830,"y":920,"wires":[],"icon":"node-red-contrib-viseo-log/log.svg"},{"id":"43720a72.82e524","type":"debug","z":"2a540cc7.026154","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":290,"y":300,"wires":[]},{"id":"b308d646.19dd48","type":"http in","z":"2a540cc7.026154","name":"","url":"/aas/upload","method":"get","upload":false,"swaggerDoc":"","x":120,"y":120,"wires":[["e43c442e.442948"]]},{"id":"d49c8fdf.9ae23","type":"http response","z":"2a540cc7.026154","name":"","statusCode":"","headers":{},"x":450,"y":120,"wires":[]},{"id":"274eae82.8e3b12","type":"debug","z":"2a540cc7.026154","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":430,"y":160,"wires":[]},{"id":"43511961.c33298","type":"httpInMultipart","z":"2a540cc7.026154","name":"","url":"/aas/initialize","method":"post","fields":"[{\"name\": \"manifest\"}]","swaggerDoc":"","x":130,"y":340,"wires":[["4e78765d.088b68","43720a72.82e524"]]},{"id":"64f89c02.693b54","type":"actionflows_in","z":"d615cce6.1a41c","name":"readSubmodels in","priority":"50","links":[],"scope":"global","x":364.8833312988281,"y":475.8833312988281,"wires":[["f2407fb9.6c524"]]},{"id":"637b644.360a19c","type":"actionflows_out","z":"d615cce6.1a41c","name":"readSubmodels out","links":[],"x":1503.2166137695312,"y":474.2165832519531,"wires":[]},{"id":"82f15dc0.f99c6","type":"actionflows_in","z":"d615cce6.1a41c","name":"readSubmodel in","priority":"50","links":[],"scope":"global","x":353.383056640625,"y":564.1214904785156,"wires":[["19d79a59.68b916"]]},{"id":"a8dd9458.8d9d98","type":"actionflows_out","z":"d615cce6.1a41c","name":"readSubmodel out","links":[],"x":1494.0497436523438,"y":564.4547424316406,"wires":[]},{"id":"1d63c58.f3eba3b","type":"actionflows_in","z":"d615cce6.1a41c","name":"addSubmodel in","priority":"50","links":[],"scope":"global","x":356.7641296386719,"y":691.3595123291016,"wires":[["4be0e941.a311e8"]]},{"id":"d5e284f9.fd0e58","type":"actionflows_out","z":"d615cce6.1a41c","name":"addSubmodel out","links":[],"x":1493.4309387207031,"y":694.6928863525391,"wires":[]},{"id":"bdd6fad4.0679a8","type":"actionflows_in","z":"d615cce6.1a41c","name":"removeSubmodel in","priority":"50","links":[],"scope":"global","x":366.7641296386719,"y":841.3595123291016,"wires":[["bf1c9e7d.eebe4"]]},{"id":"32dd02b6.9fb44e","type":"actionflows_out","z":"d615cce6.1a41c","name":"removeSubmodel out","links":[],"x":1501.7643127441406,"y":848.0260772705078,"wires":[]},{"id":"c014449e.7fe298","type":"actionflows_in","z":"d615cce6.1a41c","name":"updateSubmodel in","priority":"50","links":[],"scope":"global","x":370.4308166503906,"y":955.6928863525391,"wires":[["e46e629e.c863e"]]},{"id":"7829beb.8fc684","type":"actionflows_out","z":"d615cce6.1a41c","name":"updateSubmodel out","links":[],"x":1502.4309387207031,"y":958.3595123291016,"wires":[]},{"id":"16ac9fa3.5d999","type":"unsafe-function","z":"d615cce6.1a41c","name":"PersistModel","func":"var XML = context.global.get('XML');\nvar manifest = context.flow.get('manifest');\n\nvar xml_string_composed = XML.stringify(manifest, 'CAEXFile');\nmsg.payload = xml_string_composed;\n\nreturn msg;","outputs":1,"noerr":0,"x":1020.5379943847656,"y":1625.6214752197266,"wires":[["b27ae35.081e22"]]},{"id":"b27ae35.081e22","type":"file","z":"d615cce6.1a41c","name":"PersistModel","filename":"","appendNewline":false,"createDir":true,"overwriteFile":"true","x":1219.7879943847656,"y":1625.3714752197266,"wires":[["c7d6b74f.4c4688"]]},{"id":"89651f2a.52dbd","type":"unsafe-function","z":"d615cce6.1a41c","name":"RetrievingModelFilePath","func":"msg.filename = context.global.get(\"ModelFilePath\");\nreturn msg;","outputs":1,"noerr":0,"x":671.7879943847656,"y":1626.1214752197266,"wires":[["16ac9fa3.5d999"]]},{"id":"e93996d7.0d93f8","type":"actionflows_in","z":"d615cce6.1a41c","name":"persistManifest in","priority":"50","links":[],"scope":"global","x":353.0379943847656,"y":1626.1214752197266,"wires":[["89651f2a.52dbd"]]},{"id":"c7d6b74f.4c4688","type":"actionflows_out","z":"d615cce6.1a41c","name":"persistManifest out","links":[],"x":1474.2878723144531,"y":1625.3714752197266,"wires":[]},{"id":"f2407fb9.6c524","type":"unsafe-function","z":"d615cce6.1a41c","name":"RetrievingSubmodels...","func":"//var xml_string = msg.payload;\n//var XML = context.global.get('XML');\n//var doc = XML.parse( xml_string, { preserveAttributes: true, forceArrays: true  } );\n/*\nvar xml_string_composed = XML.stringify( doc, 'CAEXFile');\nmsg.composed = xml_string_composed;\n*/\n\n/*var parser = null;\n\ntry {\n    parser = new XML.Parser(xml_string, { preserveAttributes: true, forceArrays: true} );\n}\ncatch (err) {\n    throw err;\n}*/\n//var manifest = parser.getTree();\n//var manifest = context.global.get(\"manifest\");\n//var submodelsList = manifest.InstanceHierarchy[0].InternalElement[1].InternalElement[0].InternalElement;\n\n/*if(typeof submodelsList === \"undefined\"){\n    submodelsList = {};\n}*/\n\n//msg.manifest.submodels = submodels;\n//msg.manifest = manifest;\n\n/*msg.payload = context.flow.get(\"body\");\nmsg.AASID = context.flow.get('AASIdentifier');*/\n\nvar manifest = context.flow.get(\"manifest\");\nvar body = manifest.InstanceHierarchy[0].InternalElement[1];\nmsg.payload = body;\nmsg.AASID = context.global.get('AASIdentifier');\nreturn msg;","outputs":1,"noerr":0,"x":1135.9546508789062,"y":473.5022888183594,"wires":[["637b644.360a19c"]]},{"id":"19d79a59.68b916","type":"unsafe-function","z":"d615cce6.1a41c","name":"RetrievingSubmodelById...","func":"var SubmodelId = msg.req.params.id;\n/*var submodels = context.flow.get(\"submodels\");\nmsg.AASID = context.flow.get('AASIdentifier');\nfor(var submodelIndex in submodels){\n        var submodel = submodels[submodelIndex];\n        var id = submodel._Attribs.ID; \n        if (id.localeCompare(SubmodelId) === 0){\n                msg.payload = submodel;\n                msg.statusCode = \"200\";\n                return msg;\n        }\n    }\nmsg.statusCode = \"404\";\nmsg.payload = \"submodel with id:\" + SubmodelId + \" not found\"\nreturn msg;*/\nvar manifest = context.flow.get('manifest');\nvar body = manifest.InstanceHierarchy[0].InternalElement[1];\nvar submodels = body.InternalElement;\nmsg.AASID = context.flow.get('AASIdentifier');\nfor(var submodelIndex in submodels){\n        var submodel = submodels[submodelIndex];\n        var id = submodel._Attribs.ID; \n        if (id.localeCompare(SubmodelId) === 0){\n                msg.payload = submodel;\n                msg.statusCode = \"200\";\n                return msg;\n        }\n    }\nmsg.statusCode = \"404\";\nmsg.payload = \"submodel with id:\" + SubmodelId + \" not found\"\nreturn msg;\n","outputs":1,"noerr":0,"x":1132.6211547851562,"y":565.4070739746094,"wires":[["a8dd9458.8d9d98"]]},{"id":"4be0e941.a311e8","type":"unsafe-function","z":"d615cce6.1a41c","name":"AddingSubmodel...","func":"//var xml_string = msg.payload;\n//var XML = context.global.get('XML');\n\nvar submodel = msg.payload;\n//var doc = XML.parse( xml_string, { preserveAttributes: true, forceArrays: true  } );\n/*\nvar xml_string_composed = XML.stringify( doc, 'CAEXFile');\nmsg.composed = xml_string_composed;\n*/\n\n/*var parser = null;\n\ntry {\n    parser = new XML.Parser(xml_string, { preserveAttributes: true, forceArrays: true} );\n}\ncatch (err) {\n    throw err;\n}*/\n//var manifest = context.global.get(\"manifest\");\n//var manifest = parser.getTree();\n\n/*var submodels = context.flow.get(\"submodels\");\nmsg.AASID = context.flow.get('AASIdentifier');\nfor(var submodelIndex in submodels){\n    if(submodel._Attribs.ID == submodels[submodelIndex]._Attribs.ID){\n        msg.payload = \"Error submodel ID already exists\";\n        msg.statusCode = \"409\";\n        return msg;\n    }\n}\nsubmodels.push(submodel);\nvar propertiesList = context.flow.get('properties');\nvar properties = submodel.InternalElement;\n    for(var propertyIndex in properties){\n        propertiesList.push(properties[propertyIndex]);\n    }\nmsg.statusCode = \"201\";\nreturn msg;*/\n\nvar manifest = context.flow.get('manifest');\nvar body = manifest.InstanceHierarchy[0].InternalElement[1];\nvar submodels = body.InternalElement;\nmsg.AASID = context.flow.get('AASIdentifier');\nfor(var submodelIndex in submodels){\n    if(submodel._Attribs.ID == submodels[submodelIndex]._Attribs.ID){\n        msg.payload = \"Error submodel ID already exists\";\n        msg.statusCode = \"409\";\n        return msg;\n    }\n}\nsubmodels.push(submodel);\nmsg.statusCode = \"201\";\nreturn msg;\n\n","outputs":1,"noerr":0,"x":911.6689758300781,"y":688.9785919189453,"wires":[["73503243.5b806c"]]},{"id":"73503243.5b806c","type":"switch","z":"d615cce6.1a41c","name":"","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"201","vt":"str"},{"t":"eq","v":"409","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":1090.0023498535156,"y":688.9784698486328,"wires":[["f29a0194.62f3a"],["d5e284f9.fd0e58"]]},{"id":"f29a0194.62f3a","type":"actionflows","z":"d615cce6.1a41c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"persistManifest","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1284.1689758300781,"y":638.9784698486328,"wires":[["d5e284f9.fd0e58"]]},{"id":"bf1c9e7d.eebe4","type":"unsafe-function","z":"d615cce6.1a41c","name":"RemovingSubmodel...","func":"//var xml_string = msg.payload;\n//var XML = context.global.get('XML');\n\nvar submodelID = msg.req.params.id;\n//var doc = XML.parse( xml_string, { preserveAttributes: true, forceArrays: true  } );\n/*\nvar xml_string_composed = XML.stringify( doc, 'CAEXFile');\nmsg.composed = xml_string_composed;\n*/\n\n/*var parser = null;\n\ntry {\n    parser = new XML.Parser(xml_string, { preserveAttributes: true, forceArrays: true} );\n}\ncatch (err) {\n    throw err;\n}*/\n//var manifest = context.global.get(\"manifest\");\n//var manifest = parser.getTree();\n\n/*\nmsg.AASID = context.flow.get('AASIdentifier');\nvar submodels = context.flow.get(\"submodels\");\nfor(var submodelIndex in submodels){\n    if(submodelID == submodels[submodelIndex]._Attribs.ID){\n        var submodel = submodels[submodelIndex];\n        submodels.splice(submodelIndex, 1);\n        msg.statusCode = \"200\";\n        var propertiesList = context.flow.get('properties');\n        var properties = submodel.InternalElement;\n        for(var propertyIndex in properties){\n            for(var propertyIndex2 in propertiesList){\n                if(properties[propertyIndex]._Attribs.ID == propertiesList[propertyIndex2]._Attribs.ID){\n                    propertiesList.splice(propertyIndex2, 1);\n                }\n            }\n        }\n        return msg;\n    }\n}\n\nmsg.payload = \"Error Submodel not found for Id: \" + submodelID;\nmsg.statusCode = \"404\";\nreturn msg;*/\n\nvar manifest = context.flow.get('manifest');\nvar body = manifest.InstanceHierarchy[0].InternalElement[1];\nvar submodels = body.InternalElement;\nmsg.AASID = context.flow.get('AASIdentifier');\nfor(var submodelIndex in submodels){\n    if(submodelID == submodels[submodelIndex]._Attribs.ID){\n        var submodel = submodels[submodelIndex];\n        submodels.splice(submodelIndex, 1);\n        msg.statusCode = \"200\";\n        return msg;\n    }\n}\nmsg.payload = \"Error Submodel not found for Id: \" + submodelID;\nmsg.statusCode = \"404\";\nreturn msg;\n\n","outputs":1,"noerr":0,"x":916.6688537597656,"y":840.6452178955078,"wires":[["54a60032.eccc6"]]},{"id":"54a60032.eccc6","type":"switch","z":"d615cce6.1a41c","name":"","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"200","vt":"str"},{"t":"eq","v":"404","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":1090.0022277832031,"y":840.6450958251953,"wires":[["ff9e5e28.49ccf"],["32dd02b6.9fb44e"]]},{"id":"ff9e5e28.49ccf","type":"actionflows","z":"d615cce6.1a41c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"persistManifest","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1285.0022277832031,"y":795.6452178955078,"wires":[["32dd02b6.9fb44e"]]},{"id":"e46e629e.c863e","type":"unsafe-function","z":"d615cce6.1a41c","name":"UpdatingSubmodel...","func":"var submodel = msg.payload;\n/*\nvar xml_string_composed = XML.stringify( doc, 'CAEXFile');\nmsg.composed = xml_string_composed;\n*/\n\n/*var parser = null;\n\ntry {\n    parser = new XML.Parser(xml_string, { preserveAttributes: true, forceArrays: true} );\n}\ncatch (err) {\n    throw err;\n}*/\n//var manifest = context.global.get(\"manifest\");\n//var manifest = parser.getTree();\n\n/*\nmsg.AASID = context.flow.get('AASIdentifier');\nvar submodels = context.flow.get(\"submodels\");\nfor(var submodelIndex in submodels){\n    if(submodel._Attribs.ID == submodels[submodelIndex]._Attribs.ID){\n        submodels[submodelIndex] = submodel;\n        msg.statusCode = \"200\";\n        var propertiesList = context.flow.get('properties');\n        var properties = submodel.InternalElement;\n        for(var propertyIndex in properties){\n            propertiesList.push(properties[propertyIndex]);\n        }\n        return msg;\n    }\n}\nmsg.statusCode = \"404\";\nreturn msg;\n*/\n\nvar manifest = context.flow.get('manifest');\nvar body = manifest.InstanceHierarchy[0].InternalElement[1];\nvar submodels = body.InternalElement;\nmsg.AASID = context.flow.get('AASIdentifier');\nfor(var submodelIndex in submodels){\n    if(submodel._Attribs.ID == submodels[submodelIndex]._Attribs.ID){\n        submodels[submodelIndex] = submodel;\n        msg.statusCode = \"200\";\n        return msg;\n    }\n}\nmsg.statusCode = \"404\";\nreturn msg;","outputs":1,"noerr":0,"x":916.6688537597656,"y":953.9782867431641,"wires":[["31657c55.f934c4"]]},{"id":"31657c55.f934c4","type":"switch","z":"d615cce6.1a41c","name":"","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"200","vt":"str"},{"t":"eq","v":"404","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":1096.6688537597656,"y":953.9781646728516,"wires":[["7f08ef54.882d3"],["7829beb.8fc684"]]},{"id":"7f08ef54.882d3","type":"actionflows","z":"d615cce6.1a41c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"persistManifest","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1286.6688537597656,"y":917.3118438720703,"wires":[["7829beb.8fc684"]]},{"id":"b3d075fb.c7b328","type":"actionflows_in","z":"d615cce6.1a41c","name":"readManifest in","priority":"50","links":[],"scope":"global","x":355.7165222167969,"y":275.40716552734375,"wires":[["66c6155c.38e68c"]]},{"id":"78d9d368.89852c","type":"actionflows_out","z":"d615cce6.1a41c","name":"readManifest out","links":[],"x":1501.4307861328125,"y":278.2642822265625,"wires":[]},{"id":"66c6155c.38e68c","type":"unsafe-function","z":"d615cce6.1a41c","name":"RetrievingManifest...","func":"msg.payload = context.flow.get(\"manifest\");\nmsg.AASID = context.flow.get('AASIdentifier');\nreturn msg;","outputs":1,"noerr":0,"x":1105.0023193359375,"y":276.8356628417969,"wires":[["78d9d368.89852c"]]},{"id":"8abc7b29.bca798","type":"actionflows_in","z":"d615cce6.1a41c","name":"readProperty in","priority":"50","links":[],"scope":"global","x":355.002197265625,"y":1069.6929473876953,"wires":[["4fc0aa5a.c8cf94"]]},{"id":"e870a808.2cf018","type":"actionflows_out","z":"d615cce6.1a41c","name":"readProperty out","links":[],"x":1495.6688842773438,"y":1070.0261993408203,"wires":[]},{"id":"4fc0aa5a.c8cf94","type":"unsafe-function","z":"d615cce6.1a41c","name":"RetrievingPropertyById...","func":"/*msg.AASID = context.flow.get('AASIdentifier');\nvar propertyId = msg.req.params.id;\nvar properties = context.flow.get(\"properties\");\nfor(var propertyIndex in properties){\n        var property = properties[propertyIndex];\n        var id = property._Attribs.ID; \n        if (id.localeCompare(propertyId) === 0){\n                msg.payload = property;\n                msg.statusCode = \"200\";\n                return msg;\n        }\n    }\nmsg.statusCode = \"404\";\nmsg.payload = \"property with id:\" + propertyId + \" not found\"\nreturn msg;\n*/\n\nmsg.AASID = context.flow.get('AASIdentifier');\nvar propertyId = msg.req.params.id;\nvar manifest = context.flow.get('manifest');\nvar body = manifest.InstanceHierarchy[0].InternalElement[1];\nvar submodels = body.InternalElement;\nfor(var submodel in submodels){\n    var properties = submodels[submodel].InternalElement;\n    for(var propertyIndex in properties){\n        var property = properties[propertyIndex];\n        var id = property._Attribs.ID; \n        if (id.localeCompare(propertyId) === 0){\n                msg.payload = property;\n                msg.statusCode = \"200\";\n                return msg;\n        }\n    }\n}\nmsg.statusCode = \"404\";\nmsg.payload = \"property with id:\" + propertyId + \" not found\"\nreturn msg;","outputs":1,"noerr":0,"x":1124.2402954101562,"y":1070.978530883789,"wires":[["e870a808.2cf018"]]},{"id":"d57d1ae5.c519d8","type":"actionflows_in","z":"d615cce6.1a41c","name":"addProperty in","priority":"50","links":[],"scope":"global","x":356.4307556152344,"y":1195.407241821289,"wires":[["f31f69a2.b9f598"]]},{"id":"f734e8db.1af528","type":"actionflows_out","z":"d615cce6.1a41c","name":"addProperty out","links":[],"x":1483.0975646972656,"y":1198.7406158447266,"wires":[]},{"id":"f31f69a2.b9f598","type":"unsafe-function","z":"d615cce6.1a41c","name":"AddingProperty...","func":"//var xml_string = msg.payload;\n//var XML = context.global.get('XML');\n\nvar property = msg.payload;\nvar submodelId = msg.req.params.id;\n\n\n//var doc = XML.parse( xml_string, { preserveAttributes: true, forceArrays: true  } );\n/*\nvar xml_string_composed = XML.stringify( doc, 'CAEXFile');\nmsg.composed = xml_string_composed;\n*/\n\n/*var parser = null;\n\ntry {\n    parser = new XML.Parser(xml_string, { preserveAttributes: true, forceArrays: true} );\n}\ncatch (err) {\n    throw err;\n}*/\n//var manifest = context.global.get(\"manifest\");\n//var manifest = parser.getTree();\n\n/*\nmsg.AASID = context.flow.get('AASIdentifier');\nvar properties = context.flow.get(\"properties\");\nfor(var propertyIndex in properties){\n    if(properties[propertyIndex]._Attribs.ID == property._Attribs.ID){\n        msg.payload = \"Error property ID already exists\";\n        msg.statusCode = \"409\";\n        return msg;\n    }\n}\nproperties.push(property);\n\nvar submodels = context.flow.get('submodels');\n    for(var submodelIndex in submodels){\n        if(submodels[submodelIndex]._Attribs.ID == submodelId){\n            if(typeof submodels[submodelIndex].InternalElement === \"undefined\"){\n                submodels[submodelIndex].InternalElement = [];\n                submodels[submodelIndex].InternalElement.push(property)\n            }\n            else{\n                submodels[submodelIndex].InternalElement.push(property);\n            }\n            break;\n        }\n    }\n\nmsg.statusCode = \"201\";\nreturn msg;*/\n\nmsg.AASID = context.flow.get('AASIdentifier');\nvar manifest = context.flow.get('manifest');\nvar body = manifest.InstanceHierarchy[0].InternalElement[1];\nvar submodels = body.InternalElement;\nfor(var submodel in submodels){\n    if(submodels[submodel]._Attribs.ID == submodelId){\n        if(typeof submodels[submodel].InternalElement === \"undefined\"){\n            submodels[submodel].InternalElement = [];\n            submodels[submodel].InternalElement.push(property)\n        }\n        else{\n            var properties = submodels[submodel].InternalElement;\n            for(var propertyIndex in properties){\n                if(properties[propertyIndex]._Attribs.ID == property._Attribs.ID){\n                    msg.payload = \"Error property ID already exists\";\n                    msg.statusCode = \"409\";\n                    return msg;\n                }\n            }\n            submodels[submodel].InternalElement.push(property);\n        }\n        break;\n    }\n}\nmsg.statusCode = \"201\";\nreturn msg;\n","outputs":1,"noerr":0,"x":911.3356018066406,"y":1193.0263214111328,"wires":[["e46025c0.b2ecf8"]]},{"id":"e46025c0.b2ecf8","type":"switch","z":"d615cce6.1a41c","name":"","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"201","vt":"str"},{"t":"eq","v":"409","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":1089.6689758300781,"y":1193.0261993408203,"wires":[["2399166a.a909fa"],["f734e8db.1af528"]]},{"id":"2399166a.a909fa","type":"actionflows","z":"d615cce6.1a41c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"persistManifest","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1283.8356018066406,"y":1143.0261993408203,"wires":[["f734e8db.1af528"]]},{"id":"a3ee52c8.8a16d","type":"actionflows_in","z":"d615cce6.1a41c","name":"removeProperty in","priority":"50","links":[],"scope":"global","x":363.5736083984375,"y":1325.4071197509766,"wires":[["5c4f1bab.42aa54"]]},{"id":"2aee7156.07fd4e","type":"actionflows_out","z":"d615cce6.1a41c","name":"removeProperty out","links":[],"x":1488.5737915039062,"y":1332.0736846923828,"wires":[]},{"id":"5c4f1bab.42aa54","type":"unsafe-function","z":"d615cce6.1a41c","name":"RemovingProperty...","func":"//var xml_string = msg.payload;\n//var XML = context.global.get('XML');\n\nvar propertyID = msg.req.params.id;\n//var doc = XML.parse( xml_string, { preserveAttributes: true, forceArrays: true  } );\n/*\nvar xml_string_composed = XML.stringify( doc, 'CAEXFile');\nmsg.composed = xml_string_composed;\n*/\n\n/*var parser = null;\n\ntry {\n    parser = new XML.Parser(xml_string, { preserveAttributes: true, forceArrays: true} );\n}\ncatch (err) {\n    throw err;\n}*/\n//var manifest = context.global.get(\"manifest\");\n//var manifest = parser.getTree();\n\n/*\nmsg.AASID = context.flow.get('AASIdentifier');\nvar propertiesList = context.flow.get('properties');\nfor(var propertyIndex in propertiesList){\n    if(propertyID == propertiesList[propertyIndex]._Attribs.ID){\n        propertiesList.splice(propertyIndex, 1);\n        var submodels = context.flow.get(\"submodels\");\n        for(var submodelIndex in submodels){\n        var properties = submodel.InternalElement;\n        for(var propertyIndex2 in properties){\n            if(properties[propertyIndex2]._Attribs.ID == propertyID){\n                propertiesList.splice(propertyIndex2, 1);\n            }\n        }\n        msg.statusCode = \"200\";\n        return msg;\n        }\n    }\n}\n\nmsg.payload = \"Error Property not found for Id: \" + propertyID;\nmsg.statusCode = \"404\";\nreturn msg;\n*/\n\nmsg.AASID = context.flow.get('AASIdentifier');\nvar manifest = context.flow.get('manifest');\nvar body = manifest.InstanceHierarchy[0].InternalElement[1];\nvar submodels = body.InternalElement;\nfor(var submodel in submodels){\n    var properties = submodels[submodel].InternalElement;\n    for(var propertyIndex in properties){\n        if(properties[propertyIndex]._Attribs.ID == propertyID){\n            properties.splice(propertyIndex, 1);\n            msg.statusCode = \"200\";\n            return msg;\n        }\n    }\n}\n\nmsg.payload = \"Error Property not found for Id: \" + propertyID;\nmsg.statusCode = \"404\";\nreturn msg;","outputs":1,"noerr":0,"x":913.4783325195312,"y":1324.6928253173828,"wires":[["bfb3d592.655478"]]},{"id":"bfb3d592.655478","type":"switch","z":"d615cce6.1a41c","name":"","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"200","vt":"str"},{"t":"eq","v":"404","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":1086.8117065429688,"y":1324.6927032470703,"wires":[["24d8878f.239838"],["2aee7156.07fd4e"]]},{"id":"24d8878f.239838","type":"actionflows","z":"d615cce6.1a41c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"persistManifest","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1281.8117065429688,"y":1279.6928253173828,"wires":[["2aee7156.07fd4e"]]},{"id":"fcd9b2a.3d3b75","type":"actionflows_in","z":"d615cce6.1a41c","name":"updateProperty in","priority":"50","links":[],"scope":"global","x":367.5736083984375,"y":1453.4071197509766,"wires":[["15622d5b.406c53"]]},{"id":"b7850d39.68831","type":"actionflows_out","z":"d615cce6.1a41c","name":"updateProperty out","links":[],"x":1489.57373046875,"y":1456.073745727539,"wires":[]},{"id":"15622d5b.406c53","type":"unsafe-function","z":"d615cce6.1a41c","name":"UpdatingProperty...","func":"var property = msg.payload;\n/*\nvar xml_string_composed = XML.stringify( doc, 'CAEXFile');\nmsg.composed = xml_string_composed;\n*/\n\n/*var parser = null;\n\ntry {\n    parser = new XML.Parser(xml_string, { preserveAttributes: true, forceArrays: true} );\n}\ncatch (err) {\n    throw err;\n}*/\n//var manifest = context.global.get(\"manifest\");\n//var manifest = parser.getTree();\n\n\n/*msg.AASID = context.flow.get('AASIdentifier');\nvar propertiesList = context.flow.get('properties');\nfor(var propertyIndex in propertiesList){\n    if(property._Attribs.ID == propertiesList[propertyIndex]._Attribs.ID){\n        propertiesList[propertyIndex] = property;\n        msg.statusCode = \"200\";\n        return msg;\n    }\n}\n\nmsg.statusCode = \"404\";\nreturn msg;*/\n\nmsg.AASID = context.flow.get('AASIdentifier');\nvar manifest = context.flow.get('manifest');\nvar body = manifest.InstanceHierarchy[0].InternalElement[1];\nvar submodels = body.InternalElement;\nfor(var submodel in submodels){\n    var properties = submodels[submodel].InternalElement;\n    for(var propertyIndex in properties){\n        if(property._Attribs.ID == properties[propertyIndex]._Attribs.ID){\n            properties[propertyIndex] = property;\n            msg.statusCode = \"200\";\n            context.flow.set('manifest', manifest);\n            return msg;\n        }\n    }\n}\n\nmsg.statusCode = \"404\";\nreturn msg;","outputs":1,"noerr":0,"x":903.8116455078125,"y":1451.6925201416016,"wires":[["e547128f.5b802"]]},{"id":"e547128f.5b802","type":"switch","z":"d615cce6.1a41c","name":"","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"200","vt":"str"},{"t":"eq","v":"404","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":1093.8116455078125,"y":1451.692398071289,"wires":[["97f05ed0.1242"],["b7850d39.68831"]]},{"id":"97f05ed0.1242","type":"actionflows","z":"d615cce6.1a41c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"persistManifest","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1283.8116455078125,"y":1415.0260772705078,"wires":[["b7850d39.68831"]]},{"id":"81584be8.5d2568","type":"actionflows_in","z":"d615cce6.1a41c","name":"readPropertyInterface in","priority":"50","links":[],"scope":"global","x":370.7164611816406,"y":1811.1214752197266,"wires":[["b48e8785.941288"]]},{"id":"f772a7c3.be0088","type":"actionflows_out","z":"d615cce6.1a41c","name":"readPropertyInterface out","links":[],"x":1486.4307861328125,"y":1815.4071197509766,"wires":[]},{"id":"b48e8785.941288","type":"unsafe-function","z":"d615cce6.1a41c","name":"RetrievingPropertyById...","func":"var propertyId = msg.req.params.id;\n\n/*msg.AASID = context.flow.get('AASIdentifier');\nvar propertyId = msg.req.params.id;\nvar properties = context.flow.get(\"properties\");\nfor(var propertyIndex in properties){\n        var property = properties[propertyIndex];\n        var id = property._Attribs.ID; \n        if (id.localeCompare(propertyId) === 0){\n                msg.payload = property;\n                msg.statusCode = \"200\";\n                return msg;\n        }\n    }\nmsg.statusCode = \"404\";\nmsg.payload = \"property with id:\" + propertyId + \" not found\"\nreturn msg;*/\n\nmsg.AASID = context.flow.get('AASIdentifier');\nvar manifest = context.flow.get('manifest');\nvar body = manifest.InstanceHierarchy[0].InternalElement[1];\nvar submodels = body.InternalElement;\nfor(var submodel in submodels){\n    var properties = submodels[submodel].InternalElement;\n    for(var propertyIndex in properties){\n        var property = properties[propertyIndex];\n        var id = property._Attribs.ID;\n        if (id.localeCompare(propertyId) === 0){\n                msg.payload = property;\n                msg.statusCode = \"200\";\n                return msg;\n        }\n    }\n}\n\nmsg.statusCode = \"404\";\nmsg.payload = \"property with id:\" + propertyId + \" not found\"\nreturn msg;","outputs":1,"noerr":0,"x":685.0023193359375,"y":1811.1214752197266,"wires":[["c1969d05.13a28"]]},{"id":"c1969d05.13a28","type":"switch","z":"d615cce6.1a41c","name":"","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"200","vt":"str"},{"t":"eq","v":"404","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":907.859375,"y":1809.692886352539,"wires":[["aeaf100.dab68f"],["f772a7c3.be0088"]]},{"id":"aeaf100.dab68f","type":"unsafe-function","z":"d615cce6.1a41c","name":"RetrievingDataInterface...","func":"var property = msg.payload;\nvar di = property.InternalElement[1];\nmsg.payload = di;\nreturn msg;","outputs":1,"noerr":0,"x":1182.145263671875,"y":1766.8358306884766,"wires":[["f772a7c3.be0088"]]},{"id":"3f068be9.b600c4","type":"unsafe-function","z":"d615cce6.1a41c","name":"CreateInMemoryManifest","func":"//Retreiving Libraries from the Settings.json file\nvar XML = context.global.get('XML');\nvar os = context.global.get('os');\n\nvar xml_string = \"\";\nvar manifest = \"\";\nif(msg.payload === \"\" || (typeof msg.payload.chatId !== \"undefined\")){\n    xml_string = context.flow.get('emptyManifest');\n    manifest = XML.parse( xml_string, { preserveAttributes: true, forceArrays: true  } );\n    context.flow.set(\"emptyManifesttest\", manifest);\n    var newSubmodels = manifest.InstanceHierarchy[0].InternalElement[1].InternalElement;\n    var oldManifest = context.flow.get(\"manifest\");\n    if(oldManifest !== \"\"){\n        var oldSubmodels = oldManifest.InstanceHierarchy[0].InternalElement[1].InternalElement;\n        for(var oldSubmodel in oldSubmodels){\n            var oldSubmodelId = oldSubmodels[oldSubmodel]._Attribs.ID;\n            for(var newSubmodel in newSubmodels){\n                var newSubmodelId = newSubmodels[newSubmodel]._Attribs.ID;\n                if(newSubmodelId == oldSubmodelId){\n                    newSubmodels[newSubmodel].Attribute[0].Value[0] = oldSubmodels[oldSubmodel].Attribute[0].Value[0];\n                }\n            }\n        }\n    }\n} else {\n    xml_string = msg.payload;\n    manifest = XML.parse( xml_string, { preserveAttributes: true, forceArrays: true  } );\n}\n//context.global.set('stringManifest', xml_string);\n\n//var manifest = XML.parse( xml_string, { preserveAttributes: true, forceArrays: true  } );\ncontext.flow.set(\"manifest\", manifest);\nvar header = manifest.InstanceHierarchy[0].InternalElement[0];\ncontext.flow.set('header', header);\n\n// set AAS Identifier\nheader.InternalElement[0].InternalElement[0]._Attribs.ID = context.global.get('AASIdentifier');\n// set AAS virtual Location\nheader.InternalElement[0].InternalElement[0].InternalElement[0].Attribute[1].Value[0] = os.hostname();\n//set AAS namespace\nheader.InternalElement[0].InternalElement[0].Attribute[0].Value[0] = context.global.get('namespace');\n\nvar body = manifest.InstanceHierarchy[0].InternalElement[1];\ncontext.flow.set('body', body);\nvar submodelsList = [];\nif(typeof body.InternalElement !== \"undefined\"){\n    submodelsList = body.InternalElement;\n}\ncontext.flow.set('submodels', submodelsList);\nvar propertiesList = [];\nfor(var submodelIndex in submodelsList){\n        var properties = submodelsList[submodelIndex].InternalElement;\n        for(var propertyIndex in properties){\n            propertiesList.push(properties[propertyIndex]);\n        }\n    }\ncontext.flow.set('properties', propertiesList);\n\n\nmsg.manifest = manifest;\n\n//var xml_string_composed = XML.stringify( doc, 'CAEXFile');\n//msg.payload = xml_string_composed;\n//msg.doc = doc;\n\nreturn msg;","outputs":1,"noerr":0,"x":687.4569091796875,"y":171.2904510498047,"wires":[["3373faa6.7b1936"]]},{"id":"1696d847.dedc78","type":"actionflows_in","z":"d615cce6.1a41c","name":"createManifest in","priority":"50","links":[],"scope":"global","x":352.45697021484375,"y":171.2904510498047,"wires":[["3f068be9.b600c4","5e5ad08b.d1d1b"]]},{"id":"6f45be8e.3cae1","type":"actionflows_out","z":"d615cce6.1a41c","name":"createManifest out","links":[],"x":1498.1712297712052,"y":172.7190159388951,"wires":[]},{"id":"8ada63e6.87995","type":"actionflows_in","z":"d615cce6.1a41c","name":"readHeaders in","priority":"50","links":[],"scope":"global","x":357.4569396972656,"y":376.2904510498047,"wires":[["ad08edf9.fe408"]]},{"id":"db07027d.5654f","type":"actionflows_out","z":"d615cce6.1a41c","name":"readHeaders out","links":[],"x":1502.45703125,"y":376.29039001464844,"wires":[]},{"id":"ad08edf9.fe408","type":"unsafe-function","z":"d615cce6.1a41c","name":"RetrievingHeaders...","func":"//var xml_string = msg.payload;\n//var XML = context.global.get('XML');\n\n//var doc = XML.parse( xml_string, { preserveAttributes: true, forceArrays: true  } );\n/*\nvar xml_string_composed = XML.stringify( doc, 'CAEXFile');\nmsg.composed = xml_string_composed;\n*/\n\n/*try {\n    parser = new XML.Parser(xml_string, { preserveAttributes: true, forceArrays: true} );\n}\ncatch (err) {\n    throw err;\n}*/\n\n/*var manifest = context.global.get(\"manifest\");\nvar idsList = manifest.InstanceHierarchy[0].InternalElement[0].InternalElement[0].InternalElement;\nif (typeof idsList === \"undefined\") {\n    var ids = {};\n    msg.manifest = manifest;\n    msg.payload = ids;\n    return msg;\n}\n else {\n    // loop on the submodelsList to find the propeerty\n}*/\nmsg.payload = flow.get(\"header\");\nmsg.AASID = context.flow.get('$parent.AASIdentifier');\n//msg.manifest = manifest;\nreturn msg;","outputs":1,"noerr":0,"x":1122.6949462890625,"y":375.57603454589844,"wires":[["db07027d.5654f"]]},{"id":"5b41aa5b.41bc34","type":"inject","z":"d615cce6.1a41c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":355.8833312988281,"y":93.38336181640625,"wires":[["104f37cc.fbc778"]]},{"id":"104f37cc.fbc778","type":"unsafe-function","z":"d615cce6.1a41c","name":"IntializeVariables","func":"//Initialize flow variables\nvar uuid = context.global.get('AASIdentifier')||'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });\n/*var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });*/\n/*\ncontext.flow.set(\"emptyManifest\", \"<?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?><CAEXFile FileName=\\\"Aml_as_manifest.aml\\\" SchemaVersion=\\\"2.15\\\" xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\" xsi:noNamespaceSchemaLocation=\\\"CAEX_ClassModel_V2.15.xsd\\\"><AdditionalInformation><WriterHeader><LastWritingDateTime>2018-10-16T16:12:49.4126198+01:00</LastWritingDateTime><WriterID>916578CA-FE0D-474E-A4FC-9E1719892369</WriterID><WriterName>AutomationML Editor</WriterName><WriterProjectID>unspecified</WriterProjectID><WriterProjectTitle>unspecified</WriterProjectTitle><WriterRelease>4.7.0.0</WriterRelease><WriterVendor>AutomationML e.V.</WriterVendor><WriterVendorURL>www.AutomationML.org</WriterVendorURL><WriterVersion>4.7.0.0</WriterVersion></WriterHeader></AdditionalInformation><AdditionalInformation AutomationMLVersion=\\\"2.0\\\" /><InstanceHierarchy ID=\\\"90a789b3-d644-43f7-b8ec-fdfda0bdbbcd\\\" Name=\\\"AASManifest\\\"><InternalElement ID=\\\"611c9074-ad8d-47c1-a26f-3d8d9f517ae1\\\" Name=\\\"Header\\\"><InternalElement Name=\\\"AAS Identifiers\\\" ID=\\\"921669c9-4e9a-4580-afe4-4fc3dad4b6b4\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Submodel\\\"><InternalElement Name=\\\"Identifier\\\" ID=\\\"d4e9ab54-7ce8-4001-92d9-fcd33f581510\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Property/Identifier\\\"><Attribute Name=\\\"namespace\\\" AttributeDataType=\\\"xs:anyURI\\\"><Value></Value></Attribute><InternalElement Name=\\\"Location\\\" ID=\\\"068eaa56-f1ab-4d31-972b-51165ec15124\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Location\\\"><Attribute Name=\\\"geoLocation\\\" AttributeDataType=\\\"xs:string\\\"><Attribute Name=\\\"latitude\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute><Attribute Name=\\\"longitude\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute></Attribute><Attribute Name=\\\"virtualLocation\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute></InternalElement></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/PropertyContainer\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/AASIdentification\\\" /></InternalElement><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/AASIdentification\\\" /></InternalElement><InternalElement ID=\\\"b66b5437-4fee-4ccb-8009-1d28c8159f9e\\\" Name=\\\"Body\\\"><InternalElement Name=\\\"PROPHESY-CPS Condition Monitoring\\\" ID=\\\"44152b0c-c1db-4a9a-ba5f-a38cbfff43f7\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Submodel\\\"><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>true</Value></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/PropertyContainer\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/DataSourceManifests\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/SubmodelContainer\\\" /></InternalElement><Version>1.0.0</Version></InstanceHierarchy><InterfaceClassLib Name=\\\"AASInterfaceClassLib\\\"><Version>1.0.0</Version></InterfaceClassLib><RoleClassLib Name=\\\"AASManifestRoleClassLib\\\"><RoleClass Name=\\\"PropertyContainer\\\" /><RoleClass Name=\\\"Statement\\\" /><RoleClass Name=\\\"AASIdentification\\\" /><RoleClass Name=\\\"SubmodelContainer\\\" /><RoleClass Name=\\\"ParameterContainer\\\" /><RoleClass Name=\\\"DataSourceManifests\\\" /><RoleClass Name=\\\"LiveDataset\\\" /><Version></Version></RoleClassLib><SystemUnitClassLib Name=\\\"ASSSystemUnitClassLib\\\"><SystemUnitClass Name=\\\"Submodel\\\"><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value> </Value></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/PropertyContainer\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/DataSourceManifests\\\" /></SystemUnitClass><SystemUnitClass Name=\\\"Property\\\"><Description></Description><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /><SystemUnitClass Name=\\\"DSD\\\" ID=\\\"15250019-f6d1-4721-8ffc-49e309f57d7f\\\" RefBaseClassPath=\\\"ASSSystemUnitClassLib/Property\\\"><Description>PROPHESY Data Source Definition</Description><InternalElement Name=\\\"DI\\\" ID=\\\"e45f2f0d-38e3-4d7f-bec8-1ba7a0220d95\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Property/DI\\\"><Attribute Name=\\\"communicationProtocol\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute><InternalElement Name=\\\"Parameters\\\" ID=\\\"634ca4cf-6dd7-4a90-81c4-19cc8aac07a1\\\"><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><InternalElement Name=\\\"DK\\\" ID=\\\"a40cbfd0-ac48-413f-911a-a5915c40e071\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Property/DK\\\"><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute><Attribute Name=\\\"format\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"quantityKind\\\" AttributeDataType=\\\"xs:anyURI\\\"><Value> </Value></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement></SystemUnitClass><SystemUnitClass Name=\\\"DI\\\" ID=\\\"124e5d81-d58f-40c8-ad14-8e62e003467c\\\" RefBaseClassPath=\\\"ASSSystemUnitClassLib/Property\\\"><Attribute Name=\\\"communicationProtocol\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><InternalElement Name=\\\"Parameters\\\" ID=\\\"79d506e7-b991-4b1a-aa29-8161da867a9e\\\"><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement></SystemUnitClass><SystemUnitClass Name=\\\"DK\\\" ID=\\\"6edf24e3-dc69-4857-b268-f9e355e0898f\\\" RefBaseClassPath=\\\"ASSSystemUnitClassLib/Property\\\"><Description> </Description><Attribute Name=\\\"format\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"quantityKind\\\" AttributeDataType=\\\"xs:anyURI\\\"><Value> </Value></Attribute><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute></SystemUnitClass><SystemUnitClass Name=\\\"Identifier\\\" ID=\\\"88da950a-5c94-4027-98e7-d673a9694f8b\\\"><Description></Description><Attribute Name=\\\"namespace\\\" AttributeDataType=\\\"xs:anyURI\\\"><Value></Value></Attribute><InternalElement Name=\\\"Location\\\" ID=\\\"35063688-a0e9-47ea-8bf3-1afd38d16ccb\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Location\\\"><Attribute Name=\\\"geoLocation\\\" AttributeDataType=\\\"xs:string\\\"><Attribute Name=\\\"latitude\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute><Attribute Name=\\\"longitude\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute></Attribute><Attribute Name=\\\"virtualLocation\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute></InternalElement></SystemUnitClass><SystemUnitClass Name=\\\"DSM\\\" ID=\\\"514e6b53-aa50-4a1d-8df1-3ee8df752bb3\\\" RefBaseClassPath=\\\"ASSSystemUnitClassLib/Property\\\"><Attribute Name=\\\"macAddress\\\" AttributeDataType=\\\"xs:string\\\" /><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue></Attribute><InternalElement Name=\\\"DSD\\\" ID=\\\"cb0f8a81-1c87-4199-a5cb-44a66c854fba\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Property/DSD\\\"><InternalElement Name=\\\"DI\\\" ID=\\\"b3acb469-19d5-4002-b152-012366cf130f\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Property/DI\\\"><Attribute Name=\\\"communicationProtocol\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute><InternalElement Name=\\\"Parameters\\\" ID=\\\"9884244a-7a55-4c89-9951-f3c3314a1851\\\"><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><InternalElement Name=\\\"DK\\\" ID=\\\"5767b475-369d-46aa-a839-c274fb57a5e8\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Property/DK\\\"><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute><Attribute Name=\\\"format\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"quantityKind\\\" AttributeDataType=\\\"xs:anyURI\\\"><Value> </Value></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement></SystemUnitClass></SystemUnitClass><SystemUnitClass Name=\\\"Parameter\\\" ID=\\\"e5ab0092-4b4e-4529-95bd-62a264177805\\\" RefBaseClassPath=\\\"\\\"><Description> </Description><Attribute Name=\\\"dataType\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"defaultValue\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute><Attribute Name=\\\"actualValue\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute></SystemUnitClass><SystemUnitClass Name=\\\"Location\\\" ID=\\\"b0a00287-0441-46ed-8926-df3fc07b8545\\\"><Attribute Name=\\\"geoLocation\\\" AttributeDataType=\\\"xs:string\\\"><Attribute Name=\\\"latitude\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute><Attribute Name=\\\"longitude\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute></Attribute><Attribute Name=\\\"virtualLocation\\\" AttributeDataType=\\\"xs:string\\\"><Value></Value></Attribute></SystemUnitClass><Version>1.0.0</Version></SystemUnitClassLib></CAEXFile>\");\ncontext.flow.set(\"AASIdentifier\", uuid);\ncontext.flow.set(\"manifest\", \"\");\ncontext.flow.set(\"header\", \"\");\ncontext.flow.set(\"body\", \"\");\ncontext.flow.set(\"submodels\", \"\");\ncontext.flow.set(\"properties\", \"\");\n*/\n\n//var emptyManifest = context.flow.get(\"emptyManifest\") || \"<?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?><CAEXFile FileName=\\\"Aml_as_manifest_models_20200121_prophesy.aml\\\" SchemaVersion=\\\"2.15\\\" xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\" xsi:noNamespaceSchemaLocation=\\\"CAEX_ClassModel_V2.15.xsd\\\"><AdditionalInformation><WriterHeader><LastWritingDateTime>2018-10-16T16:12:49.4126198+01:00</LastWritingDateTime><WriterID>916578CA-FE0D-474E-A4FC-9E1719892369</WriterID><WriterName>AutomationML Editor</WriterName><WriterProjectID>unspecified</WriterProjectID><WriterProjectTitle>unspecified</WriterProjectTitle><WriterRelease>4.7.0.0</WriterRelease><WriterVendor>AutomationML e.V.</WriterVendor><WriterVendorURL>www.AutomationML.org</WriterVendorURL><WriterVersion>4.7.0.0</WriterVersion></WriterHeader></AdditionalInformation><AdditionalInformation AutomationMLVersion=\\\"2.0\\\" /><InstanceHierarchy ID=\\\"90a789b3-d644-43f7-b8ec-fdfda0bdbbcd\\\" Name=\\\"AASManifest\\\"><InternalElement ID=\\\"611c9074-ad8d-47c1-a26f-3d8d9f517ae1\\\" Name=\\\"Header\\\"><InternalElement ID=\\\"921669c9-4e9a-4580-afe4-4fc3dad4b6b4\\\" Name=\\\"AAS Identifiers\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Submodel\\\"><InternalElement ID=\\\"751eb2cb-3ec6-4e7f-95b8-4bb4b3876db0\\\" Name=\\\"Identifier\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/Identifier\\\"><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"namespace\\\"><Value>http://10.0.2.15:1880</Value></Attribute><InternalElement ID=\\\"068eaa56-f1ab-4d31-972b-51165ec15124\\\" Name=\\\"Location\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Location\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"geoLocation\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"latitude\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"longitude\\\"><Value></Value></Attribute></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"virtualLocation\\\"><Value>DESKTOP-NEJ4OQ5</Value></Attribute></InternalElement></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/PropertyContainer\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/AASIdentification\\\" /></InternalElement><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/AASIdentification\\\" /></InternalElement><InternalElement ID=\\\"b66b5437-4fee-4ccb-8009-1d28c8159f9e\\\" Name=\\\"Body\\\"><InternalElement ID=\\\"44152b0c-c1db-4a9a-ba5f-a38cbfff43f7\\\" Name=\\\"Asset Condition Monitoring\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Submodel\\\"><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>true</Value></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/PropertyContainer\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/DataSourceManifests\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/VendorSpecific\\\" /></InternalElement><InternalElement Name=\\\"AAS API Docs\\\" ID=\\\"8c53547a-d697-4e83-90db-db8042ce745e\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Submodel\\\"><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><InternalElement Name=\\\"Data Source Manifest - AAS Documentation\\\" ID=\\\"3940b81b-2c1f-45f9-a067-58758e9da590\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSM\\\"><Attribute Name=\\\"macAddress\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><Attribute Name=\\\"semanticId\\\" AttributeDataType=\\\"xs:IDREF\\\" /><Attribute Name=\\\"isWritable\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>False</DefaultValue><Value>False</Value></Attribute><Attribute Name=\\\"isEventable\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>False</DefaultValue><Value>False</Value></Attribute><InternalElement Name=\\\"API documentation\\\" ID=\\\"51ac93cb-d822-403e-bf45-9607321dbecd\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSD\\\"><InternalElement ID=\\\"c755ccce-6342-46ea-aea4-26fb9a5f2f6b\\\" Name=\\\"DI\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DI\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"communicationProtocol\\\"><Value></Value></Attribute><InternalElement ID=\\\"b08d0a41-6bd3-4706-861a-a8351b4ec1df\\\" Name=\\\"Parameters\\\"><InternalElement Name=\\\"url\\\" ID=\\\"fa8628ff-f008-421d-943a-98d1b7512cd4\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>/http-api/swagger.json</Value></Attribute></InternalElement><InternalElement Name=\\\"internalLinkId\\\" ID=\\\"3c19f645-8cd4-47fa-85c4-e2e778eafe00\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>WebDocs</Value></Attribute></InternalElement><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Internal\\\" /></InternalElement><InternalElement ID=\\\"dfedd423-92cc-49ff-a12f-5e845c378838\\\" Name=\\\"DK\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DK\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"format\\\"><Value>Plain text</Value></Attribute><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"quantityKind\\\"><Value>N/A</Value></Attribute><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value>Observation</Value></Attribute><Attribute Name=\\\"content\\\" AttributeDataType=\\\"xs:string\\\"><Value>static</Value><Constraint Name=\\\"\\\"><NominalScaledType><RequiredValue>Dynamic</RequiredValue><RequiredValue>Static</RequiredValue></NominalScaledType></Constraint></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/PropertyContainer\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/DataSourceManifests\\\" /></InternalElement><InternalElement Name=\\\"AAS Data Streaming Docs\\\" ID=\\\"8fc3123c-ad98-4435-9ee5-d9b9d45182b2\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Submodel\\\"><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><InternalElement Name=\\\"Data Source Manifest - Data Streaming Documentation\\\" ID=\\\"39ee8897-f919-4956-acc6-5c78a6fa9aee\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSM\\\"><Attribute Name=\\\"macAddress\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><Attribute Name=\\\"semanticId\\\" AttributeDataType=\\\"xs:IDREF\\\"><Value>0173-1#02-AAO694#001</Value></Attribute><Attribute Name=\\\"isWritable\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>False</DefaultValue><Value>False</Value></Attribute><Attribute Name=\\\"isEventable\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>False</DefaultValue><Value>False</Value></Attribute><InternalElement Name=\\\"API documentation\\\" ID=\\\"00a14294-c0e5-4cd0-b7c0-0a5cdcd4e48f\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSD\\\"><InternalElement ID=\\\"8b5916c4-f52e-4238-98cb-f4204b62ec8a\\\" Name=\\\"DI\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DI\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"communicationProtocol\\\"><Value></Value></Attribute><InternalElement ID=\\\"ae2e2a55-6558-43b4-99f8-ca52b697c54c\\\" Name=\\\"Parameters\\\"><InternalElement Name=\\\"url\\\" ID=\\\"4b948e20-8fb8-4dee-acce-e8f7f35047d9\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>http://sensap.ddns.net:58001/swagger-ui.html#/</Value></Attribute></InternalElement><InternalElement Name=\\\"internalLinkId\\\" ID=\\\"344b8d63-67b0-43b5-a13f-ea5cef04b776\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>WebDocs</Value></Attribute></InternalElement><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Internal\\\" /></InternalElement><InternalElement ID=\\\"01ee4617-7c11-42a7-bc99-6d361792c404\\\" Name=\\\"Online Swagger documentation resource\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DK\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"format\\\"><Value>URL</Value></Attribute><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"quantityKind\\\"><Value></Value></Attribute><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value>Observation</Value></Attribute><Attribute Name=\\\"content\\\" AttributeDataType=\\\"xs:string\\\"><Value>Static</Value><Constraint Name=\\\"\\\"><NominalScaledType><RequiredValue>Dynamic</RequiredValue><RequiredValue>Static</RequiredValue></NominalScaledType></Constraint></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/PropertyContainer\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/DataSourceManifests\\\" /></InternalElement><InternalElement Name=\\\"AAS Resource Monitoring\\\" ID=\\\"5f3fc0cf-167e-4acb-ac49-d6807ea87ef4\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Submodel\\\"><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><InternalElement Name=\\\"Data Source Manifest - Description\\\" ID=\\\"b5595a4a-40a5-46e6-a9c6-f493f99a72a1\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSM\\\"><Attribute Name=\\\"macAddress\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><Attribute Name=\\\"semanticId\\\" AttributeDataType=\\\"xs:IDREF\\\"><Value>0173-1#02-AAU734#001</Value></Attribute><Attribute Name=\\\"isWritable\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>False</DefaultValue><Value>False</Value></Attribute><Attribute Name=\\\"isEventable\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>False</DefaultValue><Value>False</Value></Attribute><InternalElement Name=\\\"System Description\\\" ID=\\\"4d2f1be3-52db-495a-b4a3-be3ff916e1a4\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSD\\\"><Description>Textual description of the resource hardware. It includes the full name and the version identification of the system's hardware type, software operating system, and networking software.  </Description><InternalElement ID=\\\"4152e105-a503-42ca-97fa-d4c6a4a552f9\\\" Name=\\\"DI\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DI\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"communicationProtocol\\\"><Value></Value></Attribute><InternalElement ID=\\\"eb02baed-2ec7-4757-b169-52e92e69db59\\\" Name=\\\"Parameters\\\"><InternalElement Name=\\\"protocol\\\" ID=\\\"7e5f1bc5-34e1-4f1a-835b-7d1b6f72bb96\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>snmp</Value></Attribute></InternalElement><InternalElement Name=\\\"address\\\" ID=\\\"5e95da25-7400-4fe6-849b-a708696a5d28\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>localhost</Value></Attribute></InternalElement><InternalElement Name=\\\"oid\\\" ID=\\\"cc1ca40b-e97e-4282-b799-36ceb2513044\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>1.3.6.1.2.1.1.1.0</Value></Attribute></InternalElement><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Internal\\\" /></InternalElement><InternalElement ID=\\\"2d5b30b6-16f8-41b0-b6f8-26366192e1dc\\\" Name=\\\"sysDescr\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DK\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"format\\\"><Value>Plain text</Value></Attribute><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"quantityKind\\\"><DefaultValue>N/A</DefaultValue><Value>N/A</Value></Attribute><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value>Observation</Value></Attribute><Attribute Name=\\\"content\\\" AttributeDataType=\\\"xs:string\\\"><Value>Static</Value><Constraint Name=\\\"ContentValues\\\"><NominalScaledType><RequiredValue>Dynamic</RequiredValue><RequiredValue>Static</RequiredValue></NominalScaledType></Constraint></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><InternalElement Name=\\\"Data Source Manifest - CPU Load 1\\\" ID=\\\"37847f87-fe4d-47fa-9fc5-aba7879ccda2\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSM\\\"><Attribute Name=\\\"macAddress\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><Attribute Name=\\\"semanticId\\\" AttributeDataType=\\\"xs:IDREF\\\"><Value>N/A</Value></Attribute><Attribute Name=\\\"isWritable\\\" AttributeDataType=\\\"xs:boolean\\\" /><Attribute Name=\\\"isEventable\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>True</DefaultValue><Value>True</Value></Attribute><InternalElement Name=\\\"CPU 1m Load\\\" ID=\\\"5ce6fc2b-66d6-468d-8381-41c99c67757e\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSD\\\"><InternalElement ID=\\\"0037d0eb-b5be-4245-a254-691924b0009e\\\" Name=\\\"DI\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DI\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"communicationProtocol\\\"><Value></Value></Attribute><InternalElement ID=\\\"acf77e29-679f-493e-9b38-e33405e3a0a4\\\" Name=\\\"Parameters\\\"><InternalElement Name=\\\"protocol\\\" ID=\\\"0780364d-9e55-4ba4-bfb0-f26c03c54059\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>snmp</Value></Attribute></InternalElement><InternalElement Name=\\\"address\\\" ID=\\\"b7ef026e-c259-4a20-9f3f-d0af3a5f7824\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>localhost</Value></Attribute></InternalElement><InternalElement Name=\\\"oid\\\" ID=\\\"3ba3f101-fc01-4bf5-8576-78032b69aa81\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>1.3.6.1.4.1.2021.10.1.3.1</Value></Attribute></InternalElement><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Internal\\\" /></InternalElement><InternalElement ID=\\\"22c16520-365e-4ac5-814e-03ab0e5287cd\\\" Name=\\\"CPU 1 minute Load in plain text\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DK\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"format\\\"><Value>Plain Text</Value></Attribute><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"quantityKind\\\"><Value></Value></Attribute><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value>Observation</Value></Attribute><Attribute Name=\\\"content\\\" AttributeDataType=\\\"xs:string\\\"><Value>Dynamic</Value><Constraint Name=\\\"ContentValues\\\"><NominalScaledType><RequiredValue>Dynamic</RequiredValue><RequiredValue>Static</RequiredValue></NominalScaledType></Constraint></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><InternalElement Name=\\\"Data Source Manifest - CPU Load 2\\\" ID=\\\"1e662338-8a8f-4e65-89e3-77cfa1f333bd\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSM\\\"><Attribute Name=\\\"macAddress\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><Attribute Name=\\\"semanticId\\\" AttributeDataType=\\\"xs:IDREF\\\"><Value>N/A</Value></Attribute><Attribute Name=\\\"isWritable\\\" AttributeDataType=\\\"xs:boolean\\\" /><Attribute Name=\\\"isEventable\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>True</DefaultValue><Value>True</Value></Attribute><InternalElement Name=\\\"CPU 5m Load\\\" ID=\\\"02f4c856-a224-4ea2-baea-9c613dc15f8d\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSD\\\"><InternalElement ID=\\\"34539165-47aa-4151-b4cb-dc9d9bce8199\\\" Name=\\\"DI\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DI\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"communicationProtocol\\\"><Value></Value></Attribute><InternalElement ID=\\\"6a420732-5b3f-46d7-a5ab-9c17489f9839\\\" Name=\\\"Parameters\\\"><InternalElement Name=\\\"protocol\\\" ID=\\\"fcfd040d-5497-4ac8-8de7-6a906235e406\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>snmp</Value></Attribute></InternalElement><InternalElement Name=\\\"address\\\" ID=\\\"7cd504e4-da69-464a-b179-bb2a3e8fe25f\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>localhost</Value></Attribute></InternalElement><InternalElement Name=\\\"oid\\\" ID=\\\"a4fd3c3f-9e7a-4d51-9e6c-7cb61e25b4c5\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>1.3.6.1.4.1.2021.10.1.3.2</Value></Attribute></InternalElement><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Internal\\\" /></InternalElement><InternalElement ID=\\\"13d0492a-62ee-4205-b7f5-3285f1869d5d\\\" Name=\\\"CPU 5 minute Load in plain text\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DK\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"format\\\"><Value>Plain text</Value></Attribute><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"quantityKind\\\"><Value></Value></Attribute><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value>Observation</Value></Attribute><Attribute Name=\\\"content\\\" AttributeDataType=\\\"xs:string\\\"><Value>Dynamic</Value><Constraint Name=\\\"ContentValues\\\"><NominalScaledType><RequiredValue>Dynamic</RequiredValue><RequiredValue>Static</RequiredValue></NominalScaledType></Constraint></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><InternalElement Name=\\\"Data Source Manifest - CPU Load 3\\\" ID=\\\"e65bd7f7-8879-4aa7-bb83-71b9fc7881ee\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSM\\\"><Attribute Name=\\\"macAddress\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><Attribute Name=\\\"semanticId\\\" AttributeDataType=\\\"xs:IDREF\\\"><Value>N/A</Value></Attribute><Attribute Name=\\\"isWritable\\\" AttributeDataType=\\\"xs:boolean\\\" /><Attribute Name=\\\"isEventable\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>True</DefaultValue><Value>True</Value></Attribute><InternalElement Name=\\\"CPU 15m Load\\\" ID=\\\"30fe2ada-85aa-4e48-855b-b80ba93b4286\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSD\\\"><InternalElement ID=\\\"dda3c7af-750e-44c9-a6ce-ff8b9adc8c96\\\" Name=\\\"DI\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DI\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"communicationProtocol\\\"><Value></Value></Attribute><InternalElement ID=\\\"a2365478-4bf2-4b84-a120-2339a4cc4600\\\" Name=\\\"Parameters\\\"><InternalElement Name=\\\"protocol\\\" ID=\\\"848a806c-3e43-47a0-b5d1-4029ee89f2cc\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>snmp</Value></Attribute></InternalElement><InternalElement Name=\\\"address\\\" ID=\\\"19100813-c482-4d8b-8ec3-c1017260fe24\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>localhost</Value></Attribute></InternalElement><InternalElement Name=\\\"oid\\\" ID=\\\"c5d564c0-b392-4901-887e-f1518bd0a5bf\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>1.3.6.1.4.1.2021.10.1.3.3</Value></Attribute></InternalElement><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Internal\\\" /></InternalElement><InternalElement ID=\\\"05f04660-68ee-42b3-ad1a-8cf2e875fe6f\\\" Name=\\\"CPU 15 minute Load in plain text\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DK\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"format\\\"><Value>Plain text</Value></Attribute><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"quantityKind\\\"><Value></Value></Attribute><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value>Observation</Value></Attribute><Attribute Name=\\\"content\\\" AttributeDataType=\\\"xs:string\\\"><Value>Dynamic</Value><Constraint Name=\\\"ContentValues\\\"><NominalScaledType><RequiredValue>Dynamic</RequiredValue><RequiredValue>Static</RequiredValue></NominalScaledType></Constraint></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><InternalElement Name=\\\"Data Source Manifest - Up Time\\\" ID=\\\"18e74242-f1a7-418c-be28-2179f6ca0631\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSM\\\"><Attribute Name=\\\"macAddress\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><Attribute Name=\\\"semanticId\\\" AttributeDataType=\\\"xs:IDREF\\\"><Value>0173-1#02-AAJ500#003</Value></Attribute><Attribute Name=\\\"isWritable\\\" AttributeDataType=\\\"xs:boolean\\\" /><Attribute Name=\\\"isEventable\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>True</DefaultValue><Value>True</Value></Attribute><InternalElement Name=\\\"System Uptime\\\" ID=\\\"1608d415-9d7f-4f91-90cb-e38357f296a2\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSD\\\"><InternalElement ID=\\\"37473a66-5249-4531-99e8-586a04ffff9c\\\" Name=\\\"DI\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DI\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"communicationProtocol\\\"><Value></Value></Attribute><InternalElement ID=\\\"d0fc9b63-fd84-457c-94df-e63c0801f568\\\" Name=\\\"Parameters\\\"><InternalElement Name=\\\"protocol\\\" ID=\\\"50de3542-b98f-45ea-827b-b13b8f34462a\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>snmp</Value></Attribute></InternalElement><InternalElement Name=\\\"address\\\" ID=\\\"cd5f8f99-85f4-4141-b4c8-1931b5209924\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>localhost</Value></Attribute></InternalElement><InternalElement Name=\\\"oid\\\" ID=\\\"01450824-367b-4eb3-8fd7-06970471661a\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>1.3.6.1.2.1.1.3.0</Value></Attribute></InternalElement><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Internal\\\" /></InternalElement><InternalElement ID=\\\"d7b2166f-0ce7-4be0-a7c7-1847f76fa544\\\" Name=\\\"sysUpTime in plain text\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DK\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"format\\\"><Value>Plain text</Value></Attribute><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"quantityKind\\\"><DefaultValue>N/A</DefaultValue><Value>Time Ticks</Value></Attribute><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value>Observation</Value></Attribute><Attribute Name=\\\"content\\\" AttributeDataType=\\\"xs:string\\\"><Value>Dynamic</Value><Constraint Name=\\\"ContentValues\\\"><NominalScaledType><RequiredValue>Dynamic</RequiredValue><RequiredValue>Static</RequiredValue></NominalScaledType></Constraint></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/PropertyContainer\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/DataSourceManifests\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Generic\\\" /></InternalElement><InternalElement Name=\\\"AAS Health Monitoring\\\" ID=\\\"20bcc9b1-5e94-446d-ae0e-1ae3a5a9b427\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Submodel\\\"><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><InternalElement Name=\\\"Data Source Manifest - Health Check\\\" ID=\\\"f918cf01-90f4-4a35-afc2-4d2219a2b1fb\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSM\\\"><Attribute Name=\\\"macAddress\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><Attribute Name=\\\"semanticId\\\" AttributeDataType=\\\"xs:IDREF\\\"><Value>0173-1#02-BAG100#003</Value></Attribute><Attribute Name=\\\"isWritable\\\" AttributeDataType=\\\"xs:boolean\\\" /><Attribute Name=\\\"isEventable\\\" AttributeDataType=\\\"xs:boolean\\\"><Value>True</Value></Attribute><InternalElement Name=\\\"Health Check\\\" ID=\\\"94bd05e0-9599-44bf-bebf-9a630fce2460\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSD\\\"><InternalElement ID=\\\"ac61ccae-a1e0-4f49-bbbd-477f0c0802d1\\\" Name=\\\"DI\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DI\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"communicationProtocol\\\"><Value></Value></Attribute><InternalElement ID=\\\"3fe8d02d-4221-418f-b05e-64f42059c514\\\" Name=\\\"Parameters\\\"><InternalElement ID=\\\"332bda96-722a-4812-8374-31ae45960be5\\\" Name=\\\"protocol\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>rest</Value></Attribute></InternalElement><InternalElement ID=\\\"48277a2a-ac91-472f-ab30-11eb4d2c699a\\\" Name=\\\"method\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>GET</Value></Attribute></InternalElement><InternalElement ID=\\\"1d905f8e-338b-4359-ab55-baab0e8d5178\\\" Name=\\\"url\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>http://localhost:1880/aas/health</Value></Attribute></InternalElement><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Internal\\\" /></InternalElement><InternalElement ID=\\\"51ed9f21-f86f-4917-834a-4a04125924cf\\\" Name=\\\"Health Check Info in plain text\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DK\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"format\\\"><Value>Plain text</Value></Attribute><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"quantityKind\\\"><Value></Value></Attribute><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value>Observation</Value></Attribute><Attribute Name=\\\"content\\\" AttributeDataType=\\\"xs:string\\\"><Value>Dynamic</Value><Constraint Name=\\\"ContentValues\\\"><NominalScaledType><RequiredValue>Dynamic</RequiredValue><RequiredValue>Static</RequiredValue></NominalScaledType></Constraint></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/PropertyContainer\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/DataSourceManifests\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Generic\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/SubmodelContainer\\\" /></InternalElement><Version>1.0.0</Version></InstanceHierarchy><InterfaceClassLib Name=\\\"AASInterfaceClassLib\\\"><Version>1.0.0</Version></InterfaceClassLib><RoleClassLib Name=\\\"AASManifestRoleClassLib\\\"><RoleClass Name=\\\"PropertyContainer\\\" /><RoleClass Name=\\\"Statement\\\" /><RoleClass Name=\\\"AASIdentification\\\" /><RoleClass Name=\\\"SubmodelContainer\\\" /><RoleClass Name=\\\"ParameterContainer\\\" /><RoleClass Name=\\\"DataSourceManifests\\\" /><RoleClass Name=\\\"LiveDataset\\\" /><RoleClass Name=\\\"Generic\\\" /><RoleClass Name=\\\"VendorSpecific\\\" /><RoleClass Name=\\\"Supported\\\" /><RoleClass Name=\\\"Custom\\\" /><RoleClass Name=\\\"Internal\\\" /><Version></Version></RoleClassLib><SystemUnitClassLib Name=\\\"AASSystemUnitClassLib\\\"><SystemUnitClass Name=\\\"Submodel\\\"><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/PropertyContainer\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/DataSourceManifests\\\" /></SystemUnitClass><SystemUnitClass Name=\\\"Property\\\"><Description></Description><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /><SystemUnitClass ID=\\\"15250019-f6d1-4721-8ffc-49e309f57d7f\\\" Name=\\\"DSD\\\" RefBaseClassPath=\\\"AASSystemUnitClassLib/Property\\\"><Description>PROPHESY Data Source Definition</Description><InternalElement ID=\\\"e45f2f0d-38e3-4d7f-bec8-1ba7a0220d95\\\" Name=\\\"DI\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DI\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"communicationProtocol\\\"><Value></Value></Attribute><InternalElement ID=\\\"634ca4cf-6dd7-4a90-81c4-19cc8aac07a1\\\" Name=\\\"Parameters\\\"><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><InternalElement ID=\\\"a40cbfd0-ac48-413f-911a-a5915c40e071\\\" Name=\\\"DK\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DK\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"format\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"quantityKind\\\"><Value></Value></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement></SystemUnitClass><SystemUnitClass ID=\\\"124e5d81-d58f-40c8-ad14-8e62e003467c\\\" Name=\\\"DI\\\" RefBaseClassPath=\\\"AASSystemUnitClassLib/Property\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"communicationProtocol\\\"><Value></Value></Attribute><InternalElement ID=\\\"79d506e7-b991-4b1a-aa29-8161da867a9e\\\" Name=\\\"Parameters\\\"><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement></SystemUnitClass><SystemUnitClass ID=\\\"6edf24e3-dc69-4857-b268-f9e355e0898f\\\" Name=\\\"DK\\\" RefBaseClassPath=\\\"AASSystemUnitClassLib/Property\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"format\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"quantityKind\\\"><Value></Value></Attribute><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"content\\\" AttributeDataType=\\\"xs:string\\\"><Constraint Name=\\\"ContentValues\\\"><NominalScaledType><RequiredValue>Dynamic</RequiredValue><RequiredValue>Static</RequiredValue></NominalScaledType></Constraint></Attribute><Description></Description></SystemUnitClass><SystemUnitClass ID=\\\"88da950a-5c94-4027-98e7-d673a9694f8b\\\" Name=\\\"Identifier\\\"><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"namespace\\\"><Value></Value></Attribute><Description></Description><InternalElement ID=\\\"35063688-a0e9-47ea-8bf3-1afd38d16ccb\\\" Name=\\\"Location\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Location\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"geoLocation\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"latitude\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"longitude\\\"><Value></Value></Attribute></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"virtualLocation\\\"><Value></Value></Attribute></InternalElement></SystemUnitClass><SystemUnitClass Name=\\\"DSM\\\" ID=\\\"96a19b7b-e91f-4707-bf97-03d9c84452c9\\\" RefBaseClassPath=\\\"AASSystemUnitClassLib/Property\\\"><Attribute Name=\\\"macAddress\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><Attribute Name=\\\"semanticId\\\" AttributeDataType=\\\"xs:IDREF\\\" /><Attribute Name=\\\"isWritable\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>False</DefaultValue><Value>False</Value></Attribute><Attribute Name=\\\"isEventable\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>False</DefaultValue><Value>False</Value></Attribute><InternalElement Name=\\\"DSD\\\" ID=\\\"5d0afb31-a84e-424b-a4bf-1786e2e49ff4\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSD\\\"><InternalElement ID=\\\"7dad5dfb-167d-4b43-955d-112b7813eea2\\\" Name=\\\"DI\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DI\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"communicationProtocol\\\"><Value></Value></Attribute><InternalElement ID=\\\"b1578493-e760-483c-a7dd-d14899da6ea0\\\" Name=\\\"Parameters\\\"><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><InternalElement ID=\\\"ff601314-0223-4549-ab65-9ba575dae884\\\" Name=\\\"DK\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DK\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"format\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"quantityKind\\\"><Value></Value></Attribute><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\" /><Attribute Name=\\\"content\\\" AttributeDataType=\\\"xs:string\\\"><Constraint Name=\\\"\\\"><NominalScaledType><RequiredValue>Dynamic</RequiredValue><RequiredValue>Static</RequiredValue></NominalScaledType></Constraint></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement></SystemUnitClass></SystemUnitClass><SystemUnitClass ID=\\\"e5ab0092-4b4e-4529-95bd-62a264177805\\\" Name=\\\"Parameter\\\" RefBaseClassPath=\\\"\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value></Value></Attribute><Description></Description></SystemUnitClass><SystemUnitClass ID=\\\"b0a00287-0441-46ed-8926-df3fc07b8545\\\" Name=\\\"Location\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"geoLocation\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"latitude\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"longitude\\\"><Value></Value></Attribute></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"virtualLocation\\\"><Value></Value></Attribute></SystemUnitClass><Version>1.0.0</Version></SystemUnitClassLib></CAEXFile>\";\nvar emptyManifest = context.flow.get(\"emptyManifest\") || \"<?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?><CAEXFile FileName=\\\"Aml_as_manifest_models_20200124_prophesy.aml\\\" SchemaVersion=\\\"2.15\\\" xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\" xsi:noNamespaceSchemaLocation=\\\"CAEX_ClassModel_V2.15.xsd\\\"><AdditionalInformation><WriterHeader><LastWritingDateTime>2018-10-16T16:12:49.4126198+01:00</LastWritingDateTime><WriterID>916578CA-FE0D-474E-A4FC-9E1719892369</WriterID><WriterName>AutomationML Editor</WriterName><WriterProjectID>unspecified</WriterProjectID><WriterProjectTitle>unspecified</WriterProjectTitle><WriterRelease>4.7.0.0</WriterRelease><WriterVendor>AutomationML e.V.</WriterVendor><WriterVendorURL>www.AutomationML.org</WriterVendorURL><WriterVersion>4.7.0.0</WriterVersion></WriterHeader></AdditionalInformation><AdditionalInformation AutomationMLVersion=\\\"2.0\\\" /><InstanceHierarchy ID=\\\"90a789b3-d644-43f7-b8ec-fdfda0bdbbcd\\\" Name=\\\"AASManifest\\\"><InternalElement ID=\\\"611c9074-ad8d-47c1-a26f-3d8d9f517ae1\\\" Name=\\\"Header\\\"><InternalElement ID=\\\"921669c9-4e9a-4580-afe4-4fc3dad4b6b4\\\" Name=\\\"AAS Identifiers\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Submodel\\\"><InternalElement ID=\\\"751eb2cb-3ec6-4e7f-95b8-4bb4b3876db0\\\" Name=\\\"Identifier\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/Identifier\\\"><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"namespace\\\"><Value>http://10.0.2.15:1880</Value></Attribute><InternalElement ID=\\\"068eaa56-f1ab-4d31-972b-51165ec15124\\\" Name=\\\"Location\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Location\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"geoLocation\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"latitude\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"longitude\\\"><Value></Value></Attribute></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"virtualLocation\\\"><Value>DESKTOP-NEJ4OQ5</Value></Attribute></InternalElement></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/PropertyContainer\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/AASIdentification\\\" /></InternalElement><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/AASIdentification\\\" /></InternalElement><InternalElement ID=\\\"b66b5437-4fee-4ccb-8009-1d28c8159f9e\\\" Name=\\\"Body\\\"><InternalElement ID=\\\"44152b0c-c1db-4a9a-ba5f-a38cbfff43f7\\\" Name=\\\"Asset Condition Monitoring\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Submodel\\\"><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>true</Value></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/PropertyContainer\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/DataSourceManifests\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/VendorSpecific\\\" /></InternalElement><InternalElement Name=\\\"AAS API Docs\\\" ID=\\\"8c53547a-d697-4e83-90db-db8042ce745e\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Submodel\\\"><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><InternalElement Name=\\\"Data Source Manifest - AAS Documentation\\\" ID=\\\"3940b81b-2c1f-45f9-a067-58758e9da590\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSM\\\"><Attribute Name=\\\"macAddress\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><Attribute Name=\\\"semanticId\\\" AttributeDataType=\\\"xs:IDREF\\\" /><Attribute Name=\\\"isWritable\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>False</DefaultValue><Value>False</Value></Attribute><Attribute Name=\\\"isEventable\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>False</DefaultValue><Value>False</Value></Attribute><InternalElement Name=\\\"API documentation\\\" ID=\\\"51ac93cb-d822-403e-bf45-9607321dbecd\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSD\\\"><InternalElement ID=\\\"c755ccce-6342-46ea-aea4-26fb9a5f2f6b\\\" Name=\\\"DI\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DI\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"communicationProtocol\\\"><Value></Value></Attribute><InternalElement ID=\\\"b08d0a41-6bd3-4706-861a-a8351b4ec1df\\\" Name=\\\"Parameters\\\"><InternalElement Name=\\\"url\\\" ID=\\\"fa8628ff-f008-421d-943a-98d1b7512cd4\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>/http-api/swagger.json</Value></Attribute></InternalElement><InternalElement Name=\\\"internalLinkId\\\" ID=\\\"3c19f645-8cd4-47fa-85c4-e2e778eafe00\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>WebDocs</Value></Attribute></InternalElement><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Internal\\\" /></InternalElement><InternalElement ID=\\\"dfedd423-92cc-49ff-a12f-5e845c378838\\\" Name=\\\"DK\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DK\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"format\\\"><Value>Plain text</Value></Attribute><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"quantityKind\\\"><Value>N/A</Value></Attribute><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value>Observation</Value></Attribute><Attribute Name=\\\"content\\\" AttributeDataType=\\\"xs:string\\\"><Value>static</Value><Constraint Name=\\\"\\\"><NominalScaledType><RequiredValue>Dynamic</RequiredValue><RequiredValue>Static</RequiredValue></NominalScaledType></Constraint></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/PropertyContainer\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/DataSourceManifests\\\" /></InternalElement><InternalElement Name=\\\"AAS Data Streaming Docs\\\" ID=\\\"8fc3123c-ad98-4435-9ee5-d9b9d45182b2\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Submodel\\\"><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><InternalElement Name=\\\"Data Source Manifest - Data Streaming Documentation\\\" ID=\\\"39ee8897-f919-4956-acc6-5c78a6fa9aee\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSM\\\"><Attribute Name=\\\"macAddress\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><Attribute Name=\\\"semanticId\\\" AttributeDataType=\\\"xs:IDREF\\\"><Value>0173-1#02-AAO694#001</Value></Attribute><Attribute Name=\\\"isWritable\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>False</DefaultValue><Value>False</Value></Attribute><Attribute Name=\\\"isEventable\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>False</DefaultValue><Value>False</Value></Attribute><InternalElement Name=\\\"API documentation\\\" ID=\\\"00a14294-c0e5-4cd0-b7c0-0a5cdcd4e48f\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSD\\\"><InternalElement ID=\\\"8b5916c4-f52e-4238-98cb-f4204b62ec8a\\\" Name=\\\"DI\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DI\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"communicationProtocol\\\"><Value></Value></Attribute><InternalElement ID=\\\"ae2e2a55-6558-43b4-99f8-ca52b697c54c\\\" Name=\\\"Parameters\\\"><InternalElement Name=\\\"url\\\" ID=\\\"4b948e20-8fb8-4dee-acce-e8f7f35047d9\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>http://sensap.ddns.net:58001/swagger-ui.html#/</Value></Attribute></InternalElement><InternalElement Name=\\\"internalLinkId\\\" ID=\\\"344b8d63-67b0-43b5-a13f-ea5cef04b776\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>WebDocs</Value></Attribute></InternalElement><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Internal\\\" /></InternalElement><InternalElement ID=\\\"01ee4617-7c11-42a7-bc99-6d361792c404\\\" Name=\\\"Online Swagger documentation resource\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DK\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"format\\\"><Value>URL</Value></Attribute><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"quantityKind\\\"><Value></Value></Attribute><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value>Observation</Value></Attribute><Attribute Name=\\\"content\\\" AttributeDataType=\\\"xs:string\\\"><Value>Static</Value><Constraint Name=\\\"\\\"><NominalScaledType><RequiredValue>Dynamic</RequiredValue><RequiredValue>Static</RequiredValue></NominalScaledType></Constraint></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/PropertyContainer\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/DataSourceManifests\\\" /></InternalElement><InternalElement Name=\\\"AAS Resource Monitoring\\\" ID=\\\"5f3fc0cf-167e-4acb-ac49-d6807ea87ef4\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Submodel\\\"><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><InternalElement Name=\\\"Data Source Manifest - Description\\\" ID=\\\"b5595a4a-40a5-46e6-a9c6-f493f99a72a1\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSM\\\"><Attribute Name=\\\"macAddress\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><Attribute Name=\\\"semanticId\\\" AttributeDataType=\\\"xs:IDREF\\\"><Value>0173-1#02-AAU734#001</Value></Attribute><Attribute Name=\\\"isWritable\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>False</DefaultValue><Value>False</Value></Attribute><Attribute Name=\\\"isEventable\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>False</DefaultValue><Value>False</Value></Attribute><InternalElement Name=\\\"System Description\\\" ID=\\\"4d2f1be3-52db-495a-b4a3-be3ff916e1a4\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSD\\\"><Description>Textual description of the resource hardware. It includes the full name and the version identification of the system's hardware type, software operating system, and networking software.  </Description><InternalElement ID=\\\"4152e105-a503-42ca-97fa-d4c6a4a552f9\\\" Name=\\\"DI\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DI\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"communicationProtocol\\\"><Value></Value></Attribute><InternalElement ID=\\\"eb02baed-2ec7-4757-b169-52e92e69db59\\\" Name=\\\"Parameters\\\"><InternalElement Name=\\\"protocol\\\" ID=\\\"7e5f1bc5-34e1-4f1a-835b-7d1b6f72bb96\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>snmp</Value></Attribute></InternalElement><InternalElement Name=\\\"address\\\" ID=\\\"5e95da25-7400-4fe6-849b-a708696a5d28\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>localhost</Value></Attribute></InternalElement><InternalElement Name=\\\"oid\\\" ID=\\\"cc1ca40b-e97e-4282-b799-36ceb2513044\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>1.3.6.1.2.1.1.1.0</Value></Attribute></InternalElement><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><InternalElement ID=\\\"2d5b30b6-16f8-41b0-b6f8-26366192e1dc\\\" Name=\\\"sysDescr\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DK\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"format\\\"><Value>Plain text</Value></Attribute><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"quantityKind\\\"><DefaultValue>N/A</DefaultValue><Value>N/A</Value></Attribute><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value>Observation</Value></Attribute><Attribute Name=\\\"content\\\" AttributeDataType=\\\"xs:string\\\"><Value>Static</Value><Constraint Name=\\\"ContentValues\\\"><NominalScaledType><RequiredValue>Dynamic</RequiredValue><RequiredValue>Static</RequiredValue></NominalScaledType></Constraint></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><InternalElement Name=\\\"Data Source Manifest - CPU Load 1\\\" ID=\\\"37847f87-fe4d-47fa-9fc5-aba7879ccda2\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSM\\\"><Attribute Name=\\\"macAddress\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><Attribute Name=\\\"semanticId\\\" AttributeDataType=\\\"xs:IDREF\\\"><Value>N/A</Value></Attribute><Attribute Name=\\\"isWritable\\\" AttributeDataType=\\\"xs:boolean\\\" /><Attribute Name=\\\"isEventable\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>True</DefaultValue><Value>True</Value></Attribute><InternalElement Name=\\\"CPU 1m Load\\\" ID=\\\"5ce6fc2b-66d6-468d-8381-41c99c67757e\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSD\\\"><InternalElement ID=\\\"0037d0eb-b5be-4245-a254-691924b0009e\\\" Name=\\\"DI\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DI\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"communicationProtocol\\\"><Value></Value></Attribute><InternalElement ID=\\\"acf77e29-679f-493e-9b38-e33405e3a0a4\\\" Name=\\\"Parameters\\\"><InternalElement Name=\\\"protocol\\\" ID=\\\"0780364d-9e55-4ba4-bfb0-f26c03c54059\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>snmp</Value></Attribute></InternalElement><InternalElement Name=\\\"address\\\" ID=\\\"b7ef026e-c259-4a20-9f3f-d0af3a5f7824\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>localhost</Value></Attribute></InternalElement><InternalElement Name=\\\"oid\\\" ID=\\\"3ba3f101-fc01-4bf5-8576-78032b69aa81\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>1.3.6.1.4.1.2021.10.1.3.1</Value></Attribute></InternalElement><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><InternalElement ID=\\\"22c16520-365e-4ac5-814e-03ab0e5287cd\\\" Name=\\\"CPU 1 minute Load in plain text\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DK\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"format\\\"><Value>Plain Text</Value></Attribute><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"quantityKind\\\"><Value></Value></Attribute><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value>Observation</Value></Attribute><Attribute Name=\\\"content\\\" AttributeDataType=\\\"xs:string\\\"><Value>Dynamic</Value><Constraint Name=\\\"ContentValues\\\"><NominalScaledType><RequiredValue>Dynamic</RequiredValue><RequiredValue>Static</RequiredValue></NominalScaledType></Constraint></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><InternalElement Name=\\\"Data Source Manifest - CPU Load 2\\\" ID=\\\"1e662338-8a8f-4e65-89e3-77cfa1f333bd\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSM\\\"><Attribute Name=\\\"macAddress\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><Attribute Name=\\\"semanticId\\\" AttributeDataType=\\\"xs:IDREF\\\"><Value>N/A</Value></Attribute><Attribute Name=\\\"isWritable\\\" AttributeDataType=\\\"xs:boolean\\\" /><Attribute Name=\\\"isEventable\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>True</DefaultValue><Value>True</Value></Attribute><InternalElement Name=\\\"CPU 5m Load\\\" ID=\\\"02f4c856-a224-4ea2-baea-9c613dc15f8d\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSD\\\"><InternalElement ID=\\\"34539165-47aa-4151-b4cb-dc9d9bce8199\\\" Name=\\\"DI\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DI\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"communicationProtocol\\\"><Value></Value></Attribute><InternalElement ID=\\\"6a420732-5b3f-46d7-a5ab-9c17489f9839\\\" Name=\\\"Parameters\\\"><InternalElement Name=\\\"protocol\\\" ID=\\\"fcfd040d-5497-4ac8-8de7-6a906235e406\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>snmp</Value></Attribute></InternalElement><InternalElement Name=\\\"address\\\" ID=\\\"7cd504e4-da69-464a-b179-bb2a3e8fe25f\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>localhost</Value></Attribute></InternalElement><InternalElement Name=\\\"oid\\\" ID=\\\"a4fd3c3f-9e7a-4d51-9e6c-7cb61e25b4c5\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>1.3.6.1.4.1.2021.10.1.3.2</Value></Attribute></InternalElement><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><InternalElement ID=\\\"13d0492a-62ee-4205-b7f5-3285f1869d5d\\\" Name=\\\"CPU 5 minute Load in plain text\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DK\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"format\\\"><Value>Plain text</Value></Attribute><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"quantityKind\\\"><Value></Value></Attribute><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value>Observation</Value></Attribute><Attribute Name=\\\"content\\\" AttributeDataType=\\\"xs:string\\\"><Value>Dynamic</Value><Constraint Name=\\\"ContentValues\\\"><NominalScaledType><RequiredValue>Dynamic</RequiredValue><RequiredValue>Static</RequiredValue></NominalScaledType></Constraint></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><InternalElement Name=\\\"Data Source Manifest - CPU Load 3\\\" ID=\\\"e65bd7f7-8879-4aa7-bb83-71b9fc7881ee\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSM\\\"><Attribute Name=\\\"macAddress\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><Attribute Name=\\\"semanticId\\\" AttributeDataType=\\\"xs:IDREF\\\"><Value>N/A</Value></Attribute><Attribute Name=\\\"isWritable\\\" AttributeDataType=\\\"xs:boolean\\\" /><Attribute Name=\\\"isEventable\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>True</DefaultValue><Value>True</Value></Attribute><InternalElement Name=\\\"CPU 15m Load\\\" ID=\\\"30fe2ada-85aa-4e48-855b-b80ba93b4286\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSD\\\"><InternalElement ID=\\\"dda3c7af-750e-44c9-a6ce-ff8b9adc8c96\\\" Name=\\\"DI\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DI\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"communicationProtocol\\\"><Value></Value></Attribute><InternalElement ID=\\\"a2365478-4bf2-4b84-a120-2339a4cc4600\\\" Name=\\\"Parameters\\\"><InternalElement Name=\\\"protocol\\\" ID=\\\"848a806c-3e43-47a0-b5d1-4029ee89f2cc\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>snmp</Value></Attribute></InternalElement><InternalElement Name=\\\"address\\\" ID=\\\"19100813-c482-4d8b-8ec3-c1017260fe24\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>localhost</Value></Attribute></InternalElement><InternalElement Name=\\\"oid\\\" ID=\\\"c5d564c0-b392-4901-887e-f1518bd0a5bf\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>1.3.6.1.4.1.2021.10.1.3.3</Value></Attribute></InternalElement><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><InternalElement ID=\\\"05f04660-68ee-42b3-ad1a-8cf2e875fe6f\\\" Name=\\\"CPU 15 minute Load in plain text\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DK\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"format\\\"><Value>Plain text</Value></Attribute><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"quantityKind\\\"><Value></Value></Attribute><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value>Observation</Value></Attribute><Attribute Name=\\\"content\\\" AttributeDataType=\\\"xs:string\\\"><Value>Dynamic</Value><Constraint Name=\\\"ContentValues\\\"><NominalScaledType><RequiredValue>Dynamic</RequiredValue><RequiredValue>Static</RequiredValue></NominalScaledType></Constraint></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><InternalElement Name=\\\"Data Source Manifest - Up Time\\\" ID=\\\"18e74242-f1a7-418c-be28-2179f6ca0631\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSM\\\"><Attribute Name=\\\"macAddress\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><Attribute Name=\\\"semanticId\\\" AttributeDataType=\\\"xs:IDREF\\\"><Value>0173-1#02-AAJ500#003</Value></Attribute><Attribute Name=\\\"isWritable\\\" AttributeDataType=\\\"xs:boolean\\\" /><Attribute Name=\\\"isEventable\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>True</DefaultValue><Value>True</Value></Attribute><InternalElement Name=\\\"System Uptime\\\" ID=\\\"1608d415-9d7f-4f91-90cb-e38357f296a2\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSD\\\"><InternalElement ID=\\\"37473a66-5249-4531-99e8-586a04ffff9c\\\" Name=\\\"DI\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DI\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"communicationProtocol\\\"><Value></Value></Attribute><InternalElement ID=\\\"d0fc9b63-fd84-457c-94df-e63c0801f568\\\" Name=\\\"Parameters\\\"><InternalElement Name=\\\"protocol\\\" ID=\\\"50de3542-b98f-45ea-827b-b13b8f34462a\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>snmp</Value></Attribute></InternalElement><InternalElement Name=\\\"address\\\" ID=\\\"cd5f8f99-85f4-4141-b4c8-1931b5209924\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>localhost</Value></Attribute></InternalElement><InternalElement Name=\\\"oid\\\" ID=\\\"01450824-367b-4eb3-8fd7-06970471661a\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>1.3.6.1.2.1.1.3.0</Value></Attribute></InternalElement><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><InternalElement ID=\\\"d7b2166f-0ce7-4be0-a7c7-1847f76fa544\\\" Name=\\\"sysUpTime in plain text\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DK\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"format\\\"><Value>Plain text</Value></Attribute><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"quantityKind\\\"><DefaultValue>N/A</DefaultValue><Value>Time Ticks</Value></Attribute><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value>Observation</Value></Attribute><Attribute Name=\\\"content\\\" AttributeDataType=\\\"xs:string\\\"><Value>Dynamic</Value><Constraint Name=\\\"ContentValues\\\"><NominalScaledType><RequiredValue>Dynamic</RequiredValue><RequiredValue>Static</RequiredValue></NominalScaledType></Constraint></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/PropertyContainer\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/DataSourceManifests\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Generic\\\" /></InternalElement><InternalElement Name=\\\"AAS Health Monitoring\\\" ID=\\\"20bcc9b1-5e94-446d-ae0e-1ae3a5a9b427\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Submodel\\\"><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><InternalElement Name=\\\"Data Source Manifest - Health Check\\\" ID=\\\"f918cf01-90f4-4a35-afc2-4d2219a2b1fb\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSM\\\"><Attribute Name=\\\"macAddress\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><Attribute Name=\\\"semanticId\\\" AttributeDataType=\\\"xs:IDREF\\\"><Value>0173-1#02-BAG100#003</Value></Attribute><Attribute Name=\\\"isWritable\\\" AttributeDataType=\\\"xs:boolean\\\" /><Attribute Name=\\\"isEventable\\\" AttributeDataType=\\\"xs:boolean\\\"><Value>True</Value></Attribute><InternalElement Name=\\\"Health Check\\\" ID=\\\"94bd05e0-9599-44bf-bebf-9a630fce2460\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSD\\\"><InternalElement ID=\\\"ac61ccae-a1e0-4f49-bbbd-477f0c0802d1\\\" Name=\\\"DI\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DI\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"communicationProtocol\\\"><Value></Value></Attribute><InternalElement ID=\\\"3fe8d02d-4221-418f-b05e-64f42059c514\\\" Name=\\\"Parameters\\\"><InternalElement ID=\\\"332bda96-722a-4812-8374-31ae45960be5\\\" Name=\\\"protocol\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>rest</Value></Attribute></InternalElement><InternalElement ID=\\\"48277a2a-ac91-472f-ab30-11eb4d2c699a\\\" Name=\\\"method\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>GET</Value></Attribute></InternalElement><InternalElement ID=\\\"1d905f8e-338b-4359-ab55-baab0e8d5178\\\" Name=\\\"url\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>http://localhost:1880/aas/health</Value></Attribute></InternalElement><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><InternalElement ID=\\\"51ed9f21-f86f-4917-834a-4a04125924cf\\\" Name=\\\"Health Check Info in plain text\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DK\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"format\\\"><Value>Plain text</Value></Attribute><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"quantityKind\\\"><Value></Value></Attribute><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value>Observation</Value></Attribute><Attribute Name=\\\"content\\\" AttributeDataType=\\\"xs:string\\\"><Value>Dynamic</Value><Constraint Name=\\\"ContentValues\\\"><NominalScaledType><RequiredValue>Dynamic</RequiredValue><RequiredValue>Static</RequiredValue></NominalScaledType></Constraint></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/PropertyContainer\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/DataSourceManifests\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Generic\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/SubmodelContainer\\\" /></InternalElement><Version>1.0.0</Version></InstanceHierarchy><InterfaceClassLib Name=\\\"AASInterfaceClassLib\\\"><Version>1.0.0</Version></InterfaceClassLib><RoleClassLib Name=\\\"AASManifestRoleClassLib\\\"><RoleClass Name=\\\"PropertyContainer\\\" /><RoleClass Name=\\\"Statement\\\" /><RoleClass Name=\\\"AASIdentification\\\" /><RoleClass Name=\\\"SubmodelContainer\\\" /><RoleClass Name=\\\"ParameterContainer\\\" /><RoleClass Name=\\\"DataSourceManifests\\\" /><RoleClass Name=\\\"LiveDataset\\\" /><RoleClass Name=\\\"Generic\\\" /><RoleClass Name=\\\"VendorSpecific\\\" /><RoleClass Name=\\\"DataStreaming\\\" /><RoleClass Name=\\\"Custom\\\" /><RoleClass Name=\\\"Internal\\\" /><Version></Version></RoleClassLib><SystemUnitClassLib Name=\\\"AASSystemUnitClassLib\\\"><SystemUnitClass Name=\\\"Submodel\\\"><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/PropertyContainer\\\" /><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/DataSourceManifests\\\" /></SystemUnitClass><SystemUnitClass Name=\\\"Property\\\"><Description></Description><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /><SystemUnitClass ID=\\\"15250019-f6d1-4721-8ffc-49e309f57d7f\\\" Name=\\\"DSD\\\" RefBaseClassPath=\\\"AASSystemUnitClassLib/Property\\\"><Description>PROPHESY Data Source Definition</Description><InternalElement ID=\\\"e45f2f0d-38e3-4d7f-bec8-1ba7a0220d95\\\" Name=\\\"DI\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DI\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"communicationProtocol\\\"><Value></Value></Attribute><InternalElement ID=\\\"634ca4cf-6dd7-4a90-81c4-19cc8aac07a1\\\" Name=\\\"Parameters\\\"><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><InternalElement ID=\\\"a40cbfd0-ac48-413f-911a-a5915c40e071\\\" Name=\\\"DK\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DK\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"format\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"quantityKind\\\"><Value></Value></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement></SystemUnitClass><SystemUnitClass ID=\\\"124e5d81-d58f-40c8-ad14-8e62e003467c\\\" Name=\\\"DI\\\" RefBaseClassPath=\\\"AASSystemUnitClassLib/Property\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"communicationProtocol\\\"><Value></Value></Attribute><InternalElement ID=\\\"79d506e7-b991-4b1a-aa29-8161da867a9e\\\" Name=\\\"Parameters\\\"><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement></SystemUnitClass><SystemUnitClass ID=\\\"6edf24e3-dc69-4857-b268-f9e355e0898f\\\" Name=\\\"DK\\\" RefBaseClassPath=\\\"AASSystemUnitClassLib/Property\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"format\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"quantityKind\\\"><Value></Value></Attribute><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"content\\\" AttributeDataType=\\\"xs:string\\\"><Constraint Name=\\\"ContentValues\\\"><NominalScaledType><RequiredValue>Dynamic</RequiredValue><RequiredValue>Static</RequiredValue></NominalScaledType></Constraint></Attribute><Description></Description></SystemUnitClass><SystemUnitClass ID=\\\"88da950a-5c94-4027-98e7-d673a9694f8b\\\" Name=\\\"Identifier\\\"><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"namespace\\\"><Value></Value></Attribute><Description></Description><InternalElement ID=\\\"35063688-a0e9-47ea-8bf3-1afd38d16ccb\\\" Name=\\\"Location\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Location\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"geoLocation\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"latitude\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"longitude\\\"><Value></Value></Attribute></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"virtualLocation\\\"><Value></Value></Attribute></InternalElement></SystemUnitClass><SystemUnitClass Name=\\\"DSM\\\" ID=\\\"96a19b7b-e91f-4707-bf97-03d9c84452c9\\\" RefBaseClassPath=\\\"AASSystemUnitClassLib/Property\\\"><Attribute Name=\\\"macAddress\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><Attribute Name=\\\"semanticId\\\" AttributeDataType=\\\"xs:IDREF\\\" /><Attribute Name=\\\"isWritable\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>False</DefaultValue><Value>False</Value></Attribute><Attribute Name=\\\"isEventable\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>False</DefaultValue><Value>False</Value></Attribute><InternalElement Name=\\\"DSD\\\" ID=\\\"5d0afb31-a84e-424b-a4bf-1786e2e49ff4\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSD\\\"><InternalElement ID=\\\"7dad5dfb-167d-4b43-955d-112b7813eea2\\\" Name=\\\"DI\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DI\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"communicationProtocol\\\"><Value></Value></Attribute><InternalElement ID=\\\"b1578493-e760-483c-a7dd-d14899da6ea0\\\" Name=\\\"Parameters\\\"><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><InternalElement ID=\\\"ff601314-0223-4549-ab65-9ba575dae884\\\" Name=\\\"DK\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DK\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"format\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"quantityKind\\\"><Value></Value></Attribute><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\" /><Attribute Name=\\\"content\\\" AttributeDataType=\\\"xs:string\\\"><Constraint Name=\\\"\\\"><NominalScaledType><RequiredValue>Dynamic</RequiredValue><RequiredValue>Static</RequiredValue></NominalScaledType></Constraint></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement></SystemUnitClass></SystemUnitClass><SystemUnitClass ID=\\\"e5ab0092-4b4e-4529-95bd-62a264177805\\\" Name=\\\"Parameter\\\" RefBaseClassPath=\\\"\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value></Value></Attribute><Description></Description></SystemUnitClass><SystemUnitClass ID=\\\"b0a00287-0441-46ed-8926-df3fc07b8545\\\" Name=\\\"Location\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"geoLocation\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"latitude\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"longitude\\\"><Value></Value></Attribute></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"virtualLocation\\\"><Value></Value></Attribute></SystemUnitClass><Version>1.0.0</Version></SystemUnitClassLib></CAEXFile>\";\n//var emptyDSM = context.flow.get(\"emptyDSM\") || \"<?xml version=\\\"1.0\\\"?><InternalElement ID=\\\"b5595a4a-40a5-46e6-a9c6-f493f99a72a1\\\" Name=\\\"Name\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Property/DSM\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"macAddress\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:boolean\\\" Name=\\\"Visibility\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><InternalElement ID=\\\"4d2f1be3-52db-495a-b4a3-be3ff916e1a4\\\" Name=\\\"System Description\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Property/DSD\\\"><Description>Textual description of the resource hardware. It includes the full name and the version identification of the system's hardware type, software operating system, and networking software.</Description><InternalElement ID=\\\"4152e105-a503-42ca-97fa-d4c6a4a552f9\\\" Name=\\\"DI\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Property/DI\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"communicationProtocol\\\"><Value></Value></Attribute><InternalElement ID=\\\"eb02baed-2ec7-4757-b169-52e92e69db59\\\" Name=\\\"Parameters\\\"><InternalElement ID=\\\"7e5f1bc5-34e1-4f1a-835b-7d1b6f72bb96\\\" Name=\\\"protocol\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>snmp</Value></Attribute></InternalElement><InternalElement ID=\\\"5e95da25-7400-4fe6-849b-a708696a5d28\\\" Name=\\\"address\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>localhost</Value></Attribute></InternalElement><InternalElement ID=\\\"cc1ca40b-e97e-4282-b799-36ceb2513044\\\" Name=\\\"oid\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>1.3.6.1.2.1.1.1.0</Value></Attribute></InternalElement><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\"/></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\"/></InternalElement><InternalElement ID=\\\"2d5b30b6-16f8-41b0-b6f8-26366192e1dc\\\" Name=\\\"sysDescr\\\" RefBaseSystemUnitPath=\\\"ASSSystemUnitClassLib/Property/DK\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"format\\\"><Value>Plain text</Value></Attribute><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"quantityKind\\\"><Value></Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"modelType\\\"><Value>Observation</Value></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\"/></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\"/></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\"/></InternalElement>\";\nvar emptyDSM = context.flow.get(\"emptyDSM\") || \"<?xml version=\\\"1.0\\\"?><InternalElement Name=\\\"Name\\\" ID=\\\"b5595a4a-40a5-46e6-a9c6-f493f99a72a1\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSM\\\"><Attribute Name=\\\"macAddress\\\" AttributeDataType=\\\"xs:string\\\"><Value> </Value></Attribute><Attribute Name=\\\"Visibility\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>true</DefaultValue><Value>True</Value></Attribute><Attribute Name=\\\"semanticId\\\" AttributeDataType=\\\"xs:IDREF\\\"><Value>0173-1#02-AAU734#001</Value></Attribute><Attribute Name=\\\"isWritable\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>False</DefaultValue><Value>False</Value></Attribute><Attribute Name=\\\"isEventable\\\" AttributeDataType=\\\"xs:boolean\\\"><DefaultValue>False</DefaultValue><Value>False</Value></Attribute><InternalElement Name=\\\"System Description\\\" ID=\\\"4d2f1be3-52db-495a-b4a3-be3ff916e1a4\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DSD\\\"><Description>Textual description of the resource hardware. It includes the full name and the version identification of the system's hardware type, software operating system, and networking software.  </Description><InternalElement ID=\\\"4152e105-a503-42ca-97fa-d4c6a4a552f9\\\" Name=\\\"DI\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DI\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"communicationProtocol\\\"><Value/></Attribute><InternalElement ID=\\\"eb02baed-2ec7-4757-b169-52e92e69db59\\\" Name=\\\"Parameters\\\"><InternalElement Name=\\\"protocol\\\" ID=\\\"7e5f1bc5-34e1-4f1a-835b-7d1b6f72bb96\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value/></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>snmp</Value></Attribute></InternalElement><InternalElement Name=\\\"address\\\" ID=\\\"5e95da25-7400-4fe6-849b-a708696a5d28\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value/></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>localhost</Value></Attribute></InternalElement><InternalElement Name=\\\"oid\\\" ID=\\\"cc1ca40b-e97e-4282-b799-36ceb2513044\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Parameter\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"dataType\\\"><Value>string</Value></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"defaultValue\\\"><Value/></Attribute><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"actualValue\\\"><Value>1.3.6.1.2.1.1.1.0</Value></Attribute></InternalElement><RoleRequirements RefBaseRoleClassPath=\\\"AASManifestRoleClassLib/ParameterContainer\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><InternalElement ID=\\\"2d5b30b6-16f8-41b0-b6f8-26366192e1dc\\\" Name=\\\"sysDescr\\\" RefBaseSystemUnitPath=\\\"AASSystemUnitClassLib/Property/DK\\\"><Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"format\\\"><Value>Plain text</Value></Attribute><Attribute AttributeDataType=\\\"xs:anyURI\\\" Name=\\\"quantityKind\\\"><DefaultValue>N/A</DefaultValue><Value>N/A</Value></Attribute><Attribute Name=\\\"modelType\\\" AttributeDataType=\\\"xs:string\\\"><Value>Observation</Value></Attribute><Attribute Name=\\\"content\\\" AttributeDataType=\\\"xs:string\\\"><Value>Static</Value><Constraint Name=\\\"ContentValues\\\"><NominalScaledType><RequiredValue>Dynamic</RequiredValue><RequiredValue>Static</RequiredValue></NominalScaledType></Constraint></Attribute><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" /></InternalElement>\";\n//var AASIdentifier = context.flow.get(\"AASIdentifier\") || uuid;\nvar manifest = context.flow.get(\"manifest\") || \"\";\nvar header = context.flow.get(\"header\") || \"\";\nvar body = context.flow.get(\"body\") || \"\";\n//var submodels = context.flow.get(\"submodels\") || \"\";\n//var properties = context.flow.get(\"properties\") || \"\";\n\ncontext.flow.set(\"emptyManifest\", emptyManifest);\ncontext.flow.set(\"emptyDSM\", emptyDSM);\ncontext.global.set(\"AASIdentifier\", uuid);\ncontext.flow.set(\"manifest\", manifest);\ncontext.flow.set(\"header\", header);\ncontext.flow.set(\"body\", body);\n\nreturn msg;\n","outputs":1,"noerr":0,"x":673.0261840820312,"y":93.38336181640625,"wires":[[]]},{"id":"3373faa6.7b1936","type":"actionflows","z":"d615cce6.1a41c","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"persistManifest","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1109.88330078125,"y":171.38336181640625,"wires":[["6f45be8e.3cae1"]]},{"id":"72f253da.41f03c","type":"set-defaults","z":"2a540cc7.026154","name":"set-startTime","rules":[{"p":"startTime","pt":"msg","to":"","tot":"date"}],"chbox_DoOutputToMessage":true,"chbox_SetCurrentToMsg":false,"howSend":{"text":"payload","type":"msg","modifiedValue":"payload"},"dropdown_HowManyMessages":"single","dropdownObjOrVal":"value","outputs":1,"x":430,"y":1380,"wires":[["921923c0.a4616"]]},{"id":"48c29c13.3d68c4","type":"subflow:3bcb972f.6d23c8","z":"2a540cc7.026154","name":"","env":[],"x":1810,"y":1420,"wires":[],"icon":"node-red-contrib-viseo-log/log.svg"},{"id":"c9d895e8.06b5a8","type":"subflow:3bcb972f.6d23c8","z":"2a540cc7.026154","name":"","x":1810,"y":1620,"wires":[],"icon":"node-red-contrib-viseo-log/log.svg"},{"id":"70ce1be4.37d734","type":"subflow:3bcb972f.6d23c8","z":"2a540cc7.026154","name":"","x":1810,"y":1820,"wires":[],"icon":"node-red-contrib-viseo-log/log.svg"},{"id":"ed6a20a9.0c7a5","type":"subflow:3bcb972f.6d23c8","z":"2a540cc7.026154","name":"","x":1810,"y":2000,"wires":[],"icon":"node-red-contrib-viseo-log/log.svg"},{"id":"492bb9a9.d66c58","type":"set-defaults","z":"2a540cc7.026154","name":"set-startTime","rules":[{"p":"startTime","pt":"msg","to":"","tot":"date"}],"chbox_DoOutputToMessage":true,"chbox_SetCurrentToMsg":false,"howSend":{"text":"payload","type":"msg","modifiedValue":"payload"},"dropdown_HowManyMessages":"single","dropdownObjOrVal":"value","outputs":1,"x":430,"y":1580,"wires":[["28373d5a.6c7e82"]]},{"id":"d62f0ee5.075c9","type":"set-defaults","z":"2a540cc7.026154","name":"set-startTime","rules":[{"p":"startTime","pt":"msg","to":"","tot":"date"}],"chbox_DoOutputToMessage":true,"chbox_SetCurrentToMsg":false,"howSend":{"text":"payload","type":"msg","modifiedValue":"payload"},"dropdown_HowManyMessages":"single","dropdownObjOrVal":"value","outputs":1,"x":440,"y":1780,"wires":[["3fae793e.5bc466"]]},{"id":"a4bb6e77.da71a","type":"set-defaults","z":"2a540cc7.026154","name":"set-startTime","rules":[{"p":"startTime","pt":"msg","to":"","tot":"date"}],"chbox_DoOutputToMessage":true,"chbox_SetCurrentToMsg":false,"howSend":{"text":"payload","type":"msg","modifiedValue":"payload"},"dropdown_HowManyMessages":"single","dropdownObjOrVal":"value","outputs":1,"x":500,"y":1960,"wires":[["c04d4aa8.fdf6c8"]]},{"id":"d4cc5b4c.db3918","type":"subflow:3bcb972f.6d23c8","z":"2a540cc7.026154","name":"","x":1810,"y":2180,"wires":[],"icon":"node-red-contrib-viseo-log/log.svg"},{"id":"e9f8df33.35ab2","type":"set-defaults","z":"2a540cc7.026154","name":"set-startTime","rules":[{"p":"startTime","pt":"msg","to":"","tot":"date"}],"chbox_DoOutputToMessage":true,"chbox_SetCurrentToMsg":false,"howSend":{"text":"payload","type":"msg","modifiedValue":"payload"},"dropdown_HowManyMessages":"single","dropdownObjOrVal":"value","outputs":1,"x":450,"y":2140,"wires":[["d8eea54b.2106a8"]]},{"id":"f6ee665.a58a898","type":"set-defaults","z":"2a540cc7.026154","name":"set-startTime","rules":[{"p":"startTime","pt":"msg","to":"","tot":"date"}],"chbox_DoOutputToMessage":true,"chbox_SetCurrentToMsg":false,"howSend":{"text":"payload","type":"msg","modifiedValue":"payload"},"dropdown_HowManyMessages":"single","dropdownObjOrVal":"value","outputs":1,"x":440,"y":2340,"wires":[["7afc7cc1.2dd904"]]},{"id":"3b6c3fbc.b97f","type":"subflow:3bcb972f.6d23c8","z":"2a540cc7.026154","name":"","x":1810,"y":2380,"wires":[],"icon":"node-red-contrib-viseo-log/log.svg"},{"id":"b75af906.f91aa8","type":"set-defaults","z":"2a540cc7.026154","name":"set-startTime","rules":[{"p":"startTime","pt":"msg","to":"","tot":"date"}],"chbox_DoOutputToMessage":true,"chbox_SetCurrentToMsg":false,"howSend":{"text":"payload","type":"msg","modifiedValue":"payload"},"dropdown_HowManyMessages":"single","dropdownObjOrVal":"value","outputs":1,"x":450,"y":2560,"wires":[["55ed1ad5.c0f624"]]},{"id":"9a8df22d.dc575","type":"subflow:3bcb972f.6d23c8","z":"2a540cc7.026154","name":"","env":[],"x":1810,"y":2600,"wires":[],"icon":"node-red-contrib-viseo-log/log.svg"},{"id":"1961126a.52bdfe","type":"set-defaults","z":"2a540cc7.026154","name":"set-startTime","rules":[{"p":"startTime","pt":"msg","to":"","tot":"date"}],"chbox_DoOutputToMessage":true,"chbox_SetCurrentToMsg":false,"howSend":{"text":"payload","type":"msg","modifiedValue":"payload"},"dropdown_HowManyMessages":"single","dropdownObjOrVal":"value","outputs":1,"x":470,"y":2740,"wires":[["95ff14c6.9435c8"]]},{"id":"69ae13d5.1bb6ac","type":"subflow:3bcb972f.6d23c8","z":"2a540cc7.026154","name":"","x":1810,"y":2780,"wires":[],"icon":"node-red-contrib-viseo-log/log.svg"},{"id":"59c3b652.bf5b68","type":"set-defaults","z":"2a540cc7.026154","name":"set-startTime","rules":[{"p":"startTime","pt":"msg","to":"","tot":"date"}],"chbox_DoOutputToMessage":true,"chbox_SetCurrentToMsg":false,"howSend":{"text":"payload","type":"msg","modifiedValue":"payload"},"dropdown_HowManyMessages":"single","dropdownObjOrVal":"value","outputs":1,"x":470,"y":2900,"wires":[["2bd300d0.01e9e"]]},{"id":"b9559f12.b6efc","type":"subflow:3bcb972f.6d23c8","z":"2a540cc7.026154","name":"","x":1810,"y":2940,"wires":[],"icon":"node-red-contrib-viseo-log/log.svg"},{"id":"b20e4ea5.7e20b","type":"set-defaults","z":"2a540cc7.026154","name":"set-startTime","rules":[{"p":"startTime","pt":"msg","to":"","tot":"date"}],"chbox_DoOutputToMessage":true,"chbox_SetCurrentToMsg":false,"howSend":{"text":"payload","type":"msg","modifiedValue":"payload"},"dropdown_HowManyMessages":"single","dropdownObjOrVal":"value","outputs":1,"x":520,"y":3160,"wires":[["e4b898ee.2aea08"]]},{"id":"a511255c.f0d1a8","type":"set-defaults","z":"2a540cc7.026154","name":"set-startTime","rules":[{"p":"startTime","pt":"msg","to":"","tot":"date"}],"chbox_DoOutputToMessage":true,"chbox_SetCurrentToMsg":false,"howSend":{"text":"payload","type":"msg","modifiedValue":"payload"},"dropdown_HowManyMessages":"single","dropdownObjOrVal":"value","outputs":1,"x":520,"y":3280,"wires":[["70b68740.e36158"]]},{"id":"f205f5ca.432528","type":"subflow:3bcb972f.6d23c8","z":"2a540cc7.026154","name":"","x":1810,"y":3320,"wires":[],"icon":"node-red-contrib-viseo-log/log.svg"},{"id":"eff16971.db3338","type":"set-defaults","z":"2a540cc7.026154","name":"set-startTime","rules":[{"p":"startTime","pt":"msg","to":"","tot":"date"}],"chbox_DoOutputToMessage":true,"chbox_SetCurrentToMsg":false,"howSend":{"text":"payload","type":"msg","modifiedValue":"payload"},"dropdown_HowManyMessages":"single","dropdownObjOrVal":"value","outputs":1,"x":530,"y":3440,"wires":[["a72c6ef5.6e3d2"]]},{"id":"1cd96603.3f0f8a","type":"subflow:3bcb972f.6d23c8","z":"2a540cc7.026154","name":"","x":1810,"y":3480,"wires":[],"icon":"node-red-contrib-viseo-log/log.svg"},{"id":"e43c442e.442948","type":"template","z":"2a540cc7.026154","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<html>\n    <head>\n        <link rel=\"stylesheet\" href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css\" integrity=\"sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO\" crossorigin=\"anonymous\">\n        <script src=\"https://code.jquery.com/jquery-3.3.1.slim.min.js\" integrity=\"sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo\" crossorigin=\"anonymous\"></script>\n        <script src=\"https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js\" integrity=\"sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49\" crossorigin=\"anonymous\"></script>\n        <script src=\"https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js\" integrity=\"sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy\" crossorigin=\"anonymous\"></script>\n    </head>\n    <div>\n        <form action=\"/aas/initialize\" method=\"POST\" enctype=\"multipart/form-data\">\n        \t<!-- COMPONENT START -->\n        \t<div class=\"form-group\">\n        \t\t<div class=\"input-group input-file\" name=\"manifest\">\n            \t\t<input type=\"text\" class=\"form-control\" placeholder='Choose a file...' />\t\t\t\n                    <span class=\"input-group-btn\">\n                \t\t<button class=\"btn btn-default btn-choose\" type=\"button\">Choose</button>\n            \t\t</span>\n        \n        \n        \t\t</div>\n        \t</div>\n        \t<!-- COMPONENT END -->\n        \t<div class=\"form-group\">\n        \t\t<button type=\"submit\" class=\"btn btn-primary pull-right\">Submit</button>\n        \t\t<button type=\"reset\" class=\"btn btn-danger\">Reset</button>\n        \t</div>\n        </form>\n    </div>\n    <script>\n        function bs_input_file() {\n\t$(\".input-file\").before(\n\t\tfunction() {\n\t\t\tif ( ! $(this).prev().hasClass('input-ghost') ) {\n\t\t\t\tvar element = $(\"<input type='file' class='input-ghost' style='visibility:hidden; height:0'>\");\n\t\t\t\telement.attr(\"name\",$(this).attr(\"name\"));\n\t\t\t\telement.change(function(){\n\t\t\t\t\telement.next(element).find('input').val((element.val()).split('\\\\').pop());\n\t\t\t\t});\n\t\t\t\t$(this).find(\"button.btn-choose\").click(function(){\n\t\t\t\t\telement.click();\n\t\t\t\t});\n\t\t\t\t$(this).find(\"button.btn-reset\").click(function(){\n\t\t\t\t\telement.val(null);\n\t\t\t\t\t$(this).parents(\".input-file\").find('input').val('');\n\t\t\t\t});\n\t\t\t\t$(this).find('input').css(\"cursor\",\"pointer\");\n\t\t\t\t$(this).find('input').mousedown(function() {\n\t\t\t\t\t$(this).parents('.input-file').prev().click();\n\t\t\t\t\treturn false;\n\t\t\t\t});\n\t\t\t\treturn element;\n\t\t\t}\n\t\t}\n\t);\n}\n$(function() {\n\tbs_input_file();\n});\n    </script>\n</html>","output":"str","x":280,"y":120,"wires":[["d49c8fdf.9ae23","274eae82.8e3b12"]]},{"id":"28c949a1.2f6636","type":"comment","z":"2a540cc7.026154","name":"External Interface - Health Check","info":"","x":150,"y":1060,"wires":[]},{"id":"f3e8d87e.477e28","type":"http in","z":"2a540cc7.026154","name":"","url":"/aas/health","method":"get","upload":false,"swaggerDoc":"b99049dd.116568","x":120,"y":1120,"wires":[["aba9fa4.2c0d008"]]},{"id":"aba9fa4.2c0d008","type":"set-defaults","z":"2a540cc7.026154","name":"set-startTime","rules":[{"p":"startTime","pt":"msg","to":"","tot":"date"}],"chbox_DoOutputToMessage":true,"chbox_SetCurrentToMsg":false,"howSend":{"text":"payload","type":"msg","modifiedValue":"payload"},"dropdown_HowManyMessages":"single","dropdownObjOrVal":"value","outputs":1,"x":330,"y":1120,"wires":[["a6a51b0d.c2d148"]]},{"id":"4727257d.a314ec","type":"http response","z":"2a540cc7.026154","name":"","statusCode":"","headers":{},"x":1850,"y":1120,"wires":[]},{"id":"ecda4542.a2d838","type":"subflow:3bcb972f.6d23c8","z":"2a540cc7.026154","name":"","env":[],"x":1830,"y":1160,"wires":[],"icon":"node-red-contrib-viseo-log/log.svg"},{"id":"df0d44ea.01d4d8","type":"unsafe-function","z":"6f5697aa.38c758","name":"DataStreamingMsgNotification","func":"var outMsg = {};\noutMsg.payload = msg.payload.statusMessage;\nreturn outMsg; ","outputs":1,"noerr":0,"x":1424.8541259765625,"y":1081.1041259765625,"wires":[["8ae08572.e45978","e6cb32dd.cc31c","19cd16c1.caf3f9"]]},{"id":"8ae08572.e45978","type":"ui_toast","z":"6f5697aa.38c758","position":"bottom right","displayTime":"1","highlight":"","outputs":0,"ok":"OK","cancel":"","topic":"Logs","name":"Notify (Un)Subscription ","x":1698.6041259765625,"y":1081.1041259765625,"wires":[]},{"id":"56d2c407.278bcc","type":"ui_ui_control","z":"6f5697aa.38c758","name":"","x":300,"y":180,"wires":[["bb2117fb.dc3508"]]},{"id":"10385b99.04b164","type":"debug","z":"6f5697aa.38c758","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":703.881103515625,"y":121.2618637084961,"wires":[]},{"id":"bb2117fb.dc3508","type":"unsafe-function","z":"6f5697aa.38c758","name":"detectBrowserReload","func":"var payload = msg.payload;\nif(payload === \"connect\"){\n    return msg;\n}\n\nreturn null;\n//context.flow.set('Body', \"\");","outputs":1,"noerr":0,"x":520,"y":180,"wires":[["10385b99.04b164","a9726315.b2cb9"]]},{"id":"f6a514bb.8175d8","type":"unsafe-function","z":"6d97086b.090b98","name":"Update_Internal_subscriptions_registry","func":"var subscriptions = context.flow.get('subscriptions');\nvar element = msg.payload.body;\nif(msg.statusCode == \"200\" && !msg.payload.statusMessage.includes(\"not found\")){\n    subscriptions.splice(element, 1);\n    context.flow.set('subscriptions', subscriptions);\n}\n\nreturn msg;","outputs":1,"noerr":0,"x":2190,"y":900,"wires":[["4b5d924.2d3436c"]]},{"id":"40a4e94.18cc018","type":"unsafe-function","z":"6d97086b.090b98","name":"Update_Internal_subscriptions_registry","func":"var subscriptions = context.flow.get('subscriptions');\nvar element = msg.payload.body;\nif(msg.statusCode == \"200\" && !msg.payload.statusMessage.includes(\"Error\")){\n    subscriptions.push(element);\n    context.flow.set(\"subscriptions\", subscriptions);\n}\n\nreturn msg;","outputs":1,"noerr":0,"x":2190,"y":820,"wires":[["96702dfd.7a9f1"]]},{"id":"51629348.49fddc","type":"actionflows_in","z":"6d97086b.090b98","name":"getSubscriptions in","priority":"50","links":[],"scope":"global","x":250,"y":1060,"wires":[["bc2c340.bd302d"]]},{"id":"c5446320.93e44","type":"actionflows_out","z":"6d97086b.090b98","name":"getSubscriptions out","links":[],"x":2840,"y":1060,"wires":[]},{"id":"bc2c340.bd302d","type":"unsafe-function","z":"6d97086b.090b98","name":"getCurrentSubscriptions","func":"var subscriptions = context.flow.get('subscriptions');\nmsg.payload = subscriptions;\nreturn msg;","outputs":1,"noerr":0,"x":1530,"y":1060,"wires":[["c5446320.93e44"]]},{"id":"55e2598.ac676a8","type":"actionflows_out","z":"6f5697aa.38c758","name":"informAASUI_NewLog out","links":[],"x":1994.0831298828125,"y":414.1041564941406,"wires":[]},{"id":"965b8731.f87218","type":"actionflows_in","z":"6f5697aa.38c758","name":"informAASUI_NewLog in","priority":"50","links":[],"scope":"global","x":1418.88330078125,"y":425.6333312988281,"wires":[["77478d8a.3a8a14"]]},{"id":"448fdfaf.cfd97","type":"ui_toast","z":"6f5697aa.38c758","position":"bottom right","displayTime":"1","highlight":"","outputs":0,"ok":"OK","cancel":"","topic":"Logs","name":"Notify Logs","x":2408.0000610351562,"y":694.9999389648438,"wires":[]},{"id":"528de101.6113e","type":"unsafe-function","z":"6f5697aa.38c758","name":"NewLogsNotification","func":"//Retreiving Libraries from the Settings.json file\nmsg.payload = \"new Log\";\nreturn msg; ","outputs":1,"noerr":0,"x":2112.9999389648438,"y":693.333251953125,"wires":[["448fdfaf.cfd97"]]},{"id":"bd668357.0c075","type":"debug","z":"6f5697aa.38c758","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":2593.0997924804688,"y":722.4334106445312,"wires":[]},{"id":"8d0480c6.52261","type":"debug","z":"6f5697aa.38c758","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1715.0475463867188,"y":681.2620239257812,"wires":[]},{"id":"516886b.e411478","type":"actionflows_in","z":"6f5697aa.38c758","name":"notifyAASUI_DataStreamingMsg in","priority":"50","links":[],"scope":"global","x":1128.533203125,"y":1078.099853515625,"wires":[["df0d44ea.01d4d8"]]},{"id":"e6cb32dd.cc31c","type":"actionflows_out","z":"6f5697aa.38c758","name":"notifyAASUI_DataStreamingMsg out","links":[],"x":1736.533203125,"y":1128.566650390625,"wires":[]},{"id":"b73e18aa.106978","type":"http response","z":"2a540cc7.026154","name":"","statusCode":"","headers":{},"x":1850,"y":320,"wires":[]},{"id":"341304cc.97f9cc","type":"actionflows_in","z":"6d97086b.090b98","name":"callDataStreaming_DeviceRegistry in","priority":"50","links":[],"scope":"global","x":300,"y":1320,"wires":[["7ac146f7.ac6c38"]]},{"id":"d7edd6a9.a928c8","type":"actionflows_out","z":"6d97086b.090b98","name":"callDataStreaming_DeviceRegistry out","links":[],"x":2790,"y":1300,"wires":[]},{"id":"dd89be7d.10b1e","type":"comment","z":"d615cce6.1a41c","name":"Factory","info":"","x":337.5,"y":1905.9375,"wires":[]},{"id":"40d6b896.24d3c8","type":"actionflows_in","z":"d615cce6.1a41c","name":"createProperty in","priority":"50","links":[],"scope":"global","x":363.75,"y":1985.3125,"wires":[["d5320a42.3de358"]]},{"id":"b4ed4253.af26c","type":"actionflows_out","z":"d615cce6.1a41c","name":"createProperty out","links":[],"x":1501.25,"y":1985.4375,"wires":[]},{"id":"d5320a42.3de358","type":"unsafe-function","z":"d615cce6.1a41c","name":"createPropertyDSM","func":"//Retreiving Libraries from the Settings.json file\nvar XML = context.global.get('XML');\n\nmsg.newDSM = context.flow.get('emptyDSM');\nif(typeof msg.newDSM != 'undefined'){\n    var xml_string = msg.newDSM;\n    var newDSM = XML.parse( xml_string, { preserveAttributes: true, forceArrays: true  } );\n    msg.newDSM = newDSM;\n    return msg;\n} else {\n    msg.newDSM = null;\n    return msg;\n}","outputs":1,"noerr":0,"x":827.1875,"y":1986.5625,"wires":[["b4ed4253.af26c","5c2ecc02.d09784"]]},{"id":"880a8bd4.23dba8","type":"inject","z":"d615cce6.1a41c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":466.875,"y":2086.5625,"wires":[["d5320a42.3de358"]]},{"id":"5c2ecc02.d09784","type":"debug","z":"d615cce6.1a41c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1079.375,"y":2085.625,"wires":[]},{"id":"77f25148.3506d","type":"change","z":"6d97086b.090b98","name":"","rules":[{"t":"set","p":"testing","pt":"msg","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1780,"y":580,"wires":[["7d96c6ed.f92e48","35028667.e34a7a"]]},{"id":"7cdff0ae.8a104","type":"switch","z":"6d97086b.090b98","name":"IF_mep_test","property":"mep","propertyType":"msg","rules":[{"t":"eq","v":"subscribe","vt":"str"},{"t":"eq","v":"unsubscribe","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":2249.1272583007812,"y":638.2936706542969,"wires":[["48858a94.50f344"],["313ac009.21f31"]]},{"id":"7d96c6ed.f92e48","type":"switch","z":"6d97086b.090b98","name":"IF_Test_is_enabled","property":"testing","propertyType":"msg","rules":[{"t":"false"},{"t":"true"}],"checkall":"true","repair":false,"outputs":2,"x":2030,"y":580,"wires":[["7802d83d.4441c8"],["7cdff0ae.8a104"]]},{"id":"48858a94.50f344","type":"actionflows","z":"6d97086b.090b98","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"subscribeTest","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"private","perf":false,"seq":false,"x":2441.8176879882812,"y":643.84130859375,"wires":[["d8bbd412.d43c38"]]},{"id":"313ac009.21f31","type":"actionflows","z":"6d97086b.090b98","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"unsubscribeTest","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"private","perf":false,"seq":false,"x":2441.8176879882812,"y":692.4127197265625,"wires":[["d8bbd412.d43c38"]]},{"id":"19cd16c1.caf3f9","type":"actionflows","z":"6f5697aa.38c758","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"informAASUI_NewLog","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"private","perf":false,"seq":false,"x":1700,"y":1180,"wires":[[]]},{"id":"8823fb42.204fe8","type":"gate","z":"6d97086b.090b98","name":"","controlTopic":"control","defaultState":"open","openCmd":"open","closeCmd":"close","toggleCmd":"toggle","defaultCmd":"default","persist":false,"x":970,"y":1400,"wires":[["2a8028e0.df27d8"]]},{"id":"2a8028e0.df27d8","type":"unsafe-function","z":"6d97086b.090b98","name":"retrieve registry info (DSMs)","func":"msg.headers = {\"Content-type\" : \"application/json\"}\nmsg.url = context.global.get(\"RegistryEndpoint\") + \"/registry/assets/full/all\";\nmsg.method = \"GET\";\nreturn msg;","outputs":1,"noerr":0,"x":1220,"y":1400,"wires":[["845ca1e1.6d948","d4b40c56.c2269"]]},{"id":"845ca1e1.6d948","type":"http request","z":"6d97086b.090b98","name":"","method":"use","ret":"txt","paytoqs":false,"url":"","tls":"","proxy":"","x":1480,"y":1400,"wires":[["eae85a77.78cb08"]]},{"id":"2cbbb505.a21ada","type":"inject","z":"ef6160d1.7c319","name":"","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":130,"y":100,"wires":[["cd5982cb.b02b2"]]},{"id":"cd5982cb.b02b2","type":"unsafe-function","z":"ef6160d1.7c319","name":"flowVariables","func":"context.flow.set('subscriptions', []);","outputs":1,"noerr":0,"x":714.3749389648438,"y":100.00001525878906,"wires":[[]]},{"id":"7d211d3a.099344","type":"inject","z":"927cab2b.acef18","name":"","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":150,"y":160,"wires":[["80dd0861.cac258"]]},{"id":"80dd0861.cac258","type":"unsafe-function","z":"927cab2b.acef18","name":"flowVariables","func":"context.flow.set('subscriptions', []);","outputs":1,"noerr":0,"x":734.3749389648438,"y":160.00001525878906,"wires":[[]]},{"id":"a317febe.34127","type":"link out","z":"2a540cc7.026154","name":"1_Out","links":["ccb9f64a.78b388"],"x":795,"y":340,"wires":[]},{"id":"201b4608.8326da","type":"actionflows","z":"8eb9b9b8.c0df48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"createManifest","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1220,"y":100,"wires":[["ee7d28da.f526a8","6e7fa940.c4c178"]]},{"id":"ee7d28da.f526a8","type":"actionflows","z":"8eb9b9b8.c0df48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"informAASUI_ManifestChange","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1930,"y":100,"wires":[["6c6de5d9.71dacc","b70c1a31.fdfca8","17102f0b.666bd1"]]},{"id":"6e7fa940.c4c178","type":"debug","z":"8eb9b9b8.c0df48","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1410,"y":40,"wires":[]},{"id":"6c6de5d9.71dacc","type":"debug","z":"8eb9b9b8.c0df48","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":2110,"y":60,"wires":[]},{"id":"a66d9749.5947e8","type":"actionflows","z":"8eb9b9b8.c0df48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"handleAttachment","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"private","perf":false,"seq":false,"x":990,"y":100,"wires":[["201b4608.8326da"]]},{"id":"1910b5a7.08337a","type":"switch","z":"8eb9b9b8.c0df48","name":"IF_Manifest_File_Is_Attached","property":"req.files","propertyType":"msg","rules":[{"t":"nempty"},{"t":"null"},{"t":"empty"}],"checkall":"true","repair":false,"outputs":3,"x":730,"y":240,"wires":[["a66d9749.5947e8"],["77353f3b.32623"],["d8e3f6b1.3de578"]]},{"id":"e45c06b6.5e9bb8","type":"actionflows_out","z":"8eb9b9b8.c0df48","name":"initFromBot out","links":[],"x":2380,"y":160,"wires":[]},{"id":"4c143763.65e198","type":"wait-paths","z":"8eb9b9b8.c0df48","name":"","paths":"[\"path_1\",\"path_2\"]","timeout":15000,"finalTimeout":60000,"x":1980,"y":200,"wires":[["1d3c6c97.a57d23"]]},{"id":"d1fc5af3.9681c8","type":"change","z":"8eb9b9b8.c0df48","name":"","rules":[{"t":"set","p":"paths[\"path_1\"]","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1690,"y":180,"wires":[["4c143763.65e198"]]},{"id":"5264399f.c5d158","type":"change","z":"8eb9b9b8.c0df48","name":"","rules":[{"t":"set","p":"paths[\"path_2\"]","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1770,"y":240,"wires":[["4c143763.65e198"]]},{"id":"3017ad67.ef07f2","type":"switch","z":"8eb9b9b8.c0df48","name":"IF_Initi_From_Bot","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":2390,"y":200,"wires":[["664ab609.0bdcc8"]]},{"id":"664ab609.0bdcc8","type":"actionflows","z":"8eb9b9b8.c0df48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"notifyBOT_AASInitialized","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":2690,"y":200,"wires":[[]]},{"id":"1d3c6c97.a57d23","type":"msg-router","z":"8eb9b9b8.c0df48","routerType":"broadcast","topicDependent":false,"counterReset":false,"msgKeyField":"payload","undefinedHash":false,"outputsInfo":[{"active":true,"clone":false,"delay":"0","weight":"0"},{"active":true,"clone":false,"delay":"0","weight":"0"},{"active":true,"clone":false,"delay":"0","weight":"0"}],"name":"","delaying":"unrelated","msgControl":false,"outputs":3,"x":2170,"y":200,"wires":[["e45c06b6.5e9bb8"],["3017ad67.ef07f2"],["17102f0b.666bd1"]]},{"id":"f75ded18.5eb68","type":"actionflows","z":"8eb9b9b8.c0df48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"readCPSConfiguration","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"private","perf":false,"seq":false,"x":1140,"y":240,"wires":[["6d4a70f.c233b9","69c0916c.3bb99"]]},{"id":"77353f3b.32623","type":"actionflows","z":"8eb9b9b8.c0df48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"createManifest","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1010,"y":180,"wires":[["f75ded18.5eb68","d1fc5af3.9681c8"]]},{"id":"d8e3f6b1.3de578","type":"unsafe-function","z":"8eb9b9b8.c0df48","name":"406 - Not Acceptable","func":"msg.statusCode = 406;\nmsg.payload = \"Not Acceptable\";\nreturn msg;","outputs":1,"noerr":0,"x":1760,"y":380,"wires":[["17102f0b.666bd1"]]},{"id":"b70c1a31.fdfca8","type":"actionflows","z":"8eb9b9b8.c0df48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"notifyBOT_AASInitialized","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":2590,"y":100,"wires":[[]]},{"id":"5e972e63.93534","type":"actionflows","z":"8eb9b9b8.c0df48","info":"Describe your action API here.","untilproptype":"msg","proptype":"msg","name":"populateManifest","prop":"loop","untilprop":"retrievedAssets.length","until":"gte","loop":"inc0","scope":"global","perf":false,"seq":false,"x":1520,"y":240,"wires":[["5264399f.c5d158"]]},{"id":"ccb9f64a.78b388","type":"link in","z":"8eb9b9b8.c0df48","name":"1_In","links":["a317febe.34127"],"x":235,"y":240,"wires":[["4cfd9150.ab0bc"]]},{"id":"17102f0b.666bd1","type":"link out","z":"8eb9b9b8.c0df48","name":"1_Out","links":["25829dfd.30d032"],"x":3135,"y":200,"wires":[]},{"id":"25829dfd.30d032","type":"link in","z":"2a540cc7.026154","name":"1_In","links":["17102f0b.666bd1"],"x":1295,"y":340,"wires":[["b73e18aa.106978","f5c775a9.4370b8"]]},{"id":"407d02e6.9ed59c","type":"actionflows_in","z":"8eb9b9b8.c0df48","name":"handleAttachment in","priority":"50","links":[],"scope":"private","x":1010,"y":580,"wires":[["a5541a5a.f91358","1046a304.ad5ccd"]]},{"id":"67cdf004.fcedf","type":"actionflows_out","z":"8eb9b9b8.c0df48","name":"handleAttachment out","links":[],"x":2160,"y":580,"wires":[]},{"id":"e018a38f.706cb","type":"fs-ops-move","z":"8eb9b9b8.c0df48","name":"","sourcePath":"req.files.manifest[0].destination","sourcePathType":"msg","sourceFilename":"req.files.manifest[0].filename","sourceFilenameType":"msg","destPath":"ModelDir","destPathType":"global","destFilename":"req.files.manifest[0].originalname","destFilenameType":"msg","link":false,"x":1520,"y":520,"wires":[["a1c0d1c.881e73","34cc2028.09c63"]]},{"id":"a1c0d1c.881e73","type":"unsafe-function","z":"8eb9b9b8.c0df48","name":"Read File ","func":"var fs = context.global.get('fs');\n\nfs.readFile(context.global.get('ModelFilePath'), \"utf8\", function read(err, data) {\n    if (err) {\n        throw err;\n    }\n    content = data;\n\n    // Invoke the next step here however you like\n    //console.log(content);   // Put all of the code here (not the best solution)\n    processFile();          // Or put the next step in a function and invoke it\n});\n\nfunction processFile() {\n    msg.payload = content;\n    node.send(msg);\n}\n","outputs":1,"noerr":0,"x":1692.018310546875,"y":519.6482543945312,"wires":[["67cdf004.fcedf","820760d0.856f2"]]},{"id":"820760d0.856f2","type":"debug","z":"8eb9b9b8.c0df48","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1930,"y":520,"wires":[]},{"id":"a5541a5a.f91358","type":"debug","z":"8eb9b9b8.c0df48","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1170,"y":520,"wires":[]},{"id":"34cc2028.09c63","type":"debug","z":"8eb9b9b8.c0df48","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1670,"y":480,"wires":[]},{"id":"1046a304.ad5ccd","type":"switch","z":"8eb9b9b8.c0df48","name":"IF_Manifest_File_Metadata","property":"req.files.manifest","propertyType":"msg","rules":[{"t":"nnull"},{"t":"null"}],"checkall":"true","repair":false,"outputs":2,"x":1280,"y":580,"wires":[["e018a38f.706cb"],["67cdf004.fcedf"]]},{"id":"543184e2.21f97c","type":"actionflows_in","z":"8eb9b9b8.c0df48","name":"populateManifest in","priority":"50","links":[],"scope":"private","x":1010,"y":720,"wires":[["56dad2f8.54ab0c","41d6c2dd.23349c"]]},{"id":"793e827b.19d0dc","type":"actionflows_out","z":"8eb9b9b8.c0df48","name":"populateManifest out","links":[],"x":2160,"y":720,"wires":[]},{"id":"56dad2f8.54ab0c","type":"debug","z":"8eb9b9b8.c0df48","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1192.2333374023438,"y":680.2333374023438,"wires":[]},{"id":"41d6c2dd.23349c","type":"actionflows","z":"8eb9b9b8.c0df48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"createProperty","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1340,"y":720,"wires":[["f0c565e1.8b3e28","f36debc8.d072f8"]]},{"id":"f36debc8.d072f8","type":"unsafe-function","z":"8eb9b9b8.c0df48","name":"Fill Property Fields","func":"msg.newDSM._Attribs.ID = msg.retrievedAssets[msg.loop].id;\nmsg.newDSM._Attribs.Name = msg.retrievedAssets[msg.loop].name;\nmsg.newDSM.Attribute[0].Value[0] = msg.retrievedAssets[msg.loop].macAddress;\nmsg.newDSM.Attribute[2].Value[0] = \"N/A\";\nmsg.newDSM.Attribute[3].Value[0] = \"False\";\nmsg.newDSM.Attribute[4].Value[0] = \"True\";\nmsg.newDSM.SupportedRoleClass[1] = \"AASManifestRoleClassLib/DataStreaming\";\n\n\n// Data Source Definition (DSD)\nvar dsd = msg.retrievedAssets[msg.loop].dataSourceDefinitionReferenceID;\nmsg.newDSM.InternalElement[0]._Attribs.ID = dsd.id;\nmsg.newDSM.InternalElement[0]._Attribs.Name = dsd.name;\nmsg.newDSM.InternalElement[0].Description[0] = dsd.description;\n\n// Data Interface (DI)\nvar di = msg.retrievedAssets[msg.loop].dataSourceDefinitionReferenceID.dataInterfaceReferenceID;\nmsg.newDSM.InternalElement[0].InternalElement[0]._Attribs.ID = di.id;\nmsg.newDSM.InternalElement[0].InternalElement[0]._Attribs.Name = di.name;\nmsg.newDSM.InternalElement[0].InternalElement[0].Attribute[0].Value[0] = di.communicationProtocol;\n\nvar Attribute = msg.newDSM.InternalElement[0].InternalElement[0].InternalElement[0].InternalElement[0];\nmsg.newDSM.InternalElement[0].InternalElement[0].InternalElement[0].InternalElement = [];\nfor(var parameter in di.parameters.parameter){\n    \n    //var newAttribute = Object.assign({}, Attribute);\n    var newAttribute = JSON.parse(JSON.stringify(Attribute));\n    newAttribute._Attribs.ID = di.parameters.parameter[parameter]._id;\n    newAttribute._Attribs.Name = di.parameters.parameter[parameter].name;\n    newAttribute.Attribute[0].Value[0] = di.parameters.parameter[parameter].dataType;\n    newAttribute.Attribute[1].Value[0] = di.parameters.parameter[parameter].defaultValue;\n    newAttribute.Attribute[2].Value[0] = di.parameters.parameter[parameter].actualValue;\n    \n    msg.newDSM.InternalElement[0].InternalElement[0].InternalElement[0].InternalElement.push(newAttribute);\n}\n\n// Data Kind (DK)\nvar dk = msg.retrievedAssets[msg.loop].dataSourceDefinitionReferenceID.dataKindReferenceID;\nmsg.newDSM.InternalElement[0].InternalElement[1]._Attribs.ID = dk.id;\nmsg.newDSM.InternalElement[0].InternalElement[1]._Attribs.Name = dk.name;\nmsg.newDSM.InternalElement[0].InternalElement[1].Attribute[0].Value[0] = dk.format;\nmsg.newDSM.InternalElement[0].InternalElement[1].Attribute[1].Value[0] = dk.quantityKind;\nmsg.newDSM.InternalElement[0].InternalElement[1].Attribute[2].Value[0] = dk.modelType;\nmsg.newDSM.InternalElement[0].InternalElement[1].Attribute[3].Value[0] = \"Dynamic\";\n\nmsg.payload = msg.newDSM;\nmsg.req = {\"params\":{\"id\": \"44152b0c-c1db-4a9a-ba5f-a38cbfff43f7\"}};\n\n\nreturn msg;","outputs":1,"noerr":0,"x":1592.0388793945312,"y":720.3722534179688,"wires":[["14952115.78aaff","6dbe25be.9ced6c"]]},{"id":"6dbe25be.9ced6c","type":"actionflows","z":"8eb9b9b8.c0df48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"addProperty","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1870,"y":720,"wires":[["793e827b.19d0dc","df39674c.458578"]]},{"id":"14952115.78aaff","type":"debug","z":"8eb9b9b8.c0df48","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1772.2333374023438,"y":680.2333374023438,"wires":[]},{"id":"df39674c.458578","type":"debug","z":"8eb9b9b8.c0df48","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":2052.2333374023438,"y":680.2333374023438,"wires":[]},{"id":"fe629e6b.9f19","type":"inject","z":"8eb9b9b8.c0df48","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1080,"y":780,"wires":[["41d6c2dd.23349c"]]},{"id":"f5c775a9.4370b8","type":"subflow:3bcb972f.6d23c8","z":"2a540cc7.026154","name":"","env":[],"x":1830,"y":380,"wires":[],"icon":"node-red-contrib-viseo-log/log.svg"},{"id":"4f5ea1f.9b1276","type":"link in","z":"8eb9b9b8.c0df48","name":"2_In","links":["c082981f.4746d8"],"x":235,"y":920,"wires":[["60a3169c.f221d8"]]},{"id":"2a7f89b7.705da6","type":"link out","z":"8eb9b9b8.c0df48","name":"2_Out","links":["aa890210.5067c"],"x":3135,"y":920,"wires":[]},{"id":"60a3169c.f221d8","type":"actionflows","z":"8eb9b9b8.c0df48","info":"Describe your action API here.","untilproptype":"msg","proptype":"msg","name":"populateManifest","prop":"loop","untilprop":"payload.length","until":"gte","loop":"inc0","scope":"global","perf":false,"seq":false,"x":1510,"y":920,"wires":[["2a7f89b7.705da6"]]},{"id":"ebb94342.e038f","type":"link out","z":"2a540cc7.026154","name":"3_Out","links":["ca8abc6f.4fe66"],"x":795,"y":540,"wires":[]},{"id":"16beb93c.3293e7","type":"link in","z":"2a540cc7.026154","name":"3_In","links":["dd403203.0b72c"],"x":1295,"y":540,"wires":[["3c1ef542.aa2baa","8b5c582c.2c0638"]]},{"id":"ca8abc6f.4fe66","type":"link in","z":"8eb9b9b8.c0df48","name":"3_In","links":["ebb94342.e038f"],"x":235,"y":1060,"wires":[["e37acde9.7d15d"]]},{"id":"dd403203.0b72c","type":"link out","z":"8eb9b9b8.c0df48","name":"3_Out","links":["16beb93c.3293e7"],"x":3135,"y":1060,"wires":[]},{"id":"e37acde9.7d15d","type":"actionflows","z":"8eb9b9b8.c0df48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"persistManifest","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1500,"y":1060,"wires":[["dd403203.0b72c"]]},{"id":"d7375bd2.443ed8","type":"link out","z":"2a540cc7.026154","name":"4_Out","links":["ca784e56.b87dd"],"x":795,"y":740,"wires":[]},{"id":"360e1e05.511632","type":"link in","z":"2a540cc7.026154","name":"4_In","links":["dbbd984f.bbae88"],"x":1295,"y":740,"wires":[["a7efbfed.f05c9","562e5eab.332f"]]},{"id":"ca784e56.b87dd","type":"link in","z":"8eb9b9b8.c0df48","name":"4_In","links":["d7375bd2.443ed8"],"x":235,"y":1180,"wires":[["f9196fe2.66a69"]]},{"id":"dbbd984f.bbae88","type":"link out","z":"8eb9b9b8.c0df48","name":"4_Out","links":["360e1e05.511632"],"x":3135,"y":1180,"wires":[]},{"id":"d38b1384.ca0f8","type":"unsafe-function","z":"8eb9b9b8.c0df48","name":"Object2XMLString","func":"var XML = context.global.get('XML');\nvar xml_string_composed = XML.stringify(msg.payload, 'CAEXFile');\nmsg.payload = xml_string_composed;\nmsg.headers = {};\nmsg.headers['content-type'] = 'application/xml';\nreturn msg;","outputs":1,"noerr":0,"x":1790,"y":1180,"wires":[["dbbd984f.bbae88"]]},{"id":"f9196fe2.66a69","type":"actionflows","z":"8eb9b9b8.c0df48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"readManifest","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1230,"y":1180,"wires":[["d38b1384.ca0f8"]]},{"id":"cdc2edce.d346c","type":"debug","z":"2a540cc7.026154","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":410,"y":780,"wires":[]},{"id":"f5a93d82.efa2a","type":"debug","z":"2a540cc7.026154","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":410,"y":920,"wires":[]},{"id":"ccff1be9.5cb038","type":"link out","z":"2a540cc7.026154","name":"5_Out","links":["9103c97e.6d0168"],"x":795,"y":880,"wires":[]},{"id":"ad5b9728.6e0018","type":"link in","z":"2a540cc7.026154","name":"5_In","links":["b1127961.f2dee8"],"x":1295,"y":880,"wires":[["339ce7f7.3cc878","8ac5685b.f35ce8"]]},{"id":"bf3c9456.004e48","type":"actionflows","z":"8eb9b9b8.c0df48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"readHeaders","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1230,"y":1280,"wires":[["90c0486b.58aef8"]]},{"id":"90c0486b.58aef8","type":"unsafe-function","z":"8eb9b9b8.c0df48","name":"Object2XMLString","func":"var XML = context.global.get('XML');\nvar xml_string_composed = XML.stringify(msg.payload, 'InternalElement');\nmsg.payload = xml_string_composed;\nmsg.headers = {};\nmsg.headers['content-type'] = 'application/xml';\nreturn msg;","outputs":1,"noerr":0,"x":1790,"y":1280,"wires":[["b1127961.f2dee8"]]},{"id":"9103c97e.6d0168","type":"link in","z":"8eb9b9b8.c0df48","name":"5_In","links":["ccff1be9.5cb038"],"x":235,"y":1280,"wires":[["bf3c9456.004e48"]]},{"id":"b1127961.f2dee8","type":"link out","z":"8eb9b9b8.c0df48","name":"5_Out","links":["ad5b9728.6e0018"],"x":3135,"y":1280,"wires":[]},{"id":"a6a51b0d.c2d148","type":"link out","z":"2a540cc7.026154","name":"6_Out","links":["957c7d69.e1118"],"x":795,"y":1120,"wires":[]},{"id":"71a1eecc.bb6cb","type":"link in","z":"2a540cc7.026154","name":"6_In","links":["e77e5ad7.62a2e8"],"x":1295,"y":1120,"wires":[["4727257d.a314ec","ecda4542.a2d838"]]},{"id":"cbbf4839.abed78","type":"switch","z":"8eb9b9b8.c0df48","name":"IF_Error_Detected","property":"payload.errors","propertyType":"msg","rules":[{"t":"empty"},{"t":"nempty"}],"checkall":"false","repair":false,"outputs":2,"x":1630,"y":1420,"wires":[["885cb63b.4eadc8"],["38605bde.310e64"]]},{"id":"5e8831c9.cf0bd","type":"unsafe-function","z":"8eb9b9b8.c0df48","name":"preparingCheckingRules","func":"var errors = [];\nvar manifest = msg.payload;\nmsg.payload = {};\n\nif((typeof context.global.get('DataStreamingEndpoint') == \"undefined\") || \n   (typeof context.global.get('ModelDir') == \"undefined\") ||\n   (typeof context.global.get('ModelFilePath') == \"undefined\") ||\n   (typeof context.global.get('namespace') == \"undefined\") ||\n   (manifest === \"\"))\n   {\n        errors.push(\"Asset Administration Shell not configured\");\n    } \n \nmsg.payload.errors = errors;\n    \n\nreturn msg;","outputs":1,"noerr":0,"x":1370,"y":1420,"wires":[["cbbf4839.abed78","2aa7bea6.42d9a2"]]},{"id":"885cb63b.4eadc8","type":"unsafe-function","z":"8eb9b9b8.c0df48","name":"createOutputMsg","func":"msg.statusCode = 200;\nmsg.payload = \"ok\";\nmsg.headers = {};\nmsg.headers['content-type'] = 'text/plain';\nreturn msg;","outputs":1,"noerr":0,"x":1890,"y":1380,"wires":[["e77e5ad7.62a2e8"]]},{"id":"38605bde.310e64","type":"unsafe-function","z":"8eb9b9b8.c0df48","name":"createOutputMsg","func":"msg.statusCode = 503;\nmsg.payload = msg.payload.errors;\nmsg.headers = {};\nmsg.headers['content-type'] = 'text/plain';\nreturn msg;","outputs":1,"noerr":0,"x":1890,"y":1440,"wires":[["e77e5ad7.62a2e8"]]},{"id":"19a77154.1de1cf","type":"actionflows","z":"8eb9b9b8.c0df48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"readManifest","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1150,"y":1420,"wires":[["5e8831c9.cf0bd"]]},{"id":"957c7d69.e1118","type":"link in","z":"8eb9b9b8.c0df48","name":"6_In","links":["a6a51b0d.c2d148"],"x":235,"y":1420,"wires":[["19a77154.1de1cf"]]},{"id":"e77e5ad7.62a2e8","type":"link out","z":"8eb9b9b8.c0df48","name":"6_Out","links":["71a1eecc.bb6cb"],"x":3135,"y":1420,"wires":[]},{"id":"921923c0.a4616","type":"link out","z":"2a540cc7.026154","name":"7_Out","links":["d2ec1566.a212a8"],"x":795,"y":1380,"wires":[]},{"id":"73a62a0e.0f2ce4","type":"link in","z":"2a540cc7.026154","name":"7_In","links":["561130b5.114a8"],"x":1295,"y":1380,"wires":[["a3d0916.f70667","48c29c13.3d68c4"]]},{"id":"7fa2ab3c.bc01b4","type":"actionflows","z":"8eb9b9b8.c0df48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"readSubmodels","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1160,"y":1580,"wires":[["7406e2f0.90c4cc","bf18d4f2.663318"]]},{"id":"7406e2f0.90c4cc","type":"debug","z":"8eb9b9b8.c0df48","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1350,"y":1540,"wires":[]},{"id":"b154e776.3001f8","type":"debug","z":"8eb9b9b8.c0df48","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":2270,"y":1540,"wires":[]},{"id":"775ef564.a1c5cc","type":"unsafe-function","z":"8eb9b9b8.c0df48","name":"Object2XMLString","func":"var XML = context.global.get('XML');\nvar xml_string_composed = XML.stringify(msg.payload, 'InternalElement');\nmsg.payload = xml_string_composed;\nmsg.headers = {};\nmsg.headers['content-type'] = 'application/xml';\nreturn msg;","outputs":1,"noerr":0,"x":2030,"y":1580,"wires":[["b154e776.3001f8","561130b5.114a8"]]},{"id":"bf18d4f2.663318","type":"unsafe-function","z":"8eb9b9b8.c0df48","name":"OnlyPublicSubmodels","func":"var submodels = msg.payload.InternalElement;\n//var visibleSubmodels = [];\nfor(var submodel = 0; submodel < submodels.length; submodel++){\n    var attributes = submodels[submodel].Attribute;\n    for(var attribute in attributes){\n        if(attributes[attribute]._Attribs.Name == \"Visibility\" && attributes[attribute].Value[0].toLowerCase() == \"false\"){\n            //Remove from the list\n            submodels.splice(submodel, 1);\n            submodel--;\n            break;\n        } else if(attributes[attribute]._Attribs.Name == \"Visibility\" && attributes[attribute].Value[0].toLowerCase() == \"true\"){\n            //Check only DataManifests\n            var dsms = submodels[submodel].InternalElement;\n            if(typeof dsms !== \"undefined\"){\n                for(var dsm = 0; dsm < dsms.length; dsm++){\n                    var dsm_attributes = dsms[dsm].Attribute;\n                    for(var dsm_attribute in dsm_attributes){\n                        if(dsm_attributes[dsm_attribute]._Attribs.Name == \"Visibility\" && dsm_attributes[dsm_attribute].Value[0] == \"false\"){\n                            //Remove from the list\n                            dsms.splice(dsm, 1);\n                            dsm--;\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n    }\n}\n\nreturn msg;","outputs":1,"noerr":0,"x":1720,"y":1580,"wires":[["775ef564.a1c5cc","dece8e2d.32c8d"]]},{"id":"dece8e2d.32c8d","type":"debug","z":"8eb9b9b8.c0df48","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1910,"y":1540,"wires":[]},{"id":"d2ec1566.a212a8","type":"link in","z":"8eb9b9b8.c0df48","name":"7_In","links":["921923c0.a4616"],"x":235,"y":1580,"wires":[["7fa2ab3c.bc01b4"]]},{"id":"561130b5.114a8","type":"link out","z":"8eb9b9b8.c0df48","name":"7_Out","links":["73a62a0e.0f2ce4"],"x":3135,"y":1580,"wires":[]},{"id":"28373d5a.6c7e82","type":"link out","z":"2a540cc7.026154","name":"8_Out","links":["c0fd424f.dff38"],"x":795,"y":1580,"wires":[]},{"id":"d0041f5c.74573","type":"link in","z":"2a540cc7.026154","name":"8_In","links":["619ed283.08d5dc"],"x":1295,"y":1580,"wires":[["270734b8.1f17ac","c9d895e8.06b5a8"]]},{"id":"b21e2094.a8df5","type":"debug","z":"8eb9b9b8.c0df48","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1350,"y":1680,"wires":[]},{"id":"a6186388.5ec26","type":"actionflows","z":"8eb9b9b8.c0df48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"readSubmodel","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1160,"y":1720,"wires":[["b21e2094.a8df5","86b39b25.e4f088"]]},{"id":"86b39b25.e4f088","type":"unsafe-function","z":"8eb9b9b8.c0df48","name":"Object2XMLString","func":"if(msg.statusCode == '200'){\n    var XML = context.global.get('XML');\n    /*var strignSubmodels = \"\";\n    for(var submodelIndex in msg.payload){\n        strignSubmodels = strignSubmodels + XML.stringify(msg.payload[submodelIndex], 'InternalElement'); \n    }\n    var xml_string_composed = strignSubmodels;//XML.stringify(strignSubmodels, 'InternalElement');\n    */\n    var xml_string_composed = XML.stringify(msg.payload, 'InternalElement');\n    msg.payload = xml_string_composed;\n    msg.headers = {};\n    msg.headers['content-type'] = 'application/xml';\n    return msg;\n}\nmsg.headers = {};\nmsg.headers['content-type'] = 'text/plain';\nreturn msg;\n","outputs":1,"noerr":0,"x":1710,"y":1720,"wires":[["619ed283.08d5dc"]]},{"id":"619ed283.08d5dc","type":"link out","z":"8eb9b9b8.c0df48","name":"8_Out","links":["d0041f5c.74573"],"x":3135,"y":1720,"wires":[]},{"id":"c0fd424f.dff38","type":"link in","z":"8eb9b9b8.c0df48","name":"8_In","links":["28373d5a.6c7e82"],"x":235,"y":1720,"wires":[["a6186388.5ec26"]]},{"id":"3fae793e.5bc466","type":"link out","z":"2a540cc7.026154","name":"9_Out","links":["ff15f8c6.f3fe48"],"x":795,"y":1780,"wires":[]},{"id":"317bff9.86de9","type":"link in","z":"2a540cc7.026154","name":"9_In","links":["6b07da56.cb7594"],"x":1295,"y":1780,"wires":[["108aad52.5830a3","70ce1be4.37d734"]]},{"id":"86728b76.103548","type":"unsafe-function","z":"8eb9b9b8.c0df48","name":"Invoke Manifest CRUD","func":"/*if(msg.req.headers['content-type'] != \"application/xml\"){\n    msg.statusCode = 400;\n    return msg;\n}*/\nvar XML = context.global.get('XML');\nvar submodel = XML.parse( msg.payload, { preserveAttributes: true, forceArrays: true  } );\nif(submodel._Attribs.RefBaseSystemUnitPath == \"ASSSystemUnitClassLib/Submodel\"){\n    msg.payload = submodel;\n    msg.receivedObject = submodel;\n    var af = context.global.get(\"actionflows\");\n    var action_ = af.invoke(\"addSubmodel\", msg);\n    action_.then(function(msg){\n        node.send(msg);\n        return msg;\n    });\n} else{\n    msg.statusCode = 400;\n    return msg;\n}\n\n\n","outputs":1,"noerr":0,"x":1180,"y":1880,"wires":[["9a14c83f.496778","f76be698.2102d8"]]},{"id":"9a14c83f.496778","type":"debug","z":"8eb9b9b8.c0df48","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1360,"y":1820,"wires":[]},{"id":"c10ae21.e1b642","type":"actionflows","z":"8eb9b9b8.c0df48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"informAASUI_ManifestChange","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1740,"y":1900,"wires":[[]]},{"id":"b7772243.2ea79","type":"actionflows","z":"8eb9b9b8.c0df48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"notifyBOT_SubmodelAdd","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1710,"y":1940,"wires":[[]]},{"id":"f76be698.2102d8","type":"msg-router","z":"8eb9b9b8.c0df48","routerType":"broadcast","topicDependent":false,"counterReset":false,"msgKeyField":"payload","undefinedHash":false,"outputsInfo":[{"active":true,"clone":false,"delay":"0","weight":"0"},{"active":true,"clone":false,"delay":"0","weight":"0"},{"active":true,"clone":false,"delay":"0","weight":"0"}],"name":"","delaying":"unrelated","msgControl":false,"outputs":3,"x":1420,"y":1880,"wires":[["6b07da56.cb7594"],["c10ae21.e1b642"],["b7772243.2ea79"]]},{"id":"6b07da56.cb7594","type":"link out","z":"8eb9b9b8.c0df48","name":"9_Out","links":["317bff9.86de9"],"x":3135,"y":1860,"wires":[]},{"id":"ff15f8c6.f3fe48","type":"link in","z":"8eb9b9b8.c0df48","name":"9_In","links":["3fae793e.5bc466"],"x":235,"y":1880,"wires":[["86728b76.103548"]]},{"id":"c04d4aa8.fdf6c8","type":"link out","z":"2a540cc7.026154","name":"10_Out","links":[],"x":795,"y":1960,"wires":[]},{"id":"389f9010.55dc6","type":"link in","z":"2a540cc7.026154","name":"10_In","links":["fbe8d71e.479ce8"],"x":1295,"y":1960,"wires":[["98e1e3a8.94183","ed6a20a9.0c7a5"]]},{"id":"69193b24.2e2284","type":"debug","z":"8eb9b9b8.c0df48","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1370,"y":2020,"wires":[]},{"id":"b5c4b9c8.ceafb8","type":"actionflows","z":"8eb9b9b8.c0df48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"removeSubmodel","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1170,"y":2080,"wires":[["69193b24.2e2284","74c9713b.7510f"]]},{"id":"e9bdb66a.d6f7c8","type":"actionflows","z":"8eb9b9b8.c0df48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"informAASUI_ManifestChange","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1750,"y":2100,"wires":[[]]},{"id":"5eb9.f2fdd1470c","type":"actionflows","z":"8eb9b9b8.c0df48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"notifyBOT_SubmodelRemove","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1750,"y":2140,"wires":[[]]},{"id":"74c9713b.7510f","type":"msg-router","z":"8eb9b9b8.c0df48","routerType":"broadcast","topicDependent":false,"counterReset":false,"msgKeyField":"payload","undefinedHash":false,"outputsInfo":[{"active":true,"clone":false,"delay":"0","weight":"0"},{"active":true,"clone":false,"delay":"0","weight":"0"},{"active":true,"clone":false,"delay":"0","weight":"0"}],"name":"","delaying":"unrelated","msgControl":false,"outputs":3,"x":1430,"y":2080,"wires":[["fbe8d71e.479ce8"],["e9bdb66a.d6f7c8"],["5eb9.f2fdd1470c"]]},{"id":"fbe8d71e.479ce8","type":"link out","z":"8eb9b9b8.c0df48","name":"10_Out","links":["389f9010.55dc6"],"x":3135,"y":2060,"wires":[]},{"id":"867ab613.303478","type":"link in","z":"8eb9b9b8.c0df48","name":"10_In","links":[],"x":235,"y":2080,"wires":[["b5c4b9c8.ceafb8"]]},{"id":"d8eea54b.2106a8","type":"link out","z":"2a540cc7.026154","name":"11_Out","links":["1e88b67.649314a"],"x":795,"y":2140,"wires":[]},{"id":"e070ca2.1859f38","type":"link in","z":"2a540cc7.026154","name":"11_In","links":["c382bd56.979b8"],"x":1295,"y":2140,"wires":[["c888ec81.ff43e","d4cc5b4c.db3918"]]},{"id":"d0bf8e0c.dbd99","type":"debug","z":"8eb9b9b8.c0df48","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1370,"y":2198,"wires":[]},{"id":"6c4b5166.7b2df","type":"unsafe-function","z":"8eb9b9b8.c0df48","name":"Invoke Manifest CRUD","func":"/*if(msg.req.headers['content-type'] != \"application/xml\"){\n    msg.statusCode = 400;\n    return msg;\n}*/\nvar XML = context.global.get('XML');\nvar submodel = XML.parse( msg.payload, { preserveAttributes: true, forceArrays: true  } );\nif(submodel._Attribs.RefBaseSystemUnitPath == \"ASSSystemUnitClassLib/Submodel\"){\n    msg.payload = submodel;\n    msg.receivedObject = submodel;\n    var af = context.global.get(\"actionflows\");\n    var action_ = af.invoke(\"updateSubmodel\", msg);\n    action_.then(function(msg){\n        node.send(msg);\n        return msg;\n    });\n} else{\n    msg.statusCode = 400;\n    return msg;\n}\n\n","outputs":1,"noerr":0,"x":1170,"y":2258,"wires":[["d0bf8e0c.dbd99","715952ba.e7b8cc"]]},{"id":"35839913.b8ac96","type":"actionflows","z":"8eb9b9b8.c0df48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"informAASUI_ManifestChange","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1750,"y":2278,"wires":[[]]},{"id":"19f65481.6369db","type":"actionflows","z":"8eb9b9b8.c0df48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"notifyBOT_SubmodelUpdate","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1740,"y":2318,"wires":[[]]},{"id":"715952ba.e7b8cc","type":"msg-router","z":"8eb9b9b8.c0df48","routerType":"broadcast","topicDependent":false,"counterReset":false,"msgKeyField":"payload","undefinedHash":false,"outputsInfo":[{"active":true,"clone":false,"delay":"0","weight":"0"},{"active":true,"clone":false,"delay":"0","weight":"0"},{"active":true,"clone":false,"delay":"0","weight":"0"}],"name":"","delaying":"unrelated","msgControl":false,"outputs":3,"x":1430,"y":2258,"wires":[["c382bd56.979b8"],["35839913.b8ac96"],["19f65481.6369db"]]},{"id":"c382bd56.979b8","type":"link out","z":"8eb9b9b8.c0df48","name":"11_Out","links":["e070ca2.1859f38"],"x":3135,"y":2238,"wires":[]},{"id":"1e88b67.649314a","type":"link in","z":"8eb9b9b8.c0df48","name":"11_In","links":["d8eea54b.2106a8"],"x":235,"y":2258,"wires":[["6c4b5166.7b2df"]]},{"id":"235535c3.5b704a","type":"actionflows_in","z":"8eb9b9b8.c0df48","name":"readSubmodelsFromAASUI in","priority":"50","links":[],"scope":"global","x":720,"y":2460,"wires":[["4cf0eadd.4d9964"]]},{"id":"4cf0eadd.4d9964","type":"actionflows","z":"8eb9b9b8.c0df48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"readSubmodels","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1280,"y":2460,"wires":[["bcb065a6.6e6a88","87d4eeef.a05e4"]]},{"id":"bcb065a6.6e6a88","type":"actionflows_out","z":"8eb9b9b8.c0df48","name":"readSubmodelsFromAASUI out","links":[],"x":2670,"y":2460,"wires":[]},{"id":"87d4eeef.a05e4","type":"debug","z":"8eb9b9b8.c0df48","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1470,"y":2420,"wires":[]},{"id":"9e83e94c.307b38","type":"actionflows_in","z":"8eb9b9b8.c0df48","name":"updateSubmodelsFromAASUI in","priority":"50","links":[],"scope":"global","x":730,"y":2540,"wires":[["d861f245.1b395"]]},{"id":"4209a3b.eb0185c","type":"actionflows_out","z":"8eb9b9b8.c0df48","name":"updateSubmodelsFromAASUI out","links":[],"x":2680,"y":2540,"wires":[]},{"id":"5ea44b88.b04704","type":"actionflows","z":"8eb9b9b8.c0df48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"updateSubmodel","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1870,"y":2540,"wires":[["4209a3b.eb0185c"]]},{"id":"d861f245.1b395","type":"unsafe-function","z":"8eb9b9b8.c0df48","name":"reterieveSubmodels","func":"var submodels = msg.payload.InternalElement;\nmsg.payload = submodels;\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1300,"y":2540,"wires":[["4909138a.c42dbc"]]},{"id":"4909138a.c42dbc","type":"split","z":"8eb9b9b8.c0df48","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1570,"y":2540,"wires":[["6460c7ea.ac7c38","5ea44b88.b04704"]]},{"id":"6460c7ea.ac7c38","type":"debug","z":"8eb9b9b8.c0df48","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1690,"y":2500,"wires":[]},{"id":"7ec8dca7.c373f4","type":"comment","z":"8eb9b9b8.c0df48","name":"Interaction with the AASUI, to be checked","info":"","x":460,"y":2360,"wires":[]},{"id":"7afc7cc1.2dd904","type":"link out","z":"2a540cc7.026154","name":"12_Out","links":["1aa7cade.02ded5"],"x":795,"y":2340,"wires":[]},{"id":"cf564196.f671a","type":"link in","z":"2a540cc7.026154","name":"12_In","links":["37647ad0.b2da96"],"x":1295,"y":2340,"wires":[["ed70b7b6.375978","3b6c3fbc.b97f"]]},{"id":"fc29ca93.0b3078","type":"debug","z":"8eb9b9b8.c0df48","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1390,"y":2660,"wires":[]},{"id":"13dc0442.33517c","type":"actionflows","z":"8eb9b9b8.c0df48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"readProperty","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1150,"y":2700,"wires":[["fc29ca93.0b3078","434d495a.2e9398"]]},{"id":"434d495a.2e9398","type":"unsafe-function","z":"8eb9b9b8.c0df48","name":"Object2XMLString","func":"if(msg.statusCode == '200'){\n    var XML = context.global.get('XML');\n    /*var strignSubmodels = \"\";\n    for(var submodelIndex in msg.payload){\n        strignSubmodels = strignSubmodels + XML.stringify(msg.payload[submodelIndex], 'InternalElement'); \n    }\n    var xml_string_composed = strignSubmodels;//XML.stringify(strignSubmodels, 'InternalElement');\n    */\n    var xml_string_composed = XML.stringify(msg.payload, 'InternalElement');\n    msg.payload = xml_string_composed;\n    msg.headers = {};\n    msg.headers['content-type'] = 'application/xml';\n    return msg;\n}\nmsg.headers = {};\nmsg.headers['content-type'] = 'text/plain';\nreturn msg;","outputs":1,"noerr":0,"x":1450,"y":2700,"wires":[["37647ad0.b2da96"]]},{"id":"37647ad0.b2da96","type":"link out","z":"8eb9b9b8.c0df48","name":"12_Out","links":["cf564196.f671a"],"x":3115,"y":2700,"wires":[]},{"id":"1aa7cade.02ded5","type":"link in","z":"8eb9b9b8.c0df48","name":"12_In","links":["7afc7cc1.2dd904"],"x":235,"y":2700,"wires":[["13dc0442.33517c"]]},{"id":"25c1be10.de7002","type":"link in","z":"2a540cc7.026154","name":"13_In","links":["6df51324.fa545c"],"x":1295,"y":2560,"wires":[["52a1a7cc.e19e68","9a8df22d.dc575"]]},{"id":"55ed1ad5.c0f624","type":"link out","z":"2a540cc7.026154","name":"13_Out","links":[],"x":795,"y":2560,"wires":[]},{"id":"d9712752.e205f8","type":"unsafe-function","z":"8eb9b9b8.c0df48","name":"Invoke Manifest CRUD","func":"/*if(msg.req.headers['content-type'] != \"application/xml\"){\n    msg.statusCode = 400;\n    return msg;\n}*/\nvar XML = context.global.get('XML');\nvar property = XML.parse( msg.payload, { preserveAttributes: true, forceArrays: true  } );\nif(property._Attribs.RefBaseSystemUnitPath.includes(\"ASSSystemUnitClassLib/Property\")){\n    msg.payload = property;\n    msg.receivedObject = property;\n    var af = context.global.get(\"actionflows\");\n    var action_ = af.invoke(\"addProperty\", msg);\n    action_.then(function(msg){\n        node.send(msg);\n        return msg;\n    });\n} else{\n    msg.statusCode = 400;\n    return msg;\n}\n\n\n","outputs":1,"noerr":0,"x":1180,"y":2880,"wires":[["e4beaad0.60e3a8","c20a4c3f.6a301"]]},{"id":"e4beaad0.60e3a8","type":"debug","z":"8eb9b9b8.c0df48","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1390,"y":2820,"wires":[]},{"id":"e0573bbb.50fa88","type":"actionflows","z":"8eb9b9b8.c0df48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"informAASUI_ManifestChange","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1760,"y":2900,"wires":[[]]},{"id":"3dcb0473.07639c","type":"actionflows","z":"8eb9b9b8.c0df48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"notifyBOT_PropertyAdd","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1740,"y":2940,"wires":[[]]},{"id":"c20a4c3f.6a301","type":"msg-router","z":"8eb9b9b8.c0df48","routerType":"broadcast","topicDependent":false,"counterReset":false,"msgKeyField":"payload","undefinedHash":false,"outputsInfo":[{"active":true,"clone":false,"delay":"0","weight":"0"},{"active":true,"clone":false,"delay":"0","weight":"0"},{"active":true,"clone":false,"delay":"0","weight":"0"}],"name":"","delaying":"unrelated","msgControl":false,"outputs":3,"x":1420,"y":2880,"wires":[["6df51324.fa545c"],["e0573bbb.50fa88"],["3dcb0473.07639c"]]},{"id":"6df51324.fa545c","type":"link out","z":"8eb9b9b8.c0df48","name":"13_Out","links":["25c1be10.de7002"],"x":3115,"y":2860,"wires":[]},{"id":"d2c32cfa.a584d","type":"link in","z":"8eb9b9b8.c0df48","name":"13_In","links":[],"x":235,"y":2880,"wires":[["d9712752.e205f8"]]},{"id":"24295937.1a4926","type":"link in","z":"2a540cc7.026154","name":"14_In","links":["437df2de.54193c"],"x":1295,"y":2740,"wires":[["1791bb2.2f81445","69ae13d5.1bb6ac"]]},{"id":"95ff14c6.9435c8","type":"link out","z":"2a540cc7.026154","name":"14_Out","links":["9bce68b5.dc7c88"],"x":795,"y":2740,"wires":[]},{"id":"36405b0f.f65c04","type":"actionflows","z":"8eb9b9b8.c0df48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"removeProperty","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1160,"y":3040,"wires":[["5e6107fc.5dd2b8","820fdfb9.a637f"]]},{"id":"5e6107fc.5dd2b8","type":"debug","z":"8eb9b9b8.c0df48","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1390,"y":2980,"wires":[]},{"id":"f1222332.15756","type":"actionflows","z":"8eb9b9b8.c0df48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"informAASUI_ManifestChange","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1770,"y":3060,"wires":[[]]},{"id":"afb9f002.454cb","type":"actionflows","z":"8eb9b9b8.c0df48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"notifyBOT_PropertyRemove","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1760,"y":3100,"wires":[[]]},{"id":"820fdfb9.a637f","type":"msg-router","z":"8eb9b9b8.c0df48","routerType":"broadcast","topicDependent":false,"counterReset":false,"msgKeyField":"payload","undefinedHash":false,"outputsInfo":[{"active":true,"clone":false,"delay":"0","weight":"0"},{"active":true,"clone":false,"delay":"0","weight":"0"},{"active":true,"clone":false,"delay":"0","weight":"0"}],"name":"","delaying":"unrelated","msgControl":false,"outputs":3,"x":1420,"y":3040,"wires":[["437df2de.54193c"],["f1222332.15756"],["afb9f002.454cb"]]},{"id":"437df2de.54193c","type":"link out","z":"8eb9b9b8.c0df48","name":"14_Out","links":["24295937.1a4926"],"x":3115,"y":3020,"wires":[]},{"id":"9bce68b5.dc7c88","type":"link in","z":"8eb9b9b8.c0df48","name":"14_In","links":["95ff14c6.9435c8"],"x":235,"y":3040,"wires":[["36405b0f.f65c04"]]},{"id":"d78b901e.99408","type":"link in","z":"2a540cc7.026154","name":"15_In","links":["a79b7c45.718e3"],"x":1295,"y":2900,"wires":[["61157f50.eb84a","b9559f12.b6efc"]]},{"id":"2bd300d0.01e9e","type":"link out","z":"2a540cc7.026154","name":"15_Out","links":["34247c2f.2b2464"],"x":795,"y":2900,"wires":[]},{"id":"4dc38b63.e90794","type":"debug","z":"8eb9b9b8.c0df48","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1390,"y":3160,"wires":[]},{"id":"9ea19ff1.c3ace","type":"unsafe-function","z":"8eb9b9b8.c0df48","name":"Invoke Manifest CRUD","func":"/*if(msg.req.headers['content-type'] != \"application/xml\"){\n    msg.statusCode = 400;\n    return msg;\n}*/\nvar XML = context.global.get('XML');\nvar submodel = XML.parse( msg.payload, { preserveAttributes: true, forceArrays: true  } );\nif(submodel._Attribs.RefBaseSystemUnitPath.includes(\"ASSSystemUnitClassLib/Property\")){\n    msg.payload = property;\n    msg.receivedObject = property;\n    var af = context.global.get(\"actionflows\");\n    var action_ = af.invoke(\"updateProperty\", msg);\n    action_.then(function(msg){\n        node.send(msg);\n        return msg;\n    });\n} else{\n    msg.statusCode = 400;\n    return msg;\n}\n\n","outputs":1,"noerr":0,"x":1170,"y":3220,"wires":[["4dc38b63.e90794","8490b5b4.9b8018"]]},{"id":"5f078d19.6cd8a4","type":"actionflows","z":"8eb9b9b8.c0df48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"informAASUI_ManifestChange","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1750,"y":3240,"wires":[[]]},{"id":"1871f81.4154308","type":"actionflows","z":"8eb9b9b8.c0df48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"notifyBOT_PropertyUpdate","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1740,"y":3280,"wires":[[]]},{"id":"8490b5b4.9b8018","type":"msg-router","z":"8eb9b9b8.c0df48","routerType":"broadcast","topicDependent":false,"counterReset":false,"msgKeyField":"payload","undefinedHash":false,"outputsInfo":[{"active":true,"clone":false,"delay":"0","weight":"0"},{"active":true,"clone":false,"delay":"0","weight":"0"},{"active":true,"clone":false,"delay":"0","weight":"0"}],"name":"","delaying":"unrelated","msgControl":false,"outputs":3,"x":1420,"y":3220,"wires":[["a79b7c45.718e3"],["5f078d19.6cd8a4"],["1871f81.4154308"]]},{"id":"a79b7c45.718e3","type":"link out","z":"8eb9b9b8.c0df48","name":"15_Out","links":["d78b901e.99408"],"x":3115,"y":3200,"wires":[]},{"id":"34247c2f.2b2464","type":"link in","z":"8eb9b9b8.c0df48","name":"15_In","links":["2bd300d0.01e9e"],"x":235,"y":3220,"wires":[["9ea19ff1.c3ace"]]},{"id":"e4b898ee.2aea08","type":"link out","z":"2a540cc7.026154","name":"16_Out_a","links":["276aa7df.3c2b98"],"x":795,"y":3160,"wires":[]},{"id":"70b68740.e36158","type":"link out","z":"2a540cc7.026154","name":"16_Out_b","links":["3ced04fe.1ac76c"],"x":795,"y":3280,"wires":[]},{"id":"c178f2ab.2bd54","type":"actionflows","z":"8eb9b9b8.c0df48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"configureDataFlow","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"protected","perf":false,"seq":false,"x":1670,"y":3460,"wires":[["a210a85a.69da98"]]},{"id":"cfc9d0fc.4031b","type":"debug","z":"8eb9b9b8.c0df48","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1140.65478515625,"y":3489.7274169921875,"wires":[]},{"id":"40dcca9d.9b0274","type":"change","z":"8eb9b9b8.c0df48","name":"","rules":[{"t":"set","p":"requestedProperty","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1430,"y":3460,"wires":[["c178f2ab.2bd54"]]},{"id":"a210a85a.69da98","type":"actionflows","z":"8eb9b9b8.c0df48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"callInternalInterface","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1870,"y":3460,"wires":[["5870fae0.7b0c14","ef0ee051.34a21","6c711d.3b6aeee4","ad7750fd.829db"]]},{"id":"a876fe95.cd633","type":"actionflows","z":"8eb9b9b8.c0df48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"readProperty","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":990,"y":3540,"wires":[["cfc9d0fc.4031b","9fefa12b.73f65"]]},{"id":"9fefa12b.73f65","type":"switch","z":"8eb9b9b8.c0df48","name":"IF_StatusCode","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"200","vt":"str"},{"t":"eq","v":"400","vt":"str"},{"t":"eq","v":"404","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":1180,"y":3540,"wires":[["40dcca9d.9b0274"],["6c711d.3b6aeee4"],["6c711d.3b6aeee4"]]},{"id":"5870fae0.7b0c14","type":"actionflows","z":"8eb9b9b8.c0df48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"notifyBOT_NewLivedata","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":2550,"y":3420,"wires":[[]]},{"id":"ef0ee051.34a21","type":"actionflows_out","z":"8eb9b9b8.c0df48","name":"getSnmpSysDscrProperty out","links":[],"x":2560,"y":3460,"wires":[]},{"id":"e5c7973.3614768","type":"change","z":"8eb9b9b8.c0df48","name":"","rules":[{"t":"set","p":"mep","pt":"msg","to":"subscribe","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":770,"y":3540,"wires":[["a876fe95.cd633"]]},{"id":"802da4c3.7e6ce8","type":"change","z":"8eb9b9b8.c0df48","name":"","rules":[{"t":"set","p":"mep","pt":"msg","to":"requestReply","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":770,"y":3420,"wires":[["a876fe95.cd633"]]},{"id":"6c711d.3b6aeee4","type":"unsafe-function","z":"8eb9b9b8.c0df48","name":"checkMsgRequest","func":"if(msg.res){\n    return msg;\n}\n","outputs":1,"noerr":0,"x":2190,"y":3540,"wires":[["652c5838.4bbe18","57abe499.00e8fc"]]},{"id":"d38342a7.b22b7","type":"actionflows","z":"8eb9b9b8.c0df48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"notifyAASUI_DataStreamingMsg","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":2570,"y":3340,"wires":[[]]},{"id":"ad7750fd.829db","type":"switch","z":"8eb9b9b8.c0df48","name":"IF_status_true_from_DataStream","property":"payload.status","propertyType":"msg","rules":[{"t":"eq","v":"true","vt":"str"},{"t":"eq","v":"500","vt":"str"},{"t":"eq","v":"false","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":2200,"y":3340,"wires":[["d38342a7.b22b7","b80fff3.67e4f"],["d38342a7.b22b7"],["d38342a7.b22b7"]]},{"id":"652c5838.4bbe18","type":"debug","z":"8eb9b9b8.c0df48","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":2390,"y":3500,"wires":[]},{"id":"276aa7df.3c2b98","type":"link in","z":"8eb9b9b8.c0df48","name":"16_In_a","links":["e4b898ee.2aea08"],"x":235,"y":3420,"wires":[["802da4c3.7e6ce8"]]},{"id":"3ced04fe.1ac76c","type":"link in","z":"8eb9b9b8.c0df48","name":"16_In_b","links":["70b68740.e36158"],"x":235,"y":3540,"wires":[["e5c7973.3614768"]]},{"id":"57abe499.00e8fc","type":"link out","z":"8eb9b9b8.c0df48","name":"16_Out","links":["9e3a0deb.5b766"],"x":3115,"y":3540,"wires":[]},{"id":"9e3a0deb.5b766","type":"link in","z":"2a540cc7.026154","name":"16_In","links":["57abe499.00e8fc"],"x":1295,"y":3280,"wires":[["d9a88684.abfd08","f205f5ca.432528"]]},{"id":"439cb914.d6cc58","type":"link in","z":"2a540cc7.026154","name":"17_In","links":["8f6b22bd.a2c5f"],"x":1295,"y":3440,"wires":[["6dc74edf.a7258","1cd96603.3f0f8a"]]},{"id":"a72c6ef5.6e3d2","type":"link out","z":"2a540cc7.026154","name":"17_Out","links":["1a88396c.319cd7"],"x":795,"y":3440,"wires":[]},{"id":"f1b70c2a.1d9c6","type":"actionflows","z":"8eb9b9b8.c0df48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"callInternalInterface","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1410,"y":3660,"wires":[["8f6b22bd.a2c5f"]]},{"id":"20455eee.9be922","type":"change","z":"8eb9b9b8.c0df48","name":"","rules":[{"t":"set","p":"mep","pt":"msg","to":"unsubscribe","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1160,"y":3660,"wires":[["f1b70c2a.1d9c6"]]},{"id":"8f6b22bd.a2c5f","type":"link out","z":"8eb9b9b8.c0df48","name":"17_Out","links":["439cb914.d6cc58"],"x":3115,"y":3660,"wires":[]},{"id":"1a88396c.319cd7","type":"link in","z":"8eb9b9b8.c0df48","name":"17_In","links":["a72c6ef5.6e3d2"],"x":235,"y":3660,"wires":[["20455eee.9be922"]]},{"id":"32c8c00c.73a57","type":"actionflows_in","z":"8eb9b9b8.c0df48","name":"configureDataFlow in","priority":"50","links":[],"scope":"global","x":820,"y":3820,"wires":[["c685cf08.92551","43cac71a.2eea28"]]},{"id":"57fa36eb.2b40a8","type":"actionflows_out","z":"8eb9b9b8.c0df48","name":"configureDataFlow out","links":[],"x":2840,"y":3820,"wires":[]},{"id":"bca033b3.694f8","type":"comment","z":"8eb9b9b8.c0df48","name":"Configure DataFlows & Drivers","info":"","x":564.1310526529951,"y":3757.655385335287,"wires":[]},{"id":"9f516ae8.76e2f8","type":"comment","z":"8eb9b9b8.c0df48","name":"Physical Connection Internal iInterface","info":"","x":590,"y":3900,"wires":[]},{"id":"b1b7e924.db8b58","type":"actionflows_in","z":"8eb9b9b8.c0df48","name":"callInternalInterface in","priority":"50","links":[],"scope":"global","x":819.2023315429688,"y":3967.900146484375,"wires":[["f088895f.4283d8","dd2ec12a.83b8d"]]},{"id":"4b5fb6cc.26e4f8","type":"actionflows_out","z":"8eb9b9b8.c0df48","name":"callInternalInterface out","links":[],"x":2849.2023315429688,"y":3967.900146484375,"wires":[]},{"id":"9f635e7.32389a","type":"debug","z":"8eb9b9b8.c0df48","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":690,"y":4040,"wires":[]},{"id":"c685cf08.92551","type":"debug","z":"8eb9b9b8.c0df48","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1050,"y":3800,"wires":[]},{"id":"43cac71a.2eea28","type":"unsafe-function","z":"8eb9b9b8.c0df48","name":"RetrievingInternalDriverName","func":"var dsm = msg.payload;\nmsg.dsm = dsm;\nvar di =  dsm.InternalElement[0].InternalElement[0];\nmsg.di = di;\nvar parameters = dsm.InternalElement[0].InternalElement[0].InternalElement[0].InternalElement;\nmsg.parameters = parameters;\n\nif(typeof di.SupportedRoleClass[1] === \"undefined\"){\n    if(typeof dsm.SupportedRoleClass[1] === \"undefined\"){\n        for(var parameter in parameters){\n            if(parameters[parameter]._Attribs.Name === 'protocol'){\n                var attributes = parameters[parameter].Attribute;\n                for(var attribute in attributes){\n                    if(attributes[attribute]._Attribs.Name === 'actualValue'){\n                        msg.internalDriver = attributes[attribute].Value[0]; \n                    }\n                }\n            }\n        }\n    } else {\n        msg.internalDriver = \"callDataStreaming_DataFlows\";\n    }\n    \n} else {\n    for(var parameter in parameters){\n        if(parameters[parameter]._Attribs.Name === 'internalLinkId'){\n            var attributes = parameters[parameter].Attribute;\n            for(var attribute in attributes){\n                if(attributes[attribute]._Attribs.Name === 'actualValue'){\n                    msg.internalDriver = attributes[attribute].Value[0]; \n                }\n            }\n        }\n    }\n}\n//msg.payload = di;\nreturn msg;","outputs":1,"noerr":0,"x":1372.1428527832031,"y":3819.690460205078,"wires":[["57fa36eb.2b40a8","ee36ccd7.04d61"]]},{"id":"ee36ccd7.04d61","type":"debug","z":"8eb9b9b8.c0df48","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1630,"y":3800,"wires":[]},{"id":"a6285a18.01e5d8","type":"actionflows","z":"8eb9b9b8.c0df48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"callDataStreaming_DataFlows","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1830,"y":4000,"wires":[["4b5fb6cc.26e4f8"]]},{"id":"dd2ec12a.83b8d","type":"unsafe-function","z":"8eb9b9b8.c0df48","name":"InvokeInternalDriver","func":"var af = context.global.get(\"actionflows\");\nvar action_ = af.invoke(msg.internalDriver, msg);\naction_.then(function(msg){\n    node.send(msg);\n});\n\n","outputs":1,"noerr":0,"x":1800,"y":3960,"wires":[["4b5fb6cc.26e4f8"]]},{"id":"7f7a2809.79a2d8","type":"switch","z":"8eb9b9b8.c0df48","name":"IF_msg_mep","property":"mep","propertyType":"msg","rules":[{"t":"eq","v":"requestReply","vt":"str"},{"t":"cont","v":"subscribe","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":1210,"y":3900,"wires":[["dd2ec12a.83b8d"],[]]},{"id":"6c59059c.af220c","type":"actionflows","z":"8eb9b9b8.c0df48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"handleRetrievedData","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1820,"y":4100,"wires":[["df0e034c.56124","2cdd7d50.4b8b12"]]},{"id":"c00303f.3a281","type":"actionflows_in","z":"8eb9b9b8.c0df48","name":"handleRetrievedData in","priority":"50","links":[],"scope":"global","x":1240,"y":4220,"wires":[["1856c3bf.b5dc2c"]]},{"id":"cb318957.05e828","type":"actionflows_out","z":"8eb9b9b8.c0df48","name":"handleRetrievedData out","links":[],"x":2540,"y":4220,"wires":[]},{"id":"1856c3bf.b5dc2c","type":"unsafe-function","z":"8eb9b9b8.c0df48","name":"InvokeInformationManager","func":"var af = context.global.get(\"actionflows\");\nvar action_ = af.invoke(\"imInform\", msg);\naction_.then(function(msg){\n    node.send(msg);\n});\n\n","outputs":1,"noerr":0,"x":1810,"y":4220,"wires":[["cb318957.05e828"]]},{"id":"269bb9ec.d299a6","type":"comment","z":"8eb9b9b8.c0df48","name":"Connect to Data Streaming Endpoint, Retrieving Device Registry Entries","info":"","x":690,"y":4320,"wires":[]},{"id":"9c00df45.ff741","type":"actionflows_out","z":"8eb9b9b8.c0df48","name":"readCPSConfiguration out","links":[],"x":2860,"y":4380,"wires":[]},{"id":"57a2f1db.1bf14","type":"actionflows_in","z":"8eb9b9b8.c0df48","name":"readCPSConfiguration in","priority":"50","links":[],"scope":"global","x":830,"y":4380,"wires":[["2fb3b3c8.f43d6c"]]},{"id":"2fb3b3c8.f43d6c","type":"actionflows","z":"8eb9b9b8.c0df48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"callDataStreaming_DeviceRegistry","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1820,"y":4380,"wires":[["9c00df45.ff741"]]},{"id":"2aa7bea6.42d9a2","type":"debug","z":"8eb9b9b8.c0df48","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1585.5833740234375,"y":1374.7291259765625,"wires":[]},{"id":"b60bfb66.89dd18","type":"snmp","z":"8eb9b9b8.c0df48","host":"localhost","community":"public","version":"1","oids":"1.3.6.1.2.1.6.9.0","timeout":5,"name":"","x":1860,"y":4560,"wires":[["9f0861b6.0fa55"]]},{"id":"f3d4eede.fdf5d","type":"actionflows_in","z":"8eb9b9b8.c0df48","name":"snmpTCPConnections in","priority":"50","links":[],"scope":"global","x":830,"y":4560,"wires":[["b60bfb66.89dd18"]]},{"id":"9f0861b6.0fa55","type":"actionflows_out","z":"8eb9b9b8.c0df48","name":"snmpTCPConnections out","links":[],"x":2870,"y":4560,"wires":[]},{"id":"62ce0e1c.c2a06","type":"snmp","z":"8eb9b9b8.c0df48","host":"localhost","community":"public","version":"1","oids":"1.3.6.1.2.1.1.3.0","timeout":5,"name":"sysUpTime","x":1850,"y":4620,"wires":[["feccdb3e.ee3328","3a6a7fd.392908"]]},{"id":"37465fe.6174ea","type":"actionflows_in","z":"8eb9b9b8.c0df48","name":"snmpSysUpTime in","priority":"50","links":[],"scope":"global","x":810,"y":4620,"wires":[["62ce0e1c.c2a06"]]},{"id":"feccdb3e.ee3328","type":"actionflows_out","z":"8eb9b9b8.c0df48","name":"snmpSysUpTime out","links":[],"x":2860,"y":4620,"wires":[]},{"id":"3a6a7fd.392908","type":"debug","z":"8eb9b9b8.c0df48","name":"","active":false,"console":"false","complete":"payload","x":2050,"y":4640,"wires":[]},{"id":"b103ec99.22d9e","type":"actionflows_in","z":"8eb9b9b8.c0df48","name":"snmpLoad in","priority":"50","links":[],"scope":"global","x":790,"y":4740,"wires":[["ab21a033.5e42b"]]},{"id":"ab21a033.5e42b","type":"snmp","z":"8eb9b9b8.c0df48","host":"localhost","community":"public","version":"1","oids":"1.3.6.1.4.1.2021.10.1.3.1,\n1.3.6.1.4.1.2021.10.1.3.2,\n1.3.6.1.4.1.2021.10.1.3.3","timeout":"8","name":"oneMinuteLoad","x":1860,"y":4740,"wires":[["b42a4d5c.5bef4","27ece472.a6207c"]]},{"id":"b42a4d5c.5bef4","type":"actionflows_out","z":"8eb9b9b8.c0df48","name":"snmpLoad out","links":[],"x":2840,"y":4740,"wires":[]},{"id":"27ece472.a6207c","type":"debug","z":"8eb9b9b8.c0df48","name":"","active":false,"tosidebar":true,"console":false,"complete":"payload","x":2050,"y":4760,"wires":[]},{"id":"60de07e6.d0f038","type":"inject","z":"8eb9b9b8.c0df48","name":"Test","topic":"","payload":"","payloadType":"none","repeat":"","crontab":"","once":false,"x":1190,"y":4760,"wires":[["ab21a033.5e42b"]]},{"id":"2ca8e4d8.07a09c","type":"snmp","z":"8eb9b9b8.c0df48","host":"localhost","community":"public","version":"1","oids":"1.3.6.1.2.1.1.1.0","timeout":5,"name":"sysDscr","x":1840,"y":4800,"wires":[["402f0c6a.be62c4","6be924d9.4bca5c"]]},{"id":"58789a28.c445b4","type":"actionflows_in","z":"8eb9b9b8.c0df48","name":"snmpSysDscr in","priority":"50","links":[],"scope":"global","x":800,"y":4800,"wires":[["2ca8e4d8.07a09c"]]},{"id":"402f0c6a.be62c4","type":"actionflows_out","z":"8eb9b9b8.c0df48","name":"snmpSysDscr out","links":[],"x":2850,"y":4800,"wires":[]},{"id":"479df2c0.4d338c","type":"inject","z":"8eb9b9b8.c0df48","name":"Test","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":false,"x":1190,"y":4820,"wires":[["2ca8e4d8.07a09c"]]},{"id":"6be924d9.4bca5c","type":"debug","z":"8eb9b9b8.c0df48","name":"","active":false,"console":"false","complete":"payload","x":2050,"y":4820,"wires":[]},{"id":"34f80431.e490dc","type":"comment","z":"8eb9b9b8.c0df48","name":"AAS Rosource Monitoring - Component Manger","info":"","x":610,"y":4460,"wires":[]},{"id":"f088895f.4283d8","type":"debug","z":"8eb9b9b8.c0df48","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1050,"y":3940,"wires":[]},{"id":"899c269c.4ff7b8","type":"link in","z":"8eb9b9b8.c0df48","name":"18_In","links":["fb627d5b.e5856","8da7ecab.eb3228"],"x":235,"y":4100,"wires":[["6c59059c.af220c","18afb845.fe1628"]]},{"id":"df0e034c.56124","type":"link out","z":"8eb9b9b8.c0df48","name":"18_out","links":[],"x":3115,"y":4100,"wires":[]},{"id":"fb627d5b.e5856","type":"link out","z":"6d97086b.090b98","name":"1_out","links":["899c269c.4ff7b8"],"x":835,"y":320,"wires":[]},{"id":"f039c7a8.bb1d98","type":"http in","z":"6d97086b.090b98","name":"","url":"aas/notifyRegistryChanges/","method":"post","upload":false,"swaggerDoc":"6001bd67.b9c9b4","x":290,"y":1540,"wires":[["b17e4774.9a71d8"]]},{"id":"b17e4774.9a71d8","type":"set-defaults","z":"6d97086b.090b98","name":"set-startTime","rules":[{"p":"startTime","pt":"msg","to":"","tot":"date"}],"chbox_DoOutputToMessage":true,"chbox_SetCurrentToMsg":false,"howSend":{"text":"payload","type":"msg","modifiedValue":"payload"},"dropdown_HowManyMessages":"single","dropdownObjOrVal":"value","outputs":1,"x":990,"y":1540,"wires":[["c082981f.4746d8"]]},{"id":"a2f7afc7.bd277","type":"http response","z":"6d97086b.090b98","name":"","statusCode":"","headers":{},"x":2890,"y":1540,"wires":[]},{"id":"6df6b4fd.90b48c","type":"subflow:3bcb972f.6d23c8","z":"6d97086b.090b98","name":"","env":[],"x":2870,"y":1580,"wires":[],"icon":"node-red-contrib-viseo-log/log.svg"},{"id":"c082981f.4746d8","type":"link out","z":"6d97086b.090b98","name":"2_Out","links":["4f5ea1f.9b1276"],"x":1175,"y":1540,"wires":[]},{"id":"aa890210.5067c","type":"link in","z":"6d97086b.090b98","name":"2_In","links":["2a7f89b7.705da6"],"x":2255,"y":1540,"wires":[["a2f7afc7.bd277","6df6b4fd.90b48c"]]},{"id":"488edc45.c25814","type":"unsafe-function","z":"8eb9b9b8.c0df48","name":"InvokeInternalDriver","func":"var af = context.global.get(\"actionflows\");\nvar action_ = af.invoke(msg.communicationProtocol, msg);\naction_.then(function(msg){\n    node.send(msg);\n});\n\n","outputs":1,"noerr":0,"x":1820,"y":4040,"wires":[["4b5fb6cc.26e4f8"]]},{"id":"651aa90e.d4f1f8","type":"debug","z":"ef6160d1.7c319","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1133.0003662109375,"y":451.3333740234375,"wires":[]},{"id":"ee7ba587.f11088","type":"actionflows_in","z":"8eb9b9b8.c0df48","name":"callBack in","priority":"50","links":[],"scope":"global","x":280,"y":4180,"wires":[["6c59059c.af220c"]]},{"id":"2cdd7d50.4b8b12","type":"actionflows_out","z":"8eb9b9b8.c0df48","name":"callBack out","links":[],"x":3050,"y":4180,"wires":[]},{"id":"eea68058.11cd1","type":"debug","z":"ef6160d1.7c319","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":973.0003662109375,"y":431.3333740234375,"wires":[]},{"id":"2e37c5d9.6a7bca","type":"switch","z":"ef6160d1.7c319","name":"","property":"payload.requestedProperty","propertyType":"msg","rules":[{"t":"null"},{"t":"nnull"}],"checkall":"true","repair":false,"outputs":2,"x":510,"y":520,"wires":[["1fcdc9b2.542746"],["c84cd99.1f4be28"]]},{"id":"c84cd99.1f4be28","type":"change","z":"ef6160d1.7c319","name":"","rules":[{"t":"set","p":"url","pt":"msg","to":"payload.url","tot":"msg"},{"t":"set","p":"method","pt":"msg","to":"payload.method","tot":"msg"},{"t":"set","p":"requestedProperty","pt":"msg","to":"payload.requestedProperty","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":760,"y":560,"wires":[["6f2c96f8.478db8"]]},{"id":"fcf0f7bc.8aec48","type":"inject","z":"ef6160d1.7c319","name":"","topic":"","payload":"","payloadType":"date","repeat":"5","crontab":"","once":false,"onceDelay":"","x":150,"y":880,"wires":[["d3da1247.88c6b"]]},{"id":"d3da1247.88c6b","type":"unsafe-function","z":"ef6160d1.7c319","name":"Get HTTP requests Configurations","func":"var subscriptions = context.flow.get(\"subscriptions\");\nif(subscriptions.length > 0){\n    var msg = {};\n    msg.payload = subscriptions;\n    return msg;\n}\nelse return;","outputs":1,"noerr":0,"x":720,"y":880,"wires":[["cd59848.f1fe978","2ff53eb2.01f492"]]},{"id":"cd59848.f1fe978","type":"debug","z":"ef6160d1.7c319","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":950,"y":820,"wires":[]},{"id":"285b0def.8175c2","type":"switch","z":"927cab2b.acef18","name":"","property":"payload.requestedProperty","propertyType":"msg","rules":[{"t":"null"},{"t":"nnull"}],"checkall":"true","repair":false,"outputs":2,"x":490,"y":580,"wires":[["a5ac501e.f00cb"],["b3909d2e.88a4f"]]},{"id":"b3909d2e.88a4f","type":"change","z":"927cab2b.acef18","name":"","rules":[{"t":"set","p":"host","pt":"msg","to":"payload.address","tot":"msg"},{"t":"set","p":"oid","pt":"msg","to":"payload.oid","tot":"msg"},{"t":"set","p":"requestedProperty","pt":"msg","to":"payload.requestedProperty","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":680,"y":620,"wires":[["d27b31bc.97b3d"]]},{"id":"ae767e6b.ccd04","type":"saveflow","z":"927cab2b.acef18","name":"","path":"C:\\Users\\Giovanni Di Orio\\.asmodels\\flows\\drivers\\","enabled":false,"exporttype":"addflow","x":1000,"y":1040,"wires":[[]]},{"id":"546e3c93.bd33d4","type":"inject","z":"927cab2b.acef18","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":540,"y":1042,"wires":[["ae767e6b.ccd04"]]},{"id":"7dcf5dfb.038f04","type":"comment","z":"927cab2b.acef18","name":"Subscribe Message Exchange Pattern  (Protocol TranslationI)","info":"","x":300,"y":820,"wires":[]},{"id":"b7f8010f.97e4e","type":"inject","z":"927cab2b.acef18","name":"","topic":"","payload":"","payloadType":"date","repeat":"5","crontab":"","once":false,"onceDelay":"","x":170,"y":900,"wires":[["ec97884d.54cb88"]]},{"id":"ec97884d.54cb88","type":"unsafe-function","z":"927cab2b.acef18","name":"Get SNMP requests Configurations","func":"var subscriptions = context.flow.get(\"subscriptions\");\nif(subscriptions.length > 0){\n    var msg = {};\n    msg.payload = subscriptions;\n    return msg;\n}\nelse return;","outputs":1,"noerr":0,"x":740,"y":900,"wires":[["9bfa7981.8fc018","9d519c53.1fb13"]]},{"id":"9bfa7981.8fc018","type":"debug","z":"927cab2b.acef18","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":990,"y":840,"wires":[]},{"id":"2ff53eb2.01f492","type":"actionflows","z":"ef6160d1.7c319","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"requestReply","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"private","perf":false,"seq":false,"x":1120,"y":880,"wires":[[]]},{"id":"9d519c53.1fb13","type":"actionflows","z":"927cab2b.acef18","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"requestReply","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"private","perf":false,"seq":false,"x":1190,"y":900,"wires":[[]]},{"id":"a9bf5836.8d87e8","type":"unsafe-function","z":"6d97086b.090b98","name":"preprocess data (DSMs)","func":"var assets = msg.payload;\n\nfor (var asset in assets){\n    //getting the data source manifest\n    var dsm = assets[asset];\n    \n    // working on data Interface (merging definition interface parameters with data interface)\n    var interfaceParameters = assets[asset].dataSourceDefinitionInterfaceParameters.parameter;\n    var dataInterfaceParameters = dsm.dataSourceDefinitionReferenceID.dataInterfaceReferenceID.parameters.parameter;\n    for(var interfaceParameter in interfaceParameters){\n        for(var parameter in dataInterfaceParameters){\n            if(interfaceParameters[interfaceParameter].key === dataInterfaceParameters[parameter].name){\n                dataInterfaceParameters[parameter].actualValue = interfaceParameters[interfaceParameter].value; \n            }\n        }\n    }\n}\n\nmsg.retrievedAssets = assets;\nmsg.payload = null;\nreturn msg;","outputs":1,"noerr":0,"x":1930,"y":1400,"wires":[["ea933e58.46d8","d7edd6a9.a928c8"]]},{"id":"fd3a5993.abd4f8","type":"debug","z":"6d97086b.090b98","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1790,"y":1340,"wires":[]},{"id":"2c63b2f2.a0ce9e","type":"inject","z":"6d97086b.090b98","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":960,"y":1360,"wires":[["2a8028e0.df27d8"]]},{"id":"eae85a77.78cb08","type":"json","z":"6d97086b.090b98","name":"","property":"payload","action":"","pretty":false,"x":1630,"y":1400,"wires":[["fd3a5993.abd4f8","a9bf5836.8d87e8"]]},{"id":"ea933e58.46d8","type":"debug","z":"6d97086b.090b98","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":2070,"y":1340,"wires":[]},{"id":"f0c565e1.8b3e28","type":"debug","z":"8eb9b9b8.c0df48","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1530,"y":780,"wires":[]},{"id":"edeae5ef.8b7b98","type":"ui_ui_control","z":"6f5697aa.38c758","name":"","x":300,"y":260,"wires":[["5bc551ed.32f14"]]},{"id":"19ec83a.60ee67c","type":"actionflows_in","z":"2a540cc7.026154","name":"initFromBot in","priority":"50","links":[],"scope":"global","x":510,"y":280,"wires":[["e1ecd4cf.839198"]]},{"id":"fe854c25.e3aa4","type":"http request","z":"6f5697aa.38c758","name":"","method":"use","ret":"txt","paytoqs":false,"url":"","tls":"","persist":false,"proxy":"","authType":"basic","x":790,"y":380,"wires":[["a9726315.b2cb9"]]},{"id":"989be8cf.678ad8","type":"unsafe-function","z":"6f5697aa.38c758","name":"trigger","func":"msg.method = 'POST';\nmsg.url = context.global.get('namespace') + \"/aas/initialize\";\nmsg.requestTimeout = 3000;\nmsg.payload = \"\";\n\nreturn msg;","outputs":1,"noerr":0,"x":630,"y":380,"wires":[["fe854c25.e3aa4"]]},{"id":"2efc9e92.951602","type":"debug","z":"8eb9b9b8.c0df48","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":670,"y":160,"wires":[]},{"id":"28723d3d.01ae72","type":"actionflows","z":"6f5697aa.38c758","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"informAASUI_NewLog","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"private","perf":false,"seq":false,"x":1540,"y":520,"wires":[[]]},{"id":"35028667.e34a7a","type":"debug","z":"6d97086b.090b98","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":2069.1272583007812,"y":518.2936706542969,"wires":[]},{"id":"27ace876.910e48","type":"json","z":"6d97086b.090b98","name":"","property":"payload","action":"","pretty":false,"x":1490,"y":820,"wires":[["ea168c12.0032a","40a4e94.18cc018"]]},{"id":"32d19241.cd187e","type":"json","z":"6d97086b.090b98","name":"","property":"payload","action":"","pretty":false,"x":1490,"y":900,"wires":[["d0324b8a.ce43c8","f6a514bb.8175d8"]]},{"id":"d0324b8a.ce43c8","type":"debug","z":"6d97086b.090b98","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1630,"y":960,"wires":[]},{"id":"ea168c12.0032a","type":"debug","z":"6d97086b.090b98","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1630,"y":760,"wires":[]},{"id":"18afb845.fe1628","type":"msg-speed","z":"8eb9b9b8.c0df48","name":"","frequency":"min","estimation":true,"ignore":false,"x":460,"y":4040,"wires":[["9f635e7.32389a"],[]]},{"id":"b80fff3.67e4f","type":"debug","z":"8eb9b9b8.c0df48","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":2480,"y":3280,"wires":[]},{"id":"bc0c895e.8b8268","type":"unsafe-function","z":"6d97086b.090b98","name":"retrieve subscriptions info","func":"msg.headers = {\"Content-type\" : \"application/json\"}\nmsg.url = context.global.get(\"DataStreamingEndpoint\") + \"/dataStream/dataFlows/get/all\";\nmsg.method = \"GET\";\nreturn msg;","outputs":1,"noerr":0,"x":680,"y":580,"wires":[["e4e658a6.f00568","d0dd2177.962a9"]]},{"id":"e4e658a6.f00568","type":"http request","z":"6d97086b.090b98","name":"","method":"use","ret":"txt","paytoqs":false,"url":"","tls":"","proxy":"","x":960,"y":580,"wires":[["dda0e90a.b68888","94c69f5b.6b9e2"]]},{"id":"dda0e90a.b68888","type":"unsafe-function","z":"6d97086b.090b98","name":"saveCurrentSubscriptions","func":"if(msg.payload !== \"\" && msg.statusCode == \"200\"){\n    var subscriptions = JSON.parse(msg.payload);\n    context.flow.set('subscriptions', subscriptions);\n} else {\n    context.flow.set('subscriptions', []);\n}\nreturn msg;\n","outputs":1,"noerr":0,"x":1220,"y":580,"wires":[["44313437.fe7a9c"]]},{"id":"94c69f5b.6b9e2","type":"debug","z":"6d97086b.090b98","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1170,"y":640,"wires":[]},{"id":"401e1613.b06b88","type":"conf ping","z":"6d97086b.090b98","name":"","host":"","timeout":"5","requests":"1","x":600,"y":180,"wires":[["29133a76.04eac6","dab34687.2a53e8"]]},{"id":"c4ebda20.a18648","type":"unsafe-function","z":"6d97086b.090b98","name":"host DataStreaming","func":"var loc = new URL(context.global.get(\"DataStreamingEndpoint\"));\nmsg.host = loc.hostname;\nreturn msg;","outputs":1,"noerr":0,"x":390,"y":180,"wires":[["401e1613.b06b88","254c5848.f1c2d8"]]},{"id":"d76e16a7.5fc398","type":"inject","z":"6d97086b.090b98","name":"","topic":"","payload":"","payloadType":"str","repeat":"5","crontab":"","once":false,"onceDelay":0.1,"x":210,"y":180,"wires":[["c4ebda20.a18648"]]},{"id":"29133a76.04eac6","type":"switch","z":"6d97086b.090b98","name":"","property":"payload","propertyType":"msg","rules":[{"t":"gt","v":"0","vt":"num"},{"t":"false"}],"checkall":"false","repair":false,"outputs":2,"x":790,"y":180,"wires":[["ab397236.6ebbf"],["9926eacf.1e4b68"]]},{"id":"9926eacf.1e4b68","type":"change","z":"6d97086b.090b98","name":"","rules":[{"t":"set","p":"connected","pt":"flow","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":970,"y":200,"wires":[[]]},{"id":"ab397236.6ebbf","type":"change","z":"6d97086b.090b98","name":"","rules":[{"t":"set","p":"connected","pt":"flow","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":970,"y":160,"wires":[[]]},{"id":"870f9b6a.9925c8","type":"switch","z":"6d97086b.090b98","name":"","property":"connected","propertyType":"flow","rules":[{"t":"false"},{"t":"true"}],"checkall":"false","repair":false,"outputs":2,"x":550,"y":480,"wires":[["fa23f5ac.2ff198"],["bc0c895e.8b8268"]]},{"id":"fa23f5ac.2ff198","type":"unsafe-function","z":"6d97086b.090b98","name":"statusMessage","func":"msg.payload.status = \"false\";\nmsg.payload.statusMessage = \"DataStreaming is not avaialble\"; \nreturn msg;","outputs":1,"noerr":0,"x":1240,"y":460,"wires":[["d8bbd412.d43c38"]]},{"id":"fb71250c.bf7998","type":"unsafe-function","z":"6d97086b.090b98","name":"statusMessage","func":"msg.payload = {};\nmsg.payload.status = \"false\";\nmsg.payload.statusMessage = \"DataStreaming is not avaialble\"; \nreturn msg;","outputs":1,"noerr":0,"x":1480,"y":1300,"wires":[["d7edd6a9.a928c8","428f97e3.d0e518"]]},{"id":"7ac146f7.ac6c38","type":"switch","z":"6d97086b.090b98","name":"","property":"connected","propertyType":"flow","rules":[{"t":"false"},{"t":"true"}],"checkall":"false","repair":false,"outputs":2,"x":590,"y":1320,"wires":[["fb71250c.bf7998"],["8823fb42.204fe8"]]},{"id":"6d4a70f.c233b9","type":"switch","z":"8eb9b9b8.c0df48","name":"","property":"payload.status","propertyType":"msg","rules":[{"t":"neq","v":"false","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":1340,"y":280,"wires":[["5e972e63.93534"],["17102f0b.666bd1","dac6e54d.cbae88"]]},{"id":"dac6e54d.cbae88","type":"actionflows","z":"8eb9b9b8.c0df48","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"notifyAASUI_DataStreamingMsg","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":1790,"y":320,"wires":[[]]},{"id":"69c0916c.3bb99","type":"debug","z":"8eb9b9b8.c0df48","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1370,"y":200,"wires":[]},{"id":"428f97e3.d0e518","type":"debug","z":"6d97086b.090b98","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1730,"y":1260,"wires":[]},{"id":"9cb32970.5bc178","type":"comment","z":"6d97086b.090b98","name":"Monitor DataStreaming Connectivity","info":"","x":280,"y":140,"wires":[]},{"id":"21ff9a00.6490f6","type":"saveflow","z":"2dc3c8a2.8eb818","name":"","path":"C:\\Users\\Giovanni Di Orio\\.asmodels\\flows\\drivers\\","enabled":false,"exporttype":"addflow","x":1000,"y":1120,"wires":[[]]},{"id":"fe6ae086.4db29","type":"inject","z":"2dc3c8a2.8eb818","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":540,"y":1122,"wires":[["21ff9a00.6490f6"]]},{"id":"73fbef59.69f7b","type":"actionflows_in","z":"2dc3c8a2.8eb818","name":"WebDocs in","priority":"50","links":[],"scope":"global","x":150,"y":360,"wires":[["21cf179c.0ac568","d8449e25.be734"]]},{"id":"1215013f.f67b5f","type":"actionflows_out","z":"2dc3c8a2.8eb818","name":"WebDocs out","links":[],"x":1360,"y":360,"wires":[]},{"id":"4f0e2a5e.72db64","type":"unsafe-function","z":"2dc3c8a2.8eb818","name":"PrepareOutput","func":"var outputMsgs = [];\nvar uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });\nvar property = msg.requestedProperty;\n\n// Create an Observation Object ------------------------------------\nvar observation = {};\nobservation.id = uuid;\nobservation.edgeGatewayReferenceID = msg.AASID;\nobservation.dataManifestReferenceID = property._Attribs.ID;\nobservation.dataKindReferenceID = property.InternalElement[0]._Attribs.ID;\nobservation.acquisitionTimestamp = new Date().getTime();\nobservation.collectionTimestamp = new Date().getTime();\nobservation.value = msg.payload;\n// END Create an Observation Object --------------------------------\n//outputMsgs.push(observation);\n\n//msg.payload = outputMsgs;\nmsg.payload = JSON.stringify(observation);\nreturn msg;\n\n\n","outputs":1,"noerr":0,"x":1220,"y":620,"wires":[["e99c4369.24f0e","c9efcedb.b37fb"]]},{"id":"e99c4369.24f0e","type":"debug","z":"2dc3c8a2.8eb818","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1488.0000610351562,"y":718.666748046875,"wires":[]},{"id":"6b4e919c.4e092","type":"change","z":"2dc3c8a2.8eb818","name":"","rules":[{"t":"set","p":"url","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":620,"wires":[["32534f10.e4b0a","54400076.6f869","4f0e2a5e.72db64"]]},{"id":"da8d4cb0.e5311","type":"actionflows","z":"2dc3c8a2.8eb818","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"requestReply","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"private","perf":false,"seq":false,"x":990,"y":360,"wires":[["1215013f.f67b5f"]]},{"id":"7edc679e.c0e858","type":"actionflows_in","z":"2dc3c8a2.8eb818","name":"requestReply in","priority":"50","links":[],"scope":"global","x":160,"y":620,"wires":[["25b6e525.e478aa","6b4e919c.4e092"]]},{"id":"c9efcedb.b37fb","type":"actionflows_out","z":"2dc3c8a2.8eb818","name":"requestReply out","links":[],"x":1591.3333740234375,"y":621,"wires":[]},{"id":"25b6e525.e478aa","type":"debug","z":"2dc3c8a2.8eb818","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":355.66650390625,"y":693.333251953125,"wires":[]},{"id":"21cf179c.0ac568","type":"unsafe-function","z":"2dc3c8a2.8eb818","name":"Prepare client configuration and msg object","func":"if(msg.requestedProperty !== \"\" && msg.parameters !== \"\" && msg.mep === \"requestReply\"){\n    //msg.submodel = msg.payload;\n    \n    //var parameters = msg.payload.InternalElement[0].InternalElement;\n    var parameters = msg.parameters;\n    var url = \"\";\n    for(var parameterIndex in parameters){\n        if(parameters[parameterIndex]._Attribs.Name == \"url\"){\n            url = parameters[parameterIndex].Attribute[2].Value[0];\n            msg.payload = url;\n            return msg;\n        }\n    }\n}\n","outputs":1,"noerr":0,"x":530,"y":360,"wires":[["da8d4cb0.e5311"]]},{"id":"a893ad5a.2c27f","type":"comment","z":"2dc3c8a2.8eb818","name":"Request Reply Message Exchange Pattern","info":"","x":251.333251953125,"y":516.6666259765625,"wires":[]},{"id":"621c0dd7.1fcb14","type":"comment","z":"2dc3c8a2.8eb818","name":"Internal Interface Entry Point","info":"","x":184.047607421875,"y":123.142822265625,"wires":[]},{"id":"d8449e25.be734","type":"debug","z":"2dc3c8a2.8eb818","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":354.2856750488281,"y":423.5238037109375,"wires":[]},{"id":"32534f10.e4b0a","type":"debug","z":"2dc3c8a2.8eb818","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":993.0003662109375,"y":531.3333740234375,"wires":[]},{"id":"5cf29b6e.6d8c14","type":"javafunction","z":"2dc3c8a2.8eb818","name":"open local browser","jars":[],"imports":[],"func":"URI uri = new URI(msg.get(\"payload\").getAsString());\nDesktop.getDesktop().browse(uri);\nreturn msg;","outputs":1,"x":1170,"y":820,"wires":[[]]},{"id":"54400076.6f869","type":"unsafe-function","z":"2dc3c8a2.8eb818","name":"","func":"var outMsg = {};\n// expression = /(https?:\\/\\/.)?(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_\\+.~#?&//=]*)/g;\nvar expression = /(https?:\\/\\/(?:www\\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\\.[^\\s]{2,}|www\\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\\.[^\\s]{2,}|https?:\\/\\/(?:www\\.|(?!www))[a-zA-Z0-9]+\\.[^\\s]{2,}|www\\.[a-zA-Z0-9]+\\.[^\\s]{2,})/gi;\nvar regex = new RegExp(expression);\nif(msg.payload.match(regex)){\n   outMsg.payload = msg.payload;\n    return outMsg; \n} else {\n    var tryAASurl = context.global.get(\"namespace\") + msg.payload;\n    if(tryAASurl.match(regex)){\n        outMsg.payload = tryAASurl;\n        return outMsg;\n    } else {\n        return null;\n    }\n    \n}\n","outputs":1,"noerr":0,"x":900,"y":820,"wires":[["27689660.8ca97a","5cf29b6e.6d8c14"]]},{"id":"27689660.8ca97a","type":"debug","z":"2dc3c8a2.8eb818","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1110,"y":760,"wires":[]},{"id":"10737ac7.a73765","type":"inject","z":"2dc3c8a2.8eb818","name":"Tester","topic":"","payload":"/http-api/swagger.json","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":630,"y":820,"wires":[["54400076.6f869"]]},{"id":"4cfd9150.ab0bc","type":"function","z":"8eb9b9b8.c0df48","name":"Intialize Global Variables","func":"var os = context.global.get('os');\nvar path = context.global.get('path');\n\n\n//context.global.set(\"ModelFilePath\", \"\");\n// http://sensap.ddns.net:58001\nlet dataStreamingEndpoint = env.get(\"DATASTREAMING_ENDPOINT\");\ncontext.global.set(\"DataStreamingEndpoint\", dataStreamingEndpoint);\n//context.global.set(\"stringManifest\", \"<?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?>\\r\\n<CAEXFile FileName=\\\"Aml_as_manifest_empty.aml\\\" SchemaVersion=\\\"2.15\\\" xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\" xsi:noNamespaceSchemaLocation=\\\"CAEX_ClassModel_V2.15.xsd\\\">\\r\\n\\t<AdditionalInformation>\\r\\n\\t\\t<WriterHeader>\\r\\n\\t\\t\\t<LastWritingDateTime>2018-10-16T16:12:49.4126198+01:00</LastWritingDateTime>\\r\\n\\t\\t\\t<WriterID>916578CA-FE0D-474E-A4FC-9E1719892369</WriterID>\\r\\n\\t\\t\\t<WriterName>AutomationML Editor</WriterName>\\r\\n\\t\\t\\t<WriterProjectID>unspecified</WriterProjectID>\\r\\n\\t\\t\\t<WriterProjectTitle>unspecified</WriterProjectTitle>\\r\\n\\t\\t\\t<WriterRelease>4.7.0.0</WriterRelease>\\r\\n\\t\\t\\t<WriterVendor>AutomationML e.V.</WriterVendor>\\r\\n\\t\\t\\t<WriterVendorURL>www.AutomationML.org</WriterVendorURL>\\r\\n\\t\\t\\t<WriterVersion>4.7.0.0</WriterVersion>\\r\\n\\t\\t</WriterHeader>\\r\\n\\t</AdditionalInformation>\\r\\n\\t<AdditionalInformation AutomationMLVersion=\\\"2.0\\\" />\\r\\n\\t<InstanceHierarchy ID=\\\"90a789b3-d644-43f7-b8ec-fdfda0bdbbcd\\\" Name=\\\"AASManifest\\\">\\r\\n\\t\\t<InternalElement ID=\\\"611c9074-ad8d-47c1-a26f-3d8d9f517ae1\\\" Name=\\\"Header\\\">\\r\\n\\t\\t\\t<InternalElement ID=\\\"2eda359b-8f68-4a8e-84be-b32f2e16d7a2\\\" Name=\\\"Identifiers\\\"><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Asset&amp;AASIdentification\\\" />\\r\\n\\t\\t\\t\\t\\r\\n\\t\\t\\t</InternalElement>\\r\\n\\t\\t\\t\\r\\n\\t\\t</InternalElement>\\r\\n\\t\\t<InternalElement ID=\\\"b66b5437-4fee-4ccb-8009-1d28c8159f9e\\\" Name=\\\"Body\\\">\\r\\n\\t\\t\\t\\r\\n\\t\\t\\t\\r\\n\\t\\t\\t<SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/SubmodelContainer\\\" />\\r\\n\\t\\t</InternalElement>\\r\\n\\t\\t<Version>1.0.0</Version>\\r\\n\\t</InstanceHierarchy>\\r\\n\\t<InterfaceClassLib Name=\\\"AASInterfaceClassLib\\\">\\r\\n\\t\\t<InterfaceClass Name=\\\"SupportedDataConnectors\\\">\\r\\n\\t\\t\\t<InterfaceClass Name=\\\"Connector\\\" RefBaseClassPath=\\\"AASInterfaceClassLib/SupportedDataConnectors\\\">\\r\\n\\t\\t\\t\\t<Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"Address\\\">\\r\\n\\t\\t\\t\\t\\t<Value>-</Value>\\r\\n\\t\\t\\t\\t</Attribute>\\r\\n\\t\\t\\t\\t<InterfaceClass Name=\\\"OPCUAConnector\\\" RefBaseClassPath=\\\"AASInterfaceClassLib/SupportedDataConnectors/Connector\\\">\\r\\n\\t\\t\\t\\t\\t<Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"ItemOPCUAAddress\\\">\\r\\n\\t\\t\\t\\t\\t\\t<Value>-</Value>\\r\\n\\t\\t\\t\\t\\t</Attribute>\\r\\n\\t\\t\\t\\t\\t<Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"Action\\\">\\r\\n\\t\\t\\t\\t\\t\\t<Constraint Name=\\\"ActionValueList\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<NominalScaledType>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<RequiredValue>READ</RequiredValue>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<RequiredValue>WRITE</RequiredValue>\\r\\n\\t\\t\\t\\t\\t\\t\\t</NominalScaledType>\\r\\n\\t\\t\\t\\t\\t\\t</Constraint>\\r\\n\\t\\t\\t\\t\\t\\t<Value>-</Value>\\r\\n\\t\\t\\t\\t\\t</Attribute>\\r\\n\\t\\t\\t\\t</InterfaceClass>\\r\\n\\t\\t\\t\\t<InterfaceClass Name=\\\"RESTConnector\\\" RefBaseClassPath=\\\"AASInterfaceClassLib/SupportedDataConnectors/Connector\\\">\\r\\n\\t\\t\\t\\t\\t<Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"Method\\\">\\r\\n\\t\\t\\t\\t\\t\\t<Constraint Name=\\\"MethodValueList\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<NominalScaledType>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<RequiredValue>GET</RequiredValue>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<RequiredValue>POST</RequiredValue>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<RequiredValue>PUT</RequiredValue>\\r\\n\\t\\t\\t\\t\\t\\t\\t</NominalScaledType>\\r\\n\\t\\t\\t\\t\\t\\t</Constraint>\\r\\n\\t\\t\\t\\t\\t\\t<Value>-</Value>\\r\\n\\t\\t\\t\\t\\t</Attribute>\\r\\n\\t\\t\\t\\t</InterfaceClass>\\r\\n\\t\\t\\t\\t<InterfaceClass Name=\\\"AMQPConnector\\\" RefBaseClassPath=\\\"AASInterfaceClassLib/SupportedDataConnectors/Connector\\\">\\r\\n\\t\\t\\t\\t\\t<Attribute Name=\\\"ReadFrom\\\" />\\r\\n\\t\\t\\t\\t\\t<Attribute Name=\\\"Exchange_QueueName\\\" />\\r\\n\\t\\t\\t\\t</InterfaceClass>\\r\\n\\t\\t\\t</InterfaceClass>\\r\\n\\t\\t</InterfaceClass>\\r\\n\\t\\t<Version>1.0.0</Version>\\r\\n\\t</InterfaceClassLib>\\r\\n\\t<RoleClassLib Name=\\\"AASManifestRoleClassLib\\\">\\r\\n\\t\\t<RoleClass Name=\\\"PropertyContainer\\\" />\\r\\n\\t\\t<RoleClass Name=\\\"Statement\\\" />\\r\\n\\t\\t<RoleClass Name=\\\"FunctionalityExposed\\\" />\\r\\n\\t\\t<RoleClass Name=\\\"Asset&amp;AASIdentification\\\" />\\r\\n\\t\\t<RoleClass Name=\\\"SubmodelContainer\\\" />\\r\\n\\t\\t<Version></Version>\\r\\n\\t</RoleClassLib>\\r\\n\\t<SystemUnitClassLib Name=\\\"ASSSystemUnitClassLib\\\">\\r\\n\\t\\t<SystemUnitClass Name=\\\"Submodel\\\">\\r\\n\\t\\t\\t<SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/PropertyContainer\\\" />\\r\\n\\t\\t</SystemUnitClass>\\r\\n\\t\\t<SystemUnitClass Name=\\\"Property\\\">\\r\\n\\t\\t\\t<Attribute Name=\\\"ExpressionLogic\\\">\\r\\n\\t\\t\\t\\t<Constraint Name=\\\"ExpressionLogicList\\\">\\r\\n\\t\\t\\t\\t\\t<NominalScaledType>\\r\\n\\t\\t\\t\\t\\t\\t<RequiredValue>EQUAL</RequiredValue>\\r\\n\\t\\t\\t\\t\\t\\t<RequiredValue>LESS</RequiredValue>\\r\\n\\t\\t\\t\\t\\t</NominalScaledType>\\r\\n\\t\\t\\t\\t</Constraint>\\r\\n\\t\\t\\t\\t<Value>-</Value>\\r\\n\\t\\t\\t</Attribute>\\r\\n\\t\\t\\t<Attribute Name=\\\"Views\\\">\\r\\n\\t\\t\\t\\t<Constraint Name=\\\"ViewsList\\\">\\r\\n\\t\\t\\t\\t\\t<NominalScaledType>\\r\\n\\t\\t\\t\\t\\t\\t<RequiredValue>PERFORMANCE</RequiredValue>\\r\\n\\t\\t\\t\\t\\t\\t<RequiredValue>BUSINESS</RequiredValue>\\r\\n\\t\\t\\t\\t\\t</NominalScaledType>\\r\\n\\t\\t\\t\\t</Constraint>\\r\\n\\t\\t\\t\\t<Value>-</Value>\\r\\n\\t\\t\\t</Attribute>\\r\\n\\t\\t\\t\\r\\n\\t\\t\\t<Attribute Name=\\\"ValueList\\\">\\r\\n\\t\\t\\t\\t<Constraint Name=\\\"ValueListList\\\">\\r\\n\\t\\t\\t\\t\\t<NominalScaledType>\\r\\n\\t\\t\\t\\t\\t\\t<RequiredValue>n/a</RequiredValue>\\r\\n\\t\\t\\t\\t\\t\\t<RequiredValue>0..*</RequiredValue>\\r\\n\\t\\t\\t\\t\\t\\t<RequiredValue>{}</RequiredValue>\\r\\n\\t\\t\\t\\t\\t</NominalScaledType>\\r\\n\\t\\t\\t\\t</Constraint>\\r\\n\\t\\t\\t\\t<Value>n/a</Value>\\r\\n\\t\\t\\t</Attribute>\\r\\n\\t\\t\\t<Attribute AttributeDataType=\\\"-\\\" Name=\\\"Value\\\" Unit=\\\"-\\\">\\r\\n\\t\\t\\t\\t<Description>-</Description>\\r\\n\\t\\t\\t\\t<Value>-</Value>\\r\\n\\t\\t\\t</Attribute><Attribute Name=\\\"ValueFormat\\\" AttributeDataType=\\\"xs:string\\\"><Value>-</Value></Attribute>\\r\\n\\t\\t\\t<Attribute Name=\\\"ExpressionSemantic\\\">\\r\\n\\t\\t\\t\\t<Constraint Name=\\\"ExpressionSemanticList\\\">\\r\\n\\t\\t\\t\\t\\t<NominalScaledType>\\r\\n\\t\\t\\t\\t\\t\\t<RequiredValue>n/a</RequiredValue>\\r\\n\\t\\t\\t\\t\\t\\t<RequiredValue>MEASUREMENT</RequiredValue><RequiredValue>CONFIRMATION</RequiredValue>\\r\\n\\t\\t\\t\\t\\t</NominalScaledType>\\r\\n\\t\\t\\t\\t</Constraint>\\r\\n\\t\\t\\t\\t<Value>n/a</Value>\\r\\n\\t\\t\\t</Attribute>\\r\\n\\t\\t\\t<SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" />\\r\\n\\t\\t</SystemUnitClass>\\r\\n\\t\\t<Version>1.0.0</Version>\\r\\n\\t</SystemUnitClassLib>\\r\\n</CAEXFile>\\r\\n\"); \nlet registryEndpoint = env.get(\"REGISTRY_ENDPOINT\");\ncontext.global.set(\"RegistryEndpoint\", registryEndpoint);\n\nvar interfaces = os.networkInterfaces();\nvar addresses = [];\n\nfor (var k in interfaces) {\n    for (var k2 in interfaces[k]) {\n        var address = interfaces[k][k2];\n        if (address.family === 'IPv4' && !address.internal) {\n            addresses.push(address.address);\n        }\n    }\n}\ncontext.global.set('namespace',\"http://\" + addresses[0] + \":\" + context.global.get('uiPort'));\n\n//Retrieving the home directory\nvar homedirectory = os.homedir();\n//Building up the model directory\nvar asmodels = \".asmodels\";\nvar modelDir = path.join(homedirectory, asmodels);\ncontext.global.set(\"ModelDir\", modelDir);\n//Building up the path to find the models\nvar fileName = \"Aml_as_manifest.xml\";\n\nvar filePath = path.join(homedirectory, asmodels, fileName);\ncontext.global.set(\"ModelFilePath\", filePath);\n//Building up the path to load connectors\n//msg.filename = filePath;\nreturn msg;\n","outputs":1,"noerr":0,"x":410,"y":240,"wires":[["1910b5a7.08337a","2efc9e92.951602"]]},{"id":"1a46dcd8.7b2553","type":"unsafe-function","z":"8eb9b9b8.c0df48","name":"Initialize Global Variables","func":"var os = context.global.get('os');\nvar path = context.global.get('path');\n\n\n//context.global.set(\"ModelFilePath\", \"\");\ncontext.global.set(\"DataStreamingEndpoint\", \"http://sensap.ddns.net:58001\");\n//context.global.set(\"stringManifest\", \"<?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?>\\r\\n<CAEXFile FileName=\\\"Aml_as_manifest_empty.aml\\\" SchemaVersion=\\\"2.15\\\" xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\" xsi:noNamespaceSchemaLocation=\\\"CAEX_ClassModel_V2.15.xsd\\\">\\r\\n\\t<AdditionalInformation>\\r\\n\\t\\t<WriterHeader>\\r\\n\\t\\t\\t<LastWritingDateTime>2018-10-16T16:12:49.4126198+01:00</LastWritingDateTime>\\r\\n\\t\\t\\t<WriterID>916578CA-FE0D-474E-A4FC-9E1719892369</WriterID>\\r\\n\\t\\t\\t<WriterName>AutomationML Editor</WriterName>\\r\\n\\t\\t\\t<WriterProjectID>unspecified</WriterProjectID>\\r\\n\\t\\t\\t<WriterProjectTitle>unspecified</WriterProjectTitle>\\r\\n\\t\\t\\t<WriterRelease>4.7.0.0</WriterRelease>\\r\\n\\t\\t\\t<WriterVendor>AutomationML e.V.</WriterVendor>\\r\\n\\t\\t\\t<WriterVendorURL>www.AutomationML.org</WriterVendorURL>\\r\\n\\t\\t\\t<WriterVersion>4.7.0.0</WriterVersion>\\r\\n\\t\\t</WriterHeader>\\r\\n\\t</AdditionalInformation>\\r\\n\\t<AdditionalInformation AutomationMLVersion=\\\"2.0\\\" />\\r\\n\\t<InstanceHierarchy ID=\\\"90a789b3-d644-43f7-b8ec-fdfda0bdbbcd\\\" Name=\\\"AASManifest\\\">\\r\\n\\t\\t<InternalElement ID=\\\"611c9074-ad8d-47c1-a26f-3d8d9f517ae1\\\" Name=\\\"Header\\\">\\r\\n\\t\\t\\t<InternalElement ID=\\\"2eda359b-8f68-4a8e-84be-b32f2e16d7a2\\\" Name=\\\"Identifiers\\\"><SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Asset&amp;AASIdentification\\\" />\\r\\n\\t\\t\\t\\t\\r\\n\\t\\t\\t</InternalElement>\\r\\n\\t\\t\\t\\r\\n\\t\\t</InternalElement>\\r\\n\\t\\t<InternalElement ID=\\\"b66b5437-4fee-4ccb-8009-1d28c8159f9e\\\" Name=\\\"Body\\\">\\r\\n\\t\\t\\t\\r\\n\\t\\t\\t\\r\\n\\t\\t\\t<SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/SubmodelContainer\\\" />\\r\\n\\t\\t</InternalElement>\\r\\n\\t\\t<Version>1.0.0</Version>\\r\\n\\t</InstanceHierarchy>\\r\\n\\t<InterfaceClassLib Name=\\\"AASInterfaceClassLib\\\">\\r\\n\\t\\t<InterfaceClass Name=\\\"SupportedDataConnectors\\\">\\r\\n\\t\\t\\t<InterfaceClass Name=\\\"Connector\\\" RefBaseClassPath=\\\"AASInterfaceClassLib/SupportedDataConnectors\\\">\\r\\n\\t\\t\\t\\t<Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"Address\\\">\\r\\n\\t\\t\\t\\t\\t<Value>-</Value>\\r\\n\\t\\t\\t\\t</Attribute>\\r\\n\\t\\t\\t\\t<InterfaceClass Name=\\\"OPCUAConnector\\\" RefBaseClassPath=\\\"AASInterfaceClassLib/SupportedDataConnectors/Connector\\\">\\r\\n\\t\\t\\t\\t\\t<Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"ItemOPCUAAddress\\\">\\r\\n\\t\\t\\t\\t\\t\\t<Value>-</Value>\\r\\n\\t\\t\\t\\t\\t</Attribute>\\r\\n\\t\\t\\t\\t\\t<Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"Action\\\">\\r\\n\\t\\t\\t\\t\\t\\t<Constraint Name=\\\"ActionValueList\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<NominalScaledType>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<RequiredValue>READ</RequiredValue>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<RequiredValue>WRITE</RequiredValue>\\r\\n\\t\\t\\t\\t\\t\\t\\t</NominalScaledType>\\r\\n\\t\\t\\t\\t\\t\\t</Constraint>\\r\\n\\t\\t\\t\\t\\t\\t<Value>-</Value>\\r\\n\\t\\t\\t\\t\\t</Attribute>\\r\\n\\t\\t\\t\\t</InterfaceClass>\\r\\n\\t\\t\\t\\t<InterfaceClass Name=\\\"RESTConnector\\\" RefBaseClassPath=\\\"AASInterfaceClassLib/SupportedDataConnectors/Connector\\\">\\r\\n\\t\\t\\t\\t\\t<Attribute AttributeDataType=\\\"xs:string\\\" Name=\\\"Method\\\">\\r\\n\\t\\t\\t\\t\\t\\t<Constraint Name=\\\"MethodValueList\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<NominalScaledType>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<RequiredValue>GET</RequiredValue>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<RequiredValue>POST</RequiredValue>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<RequiredValue>PUT</RequiredValue>\\r\\n\\t\\t\\t\\t\\t\\t\\t</NominalScaledType>\\r\\n\\t\\t\\t\\t\\t\\t</Constraint>\\r\\n\\t\\t\\t\\t\\t\\t<Value>-</Value>\\r\\n\\t\\t\\t\\t\\t</Attribute>\\r\\n\\t\\t\\t\\t</InterfaceClass>\\r\\n\\t\\t\\t\\t<InterfaceClass Name=\\\"AMQPConnector\\\" RefBaseClassPath=\\\"AASInterfaceClassLib/SupportedDataConnectors/Connector\\\">\\r\\n\\t\\t\\t\\t\\t<Attribute Name=\\\"ReadFrom\\\" />\\r\\n\\t\\t\\t\\t\\t<Attribute Name=\\\"Exchange_QueueName\\\" />\\r\\n\\t\\t\\t\\t</InterfaceClass>\\r\\n\\t\\t\\t</InterfaceClass>\\r\\n\\t\\t</InterfaceClass>\\r\\n\\t\\t<Version>1.0.0</Version>\\r\\n\\t</InterfaceClassLib>\\r\\n\\t<RoleClassLib Name=\\\"AASManifestRoleClassLib\\\">\\r\\n\\t\\t<RoleClass Name=\\\"PropertyContainer\\\" />\\r\\n\\t\\t<RoleClass Name=\\\"Statement\\\" />\\r\\n\\t\\t<RoleClass Name=\\\"FunctionalityExposed\\\" />\\r\\n\\t\\t<RoleClass Name=\\\"Asset&amp;AASIdentification\\\" />\\r\\n\\t\\t<RoleClass Name=\\\"SubmodelContainer\\\" />\\r\\n\\t\\t<Version></Version>\\r\\n\\t</RoleClassLib>\\r\\n\\t<SystemUnitClassLib Name=\\\"ASSSystemUnitClassLib\\\">\\r\\n\\t\\t<SystemUnitClass Name=\\\"Submodel\\\">\\r\\n\\t\\t\\t<SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/PropertyContainer\\\" />\\r\\n\\t\\t</SystemUnitClass>\\r\\n\\t\\t<SystemUnitClass Name=\\\"Property\\\">\\r\\n\\t\\t\\t<Attribute Name=\\\"ExpressionLogic\\\">\\r\\n\\t\\t\\t\\t<Constraint Name=\\\"ExpressionLogicList\\\">\\r\\n\\t\\t\\t\\t\\t<NominalScaledType>\\r\\n\\t\\t\\t\\t\\t\\t<RequiredValue>EQUAL</RequiredValue>\\r\\n\\t\\t\\t\\t\\t\\t<RequiredValue>LESS</RequiredValue>\\r\\n\\t\\t\\t\\t\\t</NominalScaledType>\\r\\n\\t\\t\\t\\t</Constraint>\\r\\n\\t\\t\\t\\t<Value>-</Value>\\r\\n\\t\\t\\t</Attribute>\\r\\n\\t\\t\\t<Attribute Name=\\\"Views\\\">\\r\\n\\t\\t\\t\\t<Constraint Name=\\\"ViewsList\\\">\\r\\n\\t\\t\\t\\t\\t<NominalScaledType>\\r\\n\\t\\t\\t\\t\\t\\t<RequiredValue>PERFORMANCE</RequiredValue>\\r\\n\\t\\t\\t\\t\\t\\t<RequiredValue>BUSINESS</RequiredValue>\\r\\n\\t\\t\\t\\t\\t</NominalScaledType>\\r\\n\\t\\t\\t\\t</Constraint>\\r\\n\\t\\t\\t\\t<Value>-</Value>\\r\\n\\t\\t\\t</Attribute>\\r\\n\\t\\t\\t\\r\\n\\t\\t\\t<Attribute Name=\\\"ValueList\\\">\\r\\n\\t\\t\\t\\t<Constraint Name=\\\"ValueListList\\\">\\r\\n\\t\\t\\t\\t\\t<NominalScaledType>\\r\\n\\t\\t\\t\\t\\t\\t<RequiredValue>n/a</RequiredValue>\\r\\n\\t\\t\\t\\t\\t\\t<RequiredValue>0..*</RequiredValue>\\r\\n\\t\\t\\t\\t\\t\\t<RequiredValue>{}</RequiredValue>\\r\\n\\t\\t\\t\\t\\t</NominalScaledType>\\r\\n\\t\\t\\t\\t</Constraint>\\r\\n\\t\\t\\t\\t<Value>n/a</Value>\\r\\n\\t\\t\\t</Attribute>\\r\\n\\t\\t\\t<Attribute AttributeDataType=\\\"-\\\" Name=\\\"Value\\\" Unit=\\\"-\\\">\\r\\n\\t\\t\\t\\t<Description>-</Description>\\r\\n\\t\\t\\t\\t<Value>-</Value>\\r\\n\\t\\t\\t</Attribute><Attribute Name=\\\"ValueFormat\\\" AttributeDataType=\\\"xs:string\\\"><Value>-</Value></Attribute>\\r\\n\\t\\t\\t<Attribute Name=\\\"ExpressionSemantic\\\">\\r\\n\\t\\t\\t\\t<Constraint Name=\\\"ExpressionSemanticList\\\">\\r\\n\\t\\t\\t\\t\\t<NominalScaledType>\\r\\n\\t\\t\\t\\t\\t\\t<RequiredValue>n/a</RequiredValue>\\r\\n\\t\\t\\t\\t\\t\\t<RequiredValue>MEASUREMENT</RequiredValue><RequiredValue>CONFIRMATION</RequiredValue>\\r\\n\\t\\t\\t\\t\\t</NominalScaledType>\\r\\n\\t\\t\\t\\t</Constraint>\\r\\n\\t\\t\\t\\t<Value>n/a</Value>\\r\\n\\t\\t\\t</Attribute>\\r\\n\\t\\t\\t<SupportedRoleClass RefRoleClassPath=\\\"AASManifestRoleClassLib/Statement\\\" />\\r\\n\\t\\t</SystemUnitClass>\\r\\n\\t\\t<Version>1.0.0</Version>\\r\\n\\t</SystemUnitClassLib>\\r\\n</CAEXFile>\\r\\n\"); \n\nvar interfaces = os.networkInterfaces();\nvar addresses = [];\n\nfor (var k in interfaces) {\n    for (var k2 in interfaces[k]) {\n        var address = interfaces[k][k2];\n        if (address.family === 'IPv4' && !address.internal) {\n            addresses.push(address.address);\n        }\n    }\n}\ncontext.global.set('namespace',\"http://\" + addresses[0] + \":\" + context.global.get('uiPort'));\n\n//Retrieving the home directory\nvar homedirectory = os.homedir();\n//Building up the model directory\nvar asmodels = \".asmodels\";\nvar modelDir = path.join(homedirectory, asmodels);\ncontext.global.set(\"ModelDir\", modelDir);\n//Building up the path to find the models\nvar fileName = \"Aml_as_manifest.xml\";\n\nvar filePath = path.join(homedirectory, asmodels, fileName);\ncontext.global.set(\"ModelFilePath\", filePath);\n//Building up the path to load connectors\n//msg.filename = filePath;\nreturn msg;\n","outputs":1,"noerr":0,"x":390,"y":420,"wires":[[]]},{"id":"cb0d3f3b.a1a6b","type":"debug","z":"6f5697aa.38c758","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":395,"y":869,"wires":[]},{"id":"134a1d84.efe3d2","type":"debug","z":"6f5697aa.38c758","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1050,"y":940,"wires":[]},{"id":"ccaf642a.03a5f8","type":"actionflows_in","z":"ddaf1ac4.429e18","name":"imInform in","priority":"50","links":[],"scope":"global","x":160,"y":160,"wires":[["bfda9b63.fbd268","51d9cb86.a2edf4"]]},{"id":"2281dbc.97ef824","type":"actionflows_out","z":"ddaf1ac4.429e18","name":"imInform out","links":[],"x":1070,"y":220,"wires":[]},{"id":"e76d4853.ed3fb8","type":"debug","z":"ddaf1ac4.429e18","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1050,"y":260,"wires":[]},{"id":"13884fee.8748e","type":"mqtt out","z":"ddaf1ac4.429e18","name":"","topic":"","qos":"","retain":"","broker":"1d81f70b.03e8d1","x":1050,"y":160,"wires":[]},{"id":"e267782d.21a448","type":"comment","z":"ddaf1ac4.429e18","name":"To MQTT","info":"","x":1040,"y":100,"wires":[]},{"id":"bd3a0e99.ed491","type":"inject","z":"8eb9b9b8.c0df48","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":180,"y":540,"wires":[["bc7dd1c6.84941"]]},{"id":"bc7dd1c6.84941","type":"function","z":"8eb9b9b8.c0df48","name":"","func":"var datastreaming = context.global.get(\"DataStreamingEndpoint\");\ndatastreaming = \"http://84.254.42.48:58002\";\ncontext.global.set(\"DataStreamingEndpoint\", datastreaming);\nvar registry = \"http://84.254.42.48:58001\";\ncontext.global.set(\"RegistryEndpoint\", registry);\nreturn msg;","outputs":1,"noerr":0,"x":370,"y":540,"wires":[[]]},{"id":"254c5848.f1c2d8","type":"debug","z":"6d97086b.090b98","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":620,"y":127.5,"wires":[]},{"id":"dab34687.2a53e8","type":"debug","z":"6d97086b.090b98","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":758.75,"y":128.75,"wires":[]},{"id":"d4b40c56.c2269","type":"debug","z":"6d97086b.090b98","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1450,"y":1340,"wires":[]},{"id":"bfda9b63.fbd268","type":"debug","z":"ddaf1ac4.429e18","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":317.77783203125,"y":92.22222137451172,"wires":[]},{"id":"d0dd2177.962a9","type":"debug","z":"6d97086b.090b98","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":950,"y":540,"wires":[]},{"id":"63661419.5fcd5c","type":"comment","z":"e8827dd4.9f445","name":"/Initialize","info":"","x":480,"y":200,"wires":[]},{"id":"ceafdefa.5ab4c","type":"telegram command","z":"e8827dd4.9f445","name":"/getSubmodels","command":"/getSubmodels","bot":"a6dd0a24.a85b58","strict":false,"x":360,"y":844,"wires":[["307943f4.aee37c"],[]]},{"id":"1cddc163.0bdcdf","type":"function","z":"e8827dd4.9f445","name":"send submodels","func":"var XML = context.global.get('XML');\nvar xml_string_composed = XML.stringify(msg.payload, 'InternalElement');\n\nmsg.payload.content = xml_string_composed;\nmsg.payload.type = 'message';\nmsg.payload.chatId = msg.originalMessage.chat.id;\n\n/* type can be one of the following\nphoto\naudio\nvideo\nsticker\nvoice\ndocument\n*/\n\nreturn msg;","outputs":1,"noerr":0,"x":920,"y":844,"wires":[["d54b480e.9d3208"]]},{"id":"d54b480e.9d3208","type":"telegram sender","z":"e8827dd4.9f445","name":"","bot":"a6dd0a24.a85b58","x":1270,"y":844,"wires":[[]]},{"id":"307943f4.aee37c","type":"actionflows","z":"e8827dd4.9f445","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"readSubmodels","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"global","perf":false,"seq":false,"x":680,"y":844,"wires":[["1cddc163.0bdcdf"]]},{"id":"1b5fdbfd.bfe544","type":"telegram command","z":"e8827dd4.9f445","name":"/getManifest","command":"/getManifest","bot":"a6dd0a24.a85b58","strict":false,"x":350,"y":635,"wires":[["71ff5cb6.41a2f4"],[]]},{"id":"71ff5cb6.41a2f4","type":"function","z":"e8827dd4.9f445","name":"send manifest","func":"msg.payload.content = context.global.get('ModelFilePath');\nmsg.payload.type = 'document';\n\n/* type can be one of the following\nphoto\naudio\nvideo\nsticker\nvoice\ndocument\n*/\n\nreturn msg;","outputs":1,"noerr":0,"x":720,"y":635,"wires":[["d723eb7b.2f8f08"]]},{"id":"d723eb7b.2f8f08","type":"telegram sender","z":"e8827dd4.9f445","name":"","bot":"a6dd0a24.a85b58","x":1270,"y":635,"wires":[[]]},{"id":"d2a874e9.167878","type":"telegram command","z":"e8827dd4.9f445","name":"/getDataStreamingConnectionDetails","command":"/getDataStreamingConnectionDetails","bot":"a6dd0a24.a85b58","strict":false,"x":420,"y":480,"wires":[["2af0425f.ccce2e"],[]]},{"id":"2af0425f.ccce2e","type":"function","z":"e8827dd4.9f445","name":"send DataStreaming Connection Details","func":"msg.payload.content = context.global.get('DataStreamingEndpoint');\nmsg.payload.type = 'message';\n\n/* type can be one of the following\nphoto\naudio\nvideo\nsticker\nvoice\ndocument\n*/\n\nreturn msg;","outputs":1,"noerr":0,"x":800,"y":480,"wires":[["25c129bc.0d0526"]]},{"id":"25c129bc.0d0526","type":"telegram sender","z":"e8827dd4.9f445","name":"","bot":"a6dd0a24.a85b58","x":1270,"y":480,"wires":[[]]},{"id":"25062855.498218","type":"telegram command","z":"e8827dd4.9f445","name":"/getRegistryConnectionDetails","command":"/getRegistryConnectionDetails","bot":"a6dd0a24.a85b58","strict":false,"x":400,"y":400,"wires":[["7103c2e4.1882fc"],[]]},{"id":"7103c2e4.1882fc","type":"function","z":"e8827dd4.9f445","name":"send Registry Connection Details","func":"msg.payload.content = context.global.get('RegistryEndpoint');\nmsg.payload.type = 'message';\n\n/* type can be one of the following\nphoto\naudio\nvideo\nsticker\nvoice\ndocument\n*/\n\nreturn msg;","outputs":1,"noerr":0,"x":780,"y":400,"wires":[["a55755e2.ffd338"]]},{"id":"a55755e2.ffd338","type":"telegram sender","z":"e8827dd4.9f445","name":"","bot":"a6dd0a24.a85b58","x":1270,"y":400,"wires":[[]]},{"id":"5d794112.fdfee","type":"telegram command","z":"e8827dd4.9f445","name":"/getAASIdentifier","command":"/getAASIdentifier","bot":"a6dd0a24.a85b58","strict":false,"x":360,"y":560,"wires":[["2e1195ad.51e91a"],[]]},{"id":"2e1195ad.51e91a","type":"function","z":"e8827dd4.9f445","name":"send AAS Identifier","func":"msg.payload.content = context.global.get('AASIdentifier');\nmsg.payload.type = 'message';\n\n/* type can be one of the following\nphoto\naudio\nvideo\nsticker\nvoice\ndocument\n*/\n\nreturn msg;","outputs":1,"noerr":0,"x":730,"y":560,"wires":[["35d35e8e.4193b2"]]},{"id":"35d35e8e.4193b2","type":"telegram sender","z":"e8827dd4.9f445","name":"","bot":"a6dd0a24.a85b58","x":1270,"y":560,"wires":[[]]},{"id":"5e5ad08b.d1d1b","type":"debug","z":"d615cce6.1a41c","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":520,"y":220,"wires":[]},{"id":"cd79314e.139c","type":"rdkafka in","z":"6d97086b.090b98","name":"","topic":"aas-topic","cgroup":"node-red-rdkafka","autocommit":true,"broker":"a4c40ea9.7e657","x":220,"y":320,"wires":[["4926c19e.cf658","fb627d5b.e5856"]]},{"id":"51d9cb86.a2edf4","type":"json","z":"ddaf1ac4.429e18","name":"","property":"payload","action":"","pretty":false,"x":630,"y":160,"wires":[["597e878c.62e778"]]},{"id":"597e878c.62e778","type":"unsafe-function","z":"ddaf1ac4.429e18","name":"PayloadProcessing","func":"var msg1 = {};\n\n//msg1.topic = context.global.get('AASIdentifier');\nmsg1.topic = \"aas/\" + msg.payload.dataSourceManifestReferenceID;\nmsg1.payload = msg.payload;\n\nreturn msg1;","outputs":1,"noerr":0,"x":850,"y":160,"wires":[["13884fee.8748e","2281dbc.97ef824","e76d4853.ed3fb8"]]},{"id":"50b49ab0.d6f154","type":"debug","z":"45d2dea1.5ee6","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":710,"y":160,"wires":[]},{"id":"eeddd9ce.40a228","type":"mqtt in","z":"45d2dea1.5ee6","name":"","topic":"aas/117a8c0a-65b4-44c5-82f9-cbac6958ffb0","qos":"2","datatype":"auto","broker":"1d81f70b.03e8d1","x":440,"y":240,"wires":[["38fcaeb7.89ae72","50b49ab0.d6f154"]]},{"id":"43bea9fc.6bac68","type":"mqtt out","z":"45d2dea1.5ee6","name":"","topic":"v1/devices/me/telemetry","qos":"0","retain":"false","broker":"1683b072.02027","x":1430,"y":240,"wires":[]},{"id":"2023631b.6067ac","type":"comment","z":"45d2dea1.5ee6","name":"To MQTT within ThingsBoard","info":"","x":1420,"y":200,"wires":[]},{"id":"38fcaeb7.89ae72","type":"json","z":"45d2dea1.5ee6","name":"","property":"payload","action":"","pretty":false,"x":790,"y":240,"wires":[["a972f763.b0fa58"]]},{"id":"a972f763.b0fa58","type":"unsafe-function","z":"45d2dea1.5ee6","name":"PayloadProcessing","func":"var msg1 = {};\nmsg1.payload = {};\n//var key = msg.payload.dataSourceManifestReferenceID;\nvar key = \"observation\";\n//msg1.payload[key] = JSON.stringify(msg.payload);\n//var date = new Date(msg.payload.collectionTimestamp.string);\n//msg1.payload.ts = date.getTime();\nmsg1.payload.ts = parseInt(msg.payload.acquisitionTimestamp.string);\nvar values = {};\nvalues[key] = JSON.stringify(msg.payload);\nmsg1.payload.values = values;\n//msg1.payload = JSON.stringify(msg1[msg.payload.dataSourceManifestReferenceID]);\n//msg1.topic = context.global.get('AASIdentifier');\n//msg1.topic = msg.payload.dataSourceManifestReferenceID;\n//msg1.payload = msg.payload;\n\nreturn msg1;","outputs":1,"noerr":0,"x":1050,"y":240,"wires":[["552d687d.2d6d5","43bea9fc.6bac68"]]},{"id":"fdaee2d8.4438e","type":"mqtt in","z":"f12812f1.b3e42","name":"","topic":"aas/6f33b29a-6824-422b-889d-bc07bdd5e8a1","qos":"2","datatype":"auto","broker":"1d81f70b.03e8d1","x":380,"y":240,"wires":[["66b25c65.7614b4"]]},{"id":"66b25c65.7614b4","type":"json","z":"f12812f1.b3e42","name":"","property":"payload","action":"","pretty":false,"x":690,"y":240,"wires":[["f0947293.e4ed8","f2cfb8d3.edd178"]]},{"id":"96ee621c.4e34","type":"http request","z":"f12812f1.b3e42","name":"","method":"POST","ret":"obj","paytoqs":false,"url":"https://prophesy.share-platform.de/share/api/components/","tls":"","persist":true,"proxy":"","authType":"","x":1430,"y":520,"wires":[["9cf7727e.db25a"]]},{"id":"209565a2.71b23a","type":"debug","z":"f12812f1.b3e42","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1790,"y":520,"wires":[]},{"id":"26dc2122.281f2e","type":"comment","z":"f12812f1.b3e42","name":"Create Component","info":"","x":570,"y":460,"wires":[]},{"id":"46753681.326d18","type":"function","z":"f12812f1.b3e42","name":"","func":"msg.headers = {};\nmsg.headers[\"Authorization\"] = \"Token fe22f12084378d2a3d720bd5622722ce3c0ed2c1\";\nmsg.headers[\"content-type\"] = \"application/json\";\nmsg.payload = {\n    \"componentId\": context.flow.get(\"OculavisComponentId\"),\n    \"description\": msg.payload.dataSourceManifestReferenceID,\n    \"subcomponentTypeId\": 3,\n    \"details\": [\n        {\n            \"keyType\": \"integer\",\n            \"keyName\": \"collectionTimestamp\",\n            \"keyId\": 15,\n            \"value\": msg.payload.collectionTimestamp\n        },\n        {\n            \"keyType\": \"integer\",\n            \"keyName\": \"aquisitionTimestamp\",\n            \"keyId\": 17,\n            \"value\": msg.payload.aquisitionTimestamp\n        },\n        {\n            \"keyType\": \"string\",\n            \"keyName\": \"Value\",\n            \"keyId\": 18,\n            \"value\": msg.payload.value\n        }\n    ]\n};\n\nreturn msg;","outputs":1,"noerr":0,"x":495,"y":1240,"wires":[["3c2734b9.dfff7c"]],"l":false},{"id":"3c2734b9.dfff7c","type":"http request","z":"f12812f1.b3e42","name":"","method":"POST","ret":"obj","paytoqs":false,"url":"https://prophesy.share-platform.de/share/api/subcomponents/","tls":"","persist":true,"proxy":"","authType":"","x":756.9999885559082,"y":1236.9999895095825,"wires":[["68607c24.fc25f4"]]},{"id":"68607c24.fc25f4","type":"debug","z":"f12812f1.b3e42","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":979.0000114440918,"y":1238,"wires":[]},{"id":"6d4d1472.a7a08c","type":"function","z":"f12812f1.b3e42","name":"","func":"msg.headers = {};\nmsg.headers[\"Authorization\"] = \"Token fe22f12084378d2a3d720bd5622722ce3c0ed2c1\";\nmsg.headers[\"content-type\"] = \"application/json\";\n\nmsg.requestTimeout = 2000;\n\nreturn msg;","outputs":1,"noerr":0,"x":835,"y":520,"wires":[["e7c46642.f7efb8"]],"l":false},{"id":"abe6cb5d.eb5c38","type":"inject","z":"f12812f1.b3e42","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":610,"y":520,"wires":[["6d4d1472.a7a08c"]]},{"id":"e7c46642.f7efb8","type":"http request","z":"f12812f1.b3e42","name":"","method":"GET","ret":"obj","paytoqs":false,"url":"https://prophesy.share-platform.de/share/api/products/6","tls":"","persist":true,"proxy":"","authType":"","x":990,"y":520,"wires":[["8642b195.3a329","25899c88.f96dd4"]]},{"id":"8642b195.3a329","type":"function","z":"f12812f1.b3e42","name":"","func":"var components = msg.payload.components;\nfor(var component in components){\n    if(components[component].componentTypeName == \"PROPHESY-AAS\"){\n        context.flow.set(\"OculavisComponentId\", components[component].id);\n        return null;\n    }\n}\n\nvar msg1 = {};\nmsg1.headers = {};\nmsg1.headers[\"Authorization\"] = \"Token fe22f12084378d2a3d720bd5622722ce3c0ed2c1\";\nmsg1.headers[\"content-type\"] = \"application/json\";\nmsg1.payload = {\n    \"componentTypeId\": 22,\n    \"description\": \"connection to the PROPHESY MW through AAS\",\n    \"productId\": 6,\n    \"details\": [\n    ]\n};\n\nmsg1.requestTimeout = 2000;\n\nreturn msg1;","outputs":1,"noerr":0,"x":1255,"y":520,"wires":[["96ee621c.4e34"]],"l":false},{"id":"25899c88.f96dd4","type":"debug","z":"f12812f1.b3e42","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1190,"y":480,"wires":[]},{"id":"9cf7727e.db25a","type":"function","z":"f12812f1.b3e42","name":"","func":"context.flow.set(\"OculavisComponentId\", msg.payload.id);\nreturn msg;","outputs":1,"noerr":0,"x":1555,"y":520,"wires":[["209565a2.71b23a"]],"l":false},{"id":"f0947293.e4ed8","type":"debug","z":"f12812f1.b3e42","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":790,"y":160,"wires":[]},{"id":"eff0ec6.297131","type":"inject","z":"f12812f1.b3e42","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":280,"y":1240,"wires":[["46753681.326d18"]]},{"id":"d45f0254.93a36","type":"function","z":"f12812f1.b3e42","name":"","func":"msg.headers = {};\nmsg.headers[\"Authorization\"] = \"Token fe22f12084378d2a3d720bd5622722ce3c0ed2c1\";\nmsg.headers[\"content-type\"] = \"application/json\";\n\nmsg.requestTimeout = 2000;\n\nreturn msg;","outputs":1,"noerr":0,"x":515,"y":1340,"wires":[["3fc45b3.b44c3a4"]],"l":false},{"id":"3fc45b3.b44c3a4","type":"http request","z":"f12812f1.b3e42","name":"","method":"GET","ret":"obj","paytoqs":false,"url":"https://prophesy.share-platform.de/share/api/products/","tls":"","persist":false,"proxy":"","authType":"","x":710,"y":1340,"wires":[["cd1f182f.7ddab8"]]},{"id":"d9464c1d.f17a","type":"inject","z":"f12812f1.b3e42","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":290,"y":1340,"wires":[["d45f0254.93a36"]]},{"id":"cd1f182f.7ddab8","type":"debug","z":"f12812f1.b3e42","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":950,"y":1340,"wires":[]},{"id":"4d90aab4.465884","type":"function","z":"f12812f1.b3e42","name":"","func":"msg.headers = {};\nmsg.headers[\"Authorization\"] = \"Token fe22f12084378d2a3d720bd5622722ce3c0ed2c1\";\nmsg.headers[\"content-type\"] = \"application/json\";\n\nmsg.requestTimeout = 2000;\n\nmsg.observation = msg.payload;\n\nreturn msg;","outputs":1,"noerr":0,"x":1155,"y":240,"wires":[["54632710.f90f88"]],"l":false},{"id":"54632710.f90f88","type":"http request","z":"f12812f1.b3e42","name":"","method":"GET","ret":"obj","paytoqs":false,"url":"https://prophesy.share-platform.de/share/api/products/6","tls":"","persist":true,"proxy":"","authType":"","x":1290,"y":240,"wires":[["7a3877e0.1bc858"]]},{"id":"c1901a69.5b1c98","type":"inject","z":"f12812f1.b3e42","name":"","topic":"","payload":"{\"id\":\"2b134c6c-af65-4f37-a2b6-5b6eb47cd945\",\"dataSourceManifestReferenceID\":\"b5595a4a-40a5-46e6-a9c6-f493f99a72a1\",\"dataKindReferenceID\":\"4d2f1be3-52db-495a-b4a3-be3ff916e1a4\",\"acquisitionTimestamp\":1588973607297,\"collectionTimestamp\":1588973607297,\"value\":\"2000\"}","payloadType":"json","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1030,"y":320,"wires":[["4d90aab4.465884"]]},{"id":"7a3877e0.1bc858","type":"function","z":"f12812f1.b3e42","name":"","func":"var component = msg.payload.components[0];\nvar subcomponents = component.subcomponents;\nfor(var subcomponent in subcomponents){\n    if(subcomponents[subcomponent].description == msg.observation.dataSourceManifestReferenceID){\n        var msg1 = {};\n        msg1.headers = {};\n        msg1.url = \"https://prophesy.share-platform.de/share/api/subcomponents/\" + subcomponents[subcomponent].id + \"/\";\n        msg1.headers[\"Authorization\"] = \"Token fe22f12084378d2a3d720bd5622722ce3c0ed2c1\";\n        msg1.headers[\"content-type\"] = \"application/json\";\n        msg1.payload = {\n            \"componentId\": context.flow.get(\"OculavisComponentId\"),\n            \"description\": msg.observation.dataSourceManifestReferenceID,\n            \"subcomponentTypeId\": 3,\n            \"details\": [\n                {\n                    \"keyType\": \"integer\",\n                    \"keyName\": \"collectionTimestamp\",\n                    \"keyId\": 15,\n                    \"value\": msg.observation.collectionTimestamp\n                },\n                {\n                    \"keyType\": \"integer\",\n                    \"keyName\": \"aquisitionTimestamp\",\n                    \"keyId\": 17,\n                    \"value\": msg.observation.acquisitionTimestamp\n                },\n                {\n                    \"keyType\": \"string\",\n                    \"keyName\": \"Value\",\n                    \"keyId\": 18,\n                    \"value\": msg.observation.value\n                }\n            ]\n        };\n        return [msg1, null];\n    }\n}\n\nvar msg2 = {};\n\nmsg2.headers = {};\nmsg2.headers[\"Authorization\"] = \"Token fe22f12084378d2a3d720bd5622722ce3c0ed2c1\";\nmsg2.headers[\"content-type\"] = \"application/json\";\nmsg2.payload = {\n    \"componentId\": context.flow.get(\"OculavisComponentId\"),\n    \"description\": msg.observation.dataSourceManifestReferenceID,\n    \"subcomponentTypeId\": 3,\n    \"details\": [\n        {\n            \"keyType\": \"integer\",\n            \"keyName\": \"collectionTimestamp\",\n            \"keyId\": 15,\n            \"value\": msg.observation.collectionTimestamp\n        },\n        {\n            \"keyType\": \"integer\",\n            \"keyName\": \"acquisitionTimestamp\",\n            \"keyId\": 17,\n            \"value\": msg.observation.acquisitionTimestamp\n        },\n        {\n            \"keyType\": \"string\",\n            \"keyName\": \"Value\",\n            \"keyId\": 18,\n            \"value\": msg.observation.value\n        }\n    ]\n};\n\nreturn [null, msg2];\n\n","outputs":2,"noerr":0,"x":1455,"y":240,"wires":[["5065b697.539138"],["610c37b5.e70358","47f4453d.69093c"]],"l":false},{"id":"610c37b5.e70358","type":"http request","z":"f12812f1.b3e42","name":"","method":"POST","ret":"obj","paytoqs":false,"url":"https://prophesy.share-platform.de/share/api/subcomponents/","tls":"","persist":true,"proxy":"","authType":"","x":1610,"y":280,"wires":[["567b7e2.dea9b8","f5f0fae1.6ce918"]]},{"id":"5065b697.539138","type":"http request","z":"f12812f1.b3e42","name":"","method":"PUT","ret":"obj","paytoqs":false,"url":"","tls":"","persist":true,"proxy":"","authType":"","x":1610,"y":220,"wires":[["a5f07329.8de4e","778e6d85.f40724"]]},{"id":"a5f07329.8de4e","type":"debug","z":"f12812f1.b3e42","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1950,"y":220,"wires":[]},{"id":"567b7e2.dea9b8","type":"debug","z":"f12812f1.b3e42","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1950,"y":280,"wires":[]},{"id":"dccbe0f8.dc1d1","type":"comment","z":"f12812f1.b3e42","name":"Add DSM to SHARE","info":"","x":410,"y":100,"wires":[]},{"id":"47f4453d.69093c","type":"debug","z":"f12812f1.b3e42","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1590,"y":340,"wires":[]},{"id":"f2cfb8d3.edd178","type":"simple-queue","z":"f12812f1.b3e42","name":"queue1","firstMessageBypass":true,"bypassInterval":"0","x":1020,"y":240,"wires":[["4d90aab4.465884"]]},{"id":"778e6d85.f40724","type":"function","z":"f12812f1.b3e42","name":"","func":"msg.trigger = \"true\";\nreturn msg;","outputs":1,"noerr":0,"x":1395,"y":160,"wires":[["f2cfb8d3.edd178"]],"l":false},{"id":"f5f0fae1.6ce918","type":"function","z":"f12812f1.b3e42","name":"","func":"msg.trigger = \"true\";\nreturn msg;","outputs":1,"noerr":0,"x":1395,"y":340,"wires":[["f2cfb8d3.edd178"]],"l":false},{"id":"3c62b77c.fc5f78","type":"function","z":"f12812f1.b3e42","name":"","func":"msg.ttl = \"1000\";\nreturn msg;","outputs":1,"noerr":0,"x":835,"y":320,"wires":[["f2cfb8d3.edd178"]],"l":false},{"id":"714a2572.3ece2c","type":"inject","z":"f12812f1.b3e42","name":"","topic":"","payload":"{\"id\":\"2b134c6c-af65-4f37-a2b6-5b6eb47cd945\",\"dataSourceManifestReferenceID\":\"b5595a4a-40a5-46e6-a9c6-f493f99a72a1\",\"dataKindReferenceID\":\"4d2f1be3-52db-495a-b4a3-be3ff916e1a4\",\"acquisitionTimestamp\":1588973607297,\"collectionTimestamp\":1588973607297,\"value\":\"2000\"}","payloadType":"json","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":730,"y":320,"wires":[["3c62b77c.fc5f78"]]},{"id":"7091fc7c.01fff4","type":"comment","z":"f12812f1.b3e42","name":"Test the SHARE API","info":"","x":270,"y":1140,"wires":[]},{"id":"fd5ac27e.8895c","type":"comment","z":"6f5697aa.38c758","name":"Provisory Nodes","info":"","x":135.2777862548828,"y":2741.388916015625,"wires":[]},{"id":"9af86816.6ca708","type":"ui_template","z":"6f5697aa.38c758","group":"40aec84e.2c4048","name":"","order":1,"width":0,"height":0,"format":"<head>\n    <link rel=\"stylesheet\" href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css\" integrity=\"sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO\" crossorigin=\"anonymous\">\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js\" integrity=\"sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49\" crossorigin=\"anonymous\"></script>\n</head>\n\n<div ng-init=\"init()\" id=\"pin_insert\" class=\"dialog\">\n    \n    <div class=\"dialog_content\">\n        \n        <div class=\"dialog_header\">\n            <h2 style=\"margin:10px\">Send Command Form</h2>\n        </div>\n        \n        <div class=\"dialog_body\">\n\t\t\t<p class=\"text-black-50\"><strong>Using the dialog to send command through the Shell</strong></p>\n\t\t\t<input class=\"form-control\" type=\"text\" placeholder={{msg.payload}} readonly>\n\t\t\t<div class=\"form-group\">\n                <!--<textarea class=\"form-control rounded-0\" id=\"exampleFormControlTextarea2\" rows=\"3\"  ng-model= \"passcode\"></textarea>!-->\n                <label class=\"text-black-50\" for=\"NBIs\">Choose an option:</label>\n                <select class=\"form-control\" id=\"NBIs\" ng-model = \"passcode\">\n                  <option value=\"thingsboard\">ThingsBoard</option>\n                  <option value=\"share\">SHARE</option>\n                  <option value=\"\"></option>\n                </select>\n            </div>\n\t\t\t<!--<input type=\"text\" ng-model= \"passcode\" ng-model-options=\"{ debounce: 200 }\"style=\"width: 100%\">!-->\n\t\t\t<md-button class=\"btn1 vibrate filled touched bigfont\" ng-click=\"sendMsg()\">Send</md-button>\n\t\t\t<md-button class=\"btn1 vibrate filled touched bigfont\" ng-click=\"closeDialog()\">Cancel</md-button>\n        </div> \n    </div> \n</div> \n\n<style>\n\n/* The Dialog (background) */\n.dialog {\n    display: none; /* Hidden by default */\n    position: fixed; /* Stay in place */\n    z-index: 9999; /* Sit on top */\n    left: 0;\n    top: 0;\n    width: 100%; /* Full width */\n    height: 100%; /* Full height */\n    overflow: auto; /* Enable scroll if needed */\n    color : rgb(255,255,255);\n\tbackground-color: rgb(0,0,0); /* Fallback color */\n    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */\n    -webkit-transform: translateZ(0px);\n    -webkit-transform: translate3d(0,0,0);\n    -webkit-perspective: 1000;\n}\n\n.dialog_content {\n\tposition: absolute;\n    background-color: rgb(255,255,255);\n    left: 25%;\n    top: 30px;\n    border-radius: 3px;\n    padding: 0;\n    width: 50%;\n    box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19);\n    -webkit-animation-name: animatetop;\n    animation-name: animatetop;\n    animation-duration: 0.4s;\n}\n\n/* Dialog Header */\n.dialog_header {\n    padding: 2px 16px;\n    /*background-color: rgb(20,82,78);*/\n    background-color: rgb(255,255,255);\n    border-radius: 3px 3px 0 0;\n    color: black;\n}\n\n/* Dialog Body */\n.dialog_body {padding: 5px;}\n\n/* The Close Button */\n.close {\n    color: #fff;\n    float: right;\n    font-size: 28px;\n    font-weight: bold;\n    cursor: pointer;\n}\n\n.close:hover,\n.close:focus {\n    color: #1565C0;\n    text-decoration: none;\n    cursor: pointer;\n}\n\n\n.btn1 {\n  color : rgb(255,255,255);\n  background-color: rgb(20,82,78);\n  border-radius: 3px 3px 3px 3px;\n  font-size: 16px;\n}\n\n\n</style>\n\n<script>\nvar dialog;\n\n/* ==== */\n(function(scope) {\n    \n    scope.passcode = \"\";\n    scope.dsmid = \"\";\n    \n    scope.init = function() {\n        //scope.send({payload : \"init\"});\n        scope.dsmid = \"\";\n\t\tscope.passcode = \"\";\n        //Hide the md-panel\n        $('#pin_insert').parent().parent().css(\"display\", \"none\");\n        //This trick make it works on smartphones too :)\n        dialog = $('#pin_insert').detach();\n        //dialog.appendTo(document.body); // This leaves ghost numpads if pinpad is not opened!\n    }\n    \n    scope.showDialog = function() {\n        dialog.appendTo(document.body); // better to add the body only when the numpad is displayed (seams to be removed automatically)\n        dialog.css(\"display\", \"block\");\n    }\n    \n    scope.closeDialog = function(){\n        dialog.css(\"display\", \"none\");\n\t\tscope.send({payload : \"close\"});\n    }\n    \n    scope.sendMsg = function(){\n        dialog.css(\"display\", \"none\");\n\t\tscope.send({topic : scope.passcode, payload : scope.dsmid});\n    }\n     \n\n    scope.$watch('msg', function(data) {\n        if(data && data.topic){\n            switch(data.topic){\n               case \"show\":\n\t\t\t\t\t\tscope.passcode = \"\";\n\t\t\t\t\t\tscope.dsmid = data.payload;\n                        scope.showDialog();\n                break;\n                case \"close\": \n                    dialog.css(\"display\", \"none\");\n                break;\n            }\n        }\n    });\n})(scope);\n\n</script>\n","storeOutMessages":true,"fwdInMessages":false,"resendOnRefresh":false,"templateScope":"local","x":660,"y":3020,"wires":[["ea30e7f2.01d748","8f7ce0c2.3665"]]},{"id":"ea30e7f2.01d748","type":"debug","z":"6f5697aa.38c758","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":900,"y":3020,"wires":[]},{"id":"2557ceac.199a52","type":"unsafe-function","z":"6f5697aa.38c758","name":"LiveDataToSubscribe","func":"//Retreiving Libraries from the Settings.json file\nvar arrayElementIds = [];\nvar selectedElements = context.flow.get('selectedElements');\nfor(var element in selectedElements){\n    //var dsmElement = {payload:selectedElements[element]._Attribs.ID};\n    var dsmElement = selectedElements[element]._Attribs.ID;\n    //msg.topic = \"show\";\n    //msg.url = context.global.get('namespace') + \"/aas/manifest/liveData/request/property/\" + selectedElements[element]._Attribs.ID;\n    arrayElementIds.push(dsmElement);\n}\nif(arrayElementIds.length == 0){\n    var msg = {};\n    msg.payload = arrayElementIds;\n    return msg;\n}\nmsg.payload = arrayElementIds;\nmsg.topic = \"show\";\nreturn msg;","outputs":1,"noerr":0,"x":240,"y":3020,"wires":[["9af86816.6ca708","1349e7.e106a619","c20eb828.91c318"]]},{"id":"d6347232.d0453","type":"ui_toast","z":"6f5697aa.38c758","position":"dialog","displayTime":"3","highlight":"","outputs":1,"ok":"OK","cancel":"Cancel","topic":"","name":"","x":770,"y":2880,"wires":[[]]},{"id":"1349e7.e106a619","type":"switch","z":"6f5697aa.38c758","name":"","property":"payload","propertyType":"msg","rules":[{"t":"empty"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":280,"y":2920,"wires":[["2d90dfdf.ed0d7"],[]]},{"id":"c20eb828.91c318","type":"debug","z":"6f5697aa.38c758","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":424.8541259765625,"y":3102.3541259765625,"wires":[]},{"id":"2d90dfdf.ed0d7","type":"unsafe-function","z":"6f5697aa.38c758","name":"LiveDataToGet","func":"var msg = {};\nmsg.topic = \"Notification\";\nmsg.payload = \"Please select a Data Source Manifest\";\nreturn msg;","outputs":1,"noerr":0,"x":560,"y":2880,"wires":[["d6347232.d0453"]]},{"id":"8f7ce0c2.3665","type":"unsafe-function","z":"6f5697aa.38c758","name":"SetHttpRequest","func":"var outputMsgs = [];\nvar elementsToSubscribe = msg.payload;\nfor(var element in elementsToSubscribe){\n    //var msg = {payload:selectedElements[element]};\n    var elementToSubscribe = elementsToSubscribe[element];\n    var new_msg = {payload:elementToSubscribe, topic: msg.topic};\n    new_msg.url = context.global.get('namespace') + \"/aas/manifest/liveData/subscribe/property/\" + elementToSubscribe;\n    outputMsgs.push(new_msg);\n    \n}\n\nreturn [outputMsgs];","outputs":1,"noerr":0,"x":950,"y":3080,"wires":[["3065f44.d15bb0c","af095c47.38429"]]},{"id":"3065f44.d15bb0c","type":"debug","z":"6f5697aa.38c758","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1147.17626953125,"y":3079.341552734375,"wires":[]},{"id":"af095c47.38429","type":"http request","z":"6f5697aa.38c758","name":"","method":"PUT","ret":"txt","url":"","tls":"","x":1180,"y":3160,"wires":[["af65e007.26047"]]},{"id":"af65e007.26047","type":"debug","z":"6f5697aa.38c758","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1380,"y":3160,"wires":[]},{"id":"552d687d.2d6d5","type":"debug","z":"45d2dea1.5ee6","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1230,"y":160,"wires":[]},{"id":"d0dfaa12.52a998","type":"mqtt in","z":"f12812f1.b3e42","name":"","topic":"aas/8cf4d588-9a19-466c-9a5e-a54b86cce313","qos":"2","datatype":"auto","broker":"1d81f70b.03e8d1","x":400,"y":760,"wires":[["94302ba6.af22d8"]]},{"id":"6485d5ed.96b7bc","type":"function","z":"f12812f1.b3e42","name":"","func":"var msg1 = {};\nmsg1.headers = {};\nmsg1.method = \"PATCH\";\nmsg1.url = \"https://prophesy.share-platform.de/share/api/subcomponents/29/\";\nmsg1.headers[\"Authorization\"] = \"Token fe22f12084378d2a3d720bd5622722ce3c0ed2c1\";\nmsg1.headers[\"content-type\"] = \"application/json\";\n/*msg1.payload = {\n    \"componentId\": 26,\n    \"description\": \"6f33b29a-6824-422b-889d-bc07bdd5e8a1\",\n    \"subcomponentTypeId\": 3,\n    \"details\": [\n        {\n            \"keyType\": \"integer\",\n            \"keyName\": \"collectionTimestamp\",\n            \"keyId\": 15,\n            \"value\": 123\n        },\n        {\n            \"keyType\": \"integer\",\n            \"keyName\": \"acquisitionTimestamp\",\n            \"keyId\": 17,\n            \"value\": 456\n        },\n        {\n            \"keyType\": \"string\",\n            \"keyName\": \"Value\",\n            \"keyId\": 18,\n            \"value\": \"1234567890\"\n        }\n    ]\n};*/\n/*\n\"details\": [\n        {\n            \"id\": 7,\n            \"keyName\": \"Spare part\",\n            \"keyId\": 13,\n            \"value\": \"3489-325\"\n        },\n        {\n            \"id\": 6,\n            \"keyName\": \"No. of strokes since maint.\",\n            \"keyId\": 12,\n            \"value\": \"1345021\"\n        },\n        {\n            \"id\": 5,\n            \"keyName\": \"Total no. of strokes\",\n            \"keyId\": 11,\n            \"value\": \"3678543\"\n        },\n        {\n            \"id\": 4,\n            \"keyName\": \"RUL prediction\",\n            \"keyId\": 10,\n            \"value\": \"1421\"\n        },\n        {\n            \"id\": 3,\n            \"keyName\": \"Stock level\",\n            \"keyId\": 9,\n            \"value\": \"0\"\n        },\n        {\n            \"id\": 2,\n            \"keyName\": \"Stock delivery\",\n            \"keyId\": 8,\n            \"value\": \"2019-11-13\"\n        },\n        {\n            \"id\": 1,\n            \"keyName\": \"Stock location\",\n            \"keyId\": 7,\n            \"value\": \"MAIN-ZA-15\"\n        }\n    ],\n*/\n\nmsg1.payload = {\n    \"details\": [\n        {\n            \"id\": 7,\n            \"keyName\": \"Spare part\",\n            \"keyId\": 13,\n            \"value\": \"3489-325\"\n        },\n        {\n            \"id\": 6,\n            \"keyName\": \"No. of strokes since maint.\",\n            \"keyId\": 12,\n            \"value\": \"1345021\"\n        },\n        {\n            \"id\": 5,\n            \"keyName\": \"Total no. of strokes\",\n            \"keyId\": 11,\n            \"value\": \"3678543\"\n        },\n        {\n            \"id\": 4,\n            \"keyName\": \"RUL prediction\",\n            \"keyId\": 10,\n            \"value\": \"1421\"\n        },\n        {\n            \"id\": 3,\n            \"keyName\": \"Stock level\",\n            \"keyId\": 9,\n            \"value\": \"0\"\n        },\n        {\n            \"id\": 2,\n            \"keyName\": \"Stock delivery\",\n            \"keyId\": 8,\n            \"value\": \"2019-11-13\"\n        },\n        {\n            \"id\": 1,\n            \"keyName\": \"Stock location\",\n            \"keyId\": 7,\n            \"value\": \"MAIN-ZA-15\"\n        }\n    ]\n};\n\nreturn msg1;","outputs":1,"noerr":0,"x":515,"y":1440,"wires":[["8e9f3870.464138","6b98d6b.3807e28"]],"l":false},{"id":"1c1407bc.c52fa8","type":"inject","z":"f12812f1.b3e42","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":280,"y":1440,"wires":[["6485d5ed.96b7bc"]]},{"id":"8e9f3870.464138","type":"http request","z":"f12812f1.b3e42","name":"","method":"use","ret":"obj","paytoqs":false,"url":"","tls":"","persist":true,"proxy":"","authType":"","x":710,"y":1440,"wires":[["c616d5f7.f28708"]]},{"id":"c616d5f7.f28708","type":"debug","z":"f12812f1.b3e42","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":950,"y":1440,"wires":[]},{"id":"6b98d6b.3807e28","type":"debug","z":"f12812f1.b3e42","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":690,"y":1400,"wires":[]},{"id":"15c2ad8f.9cfd12","type":"function","z":"f12812f1.b3e42","name":"","func":"var msg1 = {};\nmsg1.headers = {};\nmsg1.method = \"PATCH\";\nmsg1.url = \"https://prophesy.share-platform.de/share/api/subcomponents/29/\";\nmsg1.headers[\"Authorization\"] = \"Token fe22f12084378d2a3d720bd5622722ce3c0ed2c1\";\nmsg1.headers[\"content-type\"] = \"application/json\";\nmsg1.payload = {};\nmsg1.payload[\"details\"] = msg.payload.details;\nmsg1.payload.details[3].value = \"2400\";\n\nreturn msg1;","outputs":1,"noerr":0,"x":1035,"y":760,"wires":[["7aca2bfd.300824","af8faa5e.0d74f8"]],"l":false},{"id":"4d8e6cc5.7561c4","type":"http request","z":"f12812f1.b3e42","name":"","method":"use","ret":"obj","paytoqs":false,"url":"https://prophesy.share-platform.de/share/api/subcomponents/29/","tls":"","persist":true,"proxy":"","authType":"","x":830,"y":760,"wires":[["15c2ad8f.9cfd12"]]},{"id":"cd86fc9c.207c","type":"inject","z":"f12812f1.b3e42","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":500,"y":840,"wires":[["94302ba6.af22d8"]]},{"id":"94302ba6.af22d8","type":"function","z":"f12812f1.b3e42","name":"","func":"msg.headers = {};\nmsg.headers[\"Authorization\"] = \"Token fe22f12084378d2a3d720bd5622722ce3c0ed2c1\";\nmsg.headers[\"content-type\"] = \"application/json\";\nmsg.method = \"GET\";\n\nreturn msg;","outputs":1,"noerr":0,"x":675,"y":760,"wires":[["4d8e6cc5.7561c4"]],"l":false},{"id":"7aca2bfd.300824","type":"debug","z":"f12812f1.b3e42","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1170,"y":680,"wires":[]},{"id":"af8faa5e.0d74f8","type":"http request","z":"f12812f1.b3e42","name":"","method":"use","ret":"obj","paytoqs":false,"url":"","tls":"","persist":true,"proxy":"","authType":"","x":1270,"y":760,"wires":[["ace138e0.eccd38"]]},{"id":"ace138e0.eccd38","type":"debug","z":"f12812f1.b3e42","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1490,"y":760,"wires":[]},{"id":"d12400f0.fc5a","type":"comment","z":"f12812f1.b3e42","name":"For Demostrating Integration","info":"","x":320,"y":700,"wires":[]}]